define("travsky/jcf/1.0.0/app",["backbone","marionette","./app_router","jquery","underscore","querystring","./util/SidebarManager","./view/menu_view","./template/menu.tpl","./view/container_view","./template/container.tpl","./view/auth/sidebar_view","./template/auth/sidebar.tpl","./view/server/sidebar_view","./collection/group_collection","./util/CommonUtil","./view/errorPage_view","./template/errorPage.tpl","./view/alert_view","./template/alert.tpl","bs-modal","./model/alert_model","./model/group_model","./template/server/sidebar.tpl","./view/deploy/sidebar_view","./template/deploy/sidebar.tpl","./view/service/sidebar_view","./template/service/sidebar.tpl","./view/service/serviceContent_view","./template/service/serviceContent.tpl","./view/dataSource/sidebar_view","./template/dataSource/sidebar.tpl","./view/dataSource/dataSourceContent_view","./template/dataSource/dataSourceContent.tpl","./view/context/sidebar_view","./template/context/sidebar.tpl","./view/context/contextContent_view","./template/context/contextContent.tpl","./view/log/sidebar_view","./template/log/sidebar.tpl","./view/log/logContent_view","./template/log/logContent.tpl","./view/dataSource/dataSourceTabbar_view","./template/dataSource/dataSourceTabbar.tpl","./view/dataSource/groupDataSourceTabbar_view","./util/DataSourceAuthCheckUtil","./template/dataSource/groupDataSourceTabbar.tpl","./view/dataSource/serverDataSourceTabbar_view","./template/dataSource/serverDataSourceTabbar.tpl","./view/context/serverContextTabbar_view","./util/ContextAuthCheckUtil","./template/context/serverContextTabbar.tpl","./util/SidebarUtil","./api/IndexApi","./model/navbar_model","./controller/IndexController","./view/navbar_view","./template/navbar.tpl","./controller/SidebarController","./view/sidebar_view","./template/sidebar.tpl","./view/foot_view","./template/foot.tpl","./view/tipIndex_view","./template/tipIndex.tpl","./view/app_view","./view/sysIndex_view","./template/sysIndex.tpl","./api/auth/UserMgrApi","./view/auth/userMgrLayout","./view/auth/userList_view","./template/auth/userList.tpl","./collection/auth/user_collection","./model/auth/user_model","./view/auth/userModify_view","./template/auth/userModify.tpl","./util/SpecialPatternInputCheckUtil2","./view/auth/userDetail_view","./template/auth/userDetail.tpl","./template/auth/userItem.tpl","./view/auth/userAdd_view","./template/auth/userAdd.tpl","./template/auth/userMgrLayout.tpl","./view/pagebar_view2","./template/pagebar2.tpl","./template/auth/userSearchItem.tpl","./view/auth/roleMgrLayout","./template/auth/roleItem.tpl","./template/auth/roleList.tpl","./template/auth/roleSearchItem.tpl","./view/auth/roleAdd_view","./template/auth/roleAdd.tpl","ztree-core","ztree-excheck","./view/auth/roleUpdate_view","./template/auth/roleUpdate.tpl","./model/confirm_model","./view/confirm_view","./template/confirm.tpl","./view/server/serverMgrLayout","./template/server/serverMgrLayout.tpl","./view/server/serverAdd_view","./template/server/serverAdd.tpl","./view/server/server","./view/server/AuthCheck4ServerUtil","./view/server/groupAdd_view","./view/server/checkCacheGroup","./view/server/global_view","bs-alert","./template/server/global.tpl","./template/server/groupAdd.tpl","./view/server/serverAddNext_view","./template/server/serverAddNext.tpl","./view/server/nodeControllerCfg_view","./template/server/nodeControllerCfg.tpl","./template/server/serverItem.tpl","./template/server/serverList.tpl","./view/server/domainParamCfg_view","./template/server/domainParamCfg.tpl","icheck","./view/server/serverMgr4GroupLayout","./view/server/groupServerConfig","./template/server/groupServerConfig.tpl","./view/server/serverInputCheck","./view/server/groupServerConfig_registry","./template/server/groupServerConfig_registry.tpl","./view/server/groupServerConfig_cache","./template/server/groupServerConfig_cache.tpl","./template/server/serverMgr4GroupLayout.tpl","./template/server/groupServerSearch.tpl","./model/pagebar_model","./view/listTip_view","./template/listTip.tpl","./template/server/groupServerItem.tpl","./template/server/groupServerList.tpl","./view/server/serverSysMemoryStatisticsLayout","./template/server/serverSysMemoryStatisticsItem.tpl","./template/server/serverSysMemoryStatisticsList.tpl","./template/server/serverSysMemoryStatisticsLayout.tpl","./template/server/serverSysMemoryStatisticsBaseInfo.tpl","./view/server/serverMgr4ServerLayout","./template/server/serverMgr4ServerLayout.tpl","./template/server/serverDetail.tpl","./view/server/serverUpdate_view","./template/server/serverUpdate.tpl","./view/waiting_view","./template/waiting.tpl","./view/deploy/deployMgrLayout","./template/deploy/deployMgrLayout.tpl","./view/deploy/deployList_view","./template/deploy/deployItem.tpl","./template/deploy/deployList.tpl","./view/deploy/AuthCheck4DeployUtil","./view/deploy/deployUploadLayout","./template/deploy/deployUploadLayout.tpl","./template/deploy/uploadItem.tpl","./template/deploy/uploadList.tpl","./model/listTip_model","./template/deploy/upload4AlreadyUploadItem.tpl","./template/deploy/upload4AlreadyUploadList.tpl","./view/deploy/groupDeployMgrLayout","./template/deploy/groupDeployMgrLayout.tpl","./view/deploy/groupDeployTabAppMgr","./template/deploy/groupDeployAppMgrItem.tpl","./template/deploy/groupDeployAppMgrList.tpl","./template/deploy/groupDeployTabAppMgr.tpl","./view/deploy/rollbackLayout","./template/deploy/rollbackLayout.tpl","./view/deploy/rollback_view","./template/deploy/rollbackView.tpl","./view/deploy/rollbackUploadLayout","./collection/deploy/groupApp_collection","./model/deploy/groupApp_model","./view/itemTip_view","./template/itemTip.tpl","./model/itemTip_model","./view/deploy/groupServerAppStautsLayout","./template/deploy/groupServerAppStautsLayout.tpl","./template/deploy/groupServerAppBaseInfo.tpl","./template/deploy/groupServerAppStatusItem.tpl","./template/deploy/groupServerAppStatusList.tpl","./view/deploy/groupAppConfigLayout","./template/deploy/serverAppConfigLayout.tpl","./template/deploy/groupAppCfgBaseInfo.tpl","./template/deploy/serverAppCfgCurPath.tpl","./template/deploy/serverAppCfgItem.tpl","./template/deploy/serverAppCfgList.tpl","ajaxfileupload","./view/deploy/groupDeployTabCreateNewDeploy","./template/deploy/groupDeployNewDeployItem.tpl","./template/deploy/groupDeployNewDeployList.tpl","./template/deploy/groupDeployTabCreateNewDeploy.tpl","./view/deploy/groupDeployAppLogCfgLayout","./template/deploy/groupDeployAppLogCfgLayout.tpl","./template/deploy/groupDeployAppLogCfgItem.tpl","./template/deploy/groupDeployAppLogCfgList.tpl","./template/deploy/groupDeployNewDeployServerSelectItem.tpl","./template/deploy/groupDeployNewDeployServerSelectList.tpl","./view/deploy/groupDeployTabServerDeployInfo","./template/deploy/groupDeployServerDeployItem.tpl","./template/deploy/groupDeployServerDeployList.tpl","./template/deploy/groupDeployTabServerDeployInfo.tpl","./view/deploy/serverAppStatusLayout","./template/deploy/serverBaseInfo.tpl","./template/deploy/serverAppStatusItem.tpl","./template/deploy/serverAppStatusList.tpl","./template/deploy/serverAppStatusLayout.tpl","./view/deploy/serverAppConfigLayout","./template/deploy/serverAppCfgBaseInfo.tpl","./view/service/serviceMgrLayout","./template/service/serviceMgrLayout.tpl","./view/service/serviceTab4ListLayout","./template/pageDataLayout.tpl","./template/service/serviceItem.tpl","./template/service/serviceList.tpl","./view/service/serviceTab4ConfigLayout","./template/service/serviceTab4ConfigLayout.tpl","./view/service/serviceConfig_view","./template/service/serviceConfigView.tpl","./view/service/AuthCheck4Service","./view/service/groupServiceMgrLayout","./template/service/groupServiceMgrLayout.tpl","./view/service/groupServiceTabServiceMgr","./template/service/groupServiceTabMgrLayout.tpl","./template/service/groupServiceItem.tpl","./template/service/groupServiceList.tpl","./view/service/serviceDetailLayout","./template/service/serviceDetailLayout.tpl","./template/service/serviceDetailBaseInfo.tpl","./template/service/serviceDetailItem.tpl","./template/service/serviceDetailList.tpl","./view/service/ServiceOperHelper","./view/service/monitorService_view","./template/service/monitoryService_view.tpl","./view/service/groupServiceCfg","./template/service/groupServiceCfg.tpl","./view/service/serviceGrayConfig_view","./template/service/serviceGrayConfig.tpl","./view/service/serviceDegradeConfig_view","./template/service/serviceDegradeConfig.tpl","./view/service/respGroupMoni_view","my97Date","./template/service/groupServiceChartOpt.tpl","./view/service/groupServiceChart_view","highcharts","./template/service/groupServiceChart_view.tpl","./view/service/serverServiceChart_view","./template/service/serverServiceChart_view.tpl","./view/service/serverServiceMgrLayout","./template/service/serverServiceMgrLayout.tpl","./template/service/serverServiceItem.tpl","./template/service/serverServiceList.tpl","./view/service/serverServiceCfg_view","./template/service/serverServiceCfg.tpl","./view/service/respMoni_view","./template/service/serviceChartOpt.tpl","./model/service/service_degrade_config_model","./model/service/service_gray_config_model","./collection/dataSource/dataSource_collection","./model/dataSource/dataSource_model","./view/dataSource/dataSourceList_view","./template/dataSource/dataSourceList.tpl","./view/dataSource/dataSourceItem_view","./template/dataSource/dataSourceItem.tpl","./collection/dataSource/group_dataSource_collection","./model/dataSource/group_dataSource_model","./view/dataSource/groupDataSourceList_view","./template/dataSource/groupDataSourceList.tpl","./view/dataSource/groupDataSourceItem_view","./template/dataSource/groupDataSourceItem.tpl","./view/dataSource/dataSourceWait_view","./template/dataSource/dataSourceWait.tpl","./view/dataSource/tip_view","./template/dataSource/tip.tpl","./view/dataSource/global_view","./template/dataSource/global.tpl","./view/dataSource/groupDataSourceListHead_view","./template/dataSource/groupDataSourceListHead.tpl","./view/dataSource/groupDeployDataSource_view","./util/DataSourceUtil","./util/SpecialPatternInputCheckUtil","./model/dataSource/group_dataSource_deploy_model","./collection/dataSource/group_dataSource_server_collection","./model/dataSource/group_dataSource_server_model","./template/dataSource/groupDeployDataSource.tpl","./view/dataSource/groupDataSourceServerList_view","./template/dataSource/groupDataSourceServerList.tpl","./view/dataSource/groupDataSourceServerItem_view","./template/dataSource/groupDataSourceServerItem.tpl","./view/dataSource/groupDataSourceConfig_view","./template/dataSource/groupDataSourceConfig.tpl","./view/dataSource/groupDataSourceConfigHead_view","./collection/dataSource/group_dataSource_name_collection","./model/dataSource/group_dataSource_name_model","./template/dataSource/groupDataSourceConfigHead.tpl","./model/dataSource/group_dataSource_config_model","./view/dataSource/serverDataSourceList_view","./collection/dataSource/server_dataSource_collection","./model/dataSource/server_dataSource_model","./template/dataSource/serverDataSourceList.tpl","./view/dataSource/serverDataSourceItem_view","./model/dataSource/server_dataSource_config_model","./view/dataSource/serverDataSourceConfig_view","./template/dataSource/serverDataSourceConfig.tpl","./model/dataSource/server_dataSource_monitor_model","./view/dataSource/serverDataSourceMonitor_view","./template/dataSource/serverDataSourceMonitor.tpl","./template/dataSource/serverDataSourceItem.tpl","./view/dataSource/serverDeployDataSource_view","./model/dataSource/server_dataSource_deploy_model","./template/dataSource/serverDeployDataSource.tpl","./view/dataSource/serverTestDataSourceList_view","./template/dataSource/serverTestDataSourceList.tpl","./view/dataSource/serverTestDataSourceItem_view","./template/dataSource/serverTestDataSourceItem.tpl","./view/context/highcharts","exporting","./template/context/highchart.tpl","./model/context/server_context_model","./view/context/serverContextInfo_view","./view/context/tip_view","./template/context/tip.tpl","./view/context/global_view","./template/context/global.tpl","./template/context/serverContextInfo.tpl","./view/context/serverContextConfig_view","./util/ContextUtil","./template/context/serverContextConfig.tpl","./collection/log/log_collection","./model/log/log_model","./view/log/logList_view","./template/log/logList.tpl","./util/LogAuthCheckUtil","./view/log/logItem_view","./template/log/logItem.tpl","./view/log/global_view","./template/log/global.tpl","./view/log/tip_view","./view/log/logConfig_view","./util/LogUtil","./template/log/logConfig.tpl","./view/log/logConfigHead_view","./template/log/logConfigHead.tpl","./collection/log/log_app_name_collection","./model/log/log_app_name_model","./model/log/log_config_model","./view/AuthCheck4Menu"],function(a){var b=a("backbone"),c=a("marionette"),d=a("./app_router"),e=a("./util/SidebarUtil"),f=a("./api/IndexApi"),g=jQuery=a("jquery"),h=a("./view/app_view"),i=a("./util/CommonUtil");a("querystring"),window.jcfManager=new c.Application,jcfManager.addRegions({menuRegion:"#menu",navbarRegion:"#indexNavbarRegion",sidebarRegion:"#sidebar",contentRegion:"#indexContantRegion",footRegion:"#indexFootRegsion",dialogRegion:"#dialogRegion"}),jcfManager.getCurrentFragment=function(){return b.history.fragment},jcfManager.reqres.setHandler("login:user",function(){return f.getLoginUser()}),jcfManager.reqres.setHandler("index:sidebarCollection",function(a){return f.getGroupCollection(a)}),jcfManager.addInitializer(function(){var c="/"+i.getAppName()+"/getSpecialAuthStrMap.action",d=i.dealSYNCHAjaxRequestWithoutParam(c);g.when(d).done(function(a){var c=new b.Model(a.authMap);jcfManager.authModel=c,jcfManager.loginUserName=a.loginUserName,jcfManager.loginUserRole=a.loginUserRole,jcfManager.loginID=a.loginID,jcfManager.defaultPageSize=a.defaultPageSize});var e=a("./view/AuthCheck4Menu"),f={key:"authMgr",value:"权限管理"},h={key:"serverMgr",value:"服务器管理"},j={key:"deployMgr",value:"部署管理"},k={key:"serviceMgr",value:"服务管理"},l={key:"dataSrcMgr",value:"数据源管理"},m={key:"contextMgr",value:"上下文管理"},n={key:"logMgr",value:"日志管理"},o=e.getServerFlag(),p=e.getDeployFlag(),q=e.getServiceFlag(),r=e.getDatasourceFlag(),s=e.getMemcacheFlag(),t=e.getLogFlag(),u=jcfManager.loginUserRole,v=[];"系统管理员"==u&&v.push(f),"true"==o&&v.push(h),"true"==p&&v.push(j),"true"==q&&v.push(k),"true"==r&&v.push(l),"true"==s&&v.push(m),"true"==t&&v.push(n),jcfManager.menus=v}),jcfManager.addInitializer(function(){var c=a("./view/menu_view");this.appName=i.getAppName(),e.getModuleName(),f.showNavbar();var d=new b.Model;d.set("current",""),d.set("menus",jcfManager.menus);var g=new c({model:d});jcfManager.menuRegion.show(g),jcfManagement.view.menu=g}),jcfManager.addInitializer(function(){window.appView=new h,window.appRouter=new d,b.history.start();var a="sysIndex";jcfManager.menus.length>0&&(a=jcfManager.menus[0].key),""===b.history.fragment&&b.history.navigate(a,{trigger:!0})}),jcfManager.start()}),define("travsky/jcf/1.0.0/app_router",["jquery","underscore","backbone","querystring","travsky/jcf/1.0.0/util/SidebarManager","travsky/jcf/1.0.0/view/menu_view","marionette","travsky/jcf/1.0.0/view/container_view","travsky/jcf/1.0.0/view/auth/sidebar_view","travsky/jcf/1.0.0/view/server/sidebar_view","travsky/jcf/1.0.0/collection/group_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/group_model","travsky/jcf/1.0.0/view/deploy/sidebar_view","travsky/jcf/1.0.0/view/service/sidebar_view","travsky/jcf/1.0.0/view/service/serviceContent_view","travsky/jcf/1.0.0/view/dataSource/sidebar_view","travsky/jcf/1.0.0/view/dataSource/dataSourceContent_view","travsky/jcf/1.0.0/view/context/sidebar_view","travsky/jcf/1.0.0/view/context/contextContent_view","travsky/jcf/1.0.0/view/log/sidebar_view","travsky/jcf/1.0.0/view/log/logContent_view","travsky/jcf/1.0.0/view/dataSource/dataSourceTabbar_view","travsky/jcf/1.0.0/view/dataSource/groupDataSourceTabbar_view","travsky/jcf/1.0.0/util/DataSourceAuthCheckUtil","travsky/jcf/1.0.0/view/dataSource/serverDataSourceTabbar_view","travsky/jcf/1.0.0/view/context/serverContextTabbar_view","travsky/jcf/1.0.0/util/ContextAuthCheckUtil"],function(a){window.jcfManagement={model:{},view:{},collection:{},temp:{},service_name:"",current_sidebar:null,tipInfoRegion:null};var b=jQuery=a("jquery");a("underscore");var c=a("backbone"),d=a("querystring"),e=a("travsky/jcf/1.0.0/util/SidebarManager");a("travsky/jcf/1.0.0/view/menu_view");var f=a("travsky/jcf/1.0.0/view/container_view"),g=a("travsky/jcf/1.0.0/view/auth/sidebar_view"),h=a("travsky/jcf/1.0.0/view/server/sidebar_view"),i=a("travsky/jcf/1.0.0/view/deploy/sidebar_view"),j=a("travsky/jcf/1.0.0/view/service/sidebar_view");a("travsky/jcf/1.0.0/view/service/serviceContent_view");var k=a("travsky/jcf/1.0.0/view/dataSource/sidebar_view"),l=a("travsky/jcf/1.0.0/view/dataSource/dataSourceContent_view"),m=a("travsky/jcf/1.0.0/view/context/sidebar_view"),n=a("travsky/jcf/1.0.0/view/context/contextContent_view"),o=a("travsky/jcf/1.0.0/view/log/sidebar_view"),p=a("travsky/jcf/1.0.0/view/log/logContent_view"),q=c.Router.extend({routes:{sysIndex:"showSysIndex",authMgr:"authMgr","authMgr/userMgr":"authMgrUser","authMgr/userMgr/param/:params":"authMgrUser","authMgr/userMgr/add":"addUser","authMgr/userMgr/detail/param/:params":"detailUser","authMgr/userMgr/modify/param/:params":"modifyUser","authMgr/roleMgr":"authMgrRole","authMgr/roleMgr/param/:params":"authMgrRole","authMgr/roleMgr/add":"addRole","authMgr/roleMgr/update/param/:params":"updateRole",serverMgr:"serverMgr","serverMgr/param/:params":"serverMgr","serverMgr/group/param/:params":"serverMgrGroup","serverMgr/server/param/:params":"serverMgrServer","serverMgr/server/memoryInfo/param/:params":"serverMemoryInfo",deployMgr:"deployMgr","deployMgr/param/:params":"deployMgr","deployMgr/group/param/:params":"deployMgrGroup","deployMgr/group/appConfig/param/:params":"deployMgrGroupAppConfig","deployMgr/group/appRollback/param/:params":"deployMgrA4ppRollback","deployMgr/group/appDeploy/param/:params":"viewAppStatus4GroupServer","deployMgr/group/appLogCfg/param/:params":"appLogCfg","deployMgr/server/param/:params":"deployMgrServer","deployMgr/server/appConfig/param/:params":"deployMgrServerAppConfig",serviceMgr:"serviceMgr","serviceMgr/param/:params":"serviceMgr","serviceMgr/group/param/:params":"serviceMgrGroup","serviceMgr/group/detail/param/:params":"groupServiceDetail","serviceMgr/group/MoniOption/param/:params":"groupMoniOption","serviceMgr/server/param/:params":"serviceMgrServer","serviceMgr/server/monitor/param/:params":"serviceMonitor","serviceMgr/server/cfg/param/:params":"serverServiceCfg","serviceMgr/server/MoniOption/param/:params":"serverMoniOption","serviceMgr/service/degradeConfig/param/:params":"serviceDegradeConfig","serviceMgr/service/grayConfig/param/:params":"serviceGrayConfig",dataSrcMgr:"domainDataSource","dataSrcMgr/group/param/:params":"groupDataSource","dataSrcMgr/server/param/:params":"serverDataSource",contextMgr:"contextMgr","contextMgr/group/param/:params":"contextMgrGroup","contextMgr/server/param/:params":"contextMgrServer",logMgr:"logMgr","logMgr/group/param/:params":"logMgrGroup"},initialize:function(){},renderAuth:function(){jcfManagement.view.auth_sidebar=jcfManagement.view.auth_sidebar||new g({el:"#sidebar"}),e.render(jcfManagement.view.auth_sidebar)},renderServer:function(){jcfManagement.view.server_sidebar=new h({el:"#sidebar"}),e.render(jcfManagement.view.server_sidebar)},renderDeploy:function(){jcfManagement.view.deploy_sidebar=new i({el:"#sidebar"}),e.render(jcfManagement.view.deploy_sidebar)},renderService:function(){jcfManagement.view.service_sidebar=new j({el:"#sidebar"}),e.render(jcfManagement.view.service_sidebar)},renderDataSource:function(){jcfManagement.view.containerView=new f,jcfManagement.view.dataSource_sidebar=new k({el:"#sidebar"}),jcfManagement.view.dataSource_content=new l,e.render(jcfManagement.view.dataSource_sidebar),jcfManagement.view.dataSource_content.render()},renderContext:function(){jcfManagement.view.containerView=new f,jcfManagement.view.context_sidebar=new m({el:"#sidebar"}),jcfManagement.view.context_content=new n,e.render(jcfManagement.view.context_sidebar),jcfManagement.view.context_content.render()},renderLog:function(){jcfManagement.view.containerView=new f,jcfManagement.view.log_sidebar=new o({el:"#sidebar"}),jcfManagement.view.log_content=new p,e.render(jcfManagement.view.log_sidebar),jcfManagement.view.log_content.render()},showSysIndex:function(){b("#sidebar").html(""),appView.showSysIndex()},authMgr:function(){var a={};this.authMgrUser(a)},authMgrUser:function(a){this.renderAuth(),jcfManagement.view.menu.select("authMgr"),jcfManagement.view.auth_sidebar.select("userMgr"),appView.authMgrUser(a)},addUser:function(a){this.renderAuth(),jcfManagement.view.menu.select("authMgr"),jcfManagement.view.auth_sidebar.select("userMgr"),appView.addUser(a)},detailUser:function(a){this.renderAuth(),jcfManagement.view.menu.select("authMgr"),jcfManagement.view.auth_sidebar.select("userMgr"),appView.detailUser(a)},modifyUser:function(a){this.renderAuth(),jcfManagement.view.menu.select("authMgr"),jcfManagement.view.auth_sidebar.select("userMgr"),appView.modifyUser(a)},authMgrRole:function(a){this.renderAuth(),jcfManagement.view.menu.select("authMgr"),jcfManagement.view.auth_sidebar.select("roleMgr"),appView.authMgrRole(a)},addRole:function(){this.renderAuth(),jcfManagement.view.menu.select("authMgr"),jcfManagement.view.auth_sidebar.select("roleMgr"),appView.addRole()},updateRole:function(a){this.renderAuth(),jcfManagement.view.menu.select("authMgr"),jcfManagement.view.auth_sidebar.select("roleMgr"),appView.updateRole(a)},serverMgr:function(a){this.renderServer(),jcfManagement.view.menu.select("serverMgr"),jcfManagement.view.server_sidebar.select(""),appView.showServerIndex(a)},serverMgrGroup:function(a){var b=d.parse(a);this.renderServer(),jcfManagement.view.menu.select("serverMgr"),jcfManagement.view.server_sidebar.select(b.groupId),appView.serverMgrGroup(a)},serverMgrServer:function(a){var b=d.parse(a);this.renderServer(),jcfManagement.view.menu.select("serverMgr"),jcfManagement.view.server_sidebar.select(b.serverId),appView.serverMgrServer(a)},serverMemoryInfo:function(a){var b=d.parse(a);this.renderServer(),jcfManagement.view.menu.select("serverMgr"),jcfManagement.view.server_sidebar.select(b.serverId),appView.serverMemoryInfo(a)},deployMgr:function(a){this.renderDeploy(),jcfManagement.view.menu.select("deployMgr"),jcfManagement.view.deploy_sidebar.select(""),appView.showDeployIndex(a)},deployMgrGroup:function(a){var b=d.parse(a);this.renderDeploy(),jcfManagement.view.menu.select("deployMgr"),jcfManagement.view.deploy_sidebar.select(b.groupId),appView.deployMgrGroup(a)},viewAppStatus4GroupServer:function(a){var b=d.parse(a);this.renderDeploy(),jcfManagement.view.menu.select("deployMgr"),jcfManagement.view.deploy_sidebar.select(b.groupId),appView.viewAppStatus4GroupServer(a)},deployMgrA4ppRollback:function(a){var b=d.parse(a);this.renderDeploy(),jcfManagement.view.menu.select("deployMgr"),jcfManagement.view.deploy_sidebar.select(b.groupId),appView.deployMgrA4ppRollback(a)},appLogCfg:function(a){var b=d.parse(a);this.renderDeploy(),jcfManagement.view.menu.select("deployMgr"),jcfManagement.view.deploy_sidebar.select(b.groupId),appView.appLogCfg(a)},deployMgrServer:function(a){var b=d.parse(a);this.renderDeploy(),jcfManagement.view.menu.select("deployMgr"),jcfManagement.view.deploy_sidebar.select(b.serverId),appView.deployMgrServer(a)},deployMgrGroupAppConfig:function(a){var b=d.parse(a);this.renderDeploy(),jcfManagement.view.menu.select("deployMgr"),jcfManagement.view.deploy_sidebar.select(b.groupId),appView.deployMgrGroupAppConfig(a)},deployMgrServerAppConfig:function(a){var b=d.parse(a);this.renderDeploy(),jcfManagement.view.menu.select("deployMgr"),jcfManagement.view.deploy_sidebar.select(b.serverId),appView.deployMgrServerAppConfig(a)},serviceMgr:function(a){this.renderService(),jcfManagement.view.menu.select("serviceMgr"),jcfManagement.view.service_sidebar.select(""),appView.showServiceIndex(a)},serviceMgrGroup:function(a){var b=d.parse(a);this.renderService(),jcfManagement.view.menu.select("serviceMgr"),jcfManagement.view.service_sidebar.select(b.groupId),appView.serviceMgrGroup(a)},groupServiceDetail:function(a){var b=d.parse(a);this.renderService(),jcfManagement.view.menu.select("serviceMgr"),jcfManagement.view.service_sidebar.select(b.groupId),appView.groupServiceDetail(a)},groupMoniOption:function(a){var b=d.parse(a);this.renderService(),jcfManagement.view.menu.select("serviceMgr"),jcfManagement.view.service_sidebar.select(b.groupId),appView.groupMoniOption(a)},serverMoniOption:function(a){var b=d.parse(a);this.renderService(),jcfManagement.view.menu.select("serviceMgr"),jcfManagement.view.service_sidebar.select(b.groupId),appView.serverMoniOption(a)},serviceMgrServer:function(a){var b=d.parse(a);this.renderService(),jcfManagement.view.menu.select("serviceMgr"),jcfManagement.view.service_sidebar.select(b.serverId),appView.serviceMgrServer(a)},serverServiceCfg:function(a){var b=d.parse(a);this.renderService(),jcfManagement.view.menu.select("serviceMgr"),jcfManagement.view.service_sidebar.select(b.serverId),appView.serverServiceCfg(a)},serviceMonitor:function(a){var b=d.parse(a);this.renderService(),jcfManagement.view.menu.select("serviceMgr"),jcfManagement.view.service_sidebar.select(b.serverId),appView.serviceMonitor(a)},serviceDegradeConfig:function(a){var b=d.parse(a);this.renderService(),jcfManagement.view.menu.select("serviceMgr"),jcfManagement.view.service_sidebar.select(b.groupId),appView.serviceDegradeConfig(a)},serviceGrayConfig:function(a){var b=d.parse(a);this.renderService(),jcfManagement.view.menu.select("serviceMgr"),jcfManagement.view.service_sidebar.select(b.groupId),appView.serviceGrayConfig(a)},domainDataSource:function(){this.renderDataSource(),jcfManagement.view.menu.select("dataSrcMgr"),jcfManagement.view.dataSource_sidebar.select("");var b=a("travsky/jcf/1.0.0/view/dataSource/dataSourceTabbar_view"),c=new b;c.render(),appView.domainDataSource()},groupDataSource:function(b){var c=d.parse(b);this.renderDataSource(),jcfManagement.view.menu.select("dataSrcMgr"),jcfManagement.view.dataSource_sidebar.select(c.groupId);var e=a("travsky/jcf/1.0.0/view/dataSource/groupDataSourceTabbar_view"),f=new e({queryString:c});f.render(),appView.groupDataSource(b)},serverDataSource:function(b){var c=d.parse(b);this.renderDataSource(),jcfManagement.view.menu.select("dataSrcMgr"),jcfManagement.view.dataSource_sidebar.select(c.serverId);var e=a("travsky/jcf/1.0.0/view/dataSource/serverDataSourceTabbar_view"),f=new e({queryString:c});f.render(),appView.serverDataSource(b)},contextMgr:function(){this.renderContext(),jcfManagement.view.menu.select("contextMgr"),jcfManagement.view.context_sidebar.select(""),appView.showContextIndex()},contextMgrGroup:function(a){var b=d.parse(a);this.renderContext(),jcfManagement.view.menu.select("contextMgr"),jcfManagement.view.context_sidebar.select(b.groupId),appView.contextMgrGroup(a)},contextMgrServer:function(b){var c=d.parse(b);this.renderContext(),jcfManagement.view.menu.select("contextMgr"),jcfManagement.view.context_sidebar.select(c.serverId);var e=a("travsky/jcf/1.0.0/view/context/serverContextTabbar_view"),f=new e({queryString:c});f.render(),appView.contextMgrServer(b)},logMgr:function(){this.renderLog(),jcfManagement.view.menu.select("logMgr"),jcfManagement.view.log_sidebar.select(""),appView.showLogIndex()},logMgrGroup:function(a){var b=d.parse(a);this.renderLog(),jcfManagement.view.menu.select("logMgr"),jcfManagement.view.log_sidebar.select(b.groupId),appView.logMgrGroup(a)}});return q}),define("travsky/jcf/1.0.0/util/SidebarManager",[],function(a,b){b.render=function(a){window.jcfManagement.current_sidebar!==a&&(window.jcfManagement.current_sidebar=a,a.render())}}),define("travsky/jcf/1.0.0/view/menu_view",["jquery","backbone","underscore","marionette"],function(a){jQuery=a("jquery"),a("backbone");var b=a("underscore"),c=a("marionette"),d=a("travsky/jcf/1.0.0/template/menu.tpl"),e=c.ItemView.extend({template:b.template(d),initialize:function(){this.listenTo(this.model,"change",this.render)},select:function(a){this.model.set("current",a)}});return e}),define("travsky/jcf/1.0.0/template/menu.tpl",[],'<%for(var i = 0 ; i < menus.length; i ++){%>\n	<div>\n		<a href="#<%=menus[i].key%>" class="menu<%=i+1%> <%if(menus[i].key==current){%>select<%}%>"><%=menus[i].value%></a>\n	</div>\n<%}%>\n\n'),define("travsky/jcf/1.0.0/view/container_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/container.tpl"),e=b.View.extend({el:"#indexContantRegion",template:c.template(d),initialize:function(){this.render()},render:function(){return this.$el.html(this.template()),this}});return e}),define("travsky/jcf/1.0.0/template/container.tpl",[],'<div id="global" class="message">\n\n</div>\n<div id="tabbar" class="tabbar">\n	\n</div>\n<div id="content">\n	\n</div>\n<div id="tip">\n	\n</div>'),define("travsky/jcf/1.0.0/view/auth/sidebar_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/auth/sidebar.tpl"),e=b.View.extend({template:c.template(d),events:{},initialize:function(){this.groups=this.getGroups(),this.current=""},render:function(){return this.$el.html(this.template({groups:this.groups,current:this.current})),this},select:function(a){this.current=a,this.$el.find("li").removeClass("select"),""!=a&&this.$el.find("#"+a).addClass("select")},getGroups:function(){return[{groupId:"userMgr",groupName:"用户管理"},{groupId:"roleMgr",groupName:"角色管理"}]}});return e}),define("travsky/jcf/1.0.0/template/auth/sidebar.tpl",[],' <% for(var i=0; i < groups.length; i++){ %>\n 	<ul class="nav nav-list">\n 		<li id="<%=groups[i].groupId%>" class="group <%if(groups[i].groupId == current){%>select<%}%>">\n 			<% if(groups[i].servers != undefined&&groups[i].servers .length>0){%>\n	  			<span class="open_or_closeGroup groupOpen"></span>\n 			<%}%>\n		 		<a href="#authMgr/<%=groups[i].groupId%>" class="group"><%=groups[i].groupName%></a>\n	  	</li>\n	    <% if(groups[i].servers != undefined){ %>\n	    	 <% for(var j=0; j < groups[i].servers.length; j++){ %>\n	    	 	<li id="<%=groups[i].servers[j].id%>" class="server <%if(groups[i].servers[j].id == current){%>select<%}%>">\n	    	 		<a href="#authMgr/<%=groups[i].servers[j].id%>" class="server"><%=groups[i].servers[j].name%></a>\n	    	 	</li>\n	    	 <%}%>\n	    <%}%>\n    </ul>\n <%}%>\n'),define("travsky/jcf/1.0.0/view/server/sidebar_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/collection/group_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/group_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore");a("querystring");var d=a("travsky/jcf/1.0.0/collection/group_collection"),e=a("travsky/jcf/1.0.0/template/server/sidebar.tpl"),f=b.View.extend({template:c.template(e),events:{"click ul li.group span.open_or_closeGroup":"toggleGroup"},initialize:function(a){this.options=a||{},this.groups=this.getGroups(),this.current="",this.groups.bind("reset",this.render,this)},render:function(){return this.$el.html(this.template({groups:this.groups.toJSON(),current:this.current})),this},select:function(a){this.current=a,this.$el.find("li").removeClass("select"),""!=a&&this.$el.find("#"+a).addClass("select")},getGroups:function(){var a=new d;return a.fetch({reset:!0,data:{selectItem:"serverMgr"}}),a},toggleGroup:function(a){this.$el.find(a.target).toggleClass("groupOpen"),this.$el.find(a.target).toggleClass("groupClose"),this.$el.find(a.target).parent().siblings().toggleClass("hide")
},refresh:function(){this.groups.fetch({reset:!0,data:{selectItem:"serverMgr"}})}});return f}),define("travsky/jcf/1.0.0/collection/group_collection",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/group_model"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=a("travsky/jcf/1.0.0/util/CommonUtil"),d=c.getAppName(),e=a("travsky/jcf/1.0.0/model/group_model"),f=b.Collection.extend({model:e,url:"/"+d+"/loadAllNode.action",initialize:function(){},parse:function(a){return a}});return f}),define("travsky/jcf/1.0.0/util/CommonUtil",["travsky/jcf/1.0.0/view/errorPage_view","jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model"],function(require,exports,module){var ErrorPageView=require("travsky/jcf/1.0.0/view/errorPage_view"),AlertView=require("travsky/jcf/1.0.0/view/alert_view"),util={};util.getAppName=function(){return"jcf"},util.showErrPage=function(){jcfManager.contentRegion.show(new ErrorPageView)},util.alertEsg=function(a,b){null==a&&(a="警告信息");var c=new AlertView({msg:a});null!=b&&c.model.set("flag",b+""),jcfManager.dialogRegion.show(c)},util.checkStrIsIp=function(a){var b=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;return a.match(b)?!0:!1},util.getFefreshPageNum=function(){return 50},util.getAppName2=function(){return window.location.pathname.replace(/\//g,"")},util.appendURLWithDate=function(a){var b=(new Date).valueOf();return a=a.indexOf("?")>=0?a+"&t="+b:a+"?t="+b},util.getLoginHref=function(){var a="/"+jcfManager.appName+"/login.html";return a},util.checkFileSize=function(a,b){var c=!1,d=/msie/i.test(navigator.userAgent)&&!window.opera,e=0;if(d&&!a.files){var f=a.value,g=new ActiveXObject("Scripting.FileSystemObject"),h=g.GetFile(f);e=h.Size}else e=a.files[0].size;var i=e/1024,j=1e3*b;return i>j?(c=!1,alert("附件不能大于"+b+"M")):c=!0,c},util.getFormInputObj=function(formIds){for(var obj={},i=0;i<formIds.length;i++){var curId=formIds[i],val=$.trim($("#"+curId).val()),evalStr="obj."+curId+"='"+val+"' ;";eval(evalStr)}return obj},util.dealAjaxRequestWithoutParam=function(a){var b=util.getLoginHref(),c=$.Deferred(),d={url:a,type:"POST",dataType:"json",timeout:1e5,error:function(){window.location=b},success:function(a){c.resolve(a)}};return $.ajax(d),c.promise()},util.dealAjaxRequest4SimpleParam=function(a,b){var c=util.getLoginHref(),d=$.Deferred(),e={url:a,type:"POST",timeout:1e5,data:b,dataType:"json",error:function(){window.location=c},success:function(a){d.resolve(a)}};return $.ajax(e),d.promise()},util.dealAjaxRequest4JSObj=function(a,b){var c=util.getLoginHref(),d=$.Deferred(),e={contentType:"application/json",url:a,type:"POST",timeout:1e5,data:JSON.stringify(b),dataType:"json",error:function(){window.location=c},success:function(a){d.resolve(a)}};return $.ajax(e),d.promise()},util.dealSYNCHAjaxRequestWithoutParam=function(a){var b=util.getLoginHref(),c=$.Deferred(),d={url:a,async:!1,type:"POST",dataType:"json",timeout:1e5,error:function(){window.location=b},success:function(a){c.resolve(a)}};return $.ajax(d),c.promise()},util.dealSYNCHAjaxRequest4SimpleParam=function(a,b){var c=util.getLoginHref(),d=$.Deferred(),e={url:a,async:!1,type:"POST",timeout:1e5,data:b,dataType:"json",error:function(){window.location=c},success:function(a){d.resolve(a)}};return $.ajax(e),d.promise()},util.dealSYNCHAjaxRequest4JSObj=function(a,b){var c=util.getLoginHref(),d=$.Deferred(),e={contentType:"application/json",url:a,timeout:1e5,async:!1,type:"POST",data:JSON.stringify(b),dataType:"json",error:function(){window.location=c},success:function(a){d.resolve(a)}};return $.ajax(e),d.promise()},module.exports=util}),define("travsky/jcf/1.0.0/view/errorPage_view",["jquery","backbone","underscore","marionette"],function(a){jQuery=a("jquery"),a("backbone");var b=a("underscore"),c=a("marionette"),d=a("travsky/jcf/1.0.0/template/errorPage.tpl"),e=c.ItemView.extend({tagName:"div",className:"row",template:b.template(d)});return e}),define("travsky/jcf/1.0.0/template/errorPage.tpl",[],'<div class="col-sm-12">\n    <div class="error-container">\n        <div class="well">\n            <h1 class="grey lighter smaller"> <span class="blue bigger-125"><i class="icon-random"></i>500</span>操作错误页面</h1>\n            <hr>\n            <h3 class="lighter smaller">\n                But we are working<i class="icon-wrench icon-animated-wrench bigger-125"></i>on it!\n            </h3>\n            <div class="space"></div>\n            <div>\n                <h4 class="lighter smaller">Meanwhile, try one of the following:</h4>\n                <ul class="list-unstyled spaced inline bigger-110 margin-15">\n                    <li><i class="icon-hand-right blue"></i>Read the faq </li>\n                    <li><i class="icon-hand-right blue"></i>Give us more info on how this specific error occurred!</li>\n                </ul>\n            </div>\n            <div class="space"></div>\n        </div>\n    </div>\n</div>\n'),define("travsky/jcf/1.0.0/view/alert_view",["jquery","backbone","underscore","marionette","bs-modal","travsky/jcf/1.0.0/model/alert_model"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/alert.tpl");a("bs-modal")(b);var f=a("travsky/jcf/1.0.0/model/alert_model"),g=d.ItemView.extend({initialize:function(a){var b="";null!=a&&null!=a.msg&&(b=a.msg),this.model=this.model||new f,b.length>0&&this.model.set("msg",b)},template:c.template(e),onShow:function(){var a=b("#ycj-alert");a.modal({backdrop:"static"}),a.modal("show")}});return g}),define("travsky/jcf/1.0.0/template/alert.tpl",[],' <div id="ycj-alert" class="modal" >\n    <div class="modal-dialog modal-sm">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>\n          <h5 class="modal-title"><i class="fa fa-exclamation-circle"></i>提示:</h5>\n        </div>\n        <div class="modal-body small" style="text-align:center">\n          <p><span  <%if(flag=="true"){%>class = "text-success"<%}else if(flag=="false"){%>class = "text-danger"<%}else{%>class = "text-info"<%}%>  ><%=msg%></span></p>\n        </div>\n        <div class="modal-footer" >\n          <button type="button" class="btn btn-primary confirmOK" data-dismiss="modal">确认</button>\n        </div>\n      </div>\n    </div>\n</div>'),define("travsky/jcf/1.0.0/model/alert_model",["jquery","backbone","underscore","marionette"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore"),a("marionette");var c=b.Model.extend({defaults:{flag:"false",msg:"提示内容"}});return c}),define("travsky/jcf/1.0.0/model/group_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({defaults:function(){return{groupName:"",groupID:"",servers:[]}},urlRoot:""});return c}),define("travsky/jcf/1.0.0/template/server/sidebar.tpl",[],' <% for(var i=0; i < groups.length; i++){ %>\n 	<ul class="nav nav-list" >\n 		<li id="<%=groups[i].groupId%>" class="group <%if(groups[i].groupId == current){%>select<%}%>">\n 			<% if(groups[i].servers != undefined&&groups[i].servers .length>0){%>\n	  			<span class="open_or_closeGroup groupOpen"></span>\n 			<% } %>\n		 		<a href="#serverMgr/group/param/groupId=<%=groups[i].groupId%>" class="group"><%=groups[i].groupName%></a>\n	  	</li>\n	  	\n	    <% if(groups[i].servers != undefined){ %>\n	    	 <% for(var j=0; j < groups[i].servers.length; j++){ %>\n	    	 	<li id="<%=groups[i].servers[j].id%>" class="server <%if(groups[i].servers[j].id == current){%>select<%}%>">\n	    	 		<a href="#serverMgr/server/param/serverId=<%=groups[i].servers[j].id%>" class="server"><%=groups[i].servers[j].name%></a>\n	    	 	</li>\n	    	 <%}%>\n	    <%}%>\n    </ul>\n <%}%>\n'),define("travsky/jcf/1.0.0/view/deploy/sidebar_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/collection/group_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/group_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore");a("querystring");var d=a("travsky/jcf/1.0.0/collection/group_collection"),e=a("travsky/jcf/1.0.0/template/deploy/sidebar.tpl"),f=b.View.extend({template:c.template(e),events:{"click ul li.group span.open_or_closeGroup":"toggleGroup"},initialize:function(a){this.options=a||{},this.groups=this.getGroups(),this.current="",this.groups.bind("reset",this.render,this)},render:function(){return this.$el.html(this.template({groups:this.groups.toJSON(),current:this.current})),this},select:function(a){this.current=a,this.$el.find("li").removeClass("select"),""!=a&&this.$el.find("#"+a).addClass("select")},getGroups:function(){var a=new d;return a.fetch({reset:!0,data:{selectItem:"deployMgr"}}),a},toggleGroup:function(a){this.$el.find(a.target).toggleClass("groupOpen"),this.$el.find(a.target).toggleClass("groupClose"),this.$el.find(a.target).parent().siblings().toggleClass("hide")}});return f}),define("travsky/jcf/1.0.0/template/deploy/sidebar.tpl",[],' <% for(var i=0; i < groups.length; i++){ %>\n 	<ul class="nav nav-list" >\n 		<li id="<%=groups[i].groupId%>" class="group <%if(groups[i].groupId == current){%>select<%}%>">\n 			<% if(groups[i].servers != undefined&&groups[i].servers .length>0){%>\n	  			<span class="open_or_closeGroup groupOpen" ></span>\n 			<% } %>\n		 		<a href="#deployMgr/group/param/groupId=<%=groups[i].groupId%>" class="group"><%=groups[i].groupName%></a>\n	  	</li>\n	  	\n	    <% if(groups[i].servers != undefined){ %>\n	    	 <% for(var j=0; j < groups[i].servers.length; j++){ %>\n	    	 	<li id="<%=groups[i].servers[j].id%>" class="server <%if(groups[i].servers[j].id == current){%>select<%}%>">\n	    	 		<a href="#deployMgr/server/param/serverId=<%=groups[i].servers[j].id%>" class="server"><%=groups[i].servers[j].name%></a>\n	    	 	</li>\n	    	 <%}%>\n	    <%}%>\n    </ul>\n <%}%>\n'),define("travsky/jcf/1.0.0/view/service/sidebar_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/collection/group_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/group_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore");a("querystring");var d=a("travsky/jcf/1.0.0/collection/group_collection"),e=a("travsky/jcf/1.0.0/template/service/sidebar.tpl"),f=b.View.extend({template:c.template(e),events:{"click ul li.group span.open_or_closeGroup":"toggleGroup"},initialize:function(a){this.options=a||{},this.groups=this.getGroups(),this.current="",this.groups.bind("reset",this.render,this)},render:function(){return this.$el.html(this.template({groups:this.groups.toJSON(),current:this.current})),this},select:function(a){this.current=a,this.$el.find("li").removeClass("select"),""!=a&&this.$el.find("#"+a).addClass("select")},getGroups:function(){var a=new d;return a.fetch({reset:!0,data:{selectItem:"serviceMgr"}}),a},toggleGroup:function(a){this.$el.find(a.target).toggleClass("groupOpen"),this.$el.find(a.target).toggleClass("groupClose"),this.$el.find(a.target).parent().siblings().toggleClass("hide")}});return f}),define("travsky/jcf/1.0.0/template/service/sidebar.tpl",[],' <% for(var i=0; i < groups.length; i++){ %>\n 	<ul class="nav nav-list" >\n 		<li id="<%=groups[i].groupId%>" class="group <%if(groups[i].groupId == current){%>select<%}%>">\n 			<% if(groups[i].servers != undefined&&groups[i].servers .length>0){%>\n				<span class="open_or_closeGroup groupOpen"></span>\n 			<% } %>\n		 		<a href="#serviceMgr/group/param/groupId=<%=groups[i].groupId%>" class="group"><%=groups[i].groupName%></a>\n	  	</li>\n	  	\n	    <% if(groups[i].servers != undefined){ %>\n	    	 <% for(var j=0; j < groups[i].servers.length; j++){ %>\n	    	 	<li id="<%=groups[i].servers[j].id%>" class="server <%if(groups[i].servers[j].id == current){%>select<%}%>">\n	    	 		<a href="#serviceMgr/server/param/serverId=<%=groups[i].servers[j].id%>" class="server"><%=groups[i].servers[j].name%></a>\n	    	 	</li>\n	    	 <%}%>\n	    <%}%>\n    </ul>\n <%}%>'),define("travsky/jcf/1.0.0/view/service/serviceContent_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/service/serviceContent.tpl"),e=b.View.extend({el:"#content",template:c.template(d),initialize:function(){this.render()},render:function(){return this.$el.html(this.template()),this}});return e}),define("travsky/jcf/1.0.0/template/service/serviceContent.tpl",[],'<div id="content-header">\n\n</div>\n<div id="content-body">\n\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/sidebar_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/collection/group_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/group_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore");a("querystring");var d=a("travsky/jcf/1.0.0/collection/group_collection"),e=a("travsky/jcf/1.0.0/template/dataSource/sidebar.tpl"),f=b.View.extend({template:c.template(e),events:{"click ul li.group span.open_or_closeGroup":"toggleGroup"},initialize:function(a){this.options=a||{},this.groups=this.getGroups(),this.current="",this.groups.bind("reset",this.render,this)},render:function(){return this.$el.html(this.template({groups:this.groups.toJSON(),current:this.current})),this},select:function(a){this.current=a,this.$el.find("li").removeClass("select"),""!=a&&this.$el.find("#"+a).addClass("select")},getGroups:function(){var a=new d;return a.fetch({reset:!0,data:{selectItem:"dataSrcMgr"}}),a},toggleGroup:function(a){this.$el.find(a.target).toggleClass("groupOpen"),this.$el.find(a.target).toggleClass("groupClose"),this.$el.find(a.target).parent().siblings().toggleClass("hide")}});return f}),define("travsky/jcf/1.0.0/template/dataSource/sidebar.tpl",[],' <% for(var i=0; i < groups.length; i++){ %>\n 	<ul class="nav nav-list">\n 		<li id="<%=groups[i].groupId%>" class="group <%if(groups[i].groupId == current){%>select<%}%>">\n 			<% if(groups[i].servers != undefined&&groups[i].servers.length>0){%>\n	  			<span class="open_or_closeGroup groupOpen" ></span>\n 			<% } %>\n		 		<a href="#dataSrcMgr/group/param/groupId=<%=groups[i].groupId%>" class="group"><%=groups[i].groupName%></a>\n	  	</li>\n	  	\n	    <% if(groups[i].servers != undefined){ %>\n	    	 <% for(var j=0; j < groups[i].servers.length; j++){ %>\n	    	 	<li id="<%=groups[i].servers[j].id%>" class="server <%if(groups[i].servers[j].id == current){%>select<%}%>">\n	    	 		<a href="#dataSrcMgr/server/param/serverId=<%=groups[i].servers[j].id%>" class="server"><%=groups[i].servers[j].name%></a>\n	    	 	</li>\n	    	 <%}%>\n	    <%}%>\n    </ul>\n <%}%>'),define("travsky/jcf/1.0.0/view/dataSource/dataSourceContent_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/dataSource/dataSourceContent.tpl"),e=b.View.extend({el:"#content",template:c.template(d),initialize:function(){this.render()},render:function(){return this.$el.html(this.template()),this}});return e}),define("travsky/jcf/1.0.0/template/dataSource/dataSourceContent.tpl",[],'<div id="content-header">\n\n</div>\n<div id="content-body">\n\n</div>'),define("travsky/jcf/1.0.0/view/context/sidebar_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/collection/group_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/group_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore");a("querystring");var d=a("travsky/jcf/1.0.0/collection/group_collection"),e=a("travsky/jcf/1.0.0/template/context/sidebar.tpl"),f=b.View.extend({template:c.template(e),events:{"click ul li.group span.open_or_closeGroup":"toggleGroup"},initialize:function(a){this.options=a||{},this.groups=this.getGroups(),this.current="",this.groups.bind("reset",this.render,this)},render:function(){return this.$el.html(this.template({groups:this.groups.toJSON(),current:this.current})),this},select:function(a){this.current=a,this.$el.find("li").removeClass("select"),""!=a&&this.$el.find("#"+a).addClass("select")},getGroups:function(){var a=new d;return a.fetch({reset:!0,data:{selectItem:"contextMgr"}}),a},toggleGroup:function(a){this.$el.find(a.target).toggleClass("groupOpen"),this.$el.find(a.target).toggleClass("groupClose"),this.$el.find(a.target).parent().siblings().toggleClass("hide")}});return f}),define("travsky/jcf/1.0.0/template/context/sidebar.tpl",[],' <% for(var i=0; i < groups.length; i++){ %>\n 	<ul class="nav nav-list" >\n 		<li id="<%=groups[i].groupId%>" class="group <%if(groups[i].groupId == current){%>select<%}%>">\n 			<% if(groups[i].servers != undefined&&groups[i].servers .length>0){%>\n	  			<span class="open_or_closeGroup groupOpen" ></span>\n 			<% } %>\n		 		<a href="#contextMgr/group/param/groupId=<%=groups[i].groupId%>" class="group"><%=groups[i].groupName%></a>\n	  	</li>\n	  	\n	    <% if(groups[i].servers != undefined){ %>\n	    	 <% for(var j=0; j < groups[i].servers.length; j++){ %>\n	    	 	<li id="<%=groups[i].servers[j].id%>" class="server <%if(groups[i].servers[j].id == current){%>select<%}%>">\n	    	 		<a  href="#contextMgr/server/param/serverId=<%=groups[i].servers[j].id%>" class="server"><%=groups[i].servers[j].name%></a>\n	    	 	</li>\n	    	 <%}%>\n	    <%}%>\n    </ul>\n <%}%>\n'),define("travsky/jcf/1.0.0/view/context/contextContent_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/context/contextContent.tpl"),e=b.View.extend({el:"#content",template:c.template(d),initialize:function(){this.render()},render:function(){return this.$el.html(this.template()),this}});return e}),define("travsky/jcf/1.0.0/template/context/contextContent.tpl",[],'<div id="content-header">\n\n</div>\n<div id="content-body">\n\n</div>'),define("travsky/jcf/1.0.0/view/log/sidebar_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/collection/group_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/group_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore");a("querystring");var d=a("travsky/jcf/1.0.0/collection/group_collection"),e=a("travsky/jcf/1.0.0/template/log/sidebar.tpl"),f=b.View.extend({template:c.template(e),events:{"click ul li.group span.open_or_closeGroup":"toggleGroup"},initialize:function(a){this.options=a||{},this.groups=this.getGroups(),this.current="",this.groups.bind("reset",this.render,this)},render:function(){return this.$el.html(this.template({groups:this.groups.toJSON(),current:this.current})),this},select:function(a){this.current=a,this.$el.find("li").removeClass("select"),""!=a&&this.$el.find("#"+a).addClass("select")},getGroups:function(){var a=new d;return a.fetch({reset:!0,data:{selectItem:"logMgr"}}),a},toggleGroup:function(a){this.$el.find(a.target).toggleClass("groupOpen"),this.$el.find(a.target).toggleClass("groupClose"),this.$el.find(a.target).parent().siblings().toggleClass("hide")}});return f}),define("travsky/jcf/1.0.0/template/log/sidebar.tpl",[],' <% for(var i=0; i < groups.length; i++){ %>\n 	<ul class="nav nav-list" >\n 		<li id="<%=groups[i].groupId%>" class="group <%if(groups[i].groupId == current){%>select<%}%>">\n		 	<a href="#logMgr/group/param/groupId=<%=groups[i].groupId%>" class="group"><%=groups[i].groupName%></a>\n	  	</li>\n    </ul>\n <%}%>\n'),define("travsky/jcf/1.0.0/view/log/logContent_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/log/logContent.tpl"),e=b.View.extend({el:"#content",template:c.template(d),initialize:function(){this.render()},render:function(){return this.$el.html(this.template()),this}});return e}),define("travsky/jcf/1.0.0/template/log/logContent.tpl",[],'<div id="content-header">\n\n</div>\n<div id="content-body">\n\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/dataSourceTabbar_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/dataSource/dataSourceTabbar.tpl"),e=b.View.extend({el:"#tabbar",template:c.template(d),events:{},initialize:function(a){this.options=a||{}},render:function(){return this.$el.html(this.template()),this}});return e}),define("travsky/jcf/1.0.0/template/dataSource/dataSourceTabbar.tpl",[],""),define("travsky/jcf/1.0.0/view/dataSource/groupDataSourceTabbar_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/DataSourceAuthCheckUtil"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/DataSourceAuthCheckUtil"),e=a("travsky/jcf/1.0.0/template/dataSource/groupDataSourceTabbar.tpl"),f=b.View.extend({el:"#tabbar",template:c.template(e),events:{},initialize:function(a){this.options=a||{},this.queryString=a.queryString,this.groupId=a.queryString.groupId,this.labels=this.getLabels(),this.current=a.queryString.selectTab||"groupDataSource",this.dataSourceListAuth=d.getGroupDataSourceListAuth(),this.dataSourceDeployAuth=d.getGroupDataSourceDeployAuth(),this.dataSourceConfigAuth=d.getGroupDataSourceConfigAuth()},render:function(){return this.$el.html(this.template({labels:this.labels,current:this.current,groupId:this.groupId,dataSourceDeployAuth:this.dataSourceDeployAuth,dataSourceConfigAuth:this.dataSourceConfigAuth,dataSourceListAuth:this.dataSourceListAuth})),this},select:function(a){this.current=a,this.$el.find("li").removeClass("active"),""!=a&&this.$el.find("#"+a).addClass("active")},getLabels:function(){return[{id:"groupDataSource",name:"组数据源列表"},{id:"groupDeployDataSource",name:"组数据源部署"},{id:"groupDataSourceConfig",name:"组数据源配置"}]}});return f}),define("travsky/jcf/1.0.0/util/DataSourceAuthCheckUtil",[],function(){var a={};return a.getDataSourceManagementAuth=function(){var a="5_1_1",b=jcfManager.authModel.get(a)||"";return b},a.getServerDataSourceConfigAuth=function(){var a="5_2_1",b=jcfManager.authModel.get(a)||"";return b},a.getServerDataSourceUninstallAuth=function(){var a="5_2_2",b=jcfManager.authModel.get(a)||"";return b},a.getServerDataSourceRestartAuth=function(){var a="5_2_3",b=jcfManager.authModel.get(a)||"";return b},a.getServerDataSourceDetailViewAuth=function(){var a="5_2_4",b=jcfManager.authModel.get(a)||"";return b},a.getServerDataSourceDeployAuth=function(){var a="5_2_5",b=jcfManager.authModel.get(a)||"";return b},a.getGroupDataSourceDeployAuth=function(){var a="5_2_6",b=jcfManager.authModel.get(a)||"";return b},a.getAllDataSourceListAuth=function(){var a="5_2_7",b=jcfManager.authModel.get(a)||"";return b},a.getGroupDataSourceConfigAuth=function(){var a="5_3_7-1",b=jcfManager.authModel.get(a)||"";return b},a.getGroupDataSourceListAuth=function(){var a="5_3_7-2",b=jcfManager.authModel.get(a)||"";return b},a}),define("travsky/jcf/1.0.0/template/dataSource/groupDataSourceTabbar.tpl",[],'<ul id="dataSourceNavbar" class="nav nav-tabs">\n	<% for(var i = 0; i < labels.length; i++){%>\n		<%if ((labels[i].id=="groupDataSource")\n			||((labels[i].id=="groupDeployDataSource") && (dataSourceDeployAuth=="true"))||\n			((labels[i].id=="groupDataSourceConfig") && (dataSourceConfigAuth=="true"))){%>\n				<li id="<%=labels[i].id%>" class="<%if(current==labels[i].id){%>active<%}%>">\n					<a href="#dataSrcMgr/group/param/groupId=<%=groupId%>&selectTab=<%=labels[i].id%>"><%=labels[i].name%></a>\n				</li>\n		<%}%>\n	<%}%>\n</ul>'),define("travsky/jcf/1.0.0/view/dataSource/serverDataSourceTabbar_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/DataSourceAuthCheckUtil"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/DataSourceAuthCheckUtil"),e=a("travsky/jcf/1.0.0/template/dataSource/serverDataSourceTabbar.tpl"),f=b.View.extend({el:"#tabbar",template:c.template(e),events:{},initialize:function(a){this.options=a||{},this.queryString=a.queryString,this.serverId=a.queryString.serverId,this.labels=this.getLabels(),this.current=a.queryString.selectTab||"dataSource",this.deployDataSourceAuth=d.getServerDataSourceDeployAuth()},render:function(){return this.$el.html(this.template({labels:this.labels,current:this.current,serverId:this.serverId,deployDataSourceAuth:this.deployDataSourceAuth})),this},select:function(a){this.current=a,this.$el.find("li").removeClass("active"),""!=a&&this.$el.find("#"+a).addClass("active")},getLabels:function(){return[{id:"dataSource",name:"数据源列表"},{id:"deployDataSource",name:"新增数据源"},{id:"testDataSource",name:"测试数据源"}]}});return f}),define("travsky/jcf/1.0.0/template/dataSource/serverDataSourceTabbar.tpl",[],'<ul id="dataSourceNavbar" class="nav nav-tabs">\n	<% for(var i = 0; i < labels.length; i++){ %>\n		<%if ((labels[i].id=="deployDataSource") && (deployDataSourceAuth!="true")){%>\n		<%}else{%>\n			<li id="<%=labels[i].id%>" class="<%if(current==labels[i].id){%>active<%}%>">\n				<a href="#dataSrcMgr/server/param/serverId=<%=serverId%>&selectTab=<%=labels[i].id%>"><%=labels[i].name%></a>\n			</li>\n		<%}%>\n	<%}%>\n</ul>\n'),define("travsky/jcf/1.0.0/view/context/serverContextTabbar_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/ContextAuthCheckUtil"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/ContextAuthCheckUtil"),e=a("travsky/jcf/1.0.0/template/context/serverContextTabbar.tpl"),f=b.View.extend({el:"#tabbar",template:c.template(e),events:{},initialize:function(a){this.options=a||{},this.queryString=a.queryString,this.serverId=a.queryString.serverId,this.labels=this.getLabels(),this.current=a.queryString.selectTab||"contextInfo",this.contextConfigAuth=d.getServerContextConfigAuth()},render:function(){return this.$el.html(this.template({labels:this.labels,current:this.current,serverId:this.serverId,contextConfigAuth:this.contextConfigAuth})),this},select:function(a){this.current=a,this.$el.find("li").removeClass("active"),""!=a&&this.$el.find("#"+a).addClass("active")},getLabels:function(){return[{id:"contextInfo",name:"上下文信息"},{id:"contextConfig",name:"上下文配置"}]}});return f}),define("travsky/jcf/1.0.0/util/ContextAuthCheckUtil",[],function(){var a={};return a.getContextManagementAuth=function(){var a="6_1_1",b=jcfManager.authModel.get(a)||"";return b},a.getServerContextConfigAuth=function(){var a="6_2_1",b=jcfManager.authModel.get(a)||"";return b},a.getServerContextRestartAuth=function(){var a="6_2_2",b=jcfManager.authModel.get(a)||"";return b},a}),define("travsky/jcf/1.0.0/template/context/serverContextTabbar.tpl",[],'<ul id="ContextNavbar" class="nav nav-tabs">\n	<% for(var i = 0; i < labels.length; i++){ %>\n		<%if ((labels[i].id=="contextConfig") && (contextConfigAuth!="true")){%>\n		<%}else{%>\n			<li id="<%=labels[i].id%>" class="<%if(current==labels[i].id){%>active<%}%>">\n				<a href="#contextMgr/server/param/serverId=<%=serverId%>&selectTab=<%=labels[i].id%>"><%=labels[i].name%></a>\n			</li>\n		<%}%>\n	<%}%>\n</ul>\n'),define("travsky/jcf/1.0.0/util/SidebarUtil",["jquery"],function(a){var b=jQuery=a("jquery");String.prototype.startWith=function(a){var b=new RegExp("^"+a);return b.test(this)};var c={},d=["authMgr","serverMgr","deployMgr","serviceMgr","dataSrcMgr","contextMgr","logMgr"];return c.getModuleName=function(){var a=window.location.hash,c=null;if(null!=a&&b.trim(a).length>0)for(var e=0;e<d.length;e++){var f=d[e];if(a.startWith("#"+f)){c=f;break}}else c="authMgr";return c},c}),define("travsky/jcf/1.0.0/api/IndexApi",["travsky/jcf/1.0.0/model/navbar_model","jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/collection/group_collection","travsky/jcf/1.0.0/model/group_model","travsky/jcf/1.0.0/controller/IndexController","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/navbar_view","travsky/jcf/1.0.0/controller/SidebarController","travsky/jcf/1.0.0/view/sidebar_view","querystring","travsky/jcf/1.0.0/view/foot_view","travsky/jcf/1.0.0/view/tipIndex_view"],function(a){var b=a("travsky/jcf/1.0.0/model/navbar_model"),c=a("travsky/jcf/1.0.0/collection/group_collection"),d=a("travsky/jcf/1.0.0/controller/IndexController"),e={getLoginUser:function(){var a=$.Deferred(),c=new b;return c.fetch({success:function(b){a.resolve(b)}}),a.promise()},getGroupCollection:function(a){var b=$.Deferred(),d=new c;return d.fetch({reset:!0,data:{selectItem:a},success:function(a){b.resolve(a)}}),b.promise()},showNavbar:function(){d.showNavbar()},showSidebar:function(a){d.showSidebar(a)},showMainContent:function(){d.showMainContent()},showFootView:function(){d.showFootView()}};return e}),define("travsky/jcf/1.0.0/model/navbar_model",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=a("travsky/jcf/1.0.0/util/CommonUtil"),d=c.getAppName(),e=b.Model.extend({defaults:function(){return{loginUserName:"",loginUserRole:"",loginID:""}},url:"/"+d+"/getLoginUserInfo.action"});return e}),define("travsky/jcf/1.0.0/controller/IndexController",["jquery","marionette","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/navbar_view","backbone","underscore","travsky/jcf/1.0.0/model/navbar_model","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/controller/SidebarController","travsky/jcf/1.0.0/collection/group_collection","travsky/jcf/1.0.0/model/group_model","travsky/jcf/1.0.0/view/sidebar_view","querystring","travsky/jcf/1.0.0/view/foot_view","travsky/jcf/1.0.0/view/tipIndex_view"],function(a){var b=jQuery=a("jquery");a("marionette"),a("travsky/jcf/1.0.0/util/SidebarUtil");var c=a("travsky/jcf/1.0.0/view/navbar_view"),d=a("travsky/jcf/1.0.0/view/foot_view");a("travsky/jcf/1.0.0/view/sidebar_view");var e=a("travsky/jcf/1.0.0/view/tipIndex_view");a("travsky/jcf/1.0.0/collection/group_collection");var f=a("travsky/jcf/1.0.0/controller/SidebarController"),g=a("travsky/jcf/1.0.0/view/alert_view"),h={showNavbar:function(){var a=jcfManager.request("login:user");b.when(a).done(function(a){if("false"==a.get("flag")||"error"==a.get("jcfmanageType")){var b=new g({msg:"管理中心主备配置文件存在异常，请及时修改！"});jcfManager.dialogRegion.show(b)}var d=new c({model:{loginInfo:a.toJSON()}});jcfManager.navbarRegion.show(d)})},showSidebar:function(a){f.showSidebar(a)},showMainContent:function(){var a=new e;jcfManager.contentRegion.show(a)},showFootView:function(){jcfManager.footRegion.show(new d)}};return h}),define("travsky/jcf/1.0.0/view/navbar_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/model/navbar_model","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/controller/SidebarController","travsky/jcf/1.0.0/collection/group_collection","travsky/jcf/1.0.0/model/group_model","travsky/jcf/1.0.0/view/sidebar_view","querystring","travsky/jcf/1.0.0/util/SidebarUtil"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("travsky/jcf/1.0.0/template/navbar.tpl");
a("marionette"),a("travsky/jcf/1.0.0/model/navbar_model");var f=a("travsky/jcf/1.0.0/util/CommonUtil");a("travsky/jcf/1.0.0/template/navbar.tpl"),a("travsky/jcf/1.0.0/controller/SidebarController");var g=a("travsky/jcf/1.0.0/view/alert_view"),h=c.View.extend({template:d.template(e),initialize:function(){},events:{"click ul.selectItem li":"selectNavItem","click #mylogout":"logout","click #indexLogoImg":"clickIndexLogoImg","click #backup":"backup"},clickIndexLogoImg:function(a){a.preventDefault(),a.stopPropagation(),appRouter.navigate("sysIndex",{trigger:!0})},render:function(){return this.$el.html(this.template(this.model)),this},logout:function(){var a=f.getAppName();b.get("/"+a+"/logout.action").done(function(){window.location.href="/"+a+"/login.html"})},backup:function(){var a="/"+jcfManager.appName+"/server/backupServer.action",c={};c.operStatus="1";var d=f.dealAjaxRequestWithoutParam(a);b.when(d).done(function(a){if("succeed"==a.flag){var b=new g({msg:"备份成功"});jcfManager.dialogRegion.show(b)}else{var b=new g({msg:"备份失败"});jcfManager.dialogRegion.show(b)}})}});return h}),define("travsky/jcf/1.0.0/template/navbar.tpl",[],'<div class="container-fluid">\n	<div class="navbar-header">\n		<a class="navbar-brand" id = "indexLogoImg"  href="#">\n    		<span class="brand" href="javascript:void(0)">\n    			<img src="./static/imgs/logo.png" width="111" height="30" alt="w3cschool logo"/>\n    		</span>\n    		<%\n    		if(loginInfo.jcfmanageType == \'error\' || loginInfo.flag == "false"){\n    			%>&nbsp;<span class="brand" id = "error_Type" style="color:red;font-size:12px">主备配置文件出现异常，请及时修改</span><%\n    		}else{\n    			if(loginInfo.jcfmanageType == \'master\'){%>    		\n    			&nbsp;<span class="brand" id = "jcfmanage_Type" >主管理中心</span><%\n    			}else if(loginInfo.jcfmanageType == \'backup\'){%>\n    				&nbsp;<span class="brand" id = "jcfmanage_Type" >备份管理中心</span><%\n    			}\n    		}%>\n    	</a>\n	</div>\n	<div id="navbar" class="navbar-collapse collapse">\n		<p class="navbar-text pull-right">\n			<%			\n			if(loginInfo.jcfmanageType == \'master\'){\n			  %><a class = "myhand" id = "backup">备份</a>&nbsp;&nbsp;<%\n			}\n			%> 			\n    		<a class = "myhand" id = "mylogout">退出</a>&nbsp;&nbsp;&nbsp;&nbsp;用户:<%=loginInfo.loginUserName%> \n    		>>&nbsp;<%=loginInfo.loginUserRole%>\n    	</p>\n    	<input type = "hidden" id = "indexHiddenLoginId" value = "<%=loginInfo.loginID%>"/>\n    	<input type = "hidden" id = "indexHiddenLoginUserRole" value = "<%=loginInfo.loginUserRole%>"/>\n    </div>\n</div>'),define("travsky/jcf/1.0.0/controller/SidebarController",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/collection/group_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/group_model","travsky/jcf/1.0.0/view/sidebar_view","querystring","travsky/jcf/1.0.0/util/SidebarUtil"],function(a){var b=jQuery=a("jquery");a("backbone"),a("underscore"),a("marionette"),a("travsky/jcf/1.0.0/collection/group_collection");var c=a("travsky/jcf/1.0.0/view/sidebar_view"),d={showSidebar:function(a){console.log("show side bar");var d=jcfManager.request("index:sidebarCollection",a);b.when(d).done(function(a){jcfManager.sidebarRegion.show(new c({collection:a}))})}};return d}),define("travsky/jcf/1.0.0/view/sidebar_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/collection/group_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/group_model","travsky/jcf/1.0.0/util/SidebarUtil"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore");a("querystring");var e=a("travsky/jcf/1.0.0/template/sidebar.tpl");a("travsky/jcf/1.0.0/collection/group_collection");var f=a("travsky/jcf/1.0.0/util/SidebarUtil"),g=c.View.extend({tagName:"div",template:d.template(e),initialize:function(){},render:function(){return this.$el.html(this.template({groups:this.collection.toJSON()})),this},events:{"click ul li.group span.open_or_closeGroup":"open_or_closeGroup","click ul li.group a.groupName":"clickGroup","click ul li.server a":"clickServer"},open_or_closeGroup:function(a){a.stopPropagation();var c=b(a.target),d=c.parent(),e=c.hasClass("groupOpen"),f=d.parent(".nav-list"),g="groupClose",h="groupOpen",i="notShow",j="show";return e&&(g="groupOpen",h="groupClose",i="show",j="hide"),c.removeClass(g).addClass(h),f.find("li").not(".nav-header").each(function(){b(this).removeClass(i).addClass(j)}),!1},clickGroup:function(a){a.stopPropagation();var c=f.getModuleName(),d=b(a.target).attr("myid");null==c?alert("页面获取的hash值无效!"):"authMgr"==c?window.appRouter.navigate("authMgr/"+d,{trigger:!0}):window.appRouter.navigate(c+"/group/param/groupId="+d,{trigger:!0})},clickServer:function(a){var c=b(a.target).attr("myid"),d=f.getModuleName();null==d?alert("页面获取的hash值无效!"):window.appRouter.navigate(d+"/server/param/serverId="+c,{trigger:!0});var e=b(a.target).parent(),g=e.parent("ul").parent("div").find("ul");g.find("li.server").removeClass("active"),e.addClass("active"),window.appRouter.navigate(d+"/server/param/serverId="+c,{trigger:!0})}});return g}),define("travsky/jcf/1.0.0/template/sidebar.tpl",[],' <% for(var i=0; i < groups.length; i++){ %>\n 	<ul class="nav nav-list" >\n 		<li class="nav-header group">\n 			<% if(groups[i].servers != undefined&&groups[i].servers .length>0){%>\n	  			<span class="open_or_closeGroup myhand groupOpen" >&nbsp;&nbsp;</span>\n 			<% }else{\n 			%>\n 				&nbsp;&nbsp;&nbsp;\n 			<%\n 			}%>\n		 		<a class="groupName myhand"  myid = "<%=groups[i].groupId%>" ><%=groups[i].groupName%></a>\n	  	</li>\n	  	\n	    <% if(groups[i].servers != undefined){ %>\n	    	 <% for(var j=0; j < groups[i].servers.length; j++){ %>\n	    	 	<li class = "server"><a class = "myhand" myid = "<%=groups[i].servers[j].id%>">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<%=groups[i].servers[j].name%></a></li>\n	    	 <%}%>\n	    <%}%>\n    </ul>\n <%}%>\n'),define("travsky/jcf/1.0.0/view/foot_view",["underscore","marionette"],function(a){var b=a("underscore"),c=a("marionette"),d=a("travsky/jcf/1.0.0/template/foot.tpl"),e=c.ItemView.extend({tagName:"p",className:"muted credit",template:b.template(d)});return e}),define("travsky/jcf/1.0.0/template/foot.tpl",[],"<!-- foot region -->"),define("travsky/jcf/1.0.0/view/tipIndex_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/tipIndex.tpl"),e=b.View.extend({template:c.template(d),render:function(){return this.$el.html(this.template),this}});return e}),define("travsky/jcf/1.0.0/template/tipIndex.tpl",[],'<div class="row-fluid">\n    <div>\n      <h2>提示</h2>\n      <p>请点击左侧有效的树形导航选择节点</p>\n    </div>\n </div>'),define("travsky/jcf/1.0.0/view/app_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/tipIndex_view","travsky/jcf/1.0.0/view/sysIndex_view","travsky/jcf/1.0.0/api/auth/UserMgrApi","travsky/jcf/1.0.0/view/auth/userMgrLayout","travsky/jcf/1.0.0/view/auth/userList_view","travsky/jcf/1.0.0/collection/auth/user_collection","travsky/jcf/1.0.0/model/auth/user_model","travsky/jcf/1.0.0/view/auth/userModify_view","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/auth/userDetail_view","travsky/jcf/1.0.0/view/auth/userAdd_view","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/pagebar_view2","travsky/jcf/1.0.0/view/auth/roleMgrLayout","travsky/jcf/1.0.0/view/auth/roleAdd_view","ztree-core","ztree-excheck","travsky/jcf/1.0.0/view/auth/roleUpdate_view","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/confirm_view","travsky/jcf/1.0.0/view/server/serverMgrLayout","travsky/jcf/1.0.0/view/server/serverAdd_view","travsky/jcf/1.0.0/view/server/server","travsky/jcf/1.0.0/view/server/AuthCheck4ServerUtil","travsky/jcf/1.0.0/view/server/groupAdd_view","travsky/jcf/1.0.0/view/server/checkCacheGroup","travsky/jcf/1.0.0/view/server/global_view","bs-alert","travsky/jcf/1.0.0/view/server/serverAddNext_view","travsky/jcf/1.0.0/view/server/nodeControllerCfg_view","travsky/jcf/1.0.0/view/server/domainParamCfg_view","icheck","travsky/jcf/1.0.0/view/server/serverMgr4GroupLayout","travsky/jcf/1.0.0/view/server/groupServerConfig","travsky/jcf/1.0.0/view/server/serverInputCheck","travsky/jcf/1.0.0/view/server/groupServerConfig_registry","travsky/jcf/1.0.0/view/server/groupServerConfig_cache","travsky/jcf/1.0.0/model/pagebar_model","travsky/jcf/1.0.0/view/listTip_view","travsky/jcf/1.0.0/view/server/serverSysMemoryStatisticsLayout","travsky/jcf/1.0.0/view/server/serverMgr4ServerLayout","travsky/jcf/1.0.0/view/server/serverUpdate_view","travsky/jcf/1.0.0/view/waiting_view","travsky/jcf/1.0.0/view/deploy/deployMgrLayout","travsky/jcf/1.0.0/view/deploy/deployList_view","travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil","travsky/jcf/1.0.0/view/deploy/deployUploadLayout","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/deploy/groupDeployMgrLayout","travsky/jcf/1.0.0/view/deploy/groupDeployTabAppMgr","travsky/jcf/1.0.0/view/deploy/rollbackLayout","travsky/jcf/1.0.0/view/deploy/rollback_view","travsky/jcf/1.0.0/view/deploy/rollbackUploadLayout","travsky/jcf/1.0.0/collection/deploy/groupApp_collection","travsky/jcf/1.0.0/model/deploy/groupApp_model","travsky/jcf/1.0.0/view/itemTip_view","travsky/jcf/1.0.0/model/itemTip_model","travsky/jcf/1.0.0/view/deploy/groupServerAppStautsLayout","travsky/jcf/1.0.0/view/deploy/groupAppConfigLayout","ajaxfileupload","travsky/jcf/1.0.0/view/deploy/groupDeployTabCreateNewDeploy","travsky/jcf/1.0.0/view/deploy/groupDeployAppLogCfgLayout","travsky/jcf/1.0.0/view/deploy/groupDeployTabServerDeployInfo","travsky/jcf/1.0.0/view/deploy/serverAppStatusLayout","travsky/jcf/1.0.0/view/deploy/serverAppConfigLayout","travsky/jcf/1.0.0/view/service/serviceMgrLayout","travsky/jcf/1.0.0/view/service/serviceTab4ListLayout","travsky/jcf/1.0.0/view/service/serviceTab4ConfigLayout","travsky/jcf/1.0.0/view/service/serviceConfig_view","travsky/jcf/1.0.0/view/service/AuthCheck4Service","travsky/jcf/1.0.0/view/service/groupServiceMgrLayout","travsky/jcf/1.0.0/view/service/groupServiceTabServiceMgr","travsky/jcf/1.0.0/view/service/serviceDetailLayout","travsky/jcf/1.0.0/view/service/ServiceOperHelper","travsky/jcf/1.0.0/view/service/monitorService_view","travsky/jcf/1.0.0/view/service/groupServiceCfg","travsky/jcf/1.0.0/view/service/serviceGrayConfig_view","travsky/jcf/1.0.0/view/service/serviceDegradeConfig_view","travsky/jcf/1.0.0/view/service/respGroupMoni_view","my97Date","travsky/jcf/1.0.0/view/service/groupServiceChart_view","highcharts","travsky/jcf/1.0.0/view/service/serverServiceChart_view","travsky/jcf/1.0.0/view/service/serverServiceMgrLayout","travsky/jcf/1.0.0/view/service/serverServiceCfg_view","travsky/jcf/1.0.0/view/service/respMoni_view","travsky/jcf/1.0.0/model/service/service_degrade_config_model","travsky/jcf/1.0.0/model/service/service_gray_config_model","travsky/jcf/1.0.0/collection/dataSource/dataSource_collection","travsky/jcf/1.0.0/model/dataSource/dataSource_model","travsky/jcf/1.0.0/view/dataSource/dataSourceList_view","travsky/jcf/1.0.0/view/dataSource/dataSourceItem_view","travsky/jcf/1.0.0/collection/dataSource/group_dataSource_collection","travsky/jcf/1.0.0/model/dataSource/group_dataSource_model","travsky/jcf/1.0.0/view/dataSource/groupDataSourceList_view","travsky/jcf/1.0.0/view/dataSource/groupDataSourceItem_view","travsky/jcf/1.0.0/view/dataSource/dataSourceWait_view","travsky/jcf/1.0.0/view/dataSource/tip_view","travsky/jcf/1.0.0/view/dataSource/global_view","travsky/jcf/1.0.0/util/DataSourceAuthCheckUtil","travsky/jcf/1.0.0/view/dataSource/groupDataSourceListHead_view","travsky/jcf/1.0.0/view/dataSource/groupDeployDataSource_view","travsky/jcf/1.0.0/util/DataSourceUtil","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil","travsky/jcf/1.0.0/model/dataSource/group_dataSource_deploy_model","travsky/jcf/1.0.0/collection/dataSource/group_dataSource_server_collection","travsky/jcf/1.0.0/model/dataSource/group_dataSource_server_model","travsky/jcf/1.0.0/view/dataSource/groupDataSourceServerList_view","travsky/jcf/1.0.0/view/dataSource/groupDataSourceServerItem_view","travsky/jcf/1.0.0/view/dataSource/groupDataSourceConfig_view","travsky/jcf/1.0.0/view/dataSource/groupDataSourceConfigHead_view","travsky/jcf/1.0.0/collection/dataSource/group_dataSource_name_collection","travsky/jcf/1.0.0/model/dataSource/group_dataSource_name_model","travsky/jcf/1.0.0/model/dataSource/group_dataSource_config_model","travsky/jcf/1.0.0/view/dataSource/serverDataSourceList_view","travsky/jcf/1.0.0/collection/dataSource/server_dataSource_collection","travsky/jcf/1.0.0/model/dataSource/server_dataSource_model","travsky/jcf/1.0.0/view/dataSource/serverDataSourceItem_view","travsky/jcf/1.0.0/model/dataSource/server_dataSource_config_model","travsky/jcf/1.0.0/view/dataSource/serverDataSourceConfig_view","travsky/jcf/1.0.0/model/dataSource/server_dataSource_monitor_model","travsky/jcf/1.0.0/view/dataSource/serverDataSourceMonitor_view","travsky/jcf/1.0.0/view/dataSource/serverDeployDataSource_view","travsky/jcf/1.0.0/model/dataSource/server_dataSource_deploy_model","travsky/jcf/1.0.0/view/dataSource/serverTestDataSourceList_view","travsky/jcf/1.0.0/view/dataSource/serverTestDataSourceItem_view","travsky/jcf/1.0.0/view/context/highcharts","exporting","travsky/jcf/1.0.0/model/context/server_context_model","travsky/jcf/1.0.0/view/context/serverContextInfo_view","travsky/jcf/1.0.0/util/ContextAuthCheckUtil","travsky/jcf/1.0.0/view/context/tip_view","travsky/jcf/1.0.0/view/context/global_view","travsky/jcf/1.0.0/view/context/serverContextConfig_view","travsky/jcf/1.0.0/util/ContextUtil","travsky/jcf/1.0.0/collection/log/log_collection","travsky/jcf/1.0.0/model/log/log_model","travsky/jcf/1.0.0/view/log/logList_view","travsky/jcf/1.0.0/util/LogAuthCheckUtil","travsky/jcf/1.0.0/view/log/logItem_view","travsky/jcf/1.0.0/view/log/global_view","travsky/jcf/1.0.0/view/log/tip_view","travsky/jcf/1.0.0/view/log/logConfig_view","travsky/jcf/1.0.0/util/LogUtil","travsky/jcf/1.0.0/view/log/logConfigHead_view","travsky/jcf/1.0.0/collection/log/log_app_name_collection","travsky/jcf/1.0.0/model/log/log_app_name_model","travsky/jcf/1.0.0/model/log/log_config_model"],function(a){var b=jQuery=a("jquery"),c=a("backbone");a("underscore");var d=a("querystring"),e=a("travsky/jcf/1.0.0/util/CommonUtil"),f=a("travsky/jcf/1.0.0/view/tipIndex_view"),g=a("travsky/jcf/1.0.0/view/sysIndex_view"),h=a("travsky/jcf/1.0.0/view/errorPage_view"),i=c.View.extend({initialize:function(){},showSysIndex:function(){var a=new g;jcfManager.contentRegion.show(a)},authMgrUser:function(f){var g=d.parse(f),h=a("travsky/jcf/1.0.0/api/auth/UserMgrApi"),i=a("travsky/jcf/1.0.0/view/auth/userMgrLayout");b.when(h.getAllRoles()).done(function(a){if("true"==a.flag){var b=new c.Model(a),d=new i({model:b,queryString:g});jcfManager.contentRegion.show(d)}else e.showErrPage()})},addUser:function(){var d=a("travsky/jcf/1.0.0/view/auth/userAdd_view"),f="/"+jcfManager.appName+"/user/getAllRoleList.action";b.when(e.dealAjaxRequestWithoutParam(f)).done(function(a){if("true"==a.flag){var b=new c.Collection(a.roleList);jcfManager.contentRegion.show(new d({collection:b}))}else e.showErrPage()})},detailUser:function(f){var g=d.parse(f),h=a("travsky/jcf/1.0.0/api/auth/UserMgrApi"),i=g.userId,j=a("travsky/jcf/1.0.0/view/auth/userDetail_view"),h=a("travsky/jcf/1.0.0/api/auth/UserMgrApi");b.when(h.getUserByID(i)).done(function(a){if("true"==a.flag){var b=new c.Model(a),d=new j({model:b});jcfManager.contentRegion.show(d)}else e.showErrPage()})},modifyUser:function(f){var g=d.parse(f),h=a("travsky/jcf/1.0.0/view/auth/userModify_view"),i=g.userId,j=g.loginId,k="/"+e.getAppName()+"/user/toModifyUserUI.action",l={userID:i,loginId:j};b.when(e.dealAjaxRequest4SimpleParam(k,l)).done(function(a){if("true"==a.flag){var b=new c.Model(a.userInfo);b.set("canMod",a.canMod);var d=new h({model:b,roleList:a.roleList});jcfManager.contentRegion.show(d)}else e.showErrPage()})},authMgrRole:function(b){var c=d.parse(b),e=a("travsky/jcf/1.0.0/view/auth/roleMgrLayout"),f=new e({queryString:c});jcfManager.contentRegion.show(f),f.trigger("showPageInfo")},addRole:function(){var b=a("travsky/jcf/1.0.0/view/auth/roleAdd_view"),c=new b;jcfManager.contentRegion.show(c),c.trigger("showPageInfo")},updateRole:function(f){var g=a("travsky/jcf/1.0.0/view/auth/roleUpdate_view"),h=d.parse(f),i=h.roleId,j=h.operatorType,k={roleId:i,operatorType:j},l="/"+jcfManager.appName+"/auth/toUpdateRoleUI.action",m=e.dealAjaxRequest4SimpleParam(l,k);b.when(m).done(function(a){var b=new c.Model(a);b.set("operatorType",j);var d=new g({model:b});jcfManager.contentRegion.show(d),d.trigger("showPageInfo")})},showServerIndex:function(b){var e=a("travsky/jcf/1.0.0/view/server/serverMgrLayout"),f=d.parse(b),g=f.selectedPageUI;(void 0==g||""==g)&&(f.selectedPageUI="serverListUI");var h=new c.Model({selectedPageUI:f.selectedPageUI}),i=new e({model:h,queryString:f});jcfManager.contentRegion.show(i),i.trigger("showPageInfo")},serverMgrGroup:function(f){var g=d.parse(f),h=g.groupId,i=g.selectedPageUI;(void 0==i||""==i)&&(g.selectedPageUI="serverGroupList");var j=a("travsky/jcf/1.0.0/view/server/serverMgr4GroupLayout"),k="/"+jcfManager.appName+"/server/findGroupNameById.action",l={groupId:h},m=e.dealAjaxRequest4SimpleParam(k,l),n=b("#freshPage4GroupServerFlag").val();void 0!=n&&n.length>0&&window.clearInterval(n),b.when(m).done(function(a){var b=a.groupInfo.groupCategory,d=new c.Model({hiddenGroupId:h,groupCategory:b});d.set("selectedPageUI",g.selectedPageUI);var e=new j({model:d,queryString:g});jcfManager.contentRegion.show(e),e.trigger("showPageInfo")})},serverMgrServer:function(f){var g=a("travsky/jcf/1.0.0/view/server/serverMgr4ServerLayout"),i=d.parse(f),j=i.selectedPageUI;(void 0==j||null==j)&&(i.selectedPageUI="detailInfo");var k=i.serverId,l="",m={serverId:k},n="/"+jcfManager.appName+"/server/getServerCategory.action",o=e.dealAjaxRequest4SimpleParam(n,m);b.when(o).done(function(a){if("true"==a.flag){l=a.serverCategory;var b=new c.Model({selectNavItem:i.selectedPageUI,serverId:k,serverCategory:l}),d=new g({model:b,queryString:i});jcfManager.contentRegion.show(d),d.trigger("showDownContentRegion")}else{var e=new h;jcfManager.contentRegion.show(e)}})},serverMemoryInfo:function(b){var c=d.parse(b),e=a("travsky/jcf/1.0.0/view/server/serverSysMemoryStatisticsLayout"),f=new e({queryString:c});jcfManager.contentRegion.show(f),f.trigger("showPageInfo")},showDeployIndex:function(b){var e=d.parse(b),f=e.selectedPageUI;(void 0==f||""==f)&&(e.selectedPageUI="showAllAppUI");var g=a("travsky/jcf/1.0.0/view/deploy/deployMgrLayout"),h=new c.Model({selectedPageUI:e.selectedPageUI}),i=new g({model:h,queryString:e});jcfManager.contentRegion.show(i)},deployMgrGroup:function(b){var e=d.parse(b),f=a("travsky/jcf/1.0.0/view/deploy/groupDeployMgrLayout"),g=e.selectedPageUI;(void 0==g||null==g)&&(e.selectedPageUI="showAllAppUI");var h=e.groupId,i=new c.Model({groupId:h,selectedPageUI:e.selectedPageUI}),j=new f({model:i,queryString:e});jcfManager.contentRegion.show(j),j.trigger("queryAndShowPageInfo")},viewAppStatus4GroupServer:function(b){var e=a("travsky/jcf/1.0.0/view/deploy/groupServerAppStautsLayout"),f=d.parse(b),g=f.groupId,h=f.appId,i=new c.Model({groupId:g,appId:h}),j=new e({model:i,queryString:f});jcfManager.contentRegion.show(j),j.trigger("showPageInfo")},deployMgrA4ppRollback:function(b){var c=d.parse(b),e=a("travsky/jcf/1.0.0/view/deploy/rollbackLayout"),f=new e({queryString:c});jcfManager.contentRegion.show(f),f.trigger("showPageInfo")},appLogCfg:function(b){var c=d.parse(b),e=a("travsky/jcf/1.0.0/view/deploy/groupDeployAppLogCfgLayout"),f=new e({queryString:c});jcfManager.contentRegion.show(f),f.trigger("showPageInfo")},deployMgrServer:function(b){var c=a("travsky/jcf/1.0.0/view/deploy/serverAppStatusLayout"),e=d.parse(b),f=new c({queryString:e});jcfManager.contentRegion.show(f),f.trigger("queryAndShowPageInfo")},deployMgrGroupAppConfig:function(b){var c=d.parse(b),e=a("travsky/jcf/1.0.0/view/deploy/groupAppConfigLayout"),f=new e({queryString:c});jcfManager.contentRegion.show(f),f.trigger("showPageInfo")},deployMgrServerAppConfig:function(b){var c=d.parse(b),e=a("travsky/jcf/1.0.0/view/deploy/serverAppConfigLayout"),f=new e({queryString:c});jcfManager.contentRegion.show(f),f.trigger("showPageInfo")},showServiceIndex:function(b){var e=d.parse(b),f=a("travsky/jcf/1.0.0/view/service/serviceMgrLayout");(void 0==e.selectedPageUI||""==e.selectedPageUI)&&(e.selectedPageUI="serviceListUI");var g=new c.Model({selectedPageUI:e.selectedPageUI}),h=new f({model:g,queryString:e});jcfManager.contentRegion.show(h),h.trigger("showPageInfo")},serviceMgrGroup:function(b){var e=d.parse(b),f=a("travsky/jcf/1.0.0/view/service/groupServiceMgrLayout"),g=e.groupId,h=e.selectedPageUI;(void 0==h||null==h)&&(e.selectedPageUI="showServiceMgrUI");var i=new c.Model({groupId:g,selectedPageUI:e.selectedPageUI}),j=new f({model:i,queryString:e});jcfManager.contentRegion.show(j),j.trigger("showPageInfo")},groupServiceDetail:function(b){var c=a("travsky/jcf/1.0.0/view/service/serviceDetailLayout"),e=d.parse(b),f=new c({queryString:e});jcfManager.contentRegion.show(f),f.trigger("showPageInfo")},serverMoniOption:function(f){var g=d.parse(f),h="/"+jcfManager.appName+"/service/chartSearch.action",i=a("travsky/jcf/1.0.0/view/service/serverServiceChart_view"),j=e.dealAjaxRequest4JSObj(h,g);b.when(j).done(function(a){if("error"!=a.flag){var b=new c.Model(a),d=new i({model:b});jcfManager.contentRegion.show(d)}else alert("度量数据加载失败")})},groupMoniOption:function(f){var g=a("travsky/jcf/1.0.0/view/service/groupServiceChart_view"),h=d.parse(f),i="/"+jcfManager.appName+"/service/chartGroupSearch.action",j=e.dealAjaxRequest4JSObj(i,h);b.when(j).done(function(a){if("error"!=a.flag){var b=new c.Model(a),d=new g({model:b});jcfManager.contentRegion.show(d)}else alert("度量数据加载失败")})},serviceMgrServer:function(f){var g=d.parse(f),h=void 0==g.category?"":g.category,i=void 0==g.status?"":g.status,j=a("travsky/jcf/1.0.0/view/service/serverServiceMgrLayout"),k="/"+jcfManager.appName+"/service/toSearchServerServiceUI.action",l=e.dealAjaxRequestWithoutParam(k),m=g.serverId;b.when(l).done(function(a){var b=new c.Model(a);b.set("paramCategory",h),b.set("paramStatus",i),b.set("serverId",m);var d=new j({model:b,queryString:g});jcfManager.contentRegion.show(d),d.trigger("showPageInfo")})},serverServiceCfg:function(f){var g=d.parse(f),h=a("travsky/jcf/1.0.0/view/service/serverServiceCfg_view"),i="/"+jcfManager.appName+"/service/toConfigServiceUI.action",j=g.serverId,k=g.serviceId,l={serverId:j,serviceId:k},m=e.dealAjaxRequest4SimpleParam(i,l);b.when(m).done(function(a){var b=a.errorFlag;if(""==b){var d=new c.Model(a.serviceParamInfo);d.set("queueTypes",a.queueTypes||""),d.set("messageModes",a.messageModes||""),d.set("pageFlag",a.pageFlag||""),d.set("serviceId",a.baseInfo.serviceId||""),d.set("serverId",a.baseInfo.serverId||""),d.set("serviceName",a.baseInfo.serviceName||""),d.set("groupName",a.baseInfo.groupName||""),d.set("currentVersion",a.baseInfo.currentVersion||""),d.set("serverName",a.baseInfo.serverName||""),d.set("mode",a.serviceParamInfo.mode||"");var e=new h({model:d});jcfManager.contentRegion.show(e)}else alert(b)})},serviceMonitor:function(f){var g=d.parse(f),h=a("travsky/jcf/1.0.0/view/service/monitorService_view"),i=g.serverId,j=g.serviceId,k={serverId:i,serviceId:j},l="/"+jcfManager.appName+"/service/monitorService.action",m=e.dealAjaxRequest4SimpleParam(l,k);b.when(m).done(function(a){if(void 0!=a.errorFlag&&a.errorFlag.length>0)alert(a.errorFlag);else{var b=new c.Model(a),d=a.configInfo.version||"",e=a.configInfo.name||"",f=a.configInfo.requestQueueSize||"";b.set("version",d),b.set("serviceName",e),b.set("requestQueueSize",f);var i=new h({model:b,queryString:g});jcfManager.contentRegion.show(i)}})},serviceDegradeConfig:function(b){var c=d.parse(b),e=a("travsky/jcf/1.0.0/model/service/service_degrade_config_model"),f=new e,g=a("travsky/jcf/1.0.0/view/service/serviceDegradeConfig_view"),h=new g({queryString:c,model:f});jcfManager.contentRegion.show(h),f.fetch({data:d.stringify(c),reset:!0})},serviceGrayConfig:function(b){var c=d.parse(b),e=a("travsky/jcf/1.0.0/model/service/service_gray_config_model"),f=new e,g=a("travsky/jcf/1.0.0/view/service/serviceGrayConfig_view"),h=new g({queryString:c,model:f});jcfManager.contentRegion.show(h),f.fetch({data:d.stringify(c),reset:!0})},domainDataSource:function(b){var c=d.parse(b),e=a("travsky/jcf/1.0.0/collection/dataSource/dataSource_collection"),f=new e,g=a("travsky/jcf/1.0.0/view/dataSource/dataSourceList_view"),h=new g({queryString:c,collection:f});h.render();var i=setInterval(function(){"#dataSrcMgr"==window.location.hash?f.fetch({reset:!0}):window.clearInterval(i)},2e3);setTimeout("window.clearInterval("+i+");",2e4)},groupDataSource:function(b){var c=d.parse(b);if("groupDataSource"==c.selectTab||void 0==c.selectTab){var e=a("travsky/jcf/1.0.0/collection/dataSource/group_dataSource_collection"),f=new e,g=a("travsky/jcf/1.0.0/view/dataSource/groupDataSourceList_view"),h=new g({queryString:c,collection:f});h.render();var i=a("travsky/jcf/1.0.0/view/dataSource/groupDataSourceListHead_view"),j=new i({queryString:c,collection:f});j.render();var k=setInterval(function(){window.location.hash.indexOf("#dataSrcMgr/group/param")>-1?f.length>0?window.clearInterval(k):f.fetch({data:d.stringify(c),reset:!0}):window.clearInterval(k)},3e3);setTimeout("window.clearInterval("+k+");",2e4)}else if("groupDeployDataSource"==c.selectTab){var l=a("travsky/jcf/1.0.0/view/dataSource/groupDeployDataSource_view"),m=new l({queryString:c});m.render(),m.getServerList()}else if("groupDataSourceConfig"==c.selectTab){var n=a("travsky/jcf/1.0.0/view/dataSource/groupDataSourceConfig_view"),o=a("travsky/jcf/1.0.0/view/dataSource/groupDataSourceConfigHead_view"),p=a("travsky/jcf/1.0.0/model/dataSource/group_dataSource_config_model"),q=new p,r=new o({queryString:c,model:q});r.render();var s=new n({queryString:c,model:q});s.render()}},serverDataSource:function(b){var c=d.parse(b);if("dataSource"==c.selectTab||void 0==c.selectTab){var e=a("travsky/jcf/1.0.0/view/dataSource/serverDataSourceList_view"),f=new e({queryString:c});f.render()}else if("deployDataSource"==c.selectTab){var g=a("travsky/jcf/1.0.0/view/dataSource/serverDeployDataSource_view"),h=new g({queryString:c});h.render()}else if("testDataSource"==c.selectTab){var i=a("travsky/jcf/1.0.0/view/dataSource/serverTestDataSourceList_view"),j=new i({queryString:c});j.render()}},showContextIndex:function(){var a=new f;jcfManager.contentRegion.show(a)},contextMgrGroup:function(){var b=a("travsky/jcf/1.0.0/view/context/highcharts"),c=new b;c.render()},contextMgrServer:function(b){var c=d.parse(b),e=a("travsky/jcf/1.0.0/model/context/server_context_model"),f=new e;if("contextInfo"==c.selectTab||void 0==c.selectTab){var g=a("travsky/jcf/1.0.0/view/context/serverContextInfo_view"),h=new g({queryString:c,model:f});h.render()}else if("contextConfig"==c.selectTab){var i=a("travsky/jcf/1.0.0/view/context/serverContextConfig_view"),j=new i({queryString:c,model:f});j.render()}f.fetch({data:d.stringify(c)})},showLogIndex:function(){var b=a("travsky/jcf/1.0.0/collection/log/log_collection"),c=new b,d=a("travsky/jcf/1.0.0/view/log/logList_view"),e=new d({collection:c});e.render(),c.fetch({reset:!0})},logMgrGroup:function(b){var c=d.parse(b),e=a("travsky/jcf/1.0.0/view/log/logConfig_view"),f=a("travsky/jcf/1.0.0/view/log/logConfigHead_view"),g=a("travsky/jcf/1.0.0/collection/log/log_app_name_collection"),h=new g,i=a("travsky/jcf/1.0.0/model/log/log_config_model"),j=new i,k=new f({queryString:c,model:j,collection:h});k.render();var l=new e({queryString:c,model:j,collection:h});l.render(),h.fetch({data:d.stringify(c),reset:!0})}});return i}),define("travsky/jcf/1.0.0/view/sysIndex_view",["jquery","backbone","underscore","marionette"],function(a){jQuery=a("jquery"),a("backbone");var b=a("underscore"),c=a("marionette"),d=a("travsky/jcf/1.0.0/template/sysIndex.tpl"),e=c.ItemView.extend({template:b.template(d)});return e}),define("travsky/jcf/1.0.0/template/sysIndex.tpl",[],"<br/>\n\n <h2>提示</h2>\n <p><h3>这里是jcf管理中心系统首页</h3></p>\n<p><h3>请点击左侧有效的树形导航选择节点</h3></p>\n"),define("travsky/jcf/1.0.0/api/auth/UserMgrApi",["travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model"],function(a){var b=a("travsky/jcf/1.0.0/util/CommonUtil"),c={getPageUser:function(a,c){return b.dealAjaxRequest4JSObj(a,c)},getAllRoles:function(){var a="/"+b.getAppName()+"/user/getAllRoleInfo.action";return b.dealAjaxRequestWithoutParam(a)},getUserByID:function(a){var c={userID:a},d="/"+b.getAppName()+"/user/searchUserByID.action";return b.dealAjaxRequest4SimpleParam(d,c)}};return c}),define("travsky/jcf/1.0.0/view/auth/userMgrLayout",["jquery","backbone","underscore","marionette","querystring","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/api/auth/UserMgrApi","travsky/jcf/1.0.0/view/auth/userList_view","travsky/jcf/1.0.0/collection/auth/user_collection","travsky/jcf/1.0.0/model/auth/user_model","travsky/jcf/1.0.0/view/auth/userModify_view","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/auth/userDetail_view","travsky/jcf/1.0.0/view/auth/userAdd_view","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/pagebar_view2"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("querystring"),g=a("travsky/jcf/1.0.0/util/CommonUtil");a("travsky/jcf/1.0.0/api/auth/UserMgrApi");var h=a("travsky/jcf/1.0.0/view/auth/userList_view"),i=a("travsky/jcf/1.0.0/view/auth/userAdd_view"),j=a("travsky/jcf/1.0.0/template/auth/userMgrLayout.tpl"),k=a("travsky/jcf/1.0.0/view/pagebar_view2"),l=a("travsky/jcf/1.0.0/util/SidebarUtil"),m=a("travsky/jcf/1.0.0/template/auth/userSearchItem.tpl"),n=e.ItemView.extend({template:d.template(m)}),o=e.LayoutView.extend({template:d.template(j),initialize:function(a){this.queryString=a.queryString},events:{"click #selectUser":"searchUser","click #toAddUserUI":"toAddUserUI"},regions:{searchRegion:"#searchRegion",listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},toAddUserUI:function(){var a="/"+jcfManager.appName+"/user/getAllRoleList.action";b.when(g.dealAjaxRequestWithoutParam(a)).done(function(a){if("true"==a.flag){appRouter.navigate("authMgr/userMgr/add");var b=new c.Collection(a.roleList);jcfManager.contentRegion.show(new i({collection:b}))}else g.alertEsg("操作出现异常!")})},searchUser:function(){var a=l.getModuleName(),c={};void 0==this.queryString.currentPage&&(this.queryString.pageSize=jcfManager.defaultPageSize),this.queryString.currentPage=1,c.currentPage=this.queryString.currentPage,c.pageSize=this.queryString.pageSize;var d=b.trim(b("#loginId").val()),e=b.trim(b("#roleId").val());c.loginId=d,c.roleId=e,this.queryString.loginId=d,this.queryString.roleId=e,this.showPageInfo(c),appRouter.navigate(a+"/userMgr/param/"+f.stringify(this.queryString))},onShow:function(){var a={};void 0==this.queryString.currentPage&&(this.queryString.currentPage=1,this.queryString.pageSize=jcfManager.defaultPageSize),a.currentPage=this.queryString.currentPage,a.pageSize=this.queryString.pageSize,a.loginId=void 0==this.queryString.loginId?"":this.queryString.loginId,a.roleId=void 0==this.queryString.roleId?"":this.queryString.roleId,this.showPageInfo(a)
},showPageInfo:function(a){this.model.set("loginId",a.loginId),this.model.set("roleId",a.roleId),this.searchRegion.show(new n({model:this.model}));var d=this,e="/"+jcfManager.appName+"/user/searchPageUser.action",f=g.dealAjaxRequest4JSObj(e,a),i=new c.Collection,j=new c.Model;b.when(f).done(function(a){var b=a.pageBean;if("true"==a.flag){j.set(b),j.set("uriSection","userMgr"),i.set(b.recordList);var c=new h({collection:i});d.listRegion.show(c);var e=new k({model:j,queryString:d.queryString});d.pagebarRegion.show(e)}else g.showErrPage()})}});return o}),define("travsky/jcf/1.0.0/view/auth/userList_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/collection/auth/user_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/auth/user_model","travsky/jcf/1.0.0/api/auth/UserMgrApi","travsky/jcf/1.0.0/view/auth/userModify_view","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/auth/userDetail_view"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("travsky/jcf/1.0.0/template/auth/userList.tpl");a("travsky/jcf/1.0.0/collection/auth/user_collection");var f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("marionette"),h=a("travsky/jcf/1.0.0/api/auth/UserMgrApi"),i=a("travsky/jcf/1.0.0/view/auth/userModify_view"),j=a("travsky/jcf/1.0.0/model/auth/user_model"),k=a("travsky/jcf/1.0.0/view/auth/userDetail_view"),l=a("travsky/jcf/1.0.0/template/auth/userItem.tpl"),m=g.ItemView.extend({tagName:"tr",initialize:function(){this.listenTo(this.model,"change",this.render)},template:d.template(l),events:{click:"highlightName","click a.oper":"oper"},oper:function(a){a.preventDefault(),a.stopPropagation();var d=b(a.target),e=b.trim(d.attr("value")),g=d.attr("loginID");if(d.hasClass("detail"))appRouter.navigate("authMgr/userMgr/detail/param/userId="+e),b.when(h.getUserByID(e)).done(function(a){if("true"==a.flag){var b=new j(a),c=new k({model:b});jcfManager.contentRegion.show(c)}else f.alertEsg("操作出现异常!")});else if(d.hasClass("modify")){var l="/"+f.getAppName()+"/user/toModifyUserUI.action",m=b("#indexHiddenLoginId").val();appRouter.navigate("authMgr/userMgr/modify/param/userId="+e+"&loginId="+m);var n={userID:e,loginId:m},o=this;b.when(f.dealAjaxRequest4SimpleParam(l,n)).done(function(a){if("true"==a.flag){var b=new c.Model(a.userInfo);b.set("canMod",a.canMod);var d=new i({model:b,roleList:a.roleList});jcfManager.contentRegion.show(d)}else f.alertEsg("操作出现异常!")})}else if(d.hasClass("delete"))if(g==b("#indexHiddenLoginId").val())alert("当前登录用户不能被删除！");else if(confirm("确认删除?")){var p={userID:e},q="/"+f.getAppName()+"/user/deleteUserByID.action",o=this,r=f.dealAjaxRequest4SimpleParam(q,p);b.when(r).done(function(a){"true"==a.flag?o.trigger("UserMgr:userDel",o.model):f.alertEsg("删除信息失败!")})}},highlightName:function(a){a.preventDefault(),this.$el.toggleClass("warning")}}),n=g.CompositeView.extend({initialize:function(){},template:d.template(e),childView:m,childViewContainer:"tbody",childEvents:{"UserMgr:userDel":function(a,b){this.collection.remove(b),this.render()}}});return n}),define("travsky/jcf/1.0.0/template/auth/userList.tpl",[],'<table class="list table table-bordered">\n	<thead>\n		<tr>\n			<th>用户ID</th>\n			<th>用户姓名</th>\n			<th>角色</th>\n			<th>详细信息</th>\n			<th>操作</th>\n		</tr>\n	</thead>\n	<tbody>	\n	</tbody>\n</table>\n	\n\n\n'),define("travsky/jcf/1.0.0/collection/auth/user_collection",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/auth/user_model"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=a("travsky/jcf/1.0.0/util/CommonUtil"),d=c.getAppName(),e=a("travsky/jcf/1.0.0/model/auth/user_model"),f=b.Collection.extend({model:e,url:"/"+d+"/user/searchUser.action",initialize:function(){},parse:function(a){return a}});return f}),define("travsky/jcf/1.0.0/model/auth/user_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({});return c}),define("travsky/jcf/1.0.0/view/auth/userModify_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("travsky/jcf/1.0.0/template/auth/userModify.tpl"),e=a("travsky/jcf/1.0.0/util/CommonUtil"),f=a("marionette"),g=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"),h=f.ItemView.extend({template:c.template(d),initialize:function(a){this.roleList=a.roleList},events:{"blur #name":"checkName","blur #password":"checkPassword","blur #confirmpassword":"checkConfirmpassword","blur #deptId":"checkDeptId","blur #post":"checkPost","blur #tel":"checkTel","blur #email":"checkEmail","click #modifyUser":"updateUser","click #back":"back"},check2password:function(){var a="confirmpassword",c=b.trim(b("#password").val());if(c.length>0){var d=g.checkStrongPassword(a);if(d){var e=b("#password").val(),f=b("#confirmpassword").val();d=e==f?g.successInput(a):g.errInput(a,"密码不一致！")}return d}return!0},checkPassword:function(){var a="password",c=b.trim(b("#"+a).val());return 0==c.length?!0:g.checkStrongPassword(a)},checkConfirmpassword:function(){var a="confirmpassword",c=b.trim(b("#"+a).val());if(0==c.length)return!0;var d=g.checkStrongPassword(a);if(d){var e=b("#password").val(),f=b("#confirmpassword").val();d=e==f?g.successInput(a):g.errInput(a,"密码不一致！")}return d},checkName:function(){return g.checkInputMatchMaxLength("name",20)},checkDeptId:function(){return g.checkInputMatchMaxLengthCanNull("deptId",20)},checkPost:function(){return g.checkInputMatchMaxLengthCanNull("post",20)},checkTel:function(){var a="tel",c=6,d=20,e=b.trim(b("#"+a).val());if(e.length>0){var f=g.checkInputMatchGoodLength(a,c,d);return f&&(f=b.isNumeric(e)?g.successInput(a):g.errInput(a,"电话格式输入错误！")),f}return!0},checkEmail:function(){var a="email",c=b("#"+a).val(),d=!0;return c.length>0&&(d=g.checkEmail(a)),d},checkModifyUserForm:function(){return this.checkName()&&this.checkPassword()&&this.checkConfirmpassword()&&this.checkDeptId()&&this.checkPost()&&this.checkTel()&&this.checkEmail()&&this.check2password()?!0:!1},updateUser:function(){var a=this.checkModifyUserForm(),c=["id","loginID","name","password","confirmpassword","deptId","post","tel","roleId","email"];if(a){var d=e.getFormInputObj(c),f=e.getAppName(),g="/"+f+"/user/updateUser.action";b.when(e.dealAjaxRequest4JSObj(g,d)).done(function(a){var b=a.flag;"true"==b?window.history.back():e.alertEsg("修改用户信息出错!")})}},back:function(){window.history.back()},render:function(){return this.$el.html(this.template({model:this.model.toJSON(),roleList:this.roleList})),this},onShow:function(){}});return h}),define("travsky/jcf/1.0.0/template/auth/userModify.tpl",[],'<br/>\n<form class="form-horizontal" role="form">\n	\n   <input type = "hidden" id = "id" value = "<%=model.id%>" />\n	\n	\n   <div class="form-group" id = "loginIDDiv" >\n      <label for="loginID" class="col-sm-3 control-label">用户ID：</label>\n      <div class="col-sm-4">\n        <input type="text" readonly = "readonly" id="loginID"  value = "<%=model.loginID%>"  class="form-control input-sm"   placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "loginIDTip"></span></div>\n   </div>\n	\n  \n   \n   <div class="form-group" id = "nameDiv" >\n      <label for="name" class="col-sm-3 control-label">用户名称：</label>\n      <div class="col-sm-4">\n        <input type="text" id="name"  value = "<%=model.name%>"  class="form-control input-sm"   placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "nameTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "passwordDiv" >\n      <label for="password" class="col-sm-3 control-label">密码：</label>\n      <div class="col-sm-4">\n        <input type="password" id="password"  value = ""  class="form-control input-sm"   placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "passwordTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "confirmpasswordDiv" >\n      <label for="confirmpassword" class="col-sm-3 control-label">确认密码：</label>\n      <div class="col-sm-4">\n        <input type="password" id="confirmpassword"  value = ""  class="form-control input-sm"   placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "confirmpasswordTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "deptIdDiv" >\n      <label for="deptId" class="col-sm-3 control-label">部门：</label>\n      <div class="col-sm-4">\n        <input type="text" id="deptId"  value = "<%=model.deptId%>"  class="form-control input-sm"  />\n      </div>\n      <div><span class = "text-danger"></span><span id = "deptIdTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "postDiv" >\n      <label for="post" class="col-sm-3 control-label">职务：</label>\n      <div class="col-sm-4">\n        <input type="text" id="post"  value = "<%=model.post%>"  class="form-control input-sm"  />\n      </div>\n      <div><span class = "text-danger"></span><span id = "postTip"></span></div>\n   </div>\n \n   <div class="form-group" id = "telDiv" >\n      <label for="tel" class="col-sm-3 control-label">电话：</label>\n      <div class="col-sm-4">\n        <input type="text" id="tel"  value = "<%=model.tel%>"  class="form-control input-sm"  />\n      </div>\n      <div><span class = "text-danger"></span><span id = "telTip"></span></div>\n   </div>\n  \n  <div class="form-group" id = "roleIdDiv" >\n      <label for="roleId" class="col-sm-3 control-label">角色：</label>\n      <div class="col-sm-4">\n      	<% if("false"==model.canMod){ %>\n      	<input type="hidden" id="roleId" value = "<%=model.roleId%>" />\n      	<select id = "roleId" name="roleId" disabled="disabled" class = "form-control input-sm">\n      	<% }else{ %>\n      	<select id = "roleId" name="roleId" class = "form-control input-sm">\n      	<% } %>\n      			<%\n					for(var i = 0 ; i <roleList.length; i ++){\n					  if(model.roleId==roleList[i].id){\n					  	%>\n					  		<option selected = "selected" value = "<%=roleList[i].id%>" ><%=roleList[i].name%></option>\n					  	<%\n					  }else{\n						%>\n						    <option value = "<%=roleList[i].id%>" ><%=roleList[i].name%></option>\n						<%\n					  }\n					}\n				%>\n      	</select>\n      </div>\n      <div><span class = "text-danger"></span><span id = "roleIdTip"></span></div>\n   </div>\n   \n   \n   <div class="form-group" id = "emailDiv" >\n      <label for="email" class="col-sm-3 control-label">邮箱：</label>\n      <div class="col-sm-4">\n        <input type="text" id="email"  value = "<%=model.email%>"  class="form-control input-sm"  />\n      </div>\n      <div><span class = "text-danger"></span><span id = "emailTip"></span></div>\n   </div>\n   \n   <div class="form-group">\n      <div class="col-sm-offset-3">\n         <button type="button" id = "modifyUser" class="btn btn-primary">修改</button>\n      	 <button type="button" id = "back" class="btn btn-primary" >返回</button>\n      </div>\n   </div>\n</form>'),define("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2",["jquery"],function(a){var b=jQuery=a("jquery"),c={checkInputFileNameNotContainExt:function(a,c){var d=this.checkInputMatchMaxLength(a,c),e=b.trim(b("#"+a).val());if(d)if(e.indexOf(".")>-1){var f="日志保存路径不能含有后缀名";d=this.errInput(a,f)}else d=this.successInput(a);return d},checkInputMatchRegularCanNull:function(a,c,d,e){var f=b.trim(b("#"+a).val());if(0==f.length)return this.clearInput(a),!0;var g=this.checkMaxLengthValid(a,c);return g&&(g=this.checkMatchRegular(a,d,e)),g},checkInputMatchRegularAndNotNull:function(a,b,c,d){var e=this.checkNotNull(a);return e&&(e=this.checkMaxLengthValid(a,b)),e&&(e=this.checkMatchRegular(a,c,d)),e},checkInputMatchPort:function(a){var c=this.checkNotNull(a);if(c&&(c=this.checkIsPositiveInteger(a)),c){var d=b("#"+a),e=b.trim(d.val()),f=parseInt(e);if(1024>f||f>65535){var g="端口应为1024~65535之间的数字";c=this.errInput(a,g)}else c=this.successInput(a)}return c},checkInputMatchIP:function(a){var b=this.checkNotNull(a);return b&&(b=this.checkIsIP(a)),b},checkInputNotChineseStr:function(a){var b=this.checkNotNull(a);if(b){var c="不能含有中文字符!";this.checkInputContainChinese(a)?b=this.errInput(a,c):this.successInput(a)}return b},checkStrContainChinese:function(a){for(var b=0;b<a.length;b++){var c=a.charAt(b);if(c.charCodeAt()>16384&&c.charCodeAt()<65024)return!0}return!1},checkInputMatchPositiveIntegerAndMaxLengthCanNull:function(a,c){var d=b.trim(b("#"+a).val());if(0==d.length)return this.clearInput(a),!0;var e=this.checkMaxLengthValid(a,c);return e&&(e=this.checkIsPositiveInteger(a)),e},checkInputMatchPositiveIntegerAndMaxLength:function(a,b){var c=this.checkNotNull(a);return c&&(c=this.checkMaxLengthValid(a,b)),c&&(c=this.checkIsPositiveInteger(a)),c},checkInputMatchIntegerAndMaxLength:function(a,b){var c=this.checkNotNull(a);return c&&(c=this.checkMaxLengthValid(a,b)),c&&(c=this.checkInteger(a)),c},checkInputMatchInt_MinNum__MaxNum:function(a,c,d){var e=this.checkNotNull(a);if(e&&(e=this.checkIsPositiveInteger(a)),e){var f=b("#"+a),g=b.trim(f.val()),h=parseInt(g);if(h>=c&&d>=h)e=this.successInput(a);else{var i="正整数范围["+c+"-"+d+"]";e=this.errInput(a,i)}}return e},checkInputMatchNumAndMaxLength:function(a,b){var c=this.checkNotNull(a);return c&&(c=this.checkMaxLengthValid(a,b)),c&&(c=this.checkIsNum(a)),c},checkInputMatchMaxLengthCanNull:function(a,c){var d=b.trim(b("#"+a).val()),e=!0;return d.length>0?e=this.checkMaxLengthValid(a,c):this.clearInput(a),e},checkInputMatchMaxLength:function(a,b){var c=this.checkNotNull(a);return c&&(c=this.checkMaxLengthValid(a,b)),c},checkInputMatchGoodLength:function(a,b,c){var d=this.checkNotNull(a);return d&&(d=this.checkGoodLengthValid(a,b,c)),d},checkInteger:function(a){var c=b.trim(b("#"+a).val()),d=/^\d+$/,e=d.test(c);if(e)this.successInput(a);else{var f="只能输入正数";this.errInput(a,f)}return e},checkIsPositiveInteger:function(a){var c=b("#"+a),d=b.trim(c.val()),e=/^[0-9]*[1-9][0-9]*$/;if(e.test(d))return this.successInput(a);var f="只能输入正整数";return this.errInput(a,f)},checkIsNum:function(a){var c=b("#"+a),d=b.trim(c.val());if(isNaN(d)||d.indexOf(".")>-1){var e="只能输入整数";return this.errInput(a,e)}return this.successInput(a)},checkIsIP:function(a){var b=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,c="IP格式不合法",d=this.checkMatchRegular(a,b,c);return d},checkGoodString:function(a){var c=b("#"+a),d=b.trim(c.val()),e="^\\w+$";if(d.match(e))return this.successInput(a);var f="含有非法字符(只能含有字母、整数、下划线)";return this.errInput(a,f)},checkMatchRegular:function(a,c,d){var e=b("#"+a),f=b.trim(e.val());if(f.match(c))return this.successInput(a);var d="格式不符合要求("+d+")";return this.errInput(a,d)},checkGoodLengthValid:function(a,c,d){var e=b("#"+a),f=b.trim(e.val());if(f.length>d){var g="最大允许输入"+d+"位";return this.errInput(a,g)}if(f.length<c){var g="最小允许输入"+c+"位";return this.errInput(a,g)}return this.successInput(a)},checkMaxLengthValid:function(a,c){var d=b("#"+a),e=b.trim(d.val());if(e.length>c){var f="最大允许输入"+c+"位";return this.errInput(a,f)}return this.successInput(a)},checkNotNull:function(a){var c=b("#"+a),d=b.trim(c.val());return 0!=d.length?this.successInput(a):(this.errInput(a,"不能为空"),void 0)},checkStrongPassword:function(a){var c=b("#"+a),d=b.trim(c.val()),e=/[a-z]/g,f=/[A-Z]/g,g=/[0-9]/g,h=/[\x21-\x2f\x3a-\x40\x5b-\x60\x7b-\x7e]/g,i=/^[\x21-\x7e]{8,20}$/g,j=4;return i.test(d)?(e.test(d)||j--,f.test(d)||j--,g.test(d)||j--,h.test(d)||j--,j>=3?this.successInput(a):this.errInput(a,"密码应同时包含大小写字母、数字、特殊字符中的至少三种！")):this.errInput(a,"密码长度应该为8-20位")},checkIpAndPortInArray:function(a,c,d){b("#"+a);var e=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5]):([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/;for(i=0;i<c.length;i++)if(!c[i].match(e)){var d="格式不符合要求("+d+")";return this.errInput(a,d)}return this.successInput(a)},checkEmail:function(a){var c=b("#"+a),d=new RegExp(/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]+$/),e=b.trim(c.val()),f=d.test(e),g="邮箱格式有误";return f?this.successInput(a):this.errInput(a,g),f},errInput:function(a,c){var d=b("#"+a),e=b("#"+a+"Div"),f=b("#"+a+"Tip");return e.hasClass("has-success")&&(e.removeClass("has-success"),f.removeClass("text-success")),e.hasClass("has-error")||(e.addClass("has-error"),f.addClass("text-danger")),f.html(c),d.focus(),!1},successInput:function(a){var c=b("#"+a+"Div"),d=b("#"+a+"Tip");return c.hasClass("has-error")&&(c.removeClass("has-error"),d.removeClass("text-danger")),c.hasClass("has-success")||(c.addClass("has-success"),d.addClass("text-success")),d.html(""),!0},clearInput:function(a){var c=b("#"+a+"Div"),d=b("#"+a+"Tip");c.removeClass("has-error").removeClass("has-success"),d.removeClass("text-danger").removeClass("text-success"),d.html("")}};return c}),define("travsky/jcf/1.0.0/view/auth/userDetail_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model"],function(a){jQuery=a("jquery"),a("backbone");var b=a("underscore"),c=a("travsky/jcf/1.0.0/template/auth/userDetail.tpl");a("travsky/jcf/1.0.0/util/CommonUtil");var d=a("marionette"),e=d.ItemView.extend({template:b.template(c),initialize:function(){},events:{"click #back":"back"},back:function(){window.history.back()},render:function(){return this.$el.html(this.template({model:this.model.toJSON()})),this},onShow:function(){}});return e}),define("travsky/jcf/1.0.0/template/auth/userDetail.tpl",[],'<br/>\n<form class="form-horizontal" role="form">\n   <div class="form-group" id = "loginIDDiv" >\n      <label for="loginID" class="col-sm-3 control-label">用户ID：</label>\n      <div class="col-sm-4"><input type = "text" disabled="disabled"  id="loginID"  value = "<%=model.loginID%>"   class="form-control input-sm"    /></div>\n   </div>\n   \n   \n   <div class="form-group" id = "nameDiv" >\n      <label for="name" class="col-sm-3 control-label">用户名称：</label>\n      <div class="col-sm-4">\n      	<input type = "text" disabled="disabled"  id="name"  value = "<%=model.name%>"   class="form-control input-sm"    />\n      </div>\n   </div>\n   \n   \n   <div class="form-group" id = "deptIdDiv" >\n      <label for="deptId" class="col-sm-3 control-label">部门：</label>\n      <div class="col-sm-4">\n      	<input type = "text" disabled="disabled"  id="deptId"  value = "<%=model.deptId%>"   class="form-control input-sm"    />\n      </div>\n   </div>\n   \n   <div class="form-group" id = "postDiv" >\n      <label for="post" class="col-sm-3 control-label">职务：</label>\n      <div class="col-sm-4">\n      	<input type = "text" disabled="disabled"  id="post"  value = "<%=model.post%>"   class="form-control input-sm"    />\n      </div>\n   </div>\n   \n   \n    <div class="form-group" id = "telDiv" >\n      <label for="tel" class="col-sm-3 control-label">电话：</label>\n      <div class="col-sm-4">\n      	<input type = "text" disabled="disabled"  id="tel"  value = "<%=model.tel%>"   class="form-control input-sm"    />\n      </div>\n   </div>\n   \n   \n   <div class="form-group" id = "roleIdDiv" >\n      <label for="roleId" class="col-sm-3 control-label">角色：</label>\n      <div class="col-sm-4">\n      	<input type = "text" disabled="disabled"  id="roleId"  value = "<%=model.roleName%>"   class="form-control input-sm"    />\n      </div>\n   </div>\n   \n   \n   <div class="form-group" id = "emailDiv" >\n      <label for="email" class="col-sm-3 control-label">邮箱：</label>\n      <div class="col-sm-4">\n      	<input type = "text" disabled="disabled"  id="email"  value = "<%=model.email%>"   class="form-control input-sm"    />\n      </div>\n   </div>\n\n   \n     <div class="form-group">\n      <div class="col-sm-offset-3">\n      	 <button type="button" id = "back" class="btn btn-primary" >返回</button>\n      </div>\n   </div>\n</form>\n'),define("travsky/jcf/1.0.0/template/auth/userItem.tpl",[],'<td><%=loginID%></td>\n<td><%=name%></td>\n<td><%=roleName%></td>\n<td><a href = "javascript:void(0)" class = "oper detail" value = "<%=id%>" >查看</a></td>\n<td><a href = "javascript:void(0)" class ="oper modify" value = "<%=id%>" >修改</a>\n<%if(loginID!="admin"){\n%>|<a href = "javascript:void(0)" class = "oper delete" value = "<%=id%>" loginID = "<%=loginID%>" >删除</a><%\n}%>\n</td>\n'),define("travsky/jcf/1.0.0/view/auth/userAdd_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/util/SidebarUtil"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("travsky/jcf/1.0.0/template/auth/userAdd.tpl"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"),h=a("travsky/jcf/1.0.0/util/SidebarUtil"),i=c.View.extend({template:d.template(e),initialize:function(){},events:{"click #addUser":"addUser","click #back":"back","blur #loginID":"checkLoginID","blur #name":"checkName","blur #password":"checkPassword","blur #confirmpassword":"checkConfirmpassword","blur #deptId":"checkDeptId","blur #post":"checkPost","blur #tel":"checkTel","blur #email":"checkEmail"},checkAddUserForm:function(){return this.checkLoginID()&&this.checkName()&&this.checkPassword()&&this.checkConfirmpassword()&&this.checkDeptId()&&this.checkPost()&&this.checkTel()&&this.checkEmail()?!0:!1},addUser:function(){var a=this.checkAddUserForm(),c=h.getModuleName();if(a){var d=["loginID","name","password","confirmpassword","deptId","post","tel","roleId","email"],e=f.getFormInputObj(d),g="/"+jcfManager.appName+"/user/addUser.action";b.when(f.dealAjaxRequest4JSObj(g,e)).done(function(a){"true"==a.flag?appRouter.navigate(c+"/userMgr",{trigger:!0}):f.alertEsg("添加信息出错!")}).fail(function(){f.alertEsg("添加信息出错!")})}},checkLoginIdExist:function(){var a="loginID",c=!0,d="用户ID重复!",e=b.trim(b("#"+a).val()),h={loginID:e},i="/"+jcfManager.appName+"/user/checkLoginIdExist.action",j=f.dealSYNCHAjaxRequest4SimpleParam(i,h);return b.when(j).done(function(b){"true"==b.flag?g.errInput(a,d):"false"==b.flag?(g.successInput(a),c=!1):g.errInput(a,b.flag)}),c},checkLoginID:function(){var a=!1;if(a=g.checkInputMatchMaxLength("loginID",10)){var b=this.checkLoginIdExist();a=b?!1:!0}return a},checkName:function(){return g.checkInputMatchMaxLength("name",20)},checkPassword:function(){var a="password";return g.checkStrongPassword(a)},checkConfirmpassword:function(){var a="confirmpassword",c=g.checkStrongPassword(a);if(c){var d=b("#password").val(),e=b("#confirmpassword").val();c=d==e?g.successInput(a):g.errInput(a,"密码不一致！")}return c},checkDeptId:function(){return g.checkInputMatchMaxLengthCanNull("deptId",20)},checkPost:function(){return g.checkInputMatchMaxLengthCanNull("post",20)},checkTel:function(){var a="tel",c=6,d=20,e=b.trim(b("#"+a).val());if(e.length>0){var f=g.checkInputMatchGoodLength(a,c,d);return f&&(f=b.isNumeric(e)?g.successInput(a):g.errInput(a,"电话格式输入错误！")),f}return!0},checkEmail:function(){var a="email",c=b("#"+a).val(),d=!0;return c.length>0&&(d=g.checkEmail(a)),d},back:function(){window.history.back()},render:function(){return this.$el.html(this.template({list:this.collection.toJSON()})),this}});return i}),define("travsky/jcf/1.0.0/template/auth/userAdd.tpl",[],'<br/>\n<form class="form-horizontal" role="form">\n\n   <div class="form-group" id = "loginIDDiv" >\n      <label for="loginID" class="col-sm-2 control-label">用户ID：</label>\n      <div class="col-sm-3">\n        <input type="text" id="loginID"   class="form-control input-sm"  placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "loginIDTip"></span></div>\n   </div>\n   \n   \n   <div class="form-group" id = "nameDiv" >\n      <label for="name" class="col-sm-2 control-label">用户名称：</label>\n      <div class="col-sm-3">\n        <input type="text" id="name"  value = " " class="form-control input-sm"  placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "nameTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "passwordDiv" >\n      <label for="password" class="col-sm-2 control-label">密码：</label>\n      <div class="col-sm-3">\n        <input type="password" id="password"   class="form-control input-sm"  placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "passwordTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "confirmpasswordDiv" >\n      <label for="confirmpassword" class="col-sm-2 control-label">确认密码：</label>\n      <div class="col-sm-3">\n        <input type="password" id="confirmpassword"   class="form-control input-sm"  placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "confirmpasswordTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "deptIdDiv" >\n      <label for="deptId" class="col-sm-2 control-label">部门：</label>\n      <div class="col-sm-3">\n        <input type="deptId" id="deptId"   class="form-control input-sm"  placeholder="" />\n      </div>\n      <div><span id = "deptIdTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "postDiv" >\n      <label for="post" class="col-sm-2 control-label">职务：</label>\n      <div class="col-sm-3">\n        <input type="post" id="post"   class="form-control input-sm"  placeholder="" />\n      </div>\n      <div><span id = "postTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "telDiv" >\n      <label for="tel" class="col-sm-2 control-label">电话：</label>\n      <div class="col-sm-3">\n        <input type="tel" id="tel"   class="form-control input-sm"  placeholder="" />\n      </div>\n      <div><span id = "telTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "roleIdDiv" >\n      <label for="roleId" class="col-sm-2 control-label">角色：</label>\n      <div class="col-sm-3">\n      	 <select id = "roleId" name="roleId"  class = "form-control input-sm">\n         		<%\n         			for(var i = 0 ; i < list.length ; i ++){\n         			  if(i==0){\n         		%>\n         			    <option selected="selected" value = "<%=list[i].id%>" ><%=list[i].name%></option>\n         		<%	  \n         			  }else{\n         		%>\n         				<option  value = "<%=list[i].id%>" ><%=list[i].name%></option>\n         		<%  \n         			  }\n         			}\n         		%>\n		 </select>\n      </div>\n      <div><span class = "text-danger">*</span><span id = "roleIdTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "emailDiv" >\n      <label for="email" class="col-sm-2 control-label">邮箱：</label>\n      <div class="col-sm-3">\n        <input type="tel" id="email"   class="form-control input-sm"  placeholder="" />\n      </div>\n      <div><span id = "emailTip"></span></div>\n   </div>\n   \n   \n   <div class="form-group">\n      <div class="col-sm-offset-2 col-sm-10">\n         <button type="button" id = "addUser" class="btn btn-primary">添加</button>\n      	 <button type="button" id = "back" class="btn" >返回</button>\n      </div>\n   </div>\n</form>\n'),define("travsky/jcf/1.0.0/template/auth/userMgrLayout.tpl",[],'<div id = "searchRegion" ></div>\n<div  id = "listRegion"></div>\n<div id = "pagebarRegion"></div>\n\n\n\n\n\n'),define("travsky/jcf/1.0.0/view/pagebar_view2",["jquery","backbone","underscore","marionette","querystring","travsky/jcf/1.0.0/util/SidebarUtil"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/pagebar2.tpl"),f=a("querystring"),g=a("travsky/jcf/1.0.0/util/SidebarUtil"),h=d.ItemView.extend({template:c.template(e),initialize:function(a){this.options=a||{},this.listenTo(this.model,"change",this.render)},events:{"click ul.pagination li a.canClick":"goToPage","change #pageSize":"changePageSize","focus #pageSize":"selectText"},tagName:"div",className:"clearFloat",selectText:function(a){b(a.target).select()},changePageSize:function(){var a=b.trim(b("#pageSize").val()),c=/^[0-9]*[1-9][0-9]*$/;c.test(a)?(parseInt(a),this.options.queryString.pageSize=a,this.options.queryString.currentPage="1",this.refresh(this.options.queryString)):alert("只能输入正整数!")},goToPage:function(a){var c=b(a.target);this.options.queryString.pageSize=b("#pageSize").val(),this.options.queryString.currentPage=c.attr("pageNum"),this.refresh(this.options.queryString)},refresh:function(a){var c=g.getModuleName(),d=this.model.get("uriSection"),e="";void 0!=d&&null!=d&&b.trim(d).length>0&&(e="/"+d),appRouter.navigate(c+e+"/param/"+f.stringify(a),{trigger:!0})},render:function(){return this.$el.html(this.template(this.model.attributes)),this}});return h}),define("travsky/jcf/1.0.0/template/pagebar2.tpl",[],'<div class="pageInfo">\n	共 <span class="myblue"><%=recordCount%></span> 条,共 <span class="myblue"><%=pageCount%></span> 页,当前 <span class="myblue"><%=currentPage%></span>页;\n	每页<input id="pageSize" type="text" value="<%=pageSize%>"/>条\n	<input type = "hidden" id = "currentPage" value = "<%=currentPage%>"/>\n	<input type = "hidden" id = "pageCount" value = "<%=pageCount%>"/>\n</div>\n<div>\n	<ul class="pagination">\n		<li class="<% if(currentPage <= 1){ %> disabled <% } %>">\n			<a class="<% if(currentPage > 1){ %> canClick <% } %>" href="javascript:void(0)" pageNum=\'1\'>&laquo;</a>\n	    </li>\n		<%for(var i=beginPageIndex; i<=endPageIndex; i++){\n			if(currentPage!=i){\n		%>\n			<li>\n				<a class="canClick" href="javascript:void(0)" pageNum=\'<%=i%>\'><%=i%></a>\n			</li>\n		<%\n			}else{\n		 %>\n			<li class="active">\n				<a href="javascript:void(0)" pageNum=\'<%=i%>\'><%=i%></a>\n			</li>\n		 <%\n		 	}\n		}\n		%>\n		<li class="<% if(currentPage >= pageCount){ %> disabled <% } %>">\n			<a class="<% if(currentPage < pageCount){ %> canClick <% } %>" href="javascript:void(0)" pageNum=\'<%=pageCount%>\'>&raquo;</a>\n		</li>\n </ul>\n</div>'),define("travsky/jcf/1.0.0/template/auth/userSearchItem.tpl",[],'<table class="search table">\n	<tr>\n		<td align="middle">用户ID :</td>\n		<td class="col-md-3">\n			<input type = "text" id = "loginId" value = "<%=loginId%>" class="form-control" />\n		</td>\n		<td align="middle">角色 : </td>\n		<td class="col-md-3">\n			<select id = "roleId" class="form-control">\n			<option selected= \'selected\' value = "">全部</option>\n			<% \n				for(var i=0; i < roleList.length; i++){ \n				var c = roleList[i] ;\n				if(roleId==c.id){\n					%><option value = \'<%=c.id%>\' selected= \'selected\' ><%=c.name%></option><%	\n				}else{\n					%><option value = \'<%=c.id%>\' ><%=c.name%></option><%	\n				}\n			}%>\n			</select>\n		</td>\n		<td><button class = "btn" id = "selectUser" type = "button">查询</button></td>\n		<td><button class = "btn" id = "toAddUserUI" type = "button">新增用户</button></td>\n	</tr>\n </table'),define("travsky/jcf/1.0.0/view/auth/roleMgrLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/pagebar_view2","travsky/jcf/1.0.0/view/auth/roleAdd_view","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","ztree-core","ztree-excheck"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("querystring"),h=a("travsky/jcf/1.0.0/template/auth/userMgrLayout.tpl"),i=a("travsky/jcf/1.0.0/template/auth/roleItem.tpl"),j=a("travsky/jcf/1.0.0/template/auth/roleList.tpl"),k=a("travsky/jcf/1.0.0/template/auth/roleSearchItem.tpl"),l=a("travsky/jcf/1.0.0/util/SidebarUtil"),m=a("travsky/jcf/1.0.0/view/pagebar_view2"),l=a("travsky/jcf/1.0.0/util/SidebarUtil"),n=a("travsky/jcf/1.0.0/view/auth/roleAdd_view"),o=e.ItemView.extend({tagName:"table",className:"table",template:d.template(k),events:{"click #toAddRoleUIBtn":"toAddRoleUI"},toAddRoleUI:function(){var a=l.getModuleName();
appRouter.navigate(a+"/roleMgr/add");var b=new n;jcfManager.contentRegion.show(b),b.trigger("showPageInfo")}}),p=e.ItemView.extend({initialize:function(){var a=b.trim(b("#roleId").val()),c=b.trim(b("#roleName").val());this.model.set("queryConditionId",a),this.model.set("queryConditionName",c)},tagName:"tr",template:d.template(i),events:{click:"highlightName","click a.view":"toViewRoleUI","click a.update":"toUpdateRoleUI","click a.delete":"deleteRole"},highlightName:function(a){a.preventDefault(),this.$el.toggleClass("warning")},toViewRoleUI:function(a){a.preventDefault(),a.stopPropagation();var b="view",c=this.model.get("id"),d=this.model.get("queryConditionId"),e=this.model.get("queryConditionName"),f={operatorType:b,roleId:c,queryConditionId:d,queryConditionName:e};appRouter.navigate("authMgr/roleMgr/update/param/"+g.stringify(f),{trigger:!0})},toUpdateRoleUI:function(a){a.preventDefault(),a.stopPropagation();var b="update",c=this.model.get("id"),d=this.model.get("queryConditionId"),e=this.model.get("queryConditionName"),f={operatorType:b,roleId:c,queryConditionId:d,queryConditionName:e};appRouter.navigate("authMgr/roleMgr/update/param/"+g.stringify(f),{trigger:!0})},deleteRole:function(a){a.preventDefault(),a.stopPropagation();var c=this.model.get("id"),d=this.hasUser(c),e=this;if(!d&&confirm("确定删除?")){var g={roleId:c},h="/"+jcfManager.appName+"/auth/deleteRole.action",i=f.dealAjaxRequest4SimpleParam(h,g);b.when(i).done(function(a){"true"==a.flag&&(f.alertEsg("删除成功!"),e.remove())})}},hasUser:function(a){var c=!0,d="/"+jcfManager.appName+"/auth/hasUser.action",e={roleId:a},g=f.dealSYNCHAjaxRequest4SimpleParam(d,e);return b.when(g).done(function(a){"true"==a.hasUser?f.alertEsg("该角色下还有用户未删除，不能删除该角色!"):c=!1}),c}}),q=e.CompositeView.extend({childView:p,tagName:"table",className:"list table table-bordered",childViewContainer:"tbody",template:d.template(j)}),r=e.LayoutView.extend({template:d.template(h),initialize:function(a){this.on("showPageInfo",this.showPageInfo),this.queryString=a.queryString},regions:{searchRegion:"#searchRegion",listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},events:{"click #searchRoleBtn":"searchRole"},searchRole:function(){var a=l.getModuleName(),c=b.trim(b("#roleId").val());if(isNaN(c))f.alertEsg("角色ID必须为数字!");else{var d=b.trim(b("#roleName").val()),e=b.trim(b("#pageSize").val()),h={};h.currentPage="1",h.pageSize=e,h.roleId=c,h.roleName=d;var i={roleId:c,roleName:d,currentPage:"1",pageSize:e};appRouter.navigate(a+"/roleMgr/param/"+g.stringify(i)),this.showPageInfoPrivate(h)}},showPageInfo:function(){var a=void 0==this.queryString.roleId?"":this.queryString.roleId,b=void 0==this.queryString.roleName?"":this.queryString.roleName,d=new c.Model({roleId:a,roleName:b}),e=new o({model:d});this.searchRegion.show(e);var f={};f.currentPage=void 0==this.queryString.currentPage?"1":this.queryString.currentPage,f.pageSize=void 0==this.queryString.pageSize?"":this.queryString.pageSize,f.roleId=a,f.roleName=b,this.showPageInfoPrivate(f)},showPageInfoPrivate:function(a){var d=this,e="/"+jcfManager.appName+"/auth/searchRole.action",g=f.dealAjaxRequest4JSObj(e,a);b.when(g).done(function(b){if("true"==b.flag){var e=new c.Collection(b.pageBean.recordList),g=new q({collection:e});d.listRegion.show(g);var h=new c.Model(b.pageBean),i={roleId:a.roleId,roleName:a.roleName,currentPage:a.currentPage,pageSize:a.pageSize};h.set("uriSection","roleMgr");var j=new m({model:h,queryString:i});d.pagebarRegion.show(j)}else f.alertEsg("查询出错!")})}});return r}),define("travsky/jcf/1.0.0/template/auth/roleItem.tpl",[],'<td><%=id%></td>\n<td><%=name%></td>\n<td><%=description%></td>\n<td> <a class = "view myhand">查看</a></td>\n\n\n<td>\n	<%if(name==\'系统管理员\'){\n		%>无操作<%\n	}else{\n		%>\n			<a class = "update myhand">修改</a>|\n			<%if(currentLoginRoleName==name){\n				%>删除<%\n			}else{\n				%><a class = "delete myhand">删除</a><%\n			}\n	}%>\n	\n</td>'),define("travsky/jcf/1.0.0/template/auth/roleList.tpl",[],"<thead>\n	<tr>\n		<th>角色ID</th>\n		<th>角色名称</th>\n		<th>描述</th>\n		<th>详细信息</th>\n		<th>操作</th>\n	</tr>\n</thead>\n<tbody>	\n</tbody>\n"),define("travsky/jcf/1.0.0/template/auth/roleSearchItem.tpl",[],'<tbody>\n  <tr>\n     <td width = "8%">角色ID：</td>\n     <td width = "20%"><input type = "text" id = "roleId" value = "<%=roleId%>"/></td>\n     <td width = "10%">角色名称：</td>\n     <td width = "20%"><input type = "text" id = "roleName" value = "<%=roleName%>"/></td>\n     <td width = "10%"><button id = "searchRoleBtn" class = "btn" >查询</button></td>\n     <td width = "10%"><button id = "toAddRoleUIBtn" class = "btn">新增角色</button></td>\n     <td width = "*%"></td>\n  </tr>\n</tbody>\n'),define("travsky/jcf/1.0.0/view/auth/roleAdd_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","ztree-core","ztree-excheck"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/auth/roleAdd.tpl"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2");a("ztree-core")(b),a("ztree-excheck")(b);var h=d.ItemView.extend({template:c.template(e),initialize:function(){this.on("showPageInfo",this.showPageInfo)},events:{"click #addRoleBtn":"addRole","click #backLastPageBtn":"backLastPage","blur #name":"checkName","blur #description":"checkDescription"},backLastPage:function(){window.history.back()},checkName:function(){var a="name",b=g.checkInputMatchMaxLength(a,30);return b&&(b=this.checkNameExist()),b},checkDescription:function(){var a="description",b=g.checkInputMatchMaxLength(a,30);return b},addRole:function(){var a=this.checkName();if(a&&(a=this.checkDescription()),a){for(var c=b.fn.zTree.getZTreeObj("roleTree1"),d=c.getCheckedNodes(!0),e=b.fn.zTree.getZTreeObj("roleTree2"),f=e.getCheckedNodes(!0),g="",h=0;h<d.length;h++)g+=","+d[h].id;for(var h=0;h<f.length;h++)g+=","+f[h].id;if(!(g.length>0))return b("#powerTip").html("角色权限不能为空"),void 0;if(b("#powerTip").html(""),g=g.substring(1),a=this.checkRoleDouble(g)){var i=b.trim(b("#name").val()),j=b.trim(b("#description").val()),k=b.trim(b("#menuIds").val()),l={};l.name=i,l.description=j,l.menuIds=k,this.submitForm(l)}}},submitForm:function(a){var c="/"+jcfManager.appName+"/auth/addRole.action",d=f.dealAjaxRequest4JSObj(c,a);b.when(d).done(function(a){"true"==a.flag?appRouter.navigate("authMgr/roleMgr",{trigger:!0}):alert("添加失败！")})},checkRoleDouble:function(a){var c="/"+jcfManager.appName+"/auth/isRepower.action",d={idall:a},e=f.dealSYNCHAjaxRequest4SimpleParam(c,d),g=!1;return b.when(e).done(function(c){"prosave"==c.result?(b("#powerTip").html("所选权限组合已存在"),g=!1):"bnfp"==c.result?(b("#powerTip").html("你不能分配大于你的权限的权限！"),g=!1):(g=!0,b("#powerTip").html(""),b("#menuIds").val(a))}),g},checkNameExist:function(){var a="name",c=b.trim(b("#"+a).val()),d=!0,e="/"+jcfManager.appName+"/auth/checkRoleNameExist.action",h={name:c},i=f.dealSYNCHAjaxRequest4SimpleParam(e,h);return b.when(i).done(function(b){"true"==b.flag?(g.errInput(a,"角色名称已存在!"),d=!1):"false"==b.flag?(g.successInput(a),d=!0):(d=!1,alert("检查出错!"))}),d},showPageInfo:function(){var a={check:{enable:!0,chkboxType:{Y:"ps",N:"ps"}},data:{simpleData:{enable:!0}}},c="/"+jcfManager.appName+"/auth/addRoleForward.action",d=f.dealAjaxRequestWithoutParam(c);b.when(d).done(function(c){if("true"==c.flag){var d=c.resultStr1,e=c.resultStr2;b.fn.zTree.init(b("#roleTree1"),a,d),b.fn.zTree.init(b("#roleTree2"),a,e)}else alert("查询角色出错!")})}});return h}),define("travsky/jcf/1.0.0/template/auth/roleAdd.tpl",[],'<br/>\n<form class="form-horizontal" id = "addRoleForm"  role="form" method= "POST">\n	  <div class="form-group" id = "nameDiv" >\n	      <label for="name" class="col-sm-3 control-label">角色名称：</label>\n	      <div class="col-sm-4">\n	        <input type="text" id="name"   class="form-control input-sm"  placeholder="必填项" />\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "nameTip"></span></div>\n   	  </div>\n	  <div class="form-group" id = "descriptionDiv" >\n	      <label for="description" class="col-sm-3 control-label">角色描述：</label>\n	      <div class="col-sm-4">\n	        <input type="text" id="description"   class="form-control input-sm"  placeholder="必填项" />\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "descriptionTip"></span></div>\n   	  </div>\n</form>\n\n<input type = "hidden" id = "menuIds" value = "" />\n\n<div class="form-group">\n  <div class="col-sm-offset-2">\n     <button type="button" id = "backLastPageBtn" class="btn">返回</button>\n     <button type="button" id = "addRoleBtn" class="btn btn-primary">提交</button>\n     <span id = "powerTip" class = "text-danger"></span>\n  </div>\n</div>\n\n<div class="zTreeDemoBackground" style="padding-left:120px;width:270px;display:table-cell;">\n	<ul id="roleTree1" class="ztree"></ul>\n</div>\n<div class="zTreeDemoBackground" style="padding-left:150px;width:270px;display:table-cell;">\n	<ul id="roleTree2" class="ztree"></ul>\n</div>\n'),define("travsky/jcf/1.0.0/view/auth/roleUpdate_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","ztree-core","ztree-excheck","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/confirm_view"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/auth/roleUpdate.tpl"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2");a("ztree-core")(b),a("ztree-excheck")(b);var h=a("travsky/jcf/1.0.0/model/confirm_model"),i=a("travsky/jcf/1.0.0/view/confirm_view"),j=d.ItemView.extend({template:c.template(e),initialize:function(){this.on("showPageInfo",this.showPageInfo)},events:{"click #updateRoleBtn":"updateRole","blur #name":"checkName","blur #description":"checkDescription","click #backLastBtn":"backLastPage"},backLastPage:function(){window.history.back()},checkName:function(){if("view"==this.model.get("operatorType"))return!0;var a="name",b=g.checkInputMatchMaxLength(a,30);return b&&(b=this.checkNameExist()),b},checkDescription:function(){if("view"==this.model.get("operatorType"))return!0;var a="description",b=g.checkInputMatchMaxLength(a,30);return b},updateRole:function(){var a=this.checkName();if(a&&(a=this.checkDescription()),a){for(var c=b.fn.zTree.getZTreeObj("roleTree1"),d=c.getCheckedNodes(!0),e=b.fn.zTree.getZTreeObj("roleTree2"),f=e.getCheckedNodes(!0),g="",j=0;j<d.length;j++)g+=","+d[j].id;for(var j=0;j<f.length;j++)g+=","+f[j].id;var k=b.trim(b("#roleId").val());if(!(g.length>0)){var l=new h({btnok:"确认",btncl:"关闭"});l.set("msg","角色权限不能为空！");var m=new i({model:l});return jcfManager.dialogRegion.show(m),m.confirm(),void 0}if(b("#powerTip").html(""),g=g.substring(1),a=this.checkRoleDouble(g,k)){var n=b.trim(b("#name").val()),o=b.trim(b("#description").val()),p=b.trim(b("#menuIds").val()),q={};q.id=k,q.name=n,q.description=o,q.menuIds=p,this.submitForm(q)}}},submitForm:function(a){var c="/"+jcfManager.appName+"/auth/updateRole.action",d=f.dealAjaxRequest4JSObj(c,a),e=new h({btnok:"确认",btncl:"关闭"});b.when(d).done(function(a){if("true"==a.flag){var c=b.trim(b("#name").val());b("#orgRoleName").val(c),e.set("msg","修改信息成功！");var d=new i({model:e});jcfManager.dialogRegion.show(d),d.confirm()}else{e.set("msg","修改信息失败！");var d=new i({model:e});jcfManager.dialogRegion.show(d),d.confirm()}})},checkRoleDouble:function(a,c){var d="/"+jcfManager.appName+"/auth/isRepower4Update.action",e={idall:a,modifyRoleId:c},g=f.dealSYNCHAjaxRequest4SimpleParam(d,e),h=!1;return b.when(g).done(function(c){"prosave"==c.result?(b("#powerTip").html("所选权限组合已存在"),h=!1):"bnfp"==c.result?(b("#powerTip").html("你不能分配大于你的权限的权限！"),h=!1):(h=!0,b("#powerTip").html(""),b("#menuIds").val(a))}),h},checkNameExist:function(){var a=b.trim(b("#orgRoleName").val()),c="name",d=b.trim(b("#"+c).val());if(a==d)return!0;var e=!0,h="/"+jcfManager.appName+"/auth/checkRoleNameExist.action",i={name:d},j=f.dealSYNCHAjaxRequest4SimpleParam(h,i);return b.when(j).done(function(a){"true"==a.flag?(g.errInput(c,"角色名称已存在!"),e=!1):"false"==a.flag?(g.successInput(c),e=!0):(e=!1,alert("检查出错!"))}),e},showPageInfo:function(){var a={check:{enable:!0,chkboxType:{Y:"ps",N:"ps"}},data:{simpleData:{enable:!0}}},c=this.model.get("resultStr1"),d=this.model.get("resultStr2");b.fn.zTree.init(b("#roleTree1"),a,c),b.fn.zTree.init(b("#roleTree2"),a,d)}});return j}),define("travsky/jcf/1.0.0/template/auth/roleUpdate.tpl",[],'<br/>\n<form class="form-horizontal" id = "addRoleForm"  role="form" method= "POST">\n\n	  <input type = "hidden" id = "roleId" value = "<%=roleForm.id%>"/>\n	  <input type = "hidden" id = "orgRoleName" value = "<%=roleForm.name%>"/>\n	  \n	  <div class="form-group" id = "nameDiv" >\n	      <label for="name" class="col-sm-3 control-label">角色名称：</label>\n	      <div class="col-sm-4">\n	        <input type="text"  <%if(operatorType=="view"){%>readonly="readonly"<%}%>   id="name"  value = "<%=roleForm.name%>" class="form-control input-sm"  placeholder="必填项" />\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "nameTip"></span></div>\n   	  </div>\n	  <div class="form-group" id = "descriptionDiv" >\n	      <label for="description" class="col-sm-3 control-label">角色描述：</label>\n	      <div class="col-sm-4">\n	        <input type="text" id="description" <%if(operatorType=="view"){%>readonly="readonly"<%}%> value = "<%=roleForm.description%>"  class="form-control input-sm"  placeholder="必填项" />\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "descriptionTip"></span></div>\n   	  </div>\n</form>\n\n<input type = "hidden" id = "menuIds" value = "" />\n\n\n<div class="form-group">\n    <div class="col-sm-offset-2">\n	   <button type="button" id = "backLastBtn" class="btn">返回</button>\n		<%if(operatorType!="view"){%>\n			 <button type="button" id = "updateRoleBtn" class="btn btn-primary">提交</button>\n		<%}%>\n    </div>\n</div>\n\n<div class="zTreeDemoBackground" style="padding-left:120px;width:270px;display:table-cell;">\n	<ul id="roleTree1" class="ztree"></ul>\n</div>\n<div class="zTreeDemoBackground" style="padding-left:150px;width:270px;display:table-cell;">\n	<ul id="roleTree2" class="ztree"></ul>\n</div>\n'),define("travsky/jcf/1.0.0/model/confirm_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({defaults:function(){return{msg:"内容",title:"提示",btnok:"确定",btncl:"取消",ccFlag:"true"}}});return c}),define("travsky/jcf/1.0.0/view/confirm_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/model/confirm_model","bs-modal"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/confirm.tpl"),f=a("travsky/jcf/1.0.0/model/confirm_model");a("bs-modal")(b);var g=d.ItemView.extend({initialize:function(){this.model=this.model||new f,this.listenTo(this.model,"change",this.render)},template:c.template(e),onShow:function(){var a=b("#ycj-confirm");a.modal({backdrop:"static"}),a.modal("show")},confirm:function(a){var c=b("#ycj-confirm");a&&a instanceof Function&&(c.find(".confirmOK").bind("click",function(){a(!0)}),c.find(".confirmCancel").bind("click",function(){a(!1)}))}});return g}),define("travsky/jcf/1.0.0/template/confirm.tpl",[],' <div id="ycj-confirm" class="modal">\n    <div class="modal-dialog modal-sm">\n      <div class="modal-content">\n        <div class="modal-header">\n          <%if(ccFlag=="true"){%>\n              <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>\n          <%}%>\n          <h5 class="modal-title"><i class="fa fa-exclamation-circle"></i> <%=title%></h5>\n        </div>\n        <div class="modal-body small">\n          <p><span class = "text-info"><%=msg%></span></p>\n        </div>\n        <div class="modal-footer" >\n          <button type="button" class="btn btn-primary confirmOK" data-dismiss="modal"><%=btnok %></button>\n          <button type="button" class="btn btn-default confirmCancel" data-dismiss="modal"><%=btncl %></button>\n        </div>\n      </div>\n    </div>\n</div>'),define("travsky/jcf/1.0.0/view/server/serverMgrLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/server/serverAdd_view","travsky/jcf/1.0.0/view/server/server","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/server/AuthCheck4ServerUtil","travsky/jcf/1.0.0/view/server/groupAdd_view","querystring","travsky/jcf/1.0.0/view/server/checkCacheGroup","travsky/jcf/1.0.0/view/server/global_view","bs-alert","travsky/jcf/1.0.0/view/server/serverAddNext_view","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/server/nodeControllerCfg_view","travsky/jcf/1.0.0/view/pagebar_view2","travsky/jcf/1.0.0/view/server/domainParamCfg_view","icheck"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/server/serverMgrLayout.tpl"),g=a("travsky/jcf/1.0.0/util/CommonUtil"),h=a("travsky/jcf/1.0.0/view/server/serverAdd_view"),i=a("travsky/jcf/1.0.0/view/server/nodeControllerCfg_view"),j=a("travsky/jcf/1.0.0/view/pagebar_view2"),k=a("querystring"),l=a("travsky/jcf/1.0.0/util/SidebarUtil"),m=a("travsky/jcf/1.0.0/view/server/AuthCheck4ServerUtil"),n=a("travsky/jcf/1.0.0/template/server/serverItem.tpl"),o=a("travsky/jcf/1.0.0/template/server/serverList.tpl"),p=e.ItemView.extend({initialize:function(){this.model.on("change",this.render)},template:d.template(n),tagName:"tr",events:{click:"highlightName","click td.singleServerInfoTd a":"showSingleServerInfo","click td.groupServerInfoTd a":"showGroupServerInfo"},showSingleServerInfo:function(a){a.preventDefault(),a.stopPropagation();var c=b.trim(b(a.target).attr("href")),d={serverId:c},e=l.getModuleName();appRouter.navigate(e+"/server/param/"+k.stringify(d),{trigger:!0})},showGroupServerInfo:function(a){a.preventDefault(),a.stopPropagation();var c=b.trim(b(a.target).attr("href")),d=l.getModuleName(),e={groupId:c};appRouter.navigate(d+"/group/param/"+k.stringify(e),{trigger:!0})},highlightName:function(a){a.preventDefault(),this.$el.toggleClass("warning")},render:function(){return this.$el.html(this.template(this.model.attributes)),this}}),q=e.CompositeView.extend({tagName:"table",className:"table table-bordered",template:d.template(o),childView:p,childViewContainer:"tbody"}),r=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString;var b=m.getNodeControllerCfgFlag();this.model.set("nodeControllerFlag",b);var c=m.getServerAddFlag();this.model.set("serverAddFlag",c);var d=m.getDomainParamCfgFlag();this.model.set("domainParamCfgAuthFlag",d),this.on("showPageInfo",this.showPageInfo)},tagName:"div",template:d.template(f),regions:{listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},events:{"click #serverMgrNav li a":"clickNavItem"},showPageInfo:function(){var a=this.queryString.selectedPageUI;this.showPageInfo2(a)},showPageInfo2:function(a){"serverListUI"==a?this.showServerListUI():"serverAddUI"==a?this.showServerAddUI():"nodeControllerUI"==a?this.showNodeControllerCfgUI():"domainParamCfgUI"==a&&this.showDomainParamCfgUI()},clickNavItem:function(a){a.stopPropagation(),a.preventDefault();var c=l.getModuleName(),d=b(a.target).attr("href"),e=b(a.target).parent(),f=e.parent();e.hasClass("active")||(f.find("li").removeClass("active"),e.addClass("active"),this.queryString.selectedPageUI=d,appRouter.navigate(c+"/param/"+k.stringify(this.queryString)),this.showPageInfo2(d))},showServerListUI:function(){var a="/"+g.getAppName()+"/server/searchPageServer.action",d=new c.Collection,e=new c.Model,f=this;void 0==f.queryString.currentPage&&(f.queryString.currentPage=1,f.queryString.pageSize=jcfManager.defaultPageSize);var h={currentPage:f.queryString.currentPage,pageSize:f.queryString.pageSize},i=g.dealAjaxRequest4SimpleParam(a,h),k=2e3,l=30,m=k*l,n=window.location.hash;b("#freshPage4IndexServerUrl").val(n),b.when(i).done(function(a){e.set(a),d.set(a.recordList);var c=new q({collection:d});f.listRegion.show(c);var g=new j({model:e,queryString:f.queryString});if(f.pagebarRegion.show(g),d.length>0){var h=setInterval(f.updatePageServerStatus,k,d);b("#freshPage4IndexServerFlag").val(h),setTimeout("window.clearInterval("+h+")",m)}})},updatePageServerStatus:function(a){var d=window.location.hash,e=b("#freshPage4IndexServerUrl").val(),f=b("#freshPage4IndexServerFlag").val();if(d==e){var h="/"+jcfManager.appName+"/server/searchGroupServersStatus.action",i=g.dealAjaxRequestWithoutParam(h);b.when(i).done(function(b){var d=new c.Model(b);a.each(function(a){var b=a.get("serverName"),c=d.get(""+b);void 0!=c&&a.set("processStatus",""+c)})})}else window.clearInterval(f)},showServerAddUI:function(){var a="/"+jcfManager.appName+"/server/toAddServerUI.action",d=this;b.when(g.dealAjaxRequestWithoutParam(a)).done(function(a){var b=new c.Model(a);d.listRegion.show(new h({model:b})),d.pagebarRegion.empty()})},showNodeControllerCfgUI:function(){var a="/"+jcfManager.appName+"/server/toNodeControllerConfigUI.action",d=this;b.when(g.dealAjaxRequestWithoutParam(a)).done(function(a){if("true"==a.flag){var b=new c.Model(a);d.listRegion.show(new i({model:b})),d.pagebarRegion.empty()}else alert("跳转到节点控制器配置页面出错")}).fail(function(){alert("跳转到节点控制器配置页面出错")})},showDomainParamCfgUI:function(){var d=a("travsky/jcf/1.0.0/view/server/domainParamCfg_view"),e=this,f="/"+jcfManager.appName+"/server/readDomainParamCfgInfo.action",h=g.dealAjaxRequestWithoutParam(f);b.when(h).done(function(a){if("true"==a.flag){var b=new c.Model(a.param);e.listRegion.show(new d({model:b})),e.pagebarRegion.empty()}else alert("获取域参数信息粗错")})}});return r}),define("travsky/jcf/1.0.0/template/server/serverMgrLayout.tpl",[],'<div>\n	<ul class="nav nav-tabs" id = "serverMgrNav">    \n		<li  <%if("serverListUI"==selectedPageUI){%>class = "active"<%}%> ><a href="serverListUI">服务器列表</a></li>\n	    <%if(serverAddFlag=="true"){\n			%><li  <%if("serverAddUI"==selectedPageUI){%>class = "active"<%}%> ><a  href="serverAddUI" >服务器添加</a></li><%    \n  	    }%>\n	    <%if(nodeControllerFlag=="true"){\n			%><li  <%if("nodeControllerUI"==selectedPageUI){%>class = "active"<%}%> ><a  href="nodeControllerUI" >节点控制器配置</a></li><%\n  	    }%>\n  	    <%if(domainParamCfgAuthFlag=="true"){%>\n	    	<li <%if(\'domainParamCfgUI\'==selectedPageUI){%>class = "active"<%}%>   ><a  href="domainParamCfgUI" >域参数配置</a></li>\n  	    <%}%>\n	</ul>\n</div>\n<div  id = "listRegion"></div>\n<div id = "pagebarRegion"></div>\n<input id = "freshPage4IndexServerFlag" type = "hidden" />\n<input id = "freshPage4IndexServerUrl" type = "hidden" />\n\n\n\n\n'),define("travsky/jcf/1.0.0/view/server/serverAdd_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/server/server","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/server/AuthCheck4ServerUtil","travsky/jcf/1.0.0/view/server/groupAdd_view","querystring","travsky/jcf/1.0.0/view/server/checkCacheGroup","travsky/jcf/1.0.0/view/server/global_view","bs-alert","travsky/jcf/1.0.0/view/server/serverAddNext_view","travsky/jcf/1.0.0/util/SidebarUtil"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/server/serverAdd.tpl"),g=a("travsky/jcf/1.0.0/util/CommonUtil"),h=a("travsky/jcf/1.0.0/view/server/server");a("bs-modal")(b);var i=a("travsky/jcf/1.0.0/view/server/AuthCheck4ServerUtil"),j=e.ItemView.extend({initialize:function(){var a=i.getGroupAddFlag();this.model.set("groupAddFlag",a)},template:d.template(f),onShow:function(){this.changeGroupName(),this.getRegistryBindPort()},events:{"change #groupName":"changeGroupName","click #addServerNext":"addServerNext","blur #serverName":"checkServerName","blur #rmiRegistryPort":"checkServerManagePort","blur #rmiServerPort":"checkServerDeployPort","blur #httpPort":"checkHttpPort","blur #sshPort":"checkSshPort","blur #java_Memory":"checkjava_Memory","blur #java_Max_Perm_Mem":"checkjava_Max_Perm_Mem","blur #direct_mem_size":"checkdirect_mem_size","blur #gcFileNum":"checkgcFileNum","blur #gcFileSize":"checkgcFileSize","blur #bindPort":"checkBindPort","blur #loadFactor":"checkloadfactor","blur #memoryPoolSize":"checkMemoryPoolSize","blur #blockSize":"checkBlockSize","blur #heapMessageLimit":"checkHeapMessageLimit","blur #channelQueueSize":"checkchannelQueueSize","blur #channelConcurrent":"checkchannelConcurrent","blur #connectionRetry":"checkconnectionRetry","blur #heartBeatTime":"checkheartBeatTime","blur #messageBodyLimit":"checkmessageBodyLimit","change #registryIp":"getRegistryBindPort","blur #registryPort":"checkserverport","blur #synchTime":"checksynchtime","blur #maxIdleTime":"checkMaxidletime","blur #persistQueueFullPath":"checkpersistQueueFullPath","change #registryIp":"getRegistryBindPort","click #toAddGroupUIBtn":"toAddGroupUI","blur #statisticsSyncTime":"checkStatisticsSyncTime","blur #statisticsPath":"checkStatisticsPath","blur #jvmHeapAlert":"checkJvmHeapAlert","blur #jvmHeapBlock":"checkJvmHeapBlock","blur #maxSize4Store":"checkMaxSize4Store","blur #cacheNodeAlert":"checkCacheNodeAlert"},toAddGroupUI:function(){var d=a("travsky/jcf/1.0.0/view/server/groupAdd_view"),e="/"+jcfManager.appName+"/server/toAddGroupUI.action",f=g.dealAjaxRequestWithoutParam(e);b.when(f).done(function(a){var e=new c.Model(a);e.set("checkGroupCategory","1"),jcfManager.dialogRegion.show(new d({model:e})),b("#addGroupModal").modal("show")})},addServerNext:function(){var d=a("travsky/jcf/1.0.0/view/server/serverAddNext_view"),e=h.checkForm(),f=this;if(e.flag){var i=e.inputObj,j=i.serverCategory;i.groupNameText=b("#groupName").find("option:selected").text();var k=new c.Model,l="/"+jcfManager.appName+"/server/toAddServerNextUI.action",m={serverCategory:i.serverCategory,groupName:i.groupName};b.when(g.dealAjaxRequest4SimpleParam(l,m)).done(function(a){k.set(a);var c=f.getGroupNameStr(a.groupName);k.set("categoryName",c),k.set("serverCategory",j);var e={serverName:i.serverName,rmiRegistryHost:i.rmiRegistryHost,rmiRegistryPort:i.rmiRegistryPort,rmiServerPort:i.rmiServerPort};k.set(e);var g=new d({model:k,inputObj:i});jcfManager.dialogRegion.show(g),b("#addServerNextDialog").modal("show")}).fail(function(){alert("添加信息失败")})}},getGroupNameStr:function(a){var b="";return b="registryGroup"==a?"服务库":"contextGroup"==a?"上下文":"adapterGroup"==a?"适配":"cacheGroup"==a?"cache":"JCF"},checkServerName:function(){h.checkServerName()},checkServerManagePort:function(){h.checkServerManagePort()},checkServerDeployPort:function(){h.checkServerDeployPort()},checkHttpPort:function(){h.checkHttpPort()},checkSshPort:function(){h.checkSshPort()},checkjava_Memory:function(){h.checkjava_Memory()},checkdirect_mem_size:function(){h.checkdirect_mem_size()},checkjava_Max_Perm_Mem:function(){h.checkjava_Max_Perm_Mem()},checkgcFileNum:function(){h.checkgcFileNum()},checkgcFileSize:function(){h.checkgcFileSize()},checkBindPort:function(){h.checkBindPort()},checkloadfactor:function(){h.checkloadfactor()},checkMemoryPoolSize:function(){h.checkMemoryPoolSize()},checkBlockSize:function(){h.checkBlockSize()},checkHeapMessageLimit:function(){h.checkHeapMessageLimit()},checkchannelQueueSize:function(){h.checkchannelQueueSize()},checkchannelConcurrent:function(){h.checkchannelConcurrent()},checkconnectionRetry:function(){h.checkconnectionRetry()},checkheartBeatTime:function(){h.checkheartBeatTime()},checkmessageBodyLimit:function(){h.checkmessageBodyLimit()},getRegistryBindPort:function(){h.getRegistryBindPort()},checkserverport:function(){h.checkserverport()},checksynchtime:function(){h.checksynchtime()},checkMaxidletime:function(){h.checkMaxidletime()},checkmaxFileSize:function(){h.checkmaxFileSize()},checkmaxBackupIndex:function(){h.checkmaxBackupIndex()},checkpersistQueueFullPath:function(){h.checkpersistQueueFullPath()},checkStatisticsSyncTime:function(){h.checkStatisticsSyncTime()},checkStatisticsPath:function(){h.checkStatisticsPath()},checkJvmHeapAlert:function(){h.checkJvmHeapAlert()},checkJvmHeapBlock:function(){h.checkJvmHeapBlock()},checkMaxSize4Store:function(){h.checkMaxSize4Store()},checkCacheNodeAlert:function(){h.checkCacheNodeAlert()},getRegistryBindPort:function(){var a=b("#registryIp").val(),c="/"+jcfManager.appName+"/server/getRegistryBindPort.action",d={registryIp:a},e=g.dealAjaxRequest4SimpleParam(c,d);b.when(e).done(function(a){b("#registryPort").val(a.bindPort)})},getCacheSpecialInputId:function(){var a=["statisticsSyncTime","statisticsPath","jvmHeapAlert","jvmHeapBlock","cacheNodeMaxCount","cacheNodeAlert"];return a},hideCacheSpecialInputParam:function(){for(var a=this.getCacheSpecialInputId(),c=0;c<a.length;c++){var d=a[c]+"Div";b("#"+d).hide()}},showCacheSpecialInputParam:function(){for(var a=this.getCacheSpecialInputId(),c=0;c<a.length;c++){var d=a[c]+"Div";b("#"+d).show()}},changeGroupName:function(){var a=b("#groupName").find("option:selected").text();"contextGroup"==a?(b("#serverCategory").html("<option value='3' selected = 'selected'>上下文服务器</option>"),b("#serverCategory").attr("disabled",!0),this.contextOption(),b("#serverName").val("contextServer")):"registryGroup"==a?(b("#serverCategory").html("<option value='4' selected = 'selected'>服务库</option>"),b("#serverCategory").attr("disabled",!0),b("#serverNameDiv").hasClass("has-error")&&(b("#serverNameDiv").removeClass("has-error"),b("#serverNameTip").html("")),this.serviceOption()):"adapterGroup"==a?(b("#serverCategory").html("<option value='1' selected = 'selected'>适配服务器</option>"),b("#serverCategory").attr("disabled",!0),this.adapterServerOption(),b("#serverName").val("adapterServer")):"cacheGroup"==a?(b("#serverCategory").html("<option value='7' selected = 'selected'>cache服务器</option>"),b("#serverCategory").attr("disabled",!0),this.cacheServerOption(),b("#serverName").val("cacheServer")):(b("#serverCategory").html("<option value='1' selected = 'selected'>JCF服务器</option>"),b("#serverCategory").attr("disabled",!1),this.serverOption(),b("#serverName").val(""))},checkAllRegServerIsExist:function(){var a="/"+jcfManager.appName+"/server/checkAllRegServerIsExist.action";b.when(g.dealAjaxRequestWithoutParam(a)).done(function(a){""!==a&&("0"===a.count?(b("#serverName").val("registryServer"),b("#serverName").addClass("readonly"),b("#serverName").attr("readonly",!0)):"1"===a.count?"registryServer"===a.serverName?(b("#serverName").val("registryBakServer"),b("#serverName").addClass("readonly"),b("#serverName").attr("readonly",!0)):(b("#serverName").val("registryServer"),b("#serverName").addClass("readonly"),b("#serverName").attr("readonly",!0)):(b("#serverName").val(""),b("#serverName").addClass("readonly"),b("#serverName").attr("readonly",!0)))})},cacheServerOption:function(){this.showCacheSpecialInputParam(),b("#serverName").val(""),b("#serverName").removeClass("readonly"),b("#serverName").attr("readonly",!1),b("#httpPortDiv").hide(),b("#sshPortDiv").hide(),b("#java_MemoryDiv").hide(),b("#java_Perm_MemDiv").hide(),b("#karaf_optsDiv").hide(),b("#direct_mem_sizeDiv").hide(),b("#gcoptionsDiv").hide(),b("#rmiRegistryPortDiv").hide(),b("#rmiServerPortDiv").hide(),b("#bindPortDiv").hide(),b("#loadFactorDiv").hide(),b("#memoryPoolSizeDiv").hide(),b("#blockSizeDiv").hide(),b("#heapMessageLimitDiv").hide(),b("#channelQueueSizeDiv").hide(),b("#channelConcurrentDiv").hide(),b("#connectionRetryDiv").hide(),b("#heartBeatTimeDiv").hide(),b("#messageBodyLimitDiv").hide(),b("#sendMessageLimitDiv").hide(),b("#registryIpDiv").hide(),b("#registryPortDiv").hide(),b("#synchTimeDiv").hide(),b("#maxIdleTimeDiv").hide(),b("#auditLevelDiv").hide(),b("#java_Max_Perm_MemDiv").hide(),b("#heapDumpPathDiv").hide(),b("#gcFileDiv").hide(),b("#gcRotationDiv").hide(),b("#gcFileNumDiv").hide(),b("#serverLogTypeDiv").hide(),b("#gcFileSizeDiv").hide(),b("#persistQueueFullPathDiv").hide(),b("#serverLogLevelDiv").show(),b("#serverLogType4CacheDiv").show()
},contextOption:function(){this.hideCacheSpecialInputParam(),b("#serverName").val(""),b("#serverName").removeClass("readonly"),b("#serverName").attr("readonly",!1),b("#httpPortDiv").hide(),b("#sshPortDiv").hide(),b("#java_MemoryDiv").hide(),b("#java_Perm_MemDiv").hide(),b("#karaf_optsDiv").hide(),b("#direct_mem_sizeDiv").hide(),b("#gcoptionsDiv").hide(),b("#rmiRegistryPortDiv").hide(),b("#rmiRegistryPort").val(""),b("#rmiServerPort").val(""),b("#rmiServerPortDiv").hide(),b("#bindPortDiv").hide(),b("#bindPort").val(""),b("#loadFactorDiv").hide(),b("#memoryPoolSizeDiv").hide(),b("#blockSizeDiv").hide(),b("#heapMessageLimitDiv").hide(),b("#channelQueueSizeDiv").hide(),b("#channelConcurrentDiv").hide(),b("#connectionRetryDiv").hide(),b("#heartBeatTimeDiv").hide(),b("#messageBodyLimitDiv").hide(),b("#sendMessageLimitDiv").hide(),b("#registryIpDiv").hide(),b("#registryPortDiv").hide(),b("#synchTimeDiv").hide(),b("#maxIdleTimeDiv").hide(),b("#auditLevelDiv").hide(),b("#java_Max_Perm_MemDiv").hide(),b("#heapDumpPathDiv").hide(),b("#gcFileDiv").hide(),b("#gcRotationDiv").hide(),b("#gcFileNumDiv").hide(),b("#gcFileSizeDiv").hide(),b("#serverLogTypeDiv").hide(),b("#serverLogLevelDiv").hide(),b("#serverLogType4CacheDiv").hide(),b("#persistQueueFullPathDiv").hide()},serviceOption:function(){this.hideCacheSpecialInputParam(),this.checkAllRegServerIsExist(),b("#httpPortDiv").hide(),b("#sshPortDiv").show(),b("#sshPort").val("6101"),b("#java_MemoryDiv").show(),b("#java_Perm_MemDiv").show(),b("#karaf_optsDiv").show(),b("#direct_mem_sizeDiv").hide(),b("#gcoptionsDiv").hide(),b("#rmiRegistryPortDiv").show(),b("#rmiRegistryPort").val("6103"),b("#rmiServerPortDiv").show(),b("#rmiServerPort").val("6102"),b("#bindPortDiv").show(),b("#bindPort").val("6100"),b("#loadFactorDiv").hide(),b("#memoryPoolSizeDiv").hide(),b("#blockSizeDiv").hide(),b("#heapMessageLimitDiv").hide(),b("#channelQueueSizeDiv").hide(),b("#channelConcurrentDiv").hide(),b("#connectionRetryDiv").hide(),b("#heartBeatTimeDiv").hide(),b("#messageBodyLimitDiv").hide(),b("#sendMessageLimitDiv").hide(),b("#registryIpDiv").hide(),b("#registryPortDiv").hide(),b("#synchTimeDiv").show(),b("#maxIdleTimeDiv").show(),b("#auditLevelDiv").hide(),b("#serverLogLevelDiv").show(),b("#serverLogTypeDiv").show(),b("#serverLogType4CacheDiv").hide(),b("#persistQueueFullPathDiv").hide()},adapterServerOption:function(){this.hideCacheSpecialInputParam(),b("#serverName").val(""),b("#serverName").removeClass("readonly"),b("#serverName").attr("readonly",!1),b("#serverName").val(""),b("#serverName").removeClass("readonly"),b("#serverName").attr("readonly",!1),b("#httpPortDiv").show(),b("#httpPort").val("6260"),b("#sshPortDiv").show(),b("#sshPort").val("6160"),b("#java_MemoryDiv").show(),b("#java_Perm_MemDiv").show(),b("#karaf_optsDiv").show(),b("#direct_mem_sizeDiv").show(),b("#gcoptionsDiv").show(),b("#rmiRegistryPortDiv").show(),b("#rmiRegistryPort").val("6460"),b("#rmiServerPortDiv").show(),b("#rmiServerPort").val("6360"),b("#bindPortDiv").show(),b("#bindPort").val("6060"),b("#loadFactorDiv").show(),b("#memoryPoolSizeDiv").show(),b("#blockSizeDiv").show(),b("#heapMessageLimitDiv").show(),b("#channelQueueSizeDiv").show(),b("#channelConcurrentDiv").show(),b("#connectionRetryDiv").show(),b("#heartBeatTimeDiv").show(),b("#messageBodyLimitDiv").show(),b("#sendMessageLimitDiv").show(),b("#registryIpDiv").show(),b("#registryPortDiv").show(),b("#synchTimeDiv").show(),b("#maxIdleTimeDiv").hide(),b("#auditLevelDiv").show(),b("#serverLogTypeDiv").show(),b("#serverLogLevelDiv").show(),b("#serverLogType4CacheDiv").hide(),b("#persistQueueFullPathDiv").show()},serverOption:function(){this.hideCacheSpecialInputParam(),b("#serverName").val(""),b("#serverName").removeClass("readonly"),b("#serverName").attr("readonly",!1),b("#httpPortDiv").show(),b("#httpPort").val("6280"),b("#sshPortDiv").show(),b("#sshPort").val("6180"),b("#java_MemoryDiv").show(),b("#java_Perm_MemDiv").show(),b("#karaf_optsDiv").show(),b("#direct_mem_sizeDiv").show(),b("#gcoptionsDiv").show(),b("#rmiRegistryPortDiv").show(),b("#rmiRegistryPort").val("6480"),b("#rmiServerPortDiv").show(),b("#rmiServerPort").val("6380"),b("#bindPortDiv").show(),b("#bindPort").val("6080"),b("#loadFactorDiv").show(),b("#memoryPoolSizeDiv").show(),b("#blockSizeDiv").show(),b("#heapMessageLimitDiv").show(),b("#channelQueueSizeDiv").show(),b("#channelConcurrentDiv").show(),b("#connectionRetryDiv").show(),b("#heartBeatTimeDiv").show(),b("#messageBodyLimitDiv").show(),b("#sendMessageLimitDiv").show(),b("#registryIpDiv").show(),b("#registryPortDiv").show(),b("#synchTimeDiv").show(),b("#maxIdleTimeDiv").hide(),b("#auditLevelDiv").show(),b("#serverLogType4CacheDiv").hide(),b("#serverLogLevelDiv").show(),b("#persistQueueFullPathDiv").show(),b("#serverLogTypeDiv").show()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});return j}),define("travsky/jcf/1.0.0/template/server/serverAdd.tpl",[],'<br>\n<form class="form-horizontal" id = "addServerForm"  role="form" method= "POST">\n   <div class="form-group">\n      <label for="groupName" class="col-sm-3 control-label">服务器组名称：</label>\n      <div class="col-sm-4">\n         <select id = "groupName"  class  = "form-control input-sm">\n         <%\n       		for(var i = 0 ; i < groupList.length;i++){\n       		%><option  <%if(i==0){%>selected = "selected"<%} %>   value = "<%=groupList[i].groupId%>"><%=groupList[i].groupName%></option><%\n       		}\n         %>\n         </select>\n      </div>\n      <div class="col-sm-2"><button type = "button" id = "toAddGroupUIBtn"  class = "btn myhand  <%if(groupAddFlag!="true"){%>disabled<%}%>">添加分组</button></div>\n   </div>\n   \n   <div class="form-group" id = "serverNameDiv" >\n      <label for="serverName" class="col-sm-3 control-label">服务器名称：</label>\n      <div class="col-sm-4">\n        <input type="text" id="serverName"   class="form-control input-sm"  placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "serverNameTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "serverCategoryDiv">\n      <label for="serverCategory" class="col-sm-3 control-label">服务器类型：</label>\n      <div class="col-sm-4">\n      	 <select  id="serverCategory" class="form-control input-sm">\n			 <option value="1">JCF服务器</option>	\n		 </select>\n      </div>\n       <div><span id = "serverCategoryTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "rmiRegistryHostDiv">\n      <label for="rmiRegistryHost" class="col-sm-3 control-label">服务器IP：</label>\n      <div class="col-sm-4">\n         <select id="rmiRegistryHost"   class="form-control input-sm">\n         	<%for(var i = 0 ; i < nodeIpList.length; i ++){\n         	    if(i==0){\n            %>\n            		<option selected = "selected" value = "<%=nodeIpList[i].serverIp%>"><%=nodeIpList[i].serverIp%></option>\n            <%   \n         	    }else{\n         	%>\n         			<option  value = "<%=nodeIpList[i].serverIp%>"><%=nodeIpList[i].serverIp%></option>\n         	<%\n         	    }\n         	}\n         	%>\n         	\n         </select>\n      </div>\n      <div><span class = "text-danger">*</span><span id = "rmiRegistryHostTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "rmiRegistryPortDiv" >\n      <label for="rmiRegistryPort" class="col-sm-3 control-label">JMX Registry端口：</label>\n      <div class="col-sm-4">\n         <input type="text" id="rmiRegistryPort"   class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "rmiRegistryPortTip"></span></div>\n   </div>\n   \n   \n   <div class="form-group" id = "rmiServerPortDiv">\n      <label for="rmiServerPort" class="col-sm-3 control-label">JMX Server端口：</label>\n      <div class="col-sm-4">\n         <input type="text" id="rmiServerPort"  class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "rmiServerPortTip" ></span></div>\n   </div>\n   \n   <div class="form-group" id= "httpPortDiv" >\n      <label for="httpPort" class="col-sm-3 control-label">HTTP端口：</label>\n      <div class="col-sm-4">\n         <input type="text" id="httpPort"  class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "httpPortTip"></span></div>\n   </div>\n   \n   \n   <div class="form-group" id = "sshPortDiv" >\n      <label for="sshPort" class="col-sm-3 control-label">OSGI Console端口：</label>\n      <div class="col-sm-4">\n         <input type="text" id="sshPort"   class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "sshPortTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "java_MemoryDiv" >\n      <label for="java_Memory" class="col-sm-3 control-label">堆内存大小：</label>\n      <div class="col-sm-4 ">\n         <input type="text" id="java_Memory"   class="form-control input-sm" value="1536M"  placeholder="单位为kK,mM,gG">\n      </div>\n      <div><span>(单位:kK,mM,gG)&nbsp;</span><span id = "java_MemoryTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "java_Max_Perm_MemDiv" >\n      <label for="java_Max_Perm_Mem" class="col-sm-3 control-label">永久代堆大小：</label>\n      <div class="col-sm-4">\n         <input type="text" id="java_Max_Perm_Mem"   class="form-control input-sm"  placeholder="单位为kK,mM,gG">\n      </div>\n      <div><span>(单位:kK,mM,gG)&nbsp;</span><span id = "java_Max_Perm_MemTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "karaf_optsDiv" >\n      <label for="karaf_opts" class="col-sm-3 control-label">JVM扩展参数：</label>\n      <div class="col-sm-4">\n         <input type="text" id="karaf_opts"  class="form-control input-sm"  placeholder="配置的JVM参数超过系统内存值后将导致错误">\n      </div>\n      <div><span id = "karaf_optsTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "direct_mem_sizeDiv" >\n      <label for="direct_mem_size" class="col-sm-3 control-label">最大可分配系统内存：</label>\n      <div class="col-sm-4">\n         <input type="text" id="direct_mem_size"  class="form-control input-sm"  placeholder="不建议配置">\n      </div>\n      <div><span class = "text-info">(单位:kK,mM,gG)&nbsp;</span><span id = "direct_mem_sizeTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "gcoptionsDiv" >\n      <label for="gcoptions" class="col-sm-3 control-label">GC选项：</label>\n      <div class="col-sm-4">\n         <input type="text" id="gcoptions"  class="form-control input-sm"  placeholder="">\n      </div>\n      <div><span id = "gcoptionsTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "heapDumpPathDiv" >\n      <label for="heapDumpPath" class="col-sm-3 control-label">堆内存快照的存储文件路径：</label>\n      <div class="col-sm-4">\n         <input type="text" id="heapDumpPath"   class="form-control input-sm"  placeholder="">\n      </div>\n      <div><span id = "heapDumpPathTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "gcFileDiv" >\n      <label for="gcFile" class="col-sm-3 control-label">GC日志的文件名和路径：</label>\n      <div class="col-sm-4">\n         <input type="text" id="gcFile"   class="form-control input-sm"  placeholder="JDK 7版本开始兼容">\n      </div>\n      <div><span id = "gcFileTip"></span></div>\n   </div>\n   \n    <div class="form-group" id = "gcRotationDiv" >\n      <label for="gcRotation" class="col-sm-3 control-label">GC日志自动转储：</label>\n      <div class="col-sm-4">\n      	 <select id="gcRotation"  class="form-control input-sm" placeholder="JDK 7版本开始兼容">\n			<option value="-XX:+UseGCLogFileRotation">true</option>\n			<option value="" selected="selected">false</option>\n		 </select>\n      </div>\n       <div><span id = "gcRotationTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "gcFileNumDiv" >\n      <label for="gcFileNum" class="col-sm-3 control-label">GC日志绕接数目：</label>\n      <div class="col-sm-4">\n         <input type="text" id="gcFileNum"   class="form-control input-sm"  placeholder="JDK 7版本开始兼容">\n      </div>\n      <div ><span id = "gcFileNumTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "gcFileSizeDiv" >\n      <label for="gcFileSize" class="col-sm-3 control-label">GC日志大小：</label>\n      <div class="col-sm-4">\n         <input type="text" id="gcFileSize"   class="form-control input-sm"  placeholder="单位为kK,mM,gG">\n      </div>\n      <div><span>(单位:kK,mM,gG)&nbsp;</span><span id = "gcFileSizeTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "bindPortDiv" >\n      <label for="bindPort" class="col-sm-3 control-label">监听端口：</label>\n      <div class="col-sm-4">\n         <input type="text" id="bindPort"   class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "bindPortTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "loadFactorDiv">\n      <label for="loadFactor" class="col-sm-3 control-label">负载均衡因子：</label>\n      <div class="col-sm-4">\n         <input type="text" id="loadFactor" class="form-control input-sm" value="10"  placeholder="必填项,正整数">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "loadFactorTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "memoryPoolSizeDiv" >\n      <label for="memoryPoolSize" class="col-sm-3 control-label">系统内存池的大小：</label>\n      <div class="col-sm-4">\n         <input type="text" id="memoryPoolSize"   class="form-control input-sm" value="0"  placeholder="必填项目，单位：M">\n      </div>\n      <div><span class = "text-danger">*</span><span>(单位:M)&nbsp;</span><span  id = "memoryPoolSizeTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "blockSizeDiv" >\n      <label for="blockSize" class="col-sm-3 control-label">系统内存块大小：</label>\n      <div class="col-sm-4">\n         <input type="text" id="blockSize" class="form-control input-sm"  value="8" placeholder="必填项，单位：KB">\n      </div>\n      <div><span class = "text-danger">*</span><span>(单位:KB)&nbsp;</span><span id = "blockSizeTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "heapMessageLimitDiv" >\n      <label for="heapMessageLimit" class="col-sm-3 control-label">JVM内存中消息体最大值：</label>\n      <div class="col-sm-4">\n         <input type="text" id="heapMessageLimit"   class="form-control input-sm" value="-1" placeholder="必填项，单位：Byte">\n      </div>\n      <div><span class = "text-danger">*</span><span>(单位:Byte)&nbsp;</span><span id = "heapMessageLimitTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "channelQueueSizeDiv" >\n      <label for="channelQueueSize" class="col-sm-3 control-label">发送队列大小：</label>\n      <div class="col-sm-4">\n         <input type="text" id="channelQueueSize"   class="form-control input-sm" value="2048"  placeholder="必填项">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "channelQueueSizeTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "channelConcurrentDiv" >\n      <label for="channelConcurrent" class="col-sm-3 control-label">连接并发数：</label>\n      <div class="col-sm-4">\n         <input type="text" id="channelConcurrent"   class="form-control input-sm"  value="2" placeholder="必填项">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "channelConcurrentTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "connectionRetryDiv" >\n      <label for="connectionRetry" class="col-sm-3 control-label">链接重试次数：</label>\n      <div class="col-sm-4">\n         <input type="text" id="connectionRetry"   class="form-control input-sm"  value="3" placeholder="必填项">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "connectionRetryTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "heartBeatTimeDiv" >\n      <label for="heartBeatTime" class="col-sm-3 control-label">JCF服务器通信的心跳间隔：</label>\n      <div class="col-sm-4">\n         <input type="text" id="heartBeatTime"   class="form-control input-sm" value="30"  placeholder="必填项，单位：秒（s）">\n      </div>\n      <div><span class = "text-danger">*</span><span>(单位：秒(s))&nbsp;</span><span id = "heartBeatTimeTip"></span></div>\n   </div>\n   \n  \n   <input type="hidden" id="messageBodyLimit"    value="500" >\n   \n   <div class="form-group" id = "registryIpDiv" >\n      <label for="registryIp" class="col-sm-3 control-label">注册库IP：</label>\n      <div class="col-sm-4">\n         <select id = "registryIp" class="form-control input-sm">\n         	<%for(var i = 0 ; i < nodeIpList.length; i ++){\n         	    if(i==0){\n            %>\n            		<option selected = "selected" value = "<%=nodeIpList[i].serverIp%>"><%=nodeIpList[i].serverIp%></option>\n            <%   \n         	    }else{\n         	%>\n         			<option  value = "<%=nodeIpList[i].serverIp%>"><%=nodeIpList[i].serverIp%></option>\n         	<%\n         	    }\n         	}\n         	%>\n         </select>\n      </div>\n   </div>\n   \n   <div class="form-group" id = "registryPortDiv" >\n      <label for="registryPort" class="col-sm-3 control-label">注册库端口：</label>\n      <div class="col-sm-4">\n         <input type="text" id="registryPort"   class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "registryPortTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "synchTimeDiv" >\n      <label for="synchTime" class="col-sm-3 control-label">注册库同步间隔：</label>\n      <div class="col-sm-4">\n         <input type="text" id="synchTime"   class="form-control input-sm" value="5" placeholder="必填项，单位：秒（s）">\n      </div>\n      <div><span class = "text-danger">*</span><span>(单位：秒(s))&nbsp;</span><span id = "synchTimeTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "maxIdleTimeDiv" >\n      <label for="maxIdleTime" class="col-sm-3 control-label">JCF服务器失效超时：</label>\n      <div class="col-sm-4">\n         <input type="text" id="maxIdleTime"   class="form-control input-sm" value="180" placeholder="必填项，单位：秒（s）">\n      </div>\n      <div><span class = "text-danger">*</span><span>(单位：秒(s))&nbsp;</span><span  id = "maxIdleTimeTip" ></span></div>\n   </div>\n   \n   \n   <!--新需求修改，跟踪带相关配置修改-->\n   \n   <div class="form-group" id = "auditLevelDiv" >\n      <label for="auditLevel" class="col-sm-3 control-label">跟踪带日志输出规则：</label>\n      <div class="col-sm-4">\n      	 <select id="auditLevel" class="form-control input-sm" >\n      	 	<%for(var i = 0 ; i < tracLogKeyList.length ; i ++){\n      	 		if(i==0){\n      	 			%><option selected = "selected" value="<%=tracLogKeyList[i]%>"><%=tracLogValueList[i]%></option><%\n      	 		}else{\n      	 			%><option value="<%=tracLogKeyList[i]%>"><%=tracLogValueList[i]%></option><%\n      	 		}\n      	 	}%>\n		 </select>\n      </div>\n   </div>\n   \n   \n   \n   <div class="form-group" id = "persistQueueFullPathDiv" >\n      <label for="persistQueueFullPath" class="col-sm-3 control-label">服务器持久化队列文件保存路径：</label>\n      <div class="col-sm-4">\n         <input type="text" id="persistQueueFullPath"   class="form-control input-sm" value="/opt/applog/jcf/"  placeholder="">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "persistQueueFullPathTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "serverLogLevelDiv" >\n      <label for="serverLogLevel" class="col-sm-3 control-label">服务器日志级别：</label>\n      <div class="col-sm-4">\n         <select id = "serverLogLevel" class="form-control input-sm" >\n         	<%for(var i = 0 ; i < serverLogLevels.length ; i++){\n         		if(i==0){\n         	%>\n         			<option selected = "selected" value = "<%=serverLogLevels[i]%>"><%=serverLogLevels[i]%></option>\n         	<%\n         		}else{\n         	%>\n         			<option value = "<%=serverLogLevels[i]%>"><%=serverLogLevels[i]%></option>\n         	<%	\n         		}\n         	}%>\n         </select>\n      </div>\n   </div>\n   \n   <div class="form-group" id = "serverLogTypeDiv" >\n      <label for="serverLogType" class="col-sm-3 control-label">服务器日志类型：</label>\n      <div class="col-sm-4">\n         <select id = "serverLogType" class="form-control input-sm" >\n         	<%\n         		for(var i = 0 ; i < serverLogTypeList.length;i++){\n         		   if(i==0){\n            %>\n            			<option selected = "selected" value = "<%=serverLogTypeList[i].key%>"><%=serverLogTypeList[i].value%></option>\n            <%\n         		   }else{\n         	%>\n         				<option value = "<%=serverLogTypeList[i].key%>"><%=serverLogTypeList[i].value%></option>\n         	<%\n         		   }\n         		}\n         	%>\n         </select>\n      </div>\n   </div>\n   \n   \n    <!--1.3新增，cache服务器日志类型只有两种,(按天，大小)-->\n    <div class="form-group" id = "serverLogType4CacheDiv" >\n      <label for="serverLogType4Cache" class="col-sm-3 control-label">服务器日志类型：</label>\n      <div class="col-sm-4">\n         <select id = "serverLogType4Cache" class="form-control input-sm" >\n         	<option value="daily" selected="selected">按天记录</option>\n			<option value="roll">按大小记录</option>\n         </select>\n      </div>\n   </div>\n   \n   <!--1.3修改增加参数-->\n   \n   \n   <input type = "hidden" id = "jvmMemory4Cache" value = "<%=cacheGroupMap.jvmMemory%>"/>\n   \n   <div class="form-group" id = "statisticsSyncTimeDiv" >\n      <label for="statisticsSyncTime" class="col-sm-3 control-label">统计数据同步时间：</label>\n      <div class="col-sm-4">\n         <input type="text" id="statisticsSyncTime"  value = "<%=cacheGroupMap.statisticsSyncTime%>"  class="form-control input-sm"   placeholder="">\n      </div>\n      <div><span class = "text-danger">*</span><span class= "text-info">(单位:秒(s))</span><span id = "statisticsSyncTimeTip"></span></div>\n   </div>\n   \n   <!--监控文件目标路径隐藏-->\n   <input type="hidden" id="statisticsPath"  value = "<%=cacheGroupMap.statisticsPath%>"  class="form-control input-sm"   placeholder="">\n   <!--监控文件目标路径隐藏-->\n   \n   \n   \n   <div class="form-group" id = "jvmHeapAlertDiv" >\n      <label for="jvmHeapAlert" class="col-sm-3 control-label">JVM内存报警阈值(百分比)：</label>\n      <div class="col-sm-4">\n         <input type="text" id="jvmHeapAlert" value = "<%=cacheGroupMap.jvmHeapAlert%>"   class="form-control input-sm"   placeholder="">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "jvmHeapAlertTip"></span></div>\n   </div>\n   \n   \n   <div class="form-group" id = "jvmHeapBlockDiv" >\n      <label for="jvmHeapBlock" class="col-sm-3 control-label">JVM内存阻塞阈值(百分比)：</label>\n      <div class="col-sm-4">\n         <input type="text" id="jvmHeapBlock" value = "<%=cacheGroupMap.jvmHeapBlock%>"  class="form-control input-sm"   placeholder="">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "jvmHeapBlockTip"></span></div>\n   </div>\n   \n   \n   <div class="form-group" id = "maxSize4StoreDiv" >\n      <label for="maxSize4Store" class="col-sm-3 control-label">存储最大个数：</label>\n      <div class="col-sm-4">\n         <input type="text" id="maxSize4Store"  value = "<%=cacheGroupMap.maxSize4Store%>"  class="form-control input-sm"  placeholder="">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "maxSize4StoreTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "cacheNodeAlertDiv" >\n      <label for="cacheNodeAlert" class="col-sm-3 control-label">存储报警阈值(个)：</label>\n      <div class="col-sm-4">\n         <input type="text" id="cacheNodeAlert"  value = "<%=cacheGroupMap.cacheNodeAlert%>" class="form-control input-sm"   placeholder="">\n      </div>\n      <div><span class = "text-danger">*</span><span id = "cacheNodeAlertTip"></span></div>\n   </div>\n   \n   \n</form>\n	\n<div class="form-group">\n  <div class="col-sm-offset-2 col-sm-10">\n     <button type="button" id = "addServerNext" class="btn btn-primary">下一步</button>\n  </div>\n</div>\n\n\n\n\n'),define("travsky/jcf/1.0.0/view/server/server",["jquery","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","backbone","underscore","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"],function(require,exports,module){var $=jQuery=require("jquery"),util=require("travsky/jcf/1.0.0/util/CommonUtil"),InputUtil=require("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"),AlertView=require("travsky/jcf/1.0.0/view/alert_view"),ServerUtil={getFormInputInfos:function(){for(var formIds=["groupName","serverName","serverCategory","rmiRegistryHost","rmiRegistryPort","rmiServerPort","httpPort","sshPort","java_Memory","java_Max_Perm_Mem","karaf_opts","direct_mem_size","gcoptions","heapDumpPath","gcFile","gcRotation","gcFileNum","gcFileSize","bindPort","loadFactor","memoryPoolSize","blockSize","heapMessageLimit","channelQueueSize","channelConcurrent","connectionRetry","heartBeatTime","messageBodyLimit","registryIp","registryPort","synchTime","maxIdleTime","auditLevel","persistQueueFullPath","serverLogLevel","serverLogType","statisticsSyncTime","statisticsPath","jvmHeapAlert","jvmHeapBlock","maxSize4Store","cacheNodeAlert","serverLogType4Cache","jvmMemory4Cache"],obj={},i=0;i<formIds.length;i++){var curId=formIds[i],val=$("#"+curId).val(),evalStr="obj."+curId+"='"+val+"' ;";eval(evalStr)}return obj.bindAddress=obj.rmiRegistryHost,obj},checkForm:function(){return"1"===$("#serverCategory").val()?this.checkJCFServerForm():"3"===$("#serverCategory").val()?this.checkMemcacheServerForm():"4"===$("#serverCategory").val()?this.checkRegistryServerForm():"7"===$("#serverCategory").val()?this.checkCacheServerForm():!1},checkCacheServerForm:function(){var a={};if(a.flag=!1,this.checkServerName()&&this.checkStatisticsSyncTime()&&this.checkStatisticsPath()&&this.checkJvmHeapAlert()&&this.checkJvmHeapBlock()&&this.checkMaxSize4Store()&&this.checkCacheNodeAlert()&&!this.checkJcfCacheServerExistByServerIp()){a.flag=!0;var b=this.getFormInputInfos();a.inputObj=b}return a},checkJCFServerForm:function(){var a={};if(a.flag=!1,this.checkRmiRegistryHost()&&this.checkServerName()&&this.checkServerManagePort()&&this.checkServerDeployPort()&&this.checkSshPort()&&this.checkHttpPort()&&this.checkBindPort()&&this.checkloadfactor()&&this.checkMemoryPoolSize()&&this.checkBlockSize()&&this.checkHeapMessageLimit()&&this.checkchannelQueueSize()&&this.checkchannelConcurrent()&&this.checkconnectionRetry()&&this.checkheartBeatTime()&&this.checkmessageBodyLimit()&&this.checksynchtime()&&this.checkserviceip()&&this.checkserverport()&&this.checkjava_Memory()&&this.checkjava_Max_Perm_Mem()&&this.checkmaxFileSize()&&this.checkmaxBackupIndex()&&this.checkpersistQueueFullPath()){a.flag=!0;var b=this.getFormInputInfos();a.inputObj=b}return a},checkRegistryServerForm:function(){var a={};if(a.flag=!1,this.checkRmiRegistryHost()&&this.checkRegServerIsExist()&&this.checkServerName()&&this.checkServerManagePort()&&this.checkServerDeployPort()&&this.checkSshPort()&&this.checkBindPort()&&this.checksynchtime()&&this.checkMaxidletime()&&this.checkjava_Memory()){a.flag=!0;var b=this.getFormInputInfos();a.inputObj=b}return a},checkMemcacheServerForm:function(){var a={};if(a.flag=!1,this.checkServerName()&&this.checkRmiRegistryHost()&&!this.checkContextServerExistByServerIp()){a.flag=!0;var b=this.getFormInputInfos();a.inputObj=b}return a},checkStatisticsSyncTime:function(){var a=!1,b="statisticsSyncTime",c=10;return a=InputUtil.checkInputMatchPositiveIntegerAndMaxLength(b,c)},checkStatisticsPath:function(){var a=!1;return a=!0},checkJvmHeapAlert:function(){var a=!1,b="jvmHeapAlert",c=1,d=100;return a=InputUtil.checkInputMatchInt_MinNum__MaxNum(b,c,d)},checkJvmHeapBlock:function(){var a=!1,b="jvmHeapBlock",c=1,d=100;return a=InputUtil.checkInputMatchInt_MinNum__MaxNum(b,c,d)},checkMaxSize4Store:function(){var a=!1,b="maxSize4Store";return a=InputUtil.checkInputMatchIntegerAndMaxLength(b,10)},checkCacheNodeAlert:function(){var a=!1,b="cacheNodeAlert";return a=InputUtil.checkInputMatchIntegerAndMaxLength(b,10)},checkJcfCacheServerExistByServerIp:function(){var a=$.trim($("#rmiRegistryHost").val()),b="/"+jcfManager.appName+"/server/isJcfCacheServerExistByServerIp.action",c={serverIp:a},d=!0,e=util.dealSYNCHAjaxRequest4SimpleParam(b,c);return $.when(e).done(function(a){if("false"==a.flag)d=!1;else if("true"==a.flag){var b=new AlertView({msg:"相同IP的JcfCache服务器只能存在一个!"});jcfManager.dialogRegion.show(b)}}),d},checkContextServerExistByServerIp:function(){var a=$.trim($("#rmiRegistryHost").val()),b="/"+jcfManager.appName+"/server/isContextServerExistByServerIp.action",c={serverIp:a},d=!0,e=util.dealSYNCHAjaxRequest4SimpleParam(b,c);return $.when(e).done(function(a){if("false"==a.flag)d=!1;else if("true"==a.flag){var b=new AlertView({msg:"相同Ip的上下文服务器只能存在一个!"});jcfManager.dialogRegion.show(b)}}),d},checkRmiRegistryHost:function(){var a="rmiRegistryHost";return InputUtil.checkInputMatchIP(a)},checkheartBeatTime:function(){var a="heartBeatTime",b=10;return InputUtil.checkInputMatchPositiveIntegerAndMaxLength(a,b)},checkchannelConcurrent:function(){var a="channelConcurrent",b=10;return InputUtil.checkInputMatchPositiveIntegerAndMaxLength(a,b)},checkmessageBodyLimit:function(){var a="messageBodyLimit",b=10,c=InputUtil.checkInputMatchPositiveIntegerAndMaxLength(a,b);return c},checkserviceip:function(){var a="registryIp",b=InputUtil.checkInputMatchIP(a);return b},checkloadfactor:function(){var a="loadFactor",b=10,c=InputUtil.checkInputMatchPositiveIntegerAndMaxLength(a,b);return c},checkchannelQueueSize:function(){var a="channelQueueSize",b=1,c=1e7,d=InputUtil.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkmaxBackupIndex:function(){var a="maxBackupIndex",b=10,c=InputUtil.checkInputMatchPositiveIntegerAndMaxLengthCanNull(a,b);return c},checkconnectionRetry:function(){var a="connectionRetry",b=10,c=InputUtil.checkInputMatchPositiveIntegerAndMaxLength(a,b);return c},checksendRetry:function(){var a="sendRetry",b=5,c=InputUtil.checkInputMatchNumAndMaxLength(a,b);return c},checkserviceip:function(){var a="registryIp",b=InputUtil.checkInputMatchIP(a);return b},checkserverport:function(){var a="registryPort",b=InputUtil.checkInputMatchPort(a);return b},checksynchtime:function(){var a="synchTime",b=10,c=InputUtil.checkInputMatchPositiveIntegerAndMaxLength(a,b);return c},checkBindAddress:function(){var a="libraryBindAddress",b=InputUtil.checkInputMatchIP(a);return b},checkSynchtime:function(){var a="librarySynchtime",b=10,c=InputUtil.checkInputMatchNumAndMaxLength(a,b);return c},checkMaxidletime:function(){var a="maxIdleTime",b=10,c=InputUtil.checkInputMatchPositiveIntegerAndMaxLength(a,b);return c},checkServerName:function(){var a="serverName",b=$("#"+a).val(),c=0,d=InputUtil.checkInputMatchMaxLength(a,20);if(d&&(d=InputUtil.checkGoodString(a)),d){var e="/"+jcfManager.appName+"/server/checkServerNameExist.action",f={serverName:b},g=util.dealSYNCHAjaxRequest4SimpleParam(e,f);$.when(g).done(function(b){""!==b&&("1"===b.isExist?InputUtil.errInput(a,"服务器名称已存在，请重新为服务器起名"):(InputUtil.successInput(a),c=1))})}return 0===c?!1:!0},checkRegServerIsExist:function(){var a=$("#rmiRegistryHost").val(),b=0;return $.ajax({dataType:"json",type:"POST",url:"/"+jcfManager.appName+"/server/checkRegServerIsExist.action",async:!1,data:{rmiRegistryHost:a},success:function(a){if(""!==a)if("1"===a.isExist){var c=new AlertView({msg:"该域注册库已存在"});jcfManager.dialogRegion.show(c)}else b=1}}),0===b?!1:!0},checkServerManagePort:function(){var a="rmiRegistryPort",b=InputUtil.checkInputMatchPort(a);return b},checkServerDeployPort:function(){var a="rmiServerPort",b=InputUtil.checkInputMatchPort(a);return b},checkHttpPort:function(){var a="httpPort",b=InputUtil.checkInputMatchPort(a);return b},checkSshPort:function(){var a="sshPort",b=InputUtil.checkInputMatchPort(a);
return b},checkBindPort:function(){var a="bindPort",b=InputUtil.checkInputMatchPort(a);return b},checkMemoryPoolSize:function(){var a="memoryPoolSize",b=10,c=InputUtil.checkInputMatchIntegerAndMaxLength(a,b);return c},checkBlockSize:function(){var a="blockSize",b=10,c=InputUtil.checkInputMatchPositiveIntegerAndMaxLength(a,b);return c},checkjava_Memory:function(){var a="java_Memory",b=10,c=/^\d+[kKmMgG]$/,d="单位只能为kK,mM,gG",e=InputUtil.checkInputMatchRegularCanNull(a,b,c,d);return e},checkjava_Perm_Mem:function(){var a="java_Perm_Mem",b=10,c=/^\d+[kKmMgG]$/,d="单位只能为kK,mM,gG",e=InputUtil.checkInputMatchRegularCanNull(a,b,c,d);return e},checkdirect_mem_size:function(){var a="direct_mem_size",b=10,c=/^\d+[kKmMgG]$/,d="单位只能为kK,mM,gG",e=InputUtil.checkInputMatchRegularCanNull(a,b,c,d);return e},checkjava_Max_Perm_Mem:function(){var a="java_Max_Perm_Mem",b=10,c=/^\d+[kKmMgG]$/,d="单位只能为kK,mM,gG",e=InputUtil.checkInputMatchRegularCanNull(a,b,c,d);return e},checkmaxFileSize:function(){var a="maxFileSize",b=10,c=/^\d+[kKmMgG][bB]$/,d="单位只能为kb,KB,mb,MB,gb,GB",e=InputUtil.checkInputMatchRegularCanNull(a,b,c,d);return e},checkHeapMessageLimit:function(){var a="heapMessageLimit",b=10,c=InputUtil.checkInputMatchNumAndMaxLength(a,b);return c},checksendMessageLimit:function(){var a="sendMessageLimit",b=10,c=InputUtil.checkInputMatchNumAndMaxLength(a,b);return c},checkpersistQueueFullPath:function(){var a="persistQueueFullPath",b=InputUtil.checkNotNull(a);return b},checkgcFileSize:function(){var a="gcFileSize",b=10,c=/^\d+[kKmMgG]$/,d="单位只能为k,K,m,M,g,G",e=InputUtil.checkInputMatchRegularCanNull(a,b,c,d);return e},checkgcFileNum:function(){var a="gcFileNum",b=!0;if($.trim($("#"+a).val()).length>0){var c=10;b=InputUtil.checkMaxLengthValid(a,c),b&&(b=InputUtil.checkIsPositiveInteger(a))}else InputUtil.clearInput(a);return b},getRegistryBindPort:function(){var a=$("#registryIp").val();$.ajax({dataType:"json",type:"POST",url:"getRegistryBindPort.action",async:!0,data:{registryIp:a},success:function(a){$("#registryPort").attr("value",a.bindPort)}})},checkServerManagePort4Update:function(){var a="rmiRegistryPort",b=this.checkServerManagePort();if(b){var c=$("#"+a).val(),d=$("#orgi"+a).val();if(c!=d){var e=$("#rmiRegistryHost").val(),f=c;b=this.checkPortNotExist4Update(e,f,a)}}return b},checkServerDeployPort4Update:function(){var a="rmiServerPort",b=this.checkServerDeployPort();if(b){var c=$("#"+a).val(),d=$("#orgi"+a).val();if(c!=d){var e=$("#rmiRegistryHost").val(),f=c;b=this.checkPortNotExist4Update(e,f,a)}}return b},checkHttpPort4Update:function(){var a="httpPort",b=this.checkHttpPort();if(b){var c=$("#"+a).val(),d=$("#orgi"+a).val();if(c!=d){var e=$("#rmiRegistryHost").val(),f=c;b=this.checkPortNotExist4Update(e,f,a)}}return b},checkSshPort4Update:function(){var a="sshPort",b=this.checkSshPort();if(b){var c=$("#"+a).val(),d=$("#orgi"+a).val();if(c!=d){var e=$("#rmiRegistryHost").val(),f=c;b=this.checkPortNotExist4Update(e,f,a)}}return b},checkBindPort4Update:function(){var a="bindPort",b=this.checkBindPort();if(b){var c=$("#"+a).val(),d=$("#orgi"+a).val();if(c!=d){var e=$("#rmiRegistryHost").val(),f=c;b=this.checkPortNotExist4Update(e,f,a)}}return b},checkPortNotExist4Update:function(a,b,c){var d=!1,e="/"+jcfManager.appName+"/server/checkPortIsUseing.action",f={serverIp:a,port:b},g=util.dealSYNCHAjaxRequest4SimpleParam(e,f);return $.when(g).done(function(a){d="1"===a.isUsed?InputUtil.errInput(c,"端口被占用"):"2"===a.isUsed?InputUtil.errInput(c,"网络连接不可用，无法判断端口号是否被占用"):InputUtil.successInput(c)}),d}};return ServerUtil}),define("travsky/jcf/1.0.0/view/server/AuthCheck4ServerUtil",[],function(){var a={};return a.getJcfStartFlag=function(){var a=jcfManager.authModel,b="2_2_20",c=a.get(b)||"";return c},a.getJcfStopFlag=function(){var a=jcfManager.authModel,b="2_2_21",c=a.get(b)||"";return c},a.getJcfForceStopFlag=function(){var a=jcfManager.authModel,b="2_2_22",c=a.get(b)||"";return c},a.getJcfConfigFlag=function(){var a=jcfManager.authModel,b="2_2_23",c=a.get(b)||"";return c},a.getJcfUnloadFlag=function(){var a=jcfManager.authModel,b="2_2_24",c=a.get(b)||"";return c},a.getJcfUpdateFlag=function(){var a=jcfManager.authModel,b="2_2_25",c=a.get(b)||"";return c},a.getJcfMemViewFlag=function(){var a=jcfManager.authModel,b="2_2_26",c=a.get(b)||"";return c},a.getContextStartFlag=function(){var a=jcfManager.authModel,b="2_2_6",c=a.get(b)||"";return c},a.getContextStopFlag=function(){var a=jcfManager.authModel,b="2_2_7",c=a.get(b)||"";return c},a.getContextForceStopFlag=function(){var a=jcfManager.authModel,b="2_2_8",c=a.get(b)||"";return c},a.getContextUnloadFlag=function(){var a=jcfManager.authModel,b="2_2_9",c=a.get(b)||"";return c},a.getRegistryStartFlag=function(){var a=jcfManager.authModel,b="2_2_11",c=a.get(b)||"";return c},a.getRegistryStopFlag=function(){var a=jcfManager.authModel,b="2_2_17",c=a.get(b)||"";return c},a.getRegistryForceStopFlag=function(){var a=jcfManager.authModel,b="2_2_18",c=a.get(b)||"";return c},a.getRegistryConfigFlag=function(){var a=jcfManager.authModel,b="2_2_12",c=a.get(b)||"";return c},a.getRegistryUnloadFlag=function(){var a=jcfManager.authModel,b="2_2_13",c=a.get(b)||"";return c},a.getRegistryMemViewFlag=function(){var a=jcfManager.authModel,b="2_2_14",c=a.get(b)||"";return c},a.getRegistrySwitchFlag=function(){var a=jcfManager.authModel,b="2_2_27",c=a.get(b)||"";return c},a.getQueryOperFlag=function(){var a=jcfManager.authModel,b="2_2_2",c=a.get(b)||"";return c},a.getDelGroupFlag=function(){var a=jcfManager.authModel,b="2_2_19",c=a.get(b)||"";return c},a.getBatchOperFlag=function(){var a=jcfManager.authModel,b="2_2_1",c=a.get(b)||"";return c},a.getJcfGroupConfigFlag=function(){var a=jcfManager.authModel,b="2_2_5",c=a.get(b)||"";return c},a.getRegisgryGroupConfigFlag=function(){var a=jcfManager.authModel,b="2_2_16",c=a.get(b)||"";return c},a.getJcfCfg4Single=function(){var a=jcfManager.authModel,b="2_2_23",c=a.get(b)||"";return c},a.getJcfUpdate4Single=function(){var a=jcfManager.authModel,b="2_2_25",c=a.get(b)||"";return c},a.getRegistryCfg4Single=function(){var a=jcfManager.authModel,b="2_2_12",c=a.get(b)||"";return c},a.getRegistryUpdate4Single=function(){var a=jcfManager.authModel,b="2_2_15",c=a.get(b)||"";return c},a.getContextUpdate4Single=function(){var a=jcfManager.authModel,b="2_2_10",c=a.get(b)||"";return c},a.getNodeControllerCfgFlag=function(){var a=jcfManager.authModel,b="2_2_28",c=a.get(b)||"";return c},a.getDomainParamCfgFlag=function(){var a=jcfManager.authModel,b="2_2_29",c=a.get(b)||"";return c},a.getServerAddFlag=function(){var a=jcfManager.authModel,b="2_2_4",c=a.get(b)||"";return c},a.getGroupAddFlag=function(){var a=jcfManager.authModel,b="2_3_4-1",c=a.get(b)||"";return c},a}),define("travsky/jcf/1.0.0/view/server/groupAdd_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","querystring","travsky/jcf/1.0.0/view/server/checkCacheGroup","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/server/global_view","bs-alert"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/util/CommonUtil"),f=a("querystring"),g=a("travsky/jcf/1.0.0/view/server/checkCacheGroup");a("travsky/jcf/1.0.0/view/server/global_view"),a("bs-modal")(b);var h=a("travsky/jcf/1.0.0/template/server/groupAdd.tpl"),i=d.LayoutView.extend({initialize:function(){this.listenTo(this.model,"change",this.render),b.extend(this,new g)},regions:{errInfoShowRegion:"#errInfoShowRegion",singleErrInfoShowRegion:"#singleErrInfoShowRegion"},template:c.template(h),events:{"change #addGroup_groupCategory":"changeGroupCategory","click #addGroupBtn":"addGroup","blur #addGroup_groupName":"checkGroupName","blur #addGroup_maxSize4Store":"checkMaxSize4Store","blur #addGroup_singleDataMaxLength":"checkSingleDataMaxLength","blur #addGroup_cacheNodeAlert":"checkCacheNodeAlert","blur  #addGroup_jvmMemory":"checkJvmMemory","blur #addGroup_jvmHeapAlert":"checkJvmHeapAlert","blur #addGroup_dataBackupNum":"checkDataBackupNum","blur #addGroup_statisticsPath":"checkStatisticsPath","blur #addGroup_statisticsSyncTime":"checkStatisticsSyncTime","blur #addGroup_jvmHeapBlock":"checkJvmHeapBlock","blur #addGroup_groupPassword":"checkGroupPassword","blur #addGroup_broadcastURL":"checkBroadcastURL","blur #addGroup_maxSize4Cache":"checkMaxSize4Cache","blur #addGroup_networkPort":"checkaNetworkPort","blur #addGroup_tcpIPMember":"checkaddTcpIPMember"},changeGroupCategory:function(){var a=this.$el.find("#addGroup_groupCategory").val();this.model.set("checkGroupCategory",a),b("#addGroupModal").modal("show")},getCacheConfigFormInputParam:function(){var a=["addGroup_groupPassword","addGroup_broadcastURL","addGroup_maxSize4Store","addGroup_singleDataMaxLength","addGroup_cacheNodeAlert","addGroup_jvmMemory","addGroup_jvmHeapAlert","addGroup_dataBackupNum","addGroup_statisticsPath","addGroup_statisticsSyncTime","addGroup_jvmHeapBlock","addGroup_maxSize4Cache","addGroup_networkPort","addGroup_tcpIPMember"],b=e.getFormInputObj(a);return b.addGroup_broadcastURL="127.0.0.1:8888",b},checkCacheGroupCfgInfo:function(){return this.checkGroupName()&&this.checkGroupPassword()&&this.checkBroadcastURL()&&this.checkMaxSize4Store()&&this.checkSingleDataMaxLength()&&this.checkCacheNodeAlert()&&this.checkJvmMemory()&&this.checkJvmHeapAlert()&&this.checkDataBackupNum()&&this.checkStatisticsPath()&&this.checkStatisticsSyncTime()&&this.checkJvmHeapBlock()&&this.checkMaxSize4Cache()&&this.checkaNetworkPort()&&this.checkaddTcpIPMember()?!0:!1},addGroup:function(){var a=this.$el.find("#addGroup_groupCategory").val(),c=this.$el.find("#addGroup_groupName").val(),d={},g="/"+jcfManager.appName+"/server/addNewGroup.action",h=(new Date).getTime(),i={selectedPageUI:"serverAddUI",t:h},j=this.checkGroupName(),k=this.model.get("checkGroupCategory");if(j&&"7"==k){var l=b.trim(b(":radio[name='addGroup_cacheModel']:checked").val());j=this.checkCacheGroupCfgInfo();var m=this.getCacheConfigFormInputParam();m.addGroup_cacheModel=l,m.groupCategory=a,m.groupName=c,d=m}else{var n={};n.groupCategory=a,n.groupName=c,d=n}if(j){var o=e.dealAjaxRequest4JSObj(g,d),p=this;b.when(o).done(function(a){"true"==a.flag?(p.remove(),appRouter.navigate("serverMgr/param/"+f.stringify(i),{trigger:!0})):(p.remove(),alert("失败"))})}}});return i}),define("travsky/jcf/1.0.0/view/server/checkCacheGroup",["jquery","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","backbone","underscore","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model"],function(a){var b=jQuery=a("jquery"),c=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"),d=a("travsky/jcf/1.0.0/util/CommonUtil"),e=a("underscore"),f=function(){this.checkMaxSize4Store=function(){var a="addGroup_maxSize4Store",b=10,d=c.checkInputMatchPositiveIntegerAndMaxLength(a,b);return d},this.checkMaxSize4Cache=function(){var a="addGroup_maxSize4Cache",b=10,d=c.checkInputMatchPositiveIntegerAndMaxLength(a,b);return d},this.checkaNetworkPort=function(){var a="addGroup_networkPort",b=c.checkInputMatchPort(a);return b},this.checkaddTcpIPMember=function(){var a="addGroup_tcpIPMember",f=c.checkNotNull(a),g="[如 172.27.1.1:8080,172.27.1.2:8080]";if(f){var h=b.trim(b("#"+a).val()),i=h.split(","),j=!1,k=e.uniq(i);if(i.length>k.length&&(j=!0),j)f=!1,c.errInput(a,"不能添加重复信息!");else for(var l=0;l<i.length;l++){var m=i[l],n=m.split(":");if(2!=n.length)c.errInput(a,g),f=!1;else{var o=n[0];f=d.checkStrIsIp(o);var p=n[1],q=/^[0-9]*[1-9][0-9]*$/;q.test(p)||(c.errInput(a,g),f=!1)}}}return f},this.checkSingleDataMaxLength=function(){var a="addGroup_singleDataMaxLength",b=10,d=c.checkInputMatchPositiveIntegerAndMaxLength(a,b);return d},this.checkCacheNodeAlert=function(){var a="addGroup_cacheNodeAlert",b=10,d=c.checkInputMatchPositiveIntegerAndMaxLength(a,b);return d},this.checkJvmMemory=function(){var a="addGroup_jvmMemory",b=10,d=/^\d+[kKmMgG]$/,e="单位只能为kK,mM,gG",f=c.checkInputMatchRegularAndNotNull(a,b,d,e);return f},this.checkJvmHeapAlert=function(){var a="addGroup_jvmHeapAlert",b=1,d=100,e=c.checkInputMatchInt_MinNum__MaxNum(a,b,d);return e},this.checkStatisticsPath=function(){return!0},this.checkStatisticsSyncTime=function(){var a="addGroup_statisticsSyncTime",b=10,d=c.checkInputMatchPositiveIntegerAndMaxLength(a,b);return d},this.checkJvmHeapBlock=function(){var a="addGroup_jvmHeapBlock",b=1,d=100,e=c.checkInputMatchInt_MinNum__MaxNum(a,b,d);return e},this.checkGroupPassword=function(){var a="addGroup_groupPassword",b=c.checkInputMatchMaxLength(a,10);return b},this.checkBroadcastURL=function(){var a=!0;return a},this.checkDataBackupNum=function(){var a=!1,b="addGroup_dataBackupNum";return a=c.checkInputMatchPositiveIntegerAndMaxLength(b,10)},this.checkGroupName=function(){var a=this.$el.find("#addGroup_groupName").val(),e="addGroup_groupName",f=c.checkInputMatchMaxLength(e,30);if(f&&(f=c.checkGoodString(e))){var g={groupName:a},h="/"+jcfManager.appName+"/server/isGroupExist.action",i=d.dealSYNCHAjaxRequest4SimpleParam(h,g);b.when(i).done(function(a){a.flag?(f=!1,c.errInput(e,"名称已存在!")):(c.successInput(e),f=!0)})}return f}};return f}),define("travsky/jcf/1.0.0/view/server/global_view",["jquery","backbone","underscore","marionette","bs-alert"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette");a("bs-alert")(b);var e=a("travsky/jcf/1.0.0/template/server/global.tpl"),f=d.ItemView.extend({template:c.template(e)});return f}),define("travsky/jcf/1.0.0/template/server/global.tpl",[],'<%\n	if(succList.length>0){\n	  %>\n		<div class="alert alert-success">\n			 <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> &times;</button>\n		   <%\n			  for(var i = 0 ; i < succList.length ; i ++){\n			  %>\n				 <%=succList[i]%><br/>\n			  <%\n			}	\n		   %>\n		</div>\n	  <%\n	}\n	\n	if(errList.length>0){\n	  %>\n		<div class="alert alert-danger">\n			<button type="button" class="close" data-dismiss="alert" aria-hidden="true"> &times;</button>\n		   <%\n			  for(var j = 0 ; j < errList.length ; j ++){\n			  %>\n				 <%=errList[j]%><br/>\n			  <%\n			}	\n		   %>\n		</div>\n	  <%\n	}\n%>'),define("travsky/jcf/1.0.0/template/server/groupAdd.tpl",[],'<div id = "addGroupModal" class="modal" aria-hidden="true" style="z-index:10400;"  data-backdrop="static">\n   <div class="modal-dialog" style = "width:700px;">\n      <div class="modal-content">\n         <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n            <h4 class="modal-title" id="myModalLabel">服务器组添加</h4>\n         </div>\n         <div class="modal-body">\n         <form class="form-horizontal"  role="form" method= "POST">\n 	          <div class="form-group" id = "addGroup_groupCategoryDiv" >\n			      <label for="addGroup_groupCategory" class="col-sm-3 control-label">组类型：</label>\n			      <div class="col-sm-5">\n			          <select id="addGroup_groupCategory"  class  = "form-control input-sm">\n					     <%\n					      	for(var i = 0 ; i < groupList.length ; i++){\n					      	   if(groupList[i].groupCategoryId==checkGroupCategory){//默认选中jcf服务器\n					      		  %><option selected = "selected"  value = "<%=groupList[i].groupCategoryId%>" ><%=groupList[i].groupCategoryName%></option><%\n					      	   }else{\n					      	 	  %><option value = "<%=groupList[i].groupCategoryId%>" ><%=groupList[i].groupCategoryName%></option><%\n					      	   }\n					      	}\n					     %>\n				     </select>\n			      </div>\n			      <div><span class = "text-danger">*</span><span id = "addGroup_groupCategoryTip"></span></div>\n			  </div>	\n         	  			\n 			  <div class="form-group" id = "addGroup_groupNameDiv" >\n			      <label for="addGroup_groupName" class="col-sm-3 control-label">组名称：</label>\n			      <div class="col-sm-5">\n			      	<%if(checkGroupCategory=="1"){//jcf服务器组\n			      	    %><input type="text" id="addGroup_groupName" value = "jcfGroup" class="form-control input-sm"  placeholder="必填项" /><%\n			      	}else if (checkGroupCategory=="3"){//上下文服务器组\n			      	    %><input type="text" id="addGroup_groupName" value = "contextGroup"  readonly = "readonly" class="form-control input-sm"  placeholder="必填项" /><%\n			      	}else if (checkGroupCategory=="4"){//注册库组\n			      	    %><input type="text" id="addGroup_groupName" value = "registryGroup" readonly = "readonly" class="form-control input-sm"  placeholder="必填项" /><%\n			      	}else if (checkGroupCategory=="6"){//适配服务器组\n			      	    %><input type="text" id="addGroup_groupName" value = "adapterGroup"  readonly = "readonly" class="form-control input-sm"  placeholder="必填项" /><%\n			      	}else if (checkGroupCategory=="7"){//cache服务器组\n			      		%><input type="text" id="addGroup_groupName" value = "cacheGroup" readonly = "readonly" class="form-control input-sm"  placeholder="必填项" /><%\n			      	}%>\n			      </div>\n			      <div><span class = "text-danger">*</span><span id = "addGroup_groupNameTip"></span></div>\n			   </div>\n         </form>\n          <%\n		   	if(checkGroupCategory=="7"){//如果选择的是cache服务器组,则需要别的配置\n		  %>\n		   	   	<form class="form-horizontal" id = "addServerForm"  role="form" method= "POST">\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_groupPasswordDiv" >\n					      <label for="addGroup_groupPassword" class="col-sm-3 control-label">域密码：</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="addGroup_groupPassword"   class="form-control input-sm"  placeholder="必填项" />\n					      </div>\n					      <div><span class = "text-danger">*</span><span id = "addGroup_groupPasswordTip"></span></div>\n				    </div>\n		   	   		\n		   	   		<!--广播地址暂时隐藏\n				    <label for="addGroup_broadcastURL" class="col-sm-3 control-label">广播地址：</label>\n				    <span class = "text-info">(IP:端口)</span><span id = "addGroup_broadcastURLTip"></span>\n				    -->\n				    <input type="hidden" id="addGroup_broadcastURL"   class="form-control input-sm"  placeholder="必填项" />\n		   	   		\n		   	   		\n		   	   		\n		   	   		\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_maxSize4StoreDiv" >\n					      <label for="addGroup_maxSize4Store" class="col-sm-3 control-label">存储最大个数：</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="addGroup_maxSize4Store"  value = "1000" class="form-control input-sm"  placeholder="必填项" />\n					      </div>\n					      <div><span class = "text-danger">*</span><span id = "addGroup_maxSize4StoreTip"></span></div>\n				    </div>\n				    \n				    <!-----------------------------新增参数开始----------------------------------->\n				    <div class="form-group" id = "addGroup_maxSize4CacheDiv" >\n					      <label for="addGroup_maxSize4Cache" class="col-sm-3 control-label">cache最大个数：</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="addGroup_maxSize4Cache"  value = "1000" class="form-control input-sm"  placeholder="必填项" />\n					      </div>\n					      <div><span class = "text-danger">*</span><span id = "addGroup_maxSize4CacheTip"></span></div>\n				    </div>\n				    \n				    <div class="form-group" id = "addGroup_networkPortDiv" >\n					      <label for="addGroup_networkPort" class="col-sm-3 control-label">networkPort：</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="addGroup_networkPort"  value = "8000" class="form-control input-sm"  placeholder="必填项" />\n					      </div>\n					      <div><span class = "text-danger">*</span><span id = "addGroup_networkPortTip"></span></div>\n				    </div>\n				    \n				    <div class="form-group" id = "addGroup_tcpIPMemberDiv" >\n					      <label for="addGroup_tcpIPMember" class="col-sm-3 control-label">tcp-ip member：</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="addGroup_tcpIPMember"  value = "" class="form-control input-sm"  placeholder="[10.6.148.225:8000,10.6.148.224:8000]" />\n					      </div>\n					      <div><span class = "text-danger">*</span><span id = "addGroup_tcpIPMemberTip"></span></div>\n				    </div>\n				    <!---------------------新增参数结束--------------------------------------------->\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_singleDataMaxLengthDiv" >\n					      <label for="addGroup_singleDataMaxLength" class="col-sm-3 control-label">单数据最大长度：</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="addGroup_singleDataMaxLength"  class="form-control input-sm"  placeholder="必填项" />\n					      </div>\n					      <div><span class = "text-danger">*</span><span id = "addGroup_singleDataMaxLengthTip"></span></div>\n				    </div>\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_cacheNodeAlertDiv" >\n					      <label for="addGroup_cacheNodeAlert" class="col-sm-3 control-label">存储报警阀值：</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="addGroup_cacheNodeAlert" value = "600"  class="form-control input-sm"  placeholder="必填项" />\n					      </div>\n					      <div><span class = "text-danger">*</span><span class = "text-info">(个)</span><span id = "addGroup_cacheNodeAlertTip"></span></div>\n				    </div>\n		   	   		\n		   	   		<div class="form-group"  >\n					      <label  class="col-sm-3 control-label">CACHE类型：</label>\n					      <div class="col-sm-5">\n					        <input type="radio"  name = "addGroup_cacheModel" checked = "checked" value = "LRU"/> LRU\n					        <input type="radio"  name = "addGroup_cacheModel" value = "LFU"/> LFU\n					      </div>\n					      <div></div>\n				    </div>\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_jvmMemoryDiv" >\n					      <label for="addGroup_jvmMemory" class="col-sm-3 control-label">JVM内存：</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="addGroup_jvmMemory"   class="form-control input-sm"  placeholder="必填项" />\n					      </div>\n					      <div><span class = "text-danger">*</span><span class = "text-info">(kK,mM,gG)</span><span id = "addGroup_jvmMemoryTip"></span></div>\n				    </div>\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_jvmHeapAlertDiv" >\n					      <label for="addGroup_jvmHeapAlert" class="col-sm-3 control-label">内存报警阀值：</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="addGroup_jvmHeapAlert" value = "60"  class="form-control input-sm"  placeholder="必填项" />\n					      </div>\n					      <div><span class = "text-danger">*</span><span class = "text-info">(%)</span><span id = "addGroup_jvmHeapAlertTip"></span></div>\n				    </div>\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_dataBackupNumDiv" >\n					      <label for="addGroup_dataBackupNum" class="col-sm-3 control-label">数据备份个数：</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="addGroup_dataBackupNum"   class="form-control input-sm"  placeholder="必填项" />\n					      </div>\n					      <div><span class = "text-danger">*</span><span id = "addGroup_dataBackupNumTip"></span></div>\n				    </div>\n				  \n		   	   		<input type="hidden" id="addGroup_statisticsPath"  value = "../measureOutput/" />\n		   	   		\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_statisticsSyncTimeDiv" >\n					      <label for="addGroup_statisticsSyncTime" class="col-sm-3 control-label">数据同步时间：</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="addGroup_statisticsSyncTime" value = "60"  class="form-control input-sm"  placeholder="必填项" />\n					      </div>\n					      <div><span class = "text-danger">*</span><span class = "text-info">(秒)</span><span id = "addGroup_statisticsSyncTimeTip"></span></div>\n				    </div>\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_jvmHeapBlockDiv" >\n					      <label for="addGroup_jvmHeapBlock" class="col-sm-3 control-label">内存阻塞阀值：</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="addGroup_jvmHeapBlock"  value = "85" class="form-control input-sm"  placeholder="必填项" />\n					      </div>\n					      <div><span class = "text-danger">*</span><span class = "text-info">(%)</span><span id = "addGroup_jvmHeapBlockTip"></span></div>\n				    </div>\n		   	   	</form>\n		   	<%\n		   	}\n		   %>\n         </div>\n         <div class="modal-footer">\n            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>\n            <button id = "addGroupBtn" type="button" class="btn btn-primary">添加 </button>\n         </div>\n      </div>\n</div>'),define("travsky/jcf/1.0.0/view/server/serverAddNext_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SidebarUtil"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/server/serverAddNext.tpl"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("travsky/jcf/1.0.0/util/SidebarUtil"),h=a("travsky/jcf/1.0.0/view/alert_view"),i=d.ItemView.extend({template:c.template(e),initialize:function(a){this.inputObj=a.inputObj},events:{"click #addServerAndStart":"addServerAndStart","click #addServerNotStart":"addServerNotStart"},addServerAndStart:function(){var a=g.getModuleName();b("#showWaitInfo").removeClass("hide"),b("#addServerAndStart").addClass("hide"),b("#addServerNotStart").addClass("hide"),b("#addserverCloseBtn").addClass("hide");var c="/"+jcfManager.appName+"/server/addOrUpdateServer.action";this.inputObj.ynStart="start";var d=f.dealAjaxRequest4JSObj(c,this.inputObj),e=this;b.when(d).done(function(b){if("true"==b.flag)e.remove(),jcfManagement.view.server_sidebar.refresh(),appRouter.navigate(a,{trigger:!0});else{e.remove();var c=new h;c.model.set("msg","添加服务器失败"),jcfManager.dialogRegion.show(c)}}).fail(function(){e.remove();var a=new h;a.model.set("msg","添加服务器失败"),jcfManager.dialogRegion.show(a)})},addServerNotStart:function(){var a=this,c=g.getModuleName();this.inputObj.ynStart="no";var d="/"+jcfManager.appName+"/server/addOrUpdateServer.action",e=f.dealAjaxRequest4JSObj(d,this.inputObj);b("#showWaitInfo").removeClass("hide"),b("#addServerAndStart").addClass("hide"),b("#addServerNotStart").addClass("hide"),b("#addserverCloseBtn").addClass("hide"),b.when(e).done(function(b){if("true"==b.flag)a.remove(),jcfManagement.view.server_sidebar.refresh(),appRouter.navigate(c,{trigger:!0});else{a.remove();var d=new h;d.model.set("msg","添加服务器失败"),jcfManager.dialogRegion.show(d)}}).fail(function(){a.remove();var b=new h;b.model.set("msg","添加服务器失败"),jcfManager.dialogRegion.show(b)})},render:function(){return this.$el.html(this.template(this.model.attributes)),this}});return i}),define("travsky/jcf/1.0.0/template/server/serverAddNext.tpl",[],'<!-- 模态框（Modal） -->\n<div class="modal fade" id="addServerNextDialog" tabindex="-1" role="dialog" \n		aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">\n   <div class="modal-dialog" style = "width:500px;">\n      <div class="modal-content">\n         <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n            <h4 class="modal-title" id="myModalLabel">确认添加服务器 </h4>\n         </div>\n         <div class="modal-body">\n            <form class="form-horizontal" role="form">\n			   <div class="form-group">\n			      <label for="loginID" class="col-sm-4" control-label">服务器名称：</label>\n			      <div class="col-sm-5">\n			         <input type="text" readonly="readonly" class="form-control input-sm" value = "<%=serverName%>" placeholder="必填项">\n			      </div>\n			   </div>\n			   \n			   <div class="form-group">\n			      <label for="loginID" class="col-sm-4" control-label">服务器类型：</label>\n			      <div class="col-sm-5">\n			         <input type="text" readonly="readonly" class="form-control input-sm" value = "<%=categoryName%>服务器" placeholder="必填项">\n			      </div>\n			   </div>\n			   \n			   <div class="form-group">\n			      <label for="loginID" class="col-sm-4" control-label">服务器分组为：</label>\n			      <div class="col-sm-5">\n			         <input type="text" readonly="readonly"  class="form-control input-sm" value = "<%=groupName%>" >\n			      </div>\n			   </div>\n			   \n			   <div class="form-group">\n			      <label for="loginID" class="col-sm-4" control-label">服务器IP为：</label>\n			      <div class="col-sm-5">\n			         <input type="text" readonly="readonly" name = "loginID" class="form-control input-sm" value = "<%=rmiRegistryHost%>" >\n			      </div>\n			   </div>\n			   \n			   <%\n      			if(serverCategory!="3"){\n      			%>\n      			   <div class="form-group">\n				      <label for="loginID" class="col-sm-4" control-label">JMX Registry端口：</label>\n				      <div class="col-sm-5">\n				         <input type="text" readonly="readonly" class="form-control input-sm" value = "<%=rmiRegistryPort%>" >\n				      </div>\n				   </div>\n				   \n				   <div class="form-group">\n				      <label for="loginID" class="col-sm-4" control-label">JMX Server端口：</label>\n				      <div class="col-sm-5">\n				         <input type="text" readonly="readonly" class="form-control input-sm" value = "<%=rmiServerPort%>" >\n				      </div>\n				   </div>\n      			<%\n      			}\n     		   %>\n			</form>\n			\n			\n         </div>\n         \n         <div class="modal-footer">\n         	<span id = "showWaitInfo" class = "text-warning hide">服务器添加中，请耐心等待...</span>\n            <button type="button" id = "addserverCloseBtn" class="btn btn-default" data-dismiss="modal">关闭</button>\n            <button type="button" id = "addServerAndStart" class="btn btn-primary">添加并启动</button>\n      	    <button type="button" id = "addServerNotStart" class="btn btn-primary" >添加</button>\n         </div>\n      </div><!-- /.modal-content -->\n</div><!-- /.modal -->\n'),define("travsky/jcf/1.0.0/view/server/nodeControllerCfg_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/util/CommonUtil"),f=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"),g=a("travsky/jcf/1.0.0/template/server/nodeControllerCfg.tpl"),h=d.ItemView.extend({template:c.template(g),events:{"change #nodeControllerIp":"changeNodeControllerIp","blur #queuecapacity":"checkQueuecapacity","blur #mqHostIp":"checkMqHostIp","blur #mqPort":"checkMqPort","blur #ccsid":"checkCcsid","blur #mqManager":"checkMqManager","blur #mqChannel":"checkMqChannel","blur #mqName":"checkMqName","click #cfgSubmit":"setNodeConfig"},onShow:function(){this.changeNodeControllerIp()},changeNodeControllerIp:function(){var a=b("#nodeControllerIp").val(),c="/"+jcfManager.appName+"/server/getNodeConfig.action",d={nodeControllerIp:a};b.when(e.dealAjaxRequest4SimpleParam(c,d)).done(function(a){b("#nodeLevel").val(a.loglevel),b("#queuecapacity").val(a.queuecapacity),b("#mqHostIp").val(a.mqHostIP),b("#mqPort").val(a.mqPort),b("#ccsid").val(a.ccsid),b("#mqManager").val(a.mqManager),b("#mqChannel").val(a.mqChannel),b("#mqName").val(a.mqName)})},setNodeConfig:function(){var a=this.checkQueuecapacity(),b=this.checkMqName(),c=this.checkMqChannel(),d=this.checkMqManager(),e=this.checkMqPort(),f=this.checkCcsid(),g=this.checkMqHostIp();a&&b&&c&&d&&e&&f&&g&&this.submitMyNodecontrollerForm()},submitMyNodecontrollerForm:function(){var a=this.getInputObj(),c="/"+jcfManager.appName+"/server/setNodeConfig.action";
b.when(e.dealAjaxRequest4JSObj(c,a)).done(function(a){a.flag?alert("配置成功!"):alert("配置失败!")})},getInputObj:function(){var a=["nodeControllerIp","nodeLevel","queuecapacity","mqHostIp","mqPort","ccsid","mqManager","mqChannel","mqName"],b=e.getFormInputObj(a);return b},checkQueuecapacity:function(){var a="queuecapacity",b=10;return f.checkInputMatchPositiveIntegerAndMaxLength(a,b)},checkMqHostIp:function(){var a="mqHostIp";return f.checkInputMatchIP(a)},checkMqPort:function(){var a="mqPort";return f.checkInputMatchPort(a)},checkCcsid:function(){var a="ccsid",b=10;return f.checkInputMatchPositiveIntegerAndMaxLength(a,b)},checkMqManager:function(){var a="mqManager";return f.checkNotNull(a)},checkMqChannel:function(){var a="mqChannel";return f.checkNotNull(a)},checkMqName:function(){var a="mqName";return f.checkNotNull(a)},render:function(){return this.$el.html(this.template(this.model.attributes)),this}});return h}),define("travsky/jcf/1.0.0/template/server/nodeControllerCfg.tpl",[],'<br/>\n<form class="form-horizontal" role="form">\n   <div class="form-group" id = "nodeControllerIpDiv" >\n      <label for="nodeControllerIp" class="col-sm-3 control-label">节点控制器IP：</label>\n      <div class="col-sm-4">\n        <select id = "nodeControllerIp" class="form-control input-sm" >\n        	<% for(var i = 0 ; i < nodeIpList.length ;i ++){\n        			var curIpInfo = nodeIpList[i] ;\n        		if(i == 0){\n        	%>\n        			<option value = "<%=curIpInfo.serverIp%>" selected="selected" ><%=curIpInfo.serverIp%></option>\n        	<%\n        		}else{\n        	%>\n        			<option value = "<%=curIpInfo.serverIp%>" ><%=curIpInfo.serverIp%></option>\n        	<%\n        		}\n        	}%>\n        </select>\n      </div>\n   </div>\n\n   <div class="form-group" id = "nodeLevelDiv" >\n      <label for="nodeLevel" class="col-sm-3 control-label">节点控制器日志级别：</label>\n      <div class="col-sm-4">\n        <select id = "nodeLevel" class="form-control input-sm" >\n        	<option value = "DEBUG" selected="selected">DEBUG</option>\n			<option value = "INFO" >INFO</option>\n			<option value = "ERROR" >ERROR</option>\n        </select>\n      </div>\n   </div>\n\n   <div class="form-group" id = "queuecapacityDiv" >\n      <label for="queuecapacity" class="col-sm-3 control-label">队列大小：</label>\n      <div class="col-sm-4">\n        <input type="text" id="queuecapacity"   class="form-control input-sm"  placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "queuecapacityTip"></span></div>\n   </div>\n\n   <div class="form-group" id = "mqHostIpDiv" >\n      <label for="mqHostIp" class="col-sm-3 control-label">TAM MQ IP：</label>\n      <div class="col-sm-4">\n        <input type="text" id="mqHostIp"   class="form-control input-sm"  placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "mqHostIpTip"></span></div>\n   </div>\n\n   <div class="form-group" id = "mqPortDiv" >\n      <label for="mqPort" class="col-sm-3 control-label">TAM MQ Port：</label>\n      <div class="col-sm-4">\n        <input type="text" id="mqPort"  class="form-control input-sm"  placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "mqPortTip"></span></div>\n   </div>\n\n   <div class="form-group" id = "ccsidDiv" >\n      <label for="ccsid" class="col-sm-3 control-label">CCSID：</label>\n      <div class="col-sm-4">\n        <input type="text" id="ccsid"   class="form-control input-sm"  placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "ccsidTip"></span></div>\n   </div>\n\n   <div class="form-group" id = "mqManagerDiv" >\n      <label for="mqManager" class="col-sm-3 control-label">MQManager名称：</label>\n      <div class="col-sm-4">\n        <input type="text" id="mqManager"   class="form-control input-sm"  placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "mqManagerTip"></span></div>\n   </div>\n\n   <div class="form-group" id = "mqChannelDiv" >\n      <label for="mqChannel" class="col-sm-3 control-label">MQManager通道：</label>\n      <div class="col-sm-4">\n        <input type="text" id="mqChannel"   class="form-control input-sm"  placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "mqChannelTip"></span></div>\n   </div>\n\n   <div class="form-group" id = "mqNameDiv" >\n      <label for="mqName" class="col-sm-3 control-label">MQ名称：</label>\n      <div class="col-sm-4">\n        <input type="text" id="mqName"   class="form-control input-sm"  placeholder="必填项" />\n      </div>\n      <div><span class = "text-danger">*</span><span id = "mqNameTip"></span></div>\n   </div>\n  \n   \n   <div class="form-group">\n      <div class="col-sm-offset-2 col-sm-10">\n         <button type="button" id = "cfgSubmit" class="btn btn-primary">保存</button>\n      </div>\n   </div>\n   \n</form>\n'),define("travsky/jcf/1.0.0/template/server/serverItem.tpl",[],'<td class = "singleServerInfoTd" ><a href = "<%=serverId%>" ><%=serverName%></a></td>\n<td class = "groupServerInfoTd" ><a href = "<%=groupId%>" ><%=groupName%></a></td>\n<td><%=serverIp%></td>\n<td>\n<%\n	if(groupCategory==1){\n		%>JCF服务器<%\n	}else if(groupCategory==6){\n		%>适配服务器<%\n	}else if(groupCategory==3){\n		%>上下文服务器<%\n	}else if(groupCategory==4){\n		%>服务库<%\n	}else if(groupCategory==7){\n		%>JCFCache服务器<%\n	}else{\n		%>其他<%\n	}\n%>\n</td>\n<td><%=serverManagePort%></td>\n<td><%=serverDeployPort%></td>\n<td>\n	<%\n		if(processStatus==1){\n			%>启动<%\n		}else if (processStatus==2){\n			%>停止<%	\n		}else if (processStatus==3){\n			%>启动中<%\n		}else if (processStatus==4){\n			%>停止中<%\n		}else if (processStatus==7){\n			%>查询中<%\n		}else{\n			%>异常<%\n		}\n	%>\n</td>\n 	\n\n'),define("travsky/jcf/1.0.0/template/server/serverList.tpl",[],"<thead>\n  <tr>\n    <th>服务器名称</th>\n    <th>所属分组</th>\n    <th>服务器IP</th>\n    <th>服务器类型</th>\n    <th>管理端口</th>\n    <th>部署端口</th>\n    <th>状态</th>\n  </tr>\n</thead>\n<tbody></tbody>\n"),define("travsky/jcf/1.0.0/view/server/domainParamCfg_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","icheck","travsky/jcf/1.0.0/view/server/global_view","bs-alert"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/server/domainParamCfg.tpl"),g=a("travsky/jcf/1.0.0/util/CommonUtil");a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"),a("icheck")(b);var h=a("travsky/jcf/1.0.0/view/server/global_view"),i=e.LayoutView.extend({template:d.template(f),regions:{alertInfoRegion:"#alertInfoRegion"},events:{"click #saveBtn":"saveInfo"},saveInfo:function(){this.alertInfoRegion.empty();var a="",d="";if(a=b.trim(b(":radio[name='affinityAlgorithm']:checked").val()),d=b.trim(b(":radio[name='statelessAlgorithm']:checked").val()),0==a.length||0==d.length){var e=new c.Model;e.set("succList",[]),e.set("errList",["亲和非亲和都为必选项!"]),this.alertInfoRegion.show(new h({model:e}))}else{var f={},i=this;f.affinityAlgorithm=a,f.statelessAlgorithm=d;var j="/"+jcfManager.appName+"/server/saveDomainParamCfgInfo.action",k=g.dealAjaxRequest4JSObj(j,f);b.when(k).done(function(a){if("true"==a.flag){var b=new c.Model(a);i.alertInfoRegion.show(new h({model:b}))}else{var b=new c.Model;b.set("succList",[]),b.set("errList",["保存域参数失败!"]),i.alertInfoRegion.show(new h({model:b}))}})}},onShow:function(){b("input").iCheck({checkboxClass:"icheckbox_flat-red",radioClass:"iradio_flat-red"}),b("#qhcheckbox, #fqhcheckbox").iCheck("disable")}});return i}),define("travsky/jcf/1.0.0/template/server/domainParamCfg.tpl",[],'<br/>\n<div class = "row">\n	<div class = "col-sm-12" id = "alertInfoRegion"></div>\n</div>\n<div class = "row">\n	<div class = "col-sm-1"></div>\n	<div class = "col-sm-11">\n		<div class = "row">\n			<div class ="col-sm-2">\n				<label  class="control-label">负载均衡配置</label>\n			</div>\n		</div>\n		\n		<div class = "row">\n			<div class = "col-sm-3"><input type="checkbox" id = "qhcheckbox" checked = "checked" />亲和</div>\n			<div class ="col-sm-1"></div>\n			<div class = "col-sm-4"><input type="checkbox" id = "fqhcheckbox" checked = "checked" />非亲和</div>\n		</div>\n		<br/>\n		<div class = "row">\n			<div class = "col-sm-3">\n				&nbsp;&nbsp;&nbsp;&nbsp;\n				<input type="radio"   name = "affinityAlgorithm"   <%if(affinityAlgorithm==""||affinityAlgorithm==\'CONSISTENTHASH\'){%>checked=\'checked\'<%}%>  value = "CONSISTENTHASH"/> 一致性哈希\n			</div>\n			<div class ="col-sm-1"></div>\n			<div class = "col-sm-4">\n				&nbsp;&nbsp;&nbsp;&nbsp;\n				<input type="radio"    name = "statelessAlgorithm" <%if(statelessAlgorithm==\'WEIGHTEDROUNDROBIN\'){%>checked=\'checked\'<%}%>  value = "WEIGHTEDROUNDROBIN"/> 比例因子\n				<input type="radio"    name = "statelessAlgorithm" <%if(statelessAlgorithm==""||statelessAlgorithm==\'LEASTPENDINGREQUESTS\'){%>checked=\'checked\'<%}%> value = "LEASTPENDINGREQUESTS"/> 最小交易未完成数\n			</div>\n		</div>\n			\n	</div>\n</div>\n\n<br/>\n<div class="form-group">\n  <div class="col-sm-offset-1 col-sm-1">\n     <button type="button" id = "saveBtn" class="btn btn-primary">保存</button>\n  </div>\n</div>\n	\n\n	\n\n\n\n\n	\n\n	\n\n\n\n	\n\n\n\n\n\n\n'),define("travsky/jcf/1.0.0/view/server/serverMgr4GroupLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/view/server/groupServerConfig","travsky/jcf/1.0.0/view/server/serverInputCheck","travsky/jcf/1.0.0/view/server/server","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/server/groupServerConfig_registry","travsky/jcf/1.0.0/view/server/groupServerConfig_cache","travsky/jcf/1.0.0/view/server/checkCacheGroup","travsky/jcf/1.0.0/view/server/global_view","bs-alert","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/model/pagebar_model","travsky/jcf/1.0.0/view/pagebar_view2","travsky/jcf/1.0.0/view/server/AuthCheck4ServerUtil","travsky/jcf/1.0.0/view/listTip_view","travsky/jcf/1.0.0/view/confirm_view","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/server/serverSysMemoryStatisticsLayout"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/view/server/groupServerConfig"),g=a("travsky/jcf/1.0.0/view/server/groupServerConfig_registry"),h=a("travsky/jcf/1.0.0/view/server/groupServerConfig_cache"),i=a("travsky/jcf/1.0.0/template/server/serverMgr4GroupLayout.tpl"),j=a("travsky/jcf/1.0.0/template/server/groupServerSearch.tpl"),k=a("travsky/jcf/1.0.0/util/CommonUtil"),l=a("querystring"),m=a("travsky/jcf/1.0.0/util/SidebarUtil"),n=a("travsky/jcf/1.0.0/model/pagebar_model"),o=a("travsky/jcf/1.0.0/view/pagebar_view2"),p=a("travsky/jcf/1.0.0/view/server/AuthCheck4ServerUtil"),q=a("travsky/jcf/1.0.0/view/listTip_view"),r=a("travsky/jcf/1.0.0/view/alert_view"),s=a("travsky/jcf/1.0.0/view/confirm_view"),t=null,u="",v=e.ItemView.extend({initialize:function(){var a=p.getBatchOperFlag(),b=p.getQueryOperFlag(),c=p.getDelGroupFlag();this.model.set("batchOperFlag",a),this.model.set("queryOperFlag",b),this.model.set("delOperFlag",c)},template:d.template(j),events:{"click #deleteGroupBtn":"deleteGroup","click #batchStartBtn":"batchStart","click #batchStopBtn":"batchStop","click #batchForceStopBtn":"batchForceStop"},deleteGroup:function(){var a=new s;a.model.set("msg","确认删除分组?"),jcfManager.dialogRegion.show(a),a.confirm(function(a){if(a){var c=b("#hiddenGroupId").val(),d="/"+jcfManager.appName+"/server/deleteServerGroupByGroupId.action",e={groupId:c},f=k.dealAjaxRequest4SimpleParam(d,e);b.when(f).done(function(a){var b=new r;b.model.set("msg",a.message),jcfManager.dialogRegion.show(b),"true"==a.flag&&appRouter.navigate("serverMgr",{trigger:!0})})}})},batchStart:function(){var a="1",c="3";jcfManager.tipInfoRegion.empty();var d=b("td.groupServerIdsTd input:checkbox:checked");d.length;var e=new Array,f=this.model.get("listCollection");if(d.each(function(){var a=b(this).val(),d=b(this).attr("serverStatus");"2"==d&&(e.push(a),f.each(function(b){b.get("serverName")==a&&b.set("processStatus",c)}))}),e.length>0)this.batchStartStopServer(a,c,e);else{var g=new q;g.model.set("flag","false"),g.model.set("msg","请选择有效的服务器!"),jcfManager.tipInfoRegion.show(g)}},batchStop:function(){jcfManager.tipInfoRegion.empty();var a="2",c="4",d=b("td.groupServerIdsTd input:checkbox:checked");d.length;var e=new Array,f=this.model.get("listCollection");if(d.each(function(){var a=b(this).val(),d=b(this).attr("serverStatus");"1"==d&&(e.push(a),f.each(function(b){b.get("serverName")==a&&b.set("processStatus",c)}))}),e.length>0)this.batchStartStopServer(a,c,e);else{var g=new q;g.model.set("flag","false"),g.model.set("msg","请选择有效的服务器!"),jcfManager.tipInfoRegion.show(g)}},batchForceStop:function(){jcfManager.tipInfoRegion.empty();var a="3",c="44",d=b("td.groupServerIdsTd input:checkbox:checked");d.length;var e=new Array,f=this.model.get("listCollection");if(d.each(function(){var a=b(this).val(),d=b(this).attr("serverStatus");"2"!=d&&"3"!=d&&(e.push(a),f.each(function(b){b.get("serverName")==a&&b.set("processStatus",c)}))}),e.length>0)this.batchStartStopServer(a,c,e);else{var g=new q;g.model.set("flag","false"),g.model.set("msg","请选择有效的服务器!"),jcfManager.tipInfoRegion.show(g)}},batchStartStopServer:function(a,c,d){b("#groupCheckAll").prop("checked",!1);var e="/"+jcfManager.appName+"/server/batchStartStopServer.action",f={};f.operStatus=a,f.serverNames=d;var g=k.dealAjaxRequest4JSObj(e,f),h=b("#freshPage4GroupServerFlag").val();void 0!=h&&h.length>0&&window.clearInterval(h);var i=this;b.when(g).done(function(){b("td.groupServerIdsTd input:checkbox").prop("checked",!1),i.listView.trigger("autoFreshPageInfo")})},onShow:function(){var a=this.model.get("processStatus");this.$el.find("#processStatus").find("option").each(function(){var c=b(this).val();return c==a?(b(this).attr("selected","selected"),!1):void 0})}}),w=a("travsky/jcf/1.0.0/template/server/groupServerItem.tpl"),x=a("travsky/jcf/1.0.0/template/server/groupServerList.tpl"),y=e.ItemView.extend({initialize:function(){var a=p.getJcfStartFlag(),b=p.getJcfStopFlag(),c=p.getJcfForceStopFlag(),d=p.getJcfConfigFlag(),e=p.getJcfUnloadFlag(),f=p.getJcfUpdateFlag(),g=p.getJcfMemViewFlag();this.model.set("jcfStartFlag",a),this.model.set("jcfStopFlag",b),this.model.set("jcfForceStopFlag",c),this.model.set("jcfConfigFlag",d),this.model.set("jcfUnloadFlag",e),this.model.set("jcfUpdateFlag",f),this.model.set("jcfMemViewFlag",g);var h=p.getContextStartFlag(),i=p.getContextStopFlag(),j=p.getContextForceStopFlag(),k=p.getContextUnloadFlag();this.model.set("contextStarFlag",h),this.model.set("contextStopFlag",i),this.model.set("contextForceStopFlag",j),this.model.set("contextUnloadFlag",k);var l=p.getRegistryStartFlag(),m=p.getRegistryStopFlag(),n=p.getRegistryForceStopFlag(),o=p.getRegistryConfigFlag(),q=p.getRegistryUnloadFlag(),r=p.getRegistryMemViewFlag(),s=p.getRegistrySwitchFlag();this.model.set("registryStartFlag",l),this.model.set("registryStopFlag",m),this.model.set("registryForceStopFlag",n),this.model.set("registryConfigFlag",o),this.model.set("registryUnloadFlag",q),this.model.set("registryMenViewFlag",r),this.model.set("registrySwitchFlag",s),this.model.on("change",this.render)},template:d.template(w),tagName:"tr",events:{click:"highlightName","click td.groupServerIdsTd :checkbox":"checkedServerItem","click td.operTd a":"operServer","click td.configTd a":"configServer","click td.deleteTd a":"deleteServer","click td.memoryDetailTd a":"showMemoryDetail","click td.changeRegistryServerTd a":"changeRegistryServer"},checkedServerItem:function(a){a.stopPropagation();var c=b("td.groupServerIdsTd input:checkbox").length,d=b("td.groupServerIdsTd input:checkbox:checked").length,e=b("#groupCheckAll");c==d?e.prop("checked",!0):e.prop("checked",!1)},highlightName:function(a){a.preventDefault(),this.$el.toggleClass("warning")},checkRegistryCanSwitch:function(){jcfManager.tipInfoRegion.empty();var a=!1,c="/"+jcfManager.appName+"/server/checkAllRegServerIsExist.action",d=k.dealSYNCHAjaxRequestWithoutParam(c);return b.when(d).done(function(b){if("2"==b.count)a=!0;else{var c=new q;c.model.set("flag","false"),c.model.set("msg","不存在可切换的注册库服务器!"),jcfManager.tipInfoRegion.show(c)}}),a},changeRegistryServer:function(a){a.preventDefault(),a.stopPropagation();var c=this.checkRegistryCanSwitch();if(c){var d=this.model.get("serverIp"),e=this.model.get("groupId"),f="/"+jcfManager.appName+"/server/switchRegistryServer.action",g={serverIp:d,groupId:e},h=k.dealAjaxRequest4SimpleParam(f,g);b.when(h).done(function(a){if("true"==a.flag){alert("切换成功");var b=(new Date).valueOf(),c="serverMgr/group/param/groupId="+e+"&timstamp="+b;appRouter.navigate(c,{trigger:!0})}else{var d=new q;d.model.set("flag","false"),d.model.set("msg","不存在可切换的注册库服务器!"),jcfManager.tipInfoRegion.show(d)}})}},showMemoryDetail:function(b){b.preventDefault(),b.stopPropagation();var c=a("travsky/jcf/1.0.0/view/server/serverSysMemoryStatisticsLayout"),d=m.getModuleName(),e=this.model.get("serverId"),f=this.model.get("groupId"),g={serverId:e,groupId:f};appRouter.navigate(d+"/server/memoryInfo/param/"+l.stringify(g));var h=new c({queryString:g});jcfManager.contentRegion.show(h),h.trigger("showPageInfo")},configServer:function(a){a.preventDefault(),a.stopPropagation();var c=m.getModuleName(),d=b(a.target).attr("href"),e="paramCfg",f={serverId:d,selectedPageUI:e};appRouter.navigate(c+"/server/param/"+l.stringify(f),{trigger:!0})},deleteServer:function(a){if(a.preventDefault(),a.stopPropagation(),confirm("确认删除?")){b(a.target);var c=this.model.get("serverId"),d=this.model.get("serverName"),e={serverId:c,serverName:d},f="/"+jcfManager.appName+"/server/deleteServer.action",g=k.dealAjaxRequest4SimpleParam(f,e),h=this;b.when(g).done(function(a){if("success"==a.flag)jcfManagement.view.server_sidebar.refresh(),h.trigger("parent:removeModel");else{var b=new q;b.model.set("flag","false"),b.model.set("msg","删除服务器失败!"),jcfManager.tipInfoRegion.show(b)}})}},operServer:function(a){a.preventDefault(),a.stopPropagation(),b("#groupCheckAll").prop("checked",!1);var c=b(a.target),d=c.attr("href"),e=b("#freshPage4GroupServerFlag").val();void 0!=e&&e.length>0&&window.clearInterval(e);var f=this.model.get("serverName");"start"==d?this.startServer(f):"stop"==d?this.stopServer(f):"forceStop"==d&&this.forceStopServer(f)},startServer:function(a){var c={serverName:a,operStatus:1},d=this.operServerStatus(c),e=this;e.model.set("processStatus","3"),b.when(d).done(function(){e.trigger("autoFresh:pageInfo")})},stopServer:function(a){var c={serverName:a,operStatus:2},d=this.operServerStatus(c),e=this;e.model.set("processStatus","4"),b.when(d).done(function(){e.trigger("autoFresh:pageInfo")})},forceStopServer:function(a){var c={serverName:a,operStatus:3},d=this.operServerStatus(c),e=this;e.model.set({processStatus:"44"}),b.when(d).done(function(){e.trigger("autoFresh:pageInfo")})},operServerStatus:function(a){var b="/"+jcfManager.appName+"/server/updateSingleServerStatus.action",c=k.dealAjaxRequest4SimpleParam(b,a);return c}}),z=e.CompositeView.extend({initialize:function(){this.on("autoFreshPageInfo",this.autoFreshPageInfo),this.on("freshPage4SwitchRegistryServer",this.freshPage4SwitchRegistryServer)},events:{"click #groupCheckAll":"groupCheckAll"},template:d.template(x),childView:y,childViewContainer:"tbody",groupCheckAll:function(a){var c=a.target.checked;b("td.groupServerIdsTd input:checkbox").prop("checked",c)},childEvents:{"parent:removeModel":function(a){var b=a.model;this.collection.remove(b)},"autoFresh:pageInfo":function(){this.trigger("autoFreshPageInfo")}},autoFreshPageInfo:function(){var a=this.collection,c=2e3,d=k.getFefreshPageNum(),e=c*d,f=window.location.hash;b("#freshPage4GroupServerUrl").val(f);var g=this;if(a.length>0){setTimeout(g._directUpdate(g),300);var h=setInterval(g.updatePageServerStatus,c,g);g.autoFreshPageTTT=h,b("#freshPage4GroupServerFlag").val(h),setTimeout("window.clearInterval("+h+")",e)}},freshPage4SwitchRegistryServer:function(){},updatePageServerStatus:function(a){var c=a.autoFreshPageTTT,d=window.location.hash,e=b("#freshPage4GroupServerUrl").val();e==d?a.directUpdate(a):window.clearInterval(c)},_directUpdate:function(a){return function(){a.directUpdate(a)}},directUpdate:function(a){var d=a.collection,e="/"+jcfManager.appName+"/server/updatePageServerStatus.action",f=k.dealAjaxRequestWithoutParam(e);b.when(f).done(function(a){var b=new c.Model(a);d.each(function(a){var c=a.get("serverName"),d=b.get(""+c);void 0!=d&&a.set("processStatus",d)})})}}),A=e.LayoutView.extend({template:d.template(i),initialize:function(a){this.queryString=a.queryString;var b=p.getJcfGroupConfigFlag(),c=p.getRegisgryGroupConfigFlag();this.model.set("jcfGroupCfgFlag",b),this.model.set("registryGroupCfgFlag",c),u=this.model.get("groupCategory"),t=z,this.on("showPageInfo",this.showPageInfo),jcfManager.tipInfoRegion=this.tipInfoRegion},events:{"click #searchGroupServer":"searchGroupServer2","click #serverMgrNav li a":"serverMgr4GroupNav"},ui:{hiddenGroupId:"#hiddenGroupId"},regions:{tipInfoRegion:"#tipInfoRegion",searchRegion:"#searchRegion",listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},showPageInfo:function(){var a=this.queryString.selectedPageUI;(void 0==a||0==a.length)&&(a="serverGroupList"),this.showPageInfo2(a)},showPageInfo2:function(a){var d=this,e=this.queryString.groupId;if("serverGroupConfig"==a){var i="/"+jcfManager.appName+"/server/getGroupServerConfig.action",j={groupId:e},l=k.dealAjaxRequest4SimpleParam(i,j);b.when(l).done(function(a){var b=new c.Model(a);d.searchRegion.empty(),d.listRegion.empty(),d.pagebarRegion.empty(),"7"==u?d.searchRegion.show(new h({model:b})):"4"==u?d.searchRegion.show(new g({model:b})):("1"==u||"6"==u)&&d.searchRegion.show(new f({model:b}))})}else if("serverGroupList"==a){var m=void 0==this.queryString.processStatus?"0":this.queryString.processStatus,n=new c.Model;n.set("processStatus",m);var o=new v({model:n});this.searchItemView=o,this.searchRegion.show(o),this.searchGroupServer()}},serverMgr4GroupNav:function(a){a.stopPropagation(),a.preventDefault();var c=b(a.target),d=c.parent();d.siblings().removeClass("active");var e=b("#freshPage4GroupServerFlag").val();void 0!=e&&e.length>0&&window.clearInterval(e);var f=m.getModuleName();if(!d.hasClass("active")){d.addClass("active");var g=c.attr("href"),h=this.queryString.groupId,i={selectedPageUI:""+g,groupId:h};appRouter.navigate(f+"/group/param/"+l.stringify(i)),this.showPageInfo2(g)}},searchGroupServer:function(){var a=b("#freshPage4GroupServiceFlag").val();void 0!=a&&a.length>0&&window.clearInterval(a);var d=this.queryString.groupId,e={};e.groupId=d,e.processStatus=this.queryString.processStatus,e.currentPage=this.queryString.currentPage,e.pageSize=this.queryString.pageSize;var f="/"+jcfManager.appName+"/server/searchGroupPageServer.action",g=k.dealAjaxRequest4SimpleParam(f,JSON.parse(JSON.stringify(e))),h=this;b.when(g).done(function(a){var b=a.groupCategory,d=a.pageBean,e=new c.Model({groupCategory:b}),f=new c.Collection(d.recordList),g=h.searchItemView,i=new t({model:e,collection:f});void 0!=g&&(g.model.set("listCollection",f),g.listView=i),h.listRegion.show(i);var j=new n(d);f.on("remove",function(){var a=1*j.get("recordCount")-1;j.set("recordCount",a+"")}),j.set("uriSection","group");var k=new o({model:j,queryString:h.queryString});h.pagebarRegion.show(k),i.trigger("autoFreshPageInfo")})},searchGroupServer2:function(){var a=m.getModuleName(),c=b("#hiddenGroupId").val(),d=this.$el.find("#processStatus").val(),e=b("#pageSize").val();void 0==d&&(d=""),void 0==e&&(e=jcfManager.defaultPageSize);var f={groupId:c,processStatus:d,currentPage:"1",pageSize:e,selectedPageUI:"serverGroupList"};appRouter.navigate(a+"/group/param/"+l.stringify(f),{trigger:!0})}});return A}),define("travsky/jcf/1.0.0/view/server/groupServerConfig",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/view/server/serverInputCheck","travsky/jcf/1.0.0/view/server/server","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/server/groupServerConfig.tpl"),f=a("travsky/jcf/1.0.0/view/server/serverInputCheck"),g=a("travsky/jcf/1.0.0/util/CommonUtil"),h=d.ItemView.extend({template:c.template(e),initialize:function(){b.extend(this,new f)},events:{"click #groupServerCfgSubmit":"saveGroupServerCfg","blur #java_Memory":"checkjava_Memory","blur #java_Max_Perm_Mem":"checkjava_Max_Perm_Mem","blur #direct_mem_size":"checkdirect_mem_size","blur #loadFactor":"checkloadfactor","blur #memoryPoolSize":"checkMemoryPoolSize","blur #blockSize":"checkBlockSize","blur #heapMessageLimit":"checkHeapMessageLimit","blur #channelQueueSize":"checkchannelQueueSize","blur #channelConcurrent":"checkchannelConcurrent","blur #connectionRetry":"checkconnectionRetry","blur #heartBeatTime":"checkheartBeatTime","blur #messageBodyLimit":"checkmessageBodyLimit","blur #registryIp":"checkserviceip","blur #registryPort":"checkserverport","blur #synchTime":"checksynchtime","blur #gcFileNum":"checkgcFileNum","blur #gcFileSize":"checkgcFileSize","blur #persistQueueFullPath":"checkpersistQueueFullPath"},saveGroupServerCfg:function(){var a=this.checkServerGroup();if(a){var c=["serverId","groupId","serverCategory","java_Memory","java_Max_Perm_Mem","karaf_opts","direct_mem_size","gcoptions","loadFactor","memoryPoolSize","blockSize","heapMessageLimit","channelQueueSize","channelConcurrent","connectionRetry","heartBeatTime","messageBodyLimit","registryIp","registryPort","synchTime","heapDumpPath","gcFile","gcRotation","gcFileNum","gcFileSize","auditLevel","persistQueueFullPath","serverLogLevel","serverLogType"],d=g.getFormInputObj(c),e="/"+jcfManager.appName+"/server/updateGroupServerConfig.action",f=g.dealAjaxRequest4JSObj(e,d);b.when(f).done(function(a){"true"==a.flag?alert("保存信息成功"):alert("保存信息失败")})}},checkServerGroup:function(){return this.checkloadfactor()&&this.checkMemoryPoolSize()&&this.checkdirect_mem_size()&&this.checkBlockSize()&&this.checkHeapMessageLimit()&&this.checkchannelQueueSize()&&this.checkchannelConcurrent()&&this.checkconnectionRetry()&&this.checkheartBeatTime()&&this.checkmessageBodyLimit()&&this.checksynchtime()&&this.checkserviceip()&&this.checkserverport()&&this.checkjava_Memory()&&this.checkjava_Max_Perm_Mem()&&this.checkgcFileNum()&&this.checkgcFileSize()&&this.checkpersistQueueFullPath()?!0:!1}});return h}),define("travsky/jcf/1.0.0/template/server/groupServerConfig.tpl",[],'<form class="form-horizontal" role="form">\n	<input type="hidden" id="serverId" value="<%=configureInfo.serverId%>"/>\n	<input type="hidden" id="groupId" value ="<%=groupId%>"/>\n	<input type="hidden" id="serverCategory" value ="<%=serverCategory%>"/>\n	<div class="form-group" id = "java_MemoryDiv" >\n		<label for="java_Memory" class="col-sm-3 control-label">堆内存大小：</label>\n		<div class="col-sm-4">\n			<input type="text" id="java_Memory" value="<%=configureInfo.java_Memory%>" class="form-control input-sm" placeholder="单位只能为kK,mM,gG"/>\n		</div>\n		<div>\n			<span class = "text-info">(单位:kK,mM,gG)&nbsp;</span>\n			<span id = "java_MemoryTip"></span>\n		</div>\n	</div>\n 	<div class="form-group" id="java_Max_Perm_MemDiv">\n		<label for="java_Max_Perm_Mem" class="col-sm-3 control-label">永久代堆大小：</label>\n		<div class="col-sm-4">\n			<input type="text" id="java_Max_Perm_Mem" value = "<%=configureInfo.java_Max_Perm_Mem%>"  class="form-control input-sm"  placeholder="单位只能为kK,mM,gG" />\n      	</div>\n      	<div>\n      		<span class = "text-info">(单位:kK,mM,gG)&nbsp;</span>\n      		<span id = "java_Max_Perm_MemTip"></span>\n      	</div>\n	</div>\n	<div class="form-group" id = "karaf_optsDiv" >\n		<label for="karaf_opts" class="col-sm-3 control-label">JVM扩展参数：</label>\n		<div class="col-sm-4">\n			<input type="text" id="karaf_opts"  value = "<%=configureInfo.karaf_opts%>"    class="form-control input-sm"  placeholder="配置JVM参数超过系统内存值后将导致错误" />\n		</div>\n		<div>\n			<span id = "karaf_optsTip"></span>\n		</div>\n	</div>\n	<div class="form-group" id = "direct_mem_sizeDiv" >\n		<label for="direct_mem_size" class="col-sm-3 control-label">最大可分配系统内存：</label>\n      	<div class="col-sm-4">\n        	<input type="text" id="direct_mem_size" value = "<%=configureInfo.direct_mem_size%>"   class="form-control input-sm"  placeholder="不建议配置" />\n      	</div>\n      	<div>\n      		<span class = "text-info">(单位:kK,mM,gG)&nbsp;</span>\n      		<span id = "direct_mem_sizeTip"></span>\n      	</div>\n	</div>\n	<div class="form-group" id = "gcoptionsDiv" >\n		<label for="gcoptions" class="col-sm-3 control-label">GC选项：</label>\n		<div class="col-sm-4">\n        	<input type="text" id="gcoptions"  value = "<%=configureInfo.gcoptions%>"  class="form-control input-sm"  placeholder="" />\n      	</div>\n      	<div>\n      		<span id = "gcoptionsTip"></span>\n      	</div>\n	</div>\n	<div class="form-group" id = "heapDumpPathDiv" >\n		<label for="heapDumpPath" class="col-sm-3 control-label">堆内存快照的存储文件路径：</label>\n		<div class="col-sm-4">\n			<input type="text" id="heapDumpPath" value = "<%=configureInfo.heapDumpPath%>"  class="form-control input-sm"  placeholder="">\n	    </div>\n	    <div>\n	    	<span id = "heapDumpPathTip"></span>\n	    </div>\n	</div>\n	<div class="form-group" id = "gcFileDiv" >\n		<label for="gcFile" class="col-sm-3 control-label">GC日志的文件名和路径：</label>\n		<div class="col-sm-4">\n			<input type="text" id="gcFile"  value = "<%=configureInfo.gcFile%>" class="form-control input-sm"  placeholder="JDK 7版本开始兼容">\n	    </div>\n	    <div>\n	    	<span id = "gcFileTip"></span>\n	    </div>\n	</div>\n	<div class="form-group" id = "gcRotationDiv">\n		<label for="gcRotation" class="col-sm-3 control-label">GC日志自动转储：</label>\n	    <div class="col-sm-4">\n	    	<select id="gcRotation" class="form-control input-sm" placeholder="JDK 7版本开始兼容">\n	      	 	<%if(configureInfo.gcRotation=="-XX:+UseGCLogFileRotation"){%>\n	      			<option selected = "selected"  value="-XX:+UseGCLogFileRotation">true</option>\n	      	 	 	<option value="" >false</option>\n	      	 	 <%}else if(""==configureInfo.gcRotation){%>\n	      	 	 	<option value="-XX:+UseGCLogFileRotation">true</option>\n	      	 	 	<option selected = "selected" value="" selected="selected">false</option>\n	      	 	 <%}%>\n			</select>\n		</div>\n		<div>\n			<span id="gcRotationTip"></span>\n		</div>\n	</div>\n	<div class="form-group" id="gcFileNumDiv">\n		<label for="gcFileNum" class="col-sm-3 control-label">GC日志绕接数目：</label>\n		<div class="col-sm-4">\n			<input type="text" id="gcFileNum"  value = "<%=configureInfo.gcFileNum%>" class="form-control input-sm"  placeholder="JDK 7版本开始兼容">\n      	</div>\n      	<div>\n      		<span id = "gcFileNumTip"></span>\n      	</div>\n    </div>\n    <div class="form-group" id = "gcFileSizeDiv" >\n		<label for="gcFileSize" class="col-sm-3 control-label">GC日志大小：</label>\n		<div class="col-sm-4">\n			<input type="text" id="gcFileSize" value = "<%=configureInfo.gcFileSize%>"  class="form-control input-sm"  placeholder="单位为k,K,m,M,g,G">\n      	</div>\n      	<div>\n      		<span>(单位:kK,mM,gG)</span><span id="gcFileSizeTip"></span>\n      	</div>\n    </div>\n	<div class="form-group" id = "loadFactorDiv" >\n		<label for="loadFactor" class="col-sm-3 control-label">负载均衡因子：</label>\n 		<div class="col-sm-4">\n        	<input type="text" id="loadFactor" value="<%=configureInfo.loadFactor%>"  class="form-control input-sm"  placeholder="必填项" />\n      	</div>\n      	<div class="text-danger">*\n      		<span id = "loadFactorTip"></span>\n      	</div>\n	</div>\n	<div class="form-group" id="memoryPoolSizeDiv" >\n		<label for="memoryPoolSize" class="col-sm-3 control-label">系统内存池大小：</label>\n  		<div class="col-sm-4">\n    		<input type="text" id="memoryPoolSize" value="<%=configureInfo.memoryPoolSize%>" class="form-control input-sm"  placeholder="单位：M" />\n  		</div>\n  		<div>\n  			<span class="text-danger">*</span>\n  			<span class="text-info">(单位:M)&nbsp;</span>\n  			<span id="memoryPoolSizeTip"></span>\n  		</div>\n   	</div>\n 	<div class="form-group" id = "blockSizeDiv" >\n 		<label for="blockSize" class="col-sm-3 control-label">系统内存块大小：</label>\n		<div class="col-sm-4">\n			<input type="text" id="blockSize" value = "<%=configureInfo.blockSize%>"  class="form-control input-sm"  placeholder="单位：k" />\n		</div>\n      	<div>\n      		<span class = "text-danger">*</span>\n      		<span class = "text-info">(单位:k)&nbsp;</span>\n      		<span id = "blockSizeTip"></span>\n      	</div>\n	</div>\n	<div class="form-group" id = "heapMessageLimitDiv" >\n 		<label for="heapMessageLimit" class="col-sm-3 control-label">JVM内存消息体最大值：</label>\n		<div class="col-sm-4">\n        	<input type="text" id="heapMessageLimit" value = "<%=configureInfo.heapMessageLimit%>"  class="form-control input-sm"  placeholder="单位：Byte" />\n      	</div>\n      	<div>\n      		<span class = "text-danger">*</span>\n      		<span class = "text-info">(单位:Byte)&nbsp;</span>\n      		<span id = "heapMessageLimitTip"></span>\n      	</div>\n 	</div>\n	<div class="form-group" id = "channelQueueSizeDiv" >\n      	<label for="channelQueueSize" class="col-sm-3 control-label">并发队列大小：</label>\n      	<div class="col-sm-4">\n        	<input type="text" id="channelQueueSize" value = "<%=configureInfo.channelQueueSize%>"  class="form-control input-sm"  placeholder="正整数" />\n     	 </div>\n      	<div>\n      		<span class = "text-danger">*</span>\n      		<span id = "channelQueueSizeTip"></span>\n      	</div>\n   	</div>\n	<div class="form-group" id = "channelConcurrentDiv" >\n     	<label for="channelConcurrent" class="col-sm-3 control-label">连接并发数：</label>\n      	<div class="col-sm-4">\n        	<input type="text" id="channelConcurrent"  value = "<%=configureInfo.channelConcurrent%>"  class="form-control input-sm"  placeholder="正整数" />\n      	</div>\n      	<div>\n      		<span class = "text-danger">*</span>\n      		<span id = "channelConcurrentTip"></span>\n      	</div>\n	</div>\n	<div class="form-group" id = "connectionRetryDiv" >\n		<label for="connectionRetry" class="col-sm-3 control-label">连接重试次数：</label>\n      	<div class="col-sm-4">\n        	<input type="text" id="connectionRetry"  value = "<%=configureInfo.connectionRetry%>" class="form-control input-sm"  placeholder="正整数" />\n      	</div>\n      	<div>\n      		<span class="text-danger">*</span>\n      		<span id="connectionRetryTip"></span>\n      	</div>\n	</div>\n	<div class="form-group" id = "heartBeatTimeDiv" >\n		<label for="heartBeatTime" class="col-sm-3 control-label">JCF服务器通信心跳间隔：</label>\n      	<div class="col-sm-4">\n        	<input type="text" id="heartBeatTime" value = "<%=configureInfo.heartBeatTime%>"  class="form-control input-sm"  placeholder="单位：秒（s）" />\n      	</div>\n      	<div>\n      		<span class = "text-info">(单位：秒(s))</span>\n      		<span id = "heartBeatTimeTip"></span>\n      	</div>\n	</div>\n	<input type="hidden" id="messageBodyLimit"  value = "<%=configureInfo.messageBodyLimit%>" class="form-control input-sm"  placeholder="单位：k" />\n	<div class="form-group" id = "registryIpDiv" >\n      	<label for="registryIp" class="col-sm-3 control-label">注册库IP：</label>\n      	<div class="col-sm-4">\n        	<input type="text" id="registryIp"  value = "<%=configureInfo.registryIp%>" class="form-control input-sm"  placeholder="必填项" />\n      	</div>\n      	<div>\n      		<span class="text-danger">*</span>\n      		<span id="registryIpTip"></span>\n      	</div>\n	</div>\n	<div class="form-group" id = "registryPortDiv" >\n		<label for="registryPort" class="col-sm-3 control-label">注册库端口：</label>\n      	<div class="col-sm-4">\n        	<input type="text" id="registryPort" value = "<%=configureInfo.registryPort%>"  class="form-control input-sm"  placeholder="端口应为1024~65535之间的数字" />\n      	</div>\n      	<div>\n      		<span class="text-danger">*</span>\n      		<span id="registryPortTip"></span>\n      	</div>\n	</div>\n	<div class="form-group" id = "synchTimeDiv" >\n		<label for="synchTime" class="col-sm-3 control-label">注册库同步间隔：</label>\n      	<div class="col-sm-4">\n        	<input type="text" id="synchTime"  value = "<%=configureInfo.synchTime%>" class="form-control input-sm"  placeholder="单位：秒（s）" />\n      	</div>\n      	<div>\n      		<span class = "text-danger">*</span>\n      		<span class = "text-info">(单位:秒(s))</span>\n      		<span id = "synchTimeTip"></span>\n      	</div>\n	</div>\n	<div class="form-group" id = "auditLevelDiv" >\n		<label for="auditLevel" class="col-sm-3 control-label">跟踪带日志输出规则：</label>\n		<div class="col-sm-4">\n			<select id="auditLevel" class="form-control input-sm" >\n				<%for(var i = 0; i < tracLogKeyList.length; i++){\n	      	 		if(configureInfo.auditLevel==""){\n	      	 			if(i==0){%>\n	      	 				<option selected = "selected" value="<%=tracLogKeyList[i]%>"><%=tracLogValueList[i]%></option>\n			      	 	<%}else{%>\n			      	 		<option value="<%=tracLogKeyList[i]%>"><%=tracLogValueList[i]%></option>\n			      	 	<%}\n	      	 		}else {\n	      	 			if(configureInfo.auditLevel==tracLogKeyList[i]){%>\n	      	 				<option selected = "selected" value="<%=tracLogKeyList[i]%>"><%=tracLogValueList[i]%></option>\n	      	 			<%}else{%>\n	      	 				<option value="<%=tracLogKeyList[i]%>"><%=tracLogValueList[i]%></option>\n	      	 			<%}\n	      	 		}\n	      	 	}%>\n			</select>\n		</div>\n	</div>\n	<div class="form-group" id = "persistQueueFullPathDiv" >\n		<label for="persistQueueFullPath" class="col-sm-3 control-label">服务器持久化队列文件保存路径：</label>\n		<div class="col-sm-4">\n			<input type="text" id="persistQueueFullPath" value = "<%=configureInfo.persistQueueFullPath%>"  class="form-control input-sm" value="/opt/applog/jcf/"  placeholder="">\n	    </div>\n	    <div>\n	    	<span class = "text-danger">*</span>\n	    	<span id = "persistQueueFullPathTip"></span>\n	    </div>\n	</div>\n	<div class="form-group" id = "serverLogLevelDiv" >\n		<label for="serverLogLevel" class="col-sm-3 control-label">服务日志级别：</label>\n		<div class="col-sm-4">\n			<select id="serverLogLevel" class="form-control input-sm">\n				<%for(var i = 0 ; i < serverLogLevels.length ;i ++){\n	         		var curll = serverLogLevels[i] ;\n	         		if(curll==configureInfo.serverLogLevel){%>\n	         			<option selected = "selected" value = "<%=curll%>" ><%=curll%></option>\n	         		<%}else{%>\n	         			<option value="<%=curll%>"><%=curll%></option>\n	         		<%}\n	         	  }%>\n			</select>\n		</div>\n	</div>\n	<div class="form-group" id = "serverLogTypeDiv" >\n		<label for="serverLogType" class="col-sm-3 control-label">服务器日志类型：</label>\n		<div class="col-sm-4">\n			<select id = "serverLogType" class="form-control input-sm" >\n	         	<%for(var i = 0; i < serverLogTypeList.length; i++){\n	         	  	var curlt = serverLogTypeList[i] ;\n	         		if(curlt.key==configureInfo.serverLogType){%>\n	         			<option selected="selected" value="<%=curlt.key%>" ><%=curlt.value%></option>\n	         		<%}else{%>\n	         			<option value="<%=curlt.key%>"><%=curlt.value%></option>\n	         		<%}\n	         	  }%>\n			</select>\n		</div>\n	</div>\n	<div class="form-group">\n		<div class="col-sm-offset-2 col-sm-10">\n			<button type="button" id="groupServerCfgSubmit" class="btn btn-primary">保存</button>\n		</div>\n   </div>\n</form>\n'),define("travsky/jcf/1.0.0/view/server/serverInputCheck",["travsky/jcf/1.0.0/view/server/server","jquery","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","backbone","underscore","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"],function(a){var b=a("travsky/jcf/1.0.0/view/server/server"),c=function(){this.checkServerName=function(){return b.checkServerName()
},this.checkServerManagePort=function(){return b.checkServerManagePort()},this.checkServerDeployPort=function(){return b.checkServerDeployPort()},this.checkHttpPort=function(){return b.checkHttpPort()},this.checkSshPort=function(){return b.checkSshPort()},this.checkjava_Memory=function(){return b.checkjava_Memory()},this.checkjava_Max_Perm_Mem=function(){return b.checkjava_Max_Perm_Mem()},this.checkdirect_mem_size=function(){return b.checkdirect_mem_size()},this.checkjava_Perm_Mem=function(){return b.checkjava_Perm_Mem()},this.checkgcFileNum=function(){return b.checkgcFileNum()},this.checkgcFileSize=function(){return b.checkgcFileSize()},this.checkBindPort=function(){return b.checkBindPort()},this.checkloadfactor=function(){return b.checkloadfactor()},this.checkMemoryPoolSize=function(){return b.checkMemoryPoolSize()},this.checkBlockSize=function(){return b.checkBlockSize()},this.checkHeapMessageLimit=function(){return b.checkHeapMessageLimit()},this.checkchannelQueueSize=function(){return b.checkchannelQueueSize()},this.checkchannelConcurrent=function(){return b.checkchannelConcurrent()},this.checkconnectionRetry=function(){return b.checkconnectionRetry()},this.checkheartBeatTime=function(){return b.checkheartBeatTime()},this.checkmessageBodyLimit=function(){return b.checkmessageBodyLimit()},this.checkserviceip=function(){return b.checkserviceip()},this.getRegistryBindPort=function(){return b.getRegistryBindPort()},this.checkserverport=function(){return b.checkserverport()},this.checksynchtime=function(){return b.checksynchtime()},this.checkMaxidletime=function(){return b.checkMaxidletime()},this.checkmaxFileSize=function(){return b.checkmaxFileSize()},this.checkmaxBackupIndex=function(){return b.checkmaxBackupIndex()},this.checkpersistQueueFullPath=function(){return b.checkpersistQueueFullPath()},this.checkServerManagePort4Update=function(){return b.checkServerManagePort4Update()},this.checkServerDeployPort4Update=function(){return b.checkServerDeployPort4Update()},this.checkHttpPort4Update=function(){return b.checkHttpPort4Update()},this.checkSshPort4Update=function(){return b.checkSshPort4Update()},this.checkBindPort4Update=function(){return b.checkBindPort4Update()},this.checkStatisticsSyncTime=function(){return b.checkStatisticsSyncTime()},this.checkStatisticsPath=function(){return b.checkStatisticsPath()},this.checkJvmHeapAlert=function(){return b.checkJvmHeapAlert()},this.checkJvmHeapBlock=function(){return b.checkJvmHeapBlock()},this.checkMaxSize4Store=function(){return b.checkMaxSize4Store()},this.checkCacheNodeAlert=function(){return b.checkCacheNodeAlert()}};return c}),define("travsky/jcf/1.0.0/view/server/groupServerConfig_registry",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/view/server/serverInputCheck","travsky/jcf/1.0.0/view/server/server","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/server/groupServerConfig_registry.tpl"),f=a("travsky/jcf/1.0.0/view/server/serverInputCheck"),g=a("travsky/jcf/1.0.0/util/CommonUtil"),h=d.ItemView.extend({template:c.template(e),initialize:function(){b.extend(this,new f)},events:{"click #groupServerCfgSubmit":"saveGroupServerCfg","blur #java_Memory":"checkjava_Memory","blur #java_Perm_Mem":"checkjava_Perm_Mem","blur #synchTime":"checksynchtime","blur #maxIdleTime":"checkMaxidletime","blur #gcFileNum":"checkgcFileNum","blur #gcFileSize":"checkgcFileSize"},saveGroupServerCfg:function(){var a=this.checkRegistryGroupFrom();if(a){var c=["serverId","groupId","serverCategory","java_Memory","java_Perm_Mem","karaf_opts","synchTime","maxIdleTime","heapDumpPath","gcFile","gcRotation","gcFileNum","gcFileSize","serverLogLevel","serverLogType"],d=g.getFormInputObj(c),e="/"+jcfManager.appName+"/server/updateGroupServerConfig.action",f=g.dealAjaxRequest4JSObj(e,d);b.when(f).done(function(a){"true"==a.flag?alert("保存信息成功"):alert("保存信息失败")})}},checkRegistryGroupFrom:function(){return this.checkjava_Memory()&&this.checkjava_Perm_Mem()&&this.checksynchtime()&&this.checkMaxidletime()&&this.checkgcFileNum()&&this.checkgcFileSize()?!0:!1}});return h}),define("travsky/jcf/1.0.0/template/server/groupServerConfig_registry.tpl",[],'<br/>\n<form class="form-horizontal" role="form">\n   <input type="hidden" id="serverId" value="<%=configureInfo.serverId%>"/>\n   <input type = "hidden" id = "groupId" value ="<%=groupId%>"/>\n   <input type = "hidden" id = "serverCategory" value ="<%=serverCategory%>"/>\n   \n   <div class="form-group" id = "java_MemoryDiv" >\n      <label for="java_Memory" class="col-sm-3 control-label">堆内存大小：</label>\n      <div class="col-sm-4">\n        <input type="text" id="java_Memory"  value = "<%=configureInfo.java_Memory%>"  class="form-control input-sm"  placeholder="单位只能为kK,mM,gG" />\n      </div>\n      <div><span class = "text-info">(单位:kK,mM,gG)&nbsp;</span><span id = "java_MemoryTip"></span></div>\n   </div>\n\n   <div class="form-group" id = "java_Perm_MemDiv" >\n      <label for="java_Perm_Mem" class="col-sm-3 control-label">永久代堆大小：</label>\n      <div class="col-sm-4">\n        <input type="text" id="java_Perm_Mem" value = "<%=configureInfo.java_Perm_Mem%>"   class="form-control input-sm"  placeholder="单位只能为kK,mM,gG" />\n      </div>\n      <div><span class = "text-info">(单位:kK,mM,gG)&nbsp;</span><span id = "java_Perm_MemTip"></span></div>\n   </div>\n\n   <div class="form-group" id = "karaf_optsDiv" >\n      <label for="karaf_opts" class="col-sm-3 control-label">JVM扩展参数：</label>\n      <div class="col-sm-4">\n        <input type="text" id="karaf_opts" value = "<%=configureInfo.karaf_opts%>"   class="form-control input-sm"  placeholder="必配置JVM参数超过系统内存值后将导致错误" />\n      </div>\n      <div><span id = "karaf_optsTip"></span></div>\n   </div>\n   \n   <!--组配置增加页面控件开始-------------------------------->\n   <!--堆内存快照-->\n   \n   <div class="form-group" id = "heapDumpPathDiv" >\n      <label for="heapDumpPath" class="col-sm-3 control-label">堆内存快照的存储文件路径：</label>\n      <div class="col-sm-4">\n         <input type="text" id="heapDumpPath"  value = "<%=configureInfo.heapDumpPath%>"  class="form-control input-sm"  placeholder="">\n      </div>\n      <div><span id = "heapDumpPathTip"></span></div>\n   </div>\n	   \n   <div class="form-group" id = "gcFileDiv" >\n      <label for="gcFile" class="col-sm-3 control-label">GC日志的文件名和路径：</label>\n      <div class="col-sm-4">\n         <input type="text" id="gcFile" value = "<%=configureInfo.gcFile%>"   class="form-control input-sm"  placeholder="JDK 7版本开始兼容">\n      </div>\n      <div><span id = "gcFileTip"></span></div>\n   </div>\n	   \n   <div class="form-group" id = "gcRotationDiv" >\n      <label for="gcRotation" class="col-sm-3 control-label">GC日志自动转储：</label>\n      <div class="col-sm-4">\n      	 <select id="gcRotation"  class="form-control input-sm" placeholder="JDK 7版本开始兼容">\n			<%\n      	 	 if(configureInfo.gcRotation=="-XX:+UseGCLogFileRotation"){\n      	 	 %>\n      	 	 	<option selected = "selected"  value="-XX:+UseGCLogFileRotation">true</option>\n      	 	 	<option value="" >false</option>\n      	 	 <%\n      	 	 }else if(""==configureInfo.gcRotation) {\n      	 	 %>\n      	 	 	<option value="-XX:+UseGCLogFileRotation">true</option>\n      	 	 	<option selected = "selected" value="" selected="selected">false</option>\n      	 	 <%\n      	 	 }\n      	 	%>\n		 </select>\n      </div>\n       <div><span id = "gcRotationTip"></span></div>\n   </div>\n	   \n   <div class="form-group" id = "gcFileNumDiv" >\n      <label for="gcFileNum" class="col-sm-3 control-label">GC日志绕接数目：</label>\n      <div class="col-sm-4">\n         <input type="text" id="gcFileNum"  value = "<%=configureInfo.gcFileNum%>"  class="form-control input-sm"  placeholder="JDK 7版本开始兼容">\n      </div>\n      <div><span id = "gcFileNumTip"></span></div>\n   </div>\n	    \n   <div class="form-group" id = "gcFileSizeDiv" >\n      <label for="gcFileSize" class="col-sm-3 control-label">GC日志大小：</label>\n      <div class="col-sm-4">\n         <input type="text" id="gcFileSize"  value = "<%=configureInfo.gcFileSize%>"  class="form-control input-sm"  placeholder="单位为k,K,m,M,g,G">\n      </div>\n      <div><span class = "text-info">(单位:k,K,m,M,g,G)&nbsp;</span><span id = "gcFileSizeTip"></span></div>\n   </div> \n	   \n   \n   <!--监听端口-->\n   <!--组配置增加页面控件结束-------------------------------->\n   \n   \n   <div class="form-group" id = "synchTimeDiv" >\n      <label for="synchTime" class="col-sm-3 control-label">注册库同步时间隔：</label>\n      <div class="col-sm-4">\n        <input type="text" id="synchTime"  value = "<%=configureInfo.synchTime%>" class="form-control input-sm"  placeholder="必填项，正整数" />\n      </div>\n      <div><span class = "text-info">(单位:秒)</span><span class = "text-danger">*</span><span id = "synchTimeTip"></span></div>\n   </div>\n   \n   <div class="form-group" id = "maxIdleTimeDiv" >\n      <label for="maxIdleTime" class="col-sm-3 control-label">JCF服务器失效超时：</label>\n      <div class="col-sm-4">\n        <input type="text" id="maxIdleTime" value = "<%=configureInfo.maxIdleTime%>"  class="form-control input-sm"  placeholder="必填项，正整数" />\n      </div>\n      <div><span class = "text-info">(单位:秒)</span><span class = "text-danger">*</span><span id = "maxIdleTimeTip"></span></div>\n   </div>\n   \n   \n  <div class="form-group" id = "serverLogLevelDiv" >\n      <label for="serverLogLevel" class="col-sm-3 control-label">服务日志级别：</label>\n      <div class="col-sm-4">\n         <select id = "serverLogLevel" class="form-control input-sm" >\n         	 <%\n         	  for(var i = 0 ; i < serverLogLevels.length ;i ++){\n         	    var curll = serverLogLevels[i] ;\n         		if(curll==configureInfo.serverLogLevel){\n         		%>\n         			<option selected = "selected" value = "<%=curll%>" ><%=curll%></option>\n         		<%\n         		}else {\n         		%>\n         			<option  value = "<%=curll%>" ><%=curll%></option>\n         		<%\n         		}\n         	  }\n         	%>\n         </select>\n      </div>\n   </div>\n	   \n   <div class="form-group" id = "serverLogTypeDiv" >\n      <label for="serverLogType" class="col-sm-3 control-label">服务器日志类型：</label>\n      <div class="col-sm-4">\n         <select id = "serverLogType" class="form-control input-sm" >\n         	<%\n         	  for(var i = 0 ; i < serverLogTypeList.length ;i ++){\n         	  	var curlt = serverLogTypeList[i] ;\n         		if(curlt.key==configureInfo.serverLogType){\n         		%>\n         			<option selected = "selected"  value = "<%=curlt.key%>" ><%=curlt.value%></option>\n         		<%\n         		}else {\n         		%>\n         			<option  value = "<%=curlt.key%>" ><%=curlt.value%></option>\n         		<%\n         		}\n         	  }\n         	%>\n         </select>\n      </div>\n   </div>\n   \n   <div class="form-group">\n      <div class="col-sm-offset-2 col-sm-10">\n         <button type="button" id = "groupServerCfgSubmit" class="btn btn-primary">保存</button>\n      </div>\n   </div>\n   \n</form>\n'),define("travsky/jcf/1.0.0/view/server/groupServerConfig_cache",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/server/checkCacheGroup","travsky/jcf/1.0.0/view/server/global_view","bs-alert"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/server/groupServerConfig_cache.tpl");a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2");var g=a("travsky/jcf/1.0.0/util/CommonUtil"),h=a("travsky/jcf/1.0.0/view/server/checkCacheGroup"),i=a("travsky/jcf/1.0.0/view/server/global_view"),j=e.LayoutView.extend({initialize:function(){b.extend(this,new h)},template:d.template(f),regions:{errInfoRegion:"#errInfoRegion",contentRegion:"#jcfCacheGroupCfgRegion"},events:{"blur #addGroup_maxSize4Store":"checkMaxSize4Store","blur #addGroup_singleDataMaxLength":"checkSingleDataMaxLength","blur #addGroup_cacheNodeAlert":"checkCacheNodeAlert","blur #addGroup_jvmMemory":"checkJvmMemory","blur #addGroup_jvmHeapAlert":"checkJvmHeapAlert","blur #addGroup_dataBackupNum":"checkDataBackupNum","blur #addGroup_statisticsPath":"checkStatisticsPath","blur #addGroup_statisticsSyncTime":"checkStatisticsSyncTime","blur #addGroup_jvmHeapBlock":"checkJvmHeapBlock","blur #addGroup_groupPassword":"checkGroupPassword","blur #addGroup_broadcastURL":"checkBroadcastURL","click #groupServerCfgSubmit":"groupServerCfgSubmit","blur #addGroup_maxSize4Cache":"checkMaxSize4Cache","blur #addGroup_networkPort":"checkaNetworkPort","blur #addGroup_tcpIPMember":"checkaddTcpIPMember"},getCacheConfigFormInputParam:function(){var a=["groupId","groupName","addGroup_groupPassword","addGroup_broadcastURL","addGroup_maxSize4Store","addGroup_singleDataMaxLength","addGroup_cacheNodeAlert","addGroup_jvmMemory","addGroup_jvmHeapAlert","addGroup_dataBackupNum","addGroup_statisticsPath","addGroup_statisticsSyncTime","addGroup_jvmHeapBlock","addGroup_maxSize4Cache","addGroup_networkPort","addGroup_tcpIPMember"],c=g.getFormInputObj(a),d=b.trim(b(":radio[name='addGroup_cacheModel']:checked").val());return c.addGroup_cacheModel=d,c.groupCategory="7",c.addGroup_broadcastURL="127.0.0.1:8888",c},checkCacheGroupCfgInfo:function(){return this.checkGroupPassword()&&this.checkBroadcastURL()&&this.checkMaxSize4Store()&&this.checkSingleDataMaxLength()&&this.checkCacheNodeAlert()&&this.checkJvmMemory()&&this.checkJvmHeapAlert()&&this.checkDataBackupNum()&&this.checkStatisticsPath()&&this.checkStatisticsSyncTime()&&this.checkJvmHeapBlock()&&this.checkMaxSize4Cache()&&this.checkaNetworkPort()&&this.checkaddTcpIPMember()?!0:!1},groupServerCfgSubmit:function(){var a=this.checkCacheGroupCfgInfo(),d=this;if(a){var e=this.getCacheConfigFormInputParam(),f="/"+jcfManager.appName+"/server/updateJcfCacheGroupCfg.action",h=g.dealAjaxRequest4JSObj(f,e);b.when(h).done(function(a){var b=new c.Model(a),e=new i({model:b});d.errInfoRegion.show(e)})}}});return j}),define("travsky/jcf/1.0.0/template/server/groupServerConfig_cache.tpl",[],'<br/>\n<div id = "errInfoRegion"></div>\n<div id = "jcfCacheGroupCfgRegion">\n	<input type = "hidden" id = "groupName" value = "<%=groupName%>" />\n	<input type = "hidden" id = "groupId" value = "<%=groupId%>"/>\n	\n	<form class="form-horizontal"  role="form" method= "POST">\n   		<div class="form-group" id = "addGroup_groupPasswordDiv" >\n		      <label for="addGroup_groupPassword" class="col-sm-3 control-label">域密码：</label>\n		      <div class="col-sm-4">\n		        <input type="text" id="addGroup_groupPassword"  value = "<%=groupPassword%>" class="form-control input-sm"  placeholder="必填项" />\n		      </div>\n		      <div><span class = "text-danger">*</span><span id = "addGroup_groupPasswordTip"></span></div>\n	    </div>\n	    \n	    <!--\n	    <label for="addGroup_broadcastURL" class="col-sm-3 control-label">广播地址：</label>\n	    <span class = "text-info">(IP:端口)</span><span id = "addGroup_broadcastURLTip"></span>\n	    -->\n   		<input type="hidden" id="addGroup_broadcastURL"   value = "<%=broadcastURL%>" class="form-control input-sm"  placeholder="必填项" />\n   		\n   		\n   		\n   		<div class="form-group" id = "addGroup_maxSize4StoreDiv" >\n		      <label for="addGroup_maxSize4Store" class="col-sm-3 control-label">存储最大个数：</label>\n		      <div class="col-sm-4">\n		        <input type="text" id="addGroup_maxSize4Store"  value = "<%=maxSize4Store%>"  class="form-control input-sm"  placeholder="必填项" />\n		      </div>\n		      <div><span class = "text-danger">*</span><span id = "addGroup_maxSize4StoreTip"></span></div>\n	    </div>\n	    \n	    <!-----------------------------新增参数开始----------------------------------->\n	    <div class="form-group" id = "addGroup_maxSize4CacheDiv" >\n		      <label for="addGroup_maxSize4Cache" class="col-sm-3 control-label">cache最大个数：</label>\n		      <div class="col-sm-4">\n		        <input type="text" id="addGroup_maxSize4Cache"  value = "<%=maxSize4Cache%>" class="form-control input-sm"  placeholder="必填项" />\n		      </div>\n		      <div><span class = "text-danger">*</span><span id = "addGroup_maxSize4CacheTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "addGroup_networkPortDiv" >\n		      <label for="addGroup_networkPort" class="col-sm-3 control-label">networkPort：</label>\n		      <div class="col-sm-4">\n		        <input type="text" id="addGroup_networkPort"  value = "<%=networkPort%>" class="form-control input-sm"  placeholder="必填项" />\n		      </div>\n		      <div><span class = "text-danger">*</span><span id = "addGroup_networkPortTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "addGroup_tcpIPMemberDiv" >\n		      <label for="addGroup_tcpIPMember" class="col-sm-3 control-label">tcp-ip member：</label>\n		      <div class="col-sm-4">\n		        <input type="text" id="addGroup_tcpIPMember"  value = "<%=tcpIPMember%>" class="form-control input-sm"  placeholder="[10.6.148.225:8000,10.6.148.224:8000]" />\n		      </div>\n		      <div><span class = "text-danger">*</span><span id = "addGroup_tcpIPMemberTip"></span></div>\n	    </div>\n	    <!---------------------新增参数结束--------------------------------------------->\n   		\n   		<div class="form-group" id = "addGroup_singleDataMaxLengthDiv" >\n		      <label for="addGroup_singleDataMaxLength" class="col-sm-3 control-label">单数据最大长度：</label>\n		      <div class="col-sm-4">\n		        <input type="text" id="addGroup_singleDataMaxLength" value = "<%=singleDataMaxLength%>"  class="form-control input-sm"  placeholder="必填项" />\n		      </div>\n		      <div><span class = "text-danger">*</span><span id = "addGroup_singleDataMaxLengthTip"></span></div>\n	    </div>\n   		\n   		<div class="form-group" id = "addGroup_cacheNodeAlertDiv" >\n		      <label for="addGroup_cacheNodeAlert" class="col-sm-3 control-label">存储报警阀值：</label>\n		      <div class="col-sm-4">\n		        <input type="text" id="addGroup_cacheNodeAlert"  value = "<%=cacheNodeAlert%>" class="form-control input-sm"  placeholder="必填项" />\n		      </div>\n		      <div><span class = "text-danger">*</span><span class = "text-info">(个)</span><span id = "addGroup_cacheNodeAlertTip"></span></div>\n	    </div>\n   		\n   		<div class="form-group"  >\n		      <label  class="col-sm-3 control-label">CACHE类型：</label>\n		      <div class="col-sm-4">\n		      	<%if(cacheModel=="LRU"||cacheModel=="LFU"){\n		      		if(cacheModel=="LRU"){\n		      		%>\n		      		   <input type="radio"  name = "addGroup_cacheModel" checked = "checked" value = "LRU"/> LRU\n		        	   <input type="radio"  name = "addGroup_cacheModel" value = "LFU"/> LFU\n		      		<%\n		      		}else{\n		      		%>\n		      		   <input type="radio"  name = "addGroup_cacheModel"  value = "LRU"/> LRU\n		        	   <input type="radio"  name = "addGroup_cacheModel" checked = "checked" value = "LFU"/> LFU\n		      		<%\n		      		}\n		      	}else{\n		      		%>\n		      		   <input type="radio"  name = "addGroup_cacheModel" checked = "checked" value = "LRU"/> LRU\n		        	   <input type="radio"  name = "addGroup_cacheModel" value = "LFU"/> LFU\n		      		<%\n		      	}%>\n		      </div>\n		      <div></div>\n	    </div>\n   		\n   		<div class="form-group" id = "addGroup_jvmMemoryDiv" >\n		      <label for="addGroup_jvmMemory" class="col-sm-3 control-label">JVM内存：</label>\n		      <div class="col-sm-4">\n		        <input type="text" id="addGroup_jvmMemory"  value = "<%=jvmMemory%>" class="form-control input-sm"  placeholder="必填项" />\n		      </div>\n		      <div><span class = "text-danger">*</span><span class = "text-info">(kK,mM,gG)</span><span id = "addGroup_jvmMemoryTip"></span></div>\n	    </div>\n   		\n   		<div class="form-group" id = "addGroup_jvmHeapAlertDiv" >\n		      <label for="addGroup_jvmHeapAlert" class="col-sm-3 control-label">内存报警阀值：</label>\n		      <div class="col-sm-4">\n		        <input type="text" id="addGroup_jvmHeapAlert" value = "<%=jvmHeapAlert%>"  class="form-control input-sm"  placeholder="必填项" />\n		      </div>\n		      <div><span class = "text-danger">*</span><span class = "text-info">(%)</span><span id = "addGroup_jvmHeapAlertTip"></span></div>\n	    </div>\n   		\n   		<div class="form-group" id = "addGroup_dataBackupNumDiv" >\n		      <label for="addGroup_dataBackupNum" class="col-sm-3 control-label">数据备份个数：</label>\n		      <div class="col-sm-4">\n		        <input type="text" id="addGroup_dataBackupNum"  value = "<%=dataBackupNum%>" class="form-control input-sm"  placeholder="必填项" />\n		      </div>\n		      <div><span class = "text-danger">*</span><span id = "addGroup_dataBackupNumTip"></span></div>\n	    </div>\n   \n	    \n	    <input type="hidden" id="addGroup_statisticsPath" value = "<%=statisticsPath%>"  class="form-control input-sm"  placeholder="必填项" />\n   		\n   		<div class="form-group" id = "addGroup_statisticsSyncTimeDiv" >\n		      <label for="addGroup_statisticsSyncTime" class="col-sm-3 control-label">数据同步时间：</label>\n		      <div class="col-sm-4">\n		        <input type="text" id="addGroup_statisticsSyncTime" value = "<%=statisticsSyncTime%>"  class="form-control input-sm"  placeholder="必填项" />\n		      </div>\n		      <div><span class = "text-danger">*</span><span class = "text-info">(秒)</span><span id = "addGroup_statisticsSyncTimeTip"></span></div>\n	    </div>\n   		\n   		<div class="form-group" id = "addGroup_jvmHeapBlockDiv" >\n		      <label for="addGroup_jvmHeapBlock" class="col-sm-3 control-label">内存阻塞阀值：</label>\n		      <div class="col-sm-4">\n		        <input type="text" id="addGroup_jvmHeapBlock" value = "<%=jvmHeapBlock%>"  class="form-control input-sm"  placeholder="必填项" />\n		      </div>\n		      <div><span class = "text-danger">*</span><span class = "text-info">(%)</span><span id = "addGroup_jvmHeapBlockTip"></span></div>\n	    </div>\n   	</form>\n   	\n   	 <div class="form-group">\n	      <div class="col-sm-offset-2 col-sm-10">\n	         <button type="button" id = "groupServerCfgSubmit" class="btn btn-primary">保存</button>\n	      </div>\n	 </div>\n</div>'),define("travsky/jcf/1.0.0/template/server/serverMgr4GroupLayout.tpl",[],'<div>\n	<ul class="nav nav-tabs " id = "serverMgrNav">     \n		<%\n			if(((groupCategory=="1"||groupCategory=="6"||groupCategory=="7")&&jcfGroupCfgFlag=="true")||\n				groupCategory=="4"&&registryGroupCfgFlag=="true"\n			){//jcf和适配器\n		%>\n			    <li <%if(selectedPageUI=="serverGroupConfig"){%>class = \'active\'<%}%> ><a href="serverGroupConfig">服务器组配置</a></li>      \n		<%	\n			}\n		%>\n		<li <%if(selectedPageUI=="serverGroupList"){%>class = \'active\'<%}%> ><a href="serverGroupList">服务器控制</a></li>      \n	</ul>\n	<input type = "hidden" id = "hiddenGroupId" value = "<%=hiddenGroupId%>">\n</div>\n<div id = "tipInfoRegion"></div>\n<div  id = "searchRegion"></div>\n<div  id = "listRegion"></div>\n<div  id = "pagebarRegion"></div>\n<input id = "freshPage4GroupServerFlag" type = "hidden" />\n<input id = "freshPage4GroupServerUrl" type = "hidden" />'),define("travsky/jcf/1.0.0/template/server/groupServerSearch.tpl",[],'<br/>\n<table width = "100%" id = "searchServerFrom">\n      <tr>\n 		<td width = "20%">\n         	<button id = "batchStartBtn" class = "btn btn-success <%if(batchOperFlag!=\'true\'){%>disabled<%}%>">启动</button>\n			<button id = "batchStopBtn" class = "btn btn-warning <%if(batchOperFlag!=\'true\'){%>disabled<%}%>">停止</button>\n			<button id = "batchForceStopBtn" class = "btn btn-danger <%if(batchOperFlag!=\'true\'){%>disabled<%}%>">强制停止</button>\n        </td>\n         <td width = "10%"></td>\n         <td width = "10%" align = "right">运行状态&nbsp;:&nbsp;</td>\n         <td width = "20%">\n         	<select id = "processStatus"  class  = "form-control input-sm">\n         		<option value="0" selected="selected">全部</option>\n         		<option value="1">启动</option>\n         		<option value="2">停止</option>\n         	</select>\n         </td>\n         <td width = "10%" align = "right">\n         	<button type="button" id = "searchGroupServer"  class="btn btn-primary <%if(queryOperFlag!=\'true\'){%>disabled<%}%>">查询</button>\n         </td>\n         <td width = "10%" align = "right">\n         	<button type="button" id = "deleteGroupBtn"  class="btn <%if(delOperFlag!=\'true\'){%>disabled<%}%> ">删除分组</button>\n         </td>\n         <td width = "*%"></td>\n      </tr>\n</table>'),define("travsky/jcf/1.0.0/model/pagebar_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({defaults:function(){return{prePage:"1",nextPage:"1",currentPage:"1",pageSize:jcfManager.defaultPageSize,recordCount:"0",pageCount:"1",beginPageIndex:"1",endPageIndex:"1"}},hasNext:function(){return this.get("pageCount")>this.get("currentPage")},hasPrevious:function(){return this.get("currentPage")>1}});return c}),define("travsky/jcf/1.0.0/view/listTip_view",["jquery","backbone","underscore","marionette","bs-alert"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette");a("bs-alert")(b);var e=a("travsky/jcf/1.0.0/template/listTip.tpl"),f=d.ItemView.extend({template:c.template(e)});return f}),define("travsky/jcf/1.0.0/template/listTip.tpl",[],'<%\n	if(succList.length>0){\n	  %>\n		<div class="alert alert-success">\n			 <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> &times;</button>\n		   <%\n			  for(var i = 0 ; i < succList.length ; i ++){\n			  %>\n				 <%=succList[i]%><br/>\n			  <%\n			}	\n		   %>\n		</div>\n	  <%\n	}\n	\n	if(errList.length>0){\n	  %>\n		<div class="alert alert-danger">\n			<button type="button" class="close" data-dismiss="alert" aria-hidden="true"> &times;</button>\n		   <%\n			  for(var j = 0 ; j < errList.length ; j ++){\n			  %>\n				 <%=errList[j]%><br/>\n			  <%\n			}	\n		   %>\n		</div>\n	  <%\n	}\n%>'),define("travsky/jcf/1.0.0/template/server/groupServerItem.tpl",[],'<td class="groupServerIdsTd">\n	<input type="checkbox" serverStatus="<%=processStatus%>" serverName="<%=serverName%>" value="<%=serverName%>"/>\n</td>\n<td><%=groupName%></td>\n<td name="serverName"><%=serverName%></td>\n<td><%=serverIp%></td>\n<td>\n	<%if(serverCategory==1){%>\n		JCF服务器\n	<%}else if (serverCategory==2){%>\n		TSI适配服务器\n	<%}else if(serverCategory==3){%>\n		上下文服务器\n	<%}else if(serverCategory==4){%>\n		<%if (registryServerCategory==1){%>\n			主服务库\n		<%}else{%>\n			备服务库\n		<%}%>\n	<%}else if (serverCategory==7){%>\n		JCFCache\n	<%}%>\n	\n</td>\n<td>\n	<%if(processStatus==1){%>\n		启动\n	<%}else if(processStatus==2){%>\n		停止\n	<%}else if(processStatus==3){%>\n		启动中...\n	<%}else if(processStatus==4){%>\n		停止中...\n	<%}else if(processStatus==44){%>\n		强停中..\n	<%}else if(processStatus==7){%>\n		查询中...\n	<%}else{%>\n		异常\n	<%}%>\n</td>\n<%if(serverCategory=="1"){\n%>\n<td class="operTd">\n	<%if(processStatus=="1"){%>\n		<%\n		   if(jcfStopFlag=="true"){\n		   %> <a href="stop">停止</a><%\n		   }else{\n		   	  %>停止<%\n		   }\n		%>\n		|\n		<%if(jcfForceStopFlag=="true"){\n			%><a href="forceStop">强制停止</a><%\n		}else{\n			%><span class = "text-info">强制停止</span><%\n		}%>\n	<%}else if(processStatus=="2"){%>\n		<%if(jcfStartFlag=="true"){\n			%><a href="start">启动</a><%\n		}else{\n			%><span class = "text-info">启动</span><%\n		}%>	\n	<% }else if (processStatus=="3"){%>\n		启动中\n	<%}else if (processStatus=="4"){%>\n		停止中|\n		<%if(jcfForceStopFlag=="true"){\n			%><a href="forceStop">强制停止</a><%\n		}else{\n			%><span class = "text-info">强制停止</span><%\n		}%>\n	<%}else if (processStatus=="44"){%>\n		<%if(jcfForceStopFlag=="true"){\n			%><a href="forceStop">强制停止</a><%\n		}else{\n			%><span class = "text-info">强制停止</span><%\n		}%>\n	<%}else{%>\n		<%if(jcfForceStopFlag=="true"){\n			%><a href="forceStop">强制停止</a><%\n		}else{\n			%><span class = "text-info">强制停止</span><%\n		}%>\n	<%}%>\n</td>\n<td class="configTd">\n	<%if((processStatus=="1"||processStatus=="2")&&(jcfConfigFlag=="true")){%>\n		<a href="<%=serverId%>" serverName="<%=serverName%>">配置</a>\n	<%}else{%>\n		<span class = "text-info">配置</span>\n	<%}%>\n</td>\n<td class="deleteTd">\n	<%if(processStatus=="1"||processStatus=="3"||processStatus=="4"||processStatus=="44"||jcfUnloadFlag!="true"){%>\n		<span class = "text-info">删除</span>\n	<%}else{%>\n		<a href="<%=serverId%>" name="<%=serverName%>" >删除</a>\n	<%}%>\n</td>\n<td class="memoryDetailTd" >\n	<%if((processStatus=="1")&&jcfMemViewFlag=="true"){%>\n		<a href="<%=serverId%>">内存查看</a>\n	<%}else{%>\n		<span class = "text-info">内存查看</span>\n	<%}%>\n</td>\n<td><%=nodeControllerPort%></td>\n\n<%\n}else if (serverCategory=="3"||serverCategory=="7"){//上下文服务器\n%>\n<td class="operTd">\n	<%if(processStatus=="1"){%>\n		<%if(contextStopFlag=="true"){\n			%><a href="stop">停止</a><%\n		}else{\n			%><span class = "text-info">停止</span><%\n		}%>\n		|\n		<%if(contextForceStopFlag=="true"){\n			%><a href="forceStop">强制停止</a><%\n		}else{\n			%><span class = "text-info">强制停止</span><%\n		}%>\n	<%}else if(processStatus=="2"){%>	\n		<%if(contextStarFlag=="true"){\n			%><a href="start">启动</a><%\n		}else{\n			%><span class = "text-info">启动</span><%\n		}%>\n	<% }else if (processStatus=="3"){%>\n		启动中\n	<%}else if (processStatus=="4"){%>\n		停止中|\n		<%if(contextForceStopFlag=="true"){\n			%><a href="forceStop">强制停止</a><%\n		}else{\n			%>强制停止<%\n		}%>\n	<%}else if (processStatus=="44"){%>\n		<%if(contextForceStopFlag=="true"){\n			%><a href="forceStop">强制停止</a><%\n		}else{\n			%>强制停止<%\n		}%>\n	<%}else{%>\n		<%if(contextForceStopFlag=="true"){\n			%><a href="forceStop">强制停止</a><%\n		}else{\n			%>强制停止<%\n		}%>\n	<%}%>\n</td>\n<td class="deleteTd">\n	<%if(processStatus=="1"||processStatus=="3"||processStatus=="4"||processStatus=="44"||contextUnloadFlag!="true"){%>\n		删除\n	<%}else{%>\n		<a href="<%=serverId%>" name="<%=serverName%>" >删除</a>\n	<%}%>\n</td>\n<%\n}else if (serverCategory=="4"){\n%>\n<td class="operTd">\n	<%if(processStatus=="1"){%>\n		<%if(registryStopFlag=="true"){\n			%><a href="stop">停止</a><%\n		}else{\n			%>停止<%\n		}%>\n		|\n		<%if(registryForceStopFlag=="true"){\n			%><a href="forceStop">强制停止</a><%\n		}else{\n			%>强制停止<%\n		}%>\n	<%}else if(processStatus=="2"){%>	\n		<%if(registryStartFlag=="true"){\n			%><a href="start">启动</a><%\n		}else{\n			%>启动<%\n		}%>\n		\n	<% }else if (processStatus=="3"){%>\n		启动中\n	<%}else if (processStatus=="4"){%>\n		停止中|\n		<%if(registryForceStopFlag=="true"){\n			%><a href="forceStop">强制停止</a><%\n		}else{\n			%>强制停止<%\n		}%>\n	<%}else if (processStatus=="44"){%>\n		<%if(registryForceStopFlag=="true"){\n			%><a href="forceStop">强制停止</a><%\n		}else{\n			%>强制停止<%\n		}%>\n	<%}else{%>\n		<%if(registryForceStopFlag=="true"){\n			%><a href="forceStop">强制停止</a><%\n		}else{\n			%>强制停止<%\n		}%>\n	<%}%>\n</td>\n<td class="configTd">\n	<%if((processStatus=="1"||processStatus=="2")&&(registryConfigFlag=="true")){%>\n		<a href="<%=serverId%>" serverName="<%=serverName%>">配置</a>\n	<%}else{%>\n		配置\n	<%}%>\n</td>\n<td class="deleteTd">\n	<%if(processStatus=="1"||processStatus=="3"||processStatus=="4"||processStatus=="5"||processStatus=="44"||registryUnloadFlag!="true"){%>\n		删除\n	<%}else{%>\n		<a href="<%=serverId%>" name="<%=serverName%>" >删除</a>\n	<%}%>\n</td>\n<td class="changeRegistryServerTd">\n	<%if(processStatus=="1"&&registryServerCategory=="2"&&registrySwitchFlag=="true"){%>\n		<a href="#">切换</a>\n	<%}else{%>\n		切换\n	<%}%>\n</td>\n<%\n}%>'),define("travsky/jcf/1.0.0/template/server/groupServerList.tpl",[],'<table class="table table-bordered">\n	<thead>\n		<tr>\n	      	<th>\n	      		<input type="checkbox" id="groupCheckAll"/>\n	      	</th>\n	        <th>所属分组</th>\n	        <th>服务器名称</th>\n	        <th>服务器IP</th>\n	        <th>服务器类型</th>\n	        <th>当前状态</th>\n	        <th>操作</th>\n	        <%if(groupCategory!=3&&groupCategory!=7){%>\n	        	<th>配置</th>\n	        <%}%>\n	        <th>删除</th>\n	        <%if(groupCategory==1||groupCategory==6){%>\n	        	<th>内存查看</th>\n	        	<th>节点控制器Port</th>\n	        <%}%>\n	        <%if(groupCategory==4){%>\n	        	<th>切换</th>\n	        <%}%>\n		</tr>\n	</thead>\n	<tbody></tbody>\n</table>'),define("travsky/jcf/1.0.0/view/server/serverSysMemoryStatisticsLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/server/serverSysMemoryStatisticsItem.tpl"),g=a("travsky/jcf/1.0.0/template/server/serverSysMemoryStatisticsList.tpl"),h=a("travsky/jcf/1.0.0/template/server/serverSysMemoryStatisticsLayout.tpl"),i=a("travsky/jcf/1.0.0/template/server/serverSysMemoryStatisticsBaseInfo.tpl"),j=a("travsky/jcf/1.0.0/util/CommonUtil"),k=a("travsky/jcf/1.0.0/view/alert_view"),l=e.ItemView.extend({tagName:"table",className:"table",template:d.template(i)}),m=e.ItemView.extend({tagName:"tr",template:d.template(f)}),n=e.CompositeView.extend({template:d.template(g),childView:m,childViewContainer:"tbody"}),o=e.LayoutView.extend({template:d.template(h),initialize:function(a){this.queryString=a.queryString,this.on("showPageInfo",this.showPageInfo)
},regions:{baseInfoRegion:"#baseInfoRegion",downContentRegion:"#downContentRegion"},events:{"click #backBtn":"toBackPage"},showPageInfo:function(){var a=this.queryString.serverId,d="/"+jcfManager.appName+"/server/monitorSystemMemory.action",e={serverId:a},f=j.dealAjaxRequest4SimpleParam(d,e),g=this;b.when(f).done(function(a){if("true"==a.flag){var b=new c.Model(a.baseInfo),d=new l({model:b});g.baseInfoRegion.show(d);var e=new c.Collection(a.detailInfo);g.downContentRegion.show(new n({collection:e}))}else{var f=new k({msg:a.errInfo});jcfManager.dialogRegion.show(f),window.history.back()}})},toBackPage:function(){window.history.back()}});return o}),define("travsky/jcf/1.0.0/template/server/serverSysMemoryStatisticsItem.tpl",[],"<td><%=queueName%></td>\n<td><%=queueSize%></td>"),define("travsky/jcf/1.0.0/template/server/serverSysMemoryStatisticsList.tpl",[],'<table class = "table table-bordered">\n	<caption>系统内存使用情况详细列表</caption>\n	<thead>\n      <tr>\n         <th>队列名称</th>\n         <th>队列大小</th>\n      </tr>\n   </thead>\n   <tbody></tbody>\n</table>\n\n'),define("travsky/jcf/1.0.0/template/server/serverSysMemoryStatisticsLayout.tpl",[],'<div id = "baseInfoRegion"></div>\n<div id = "downContentRegion"></div>\n<div><button id = "backBtn" class = "btn btn-info" >返回</button></div>\n\n'),define("travsky/jcf/1.0.0/template/server/serverSysMemoryStatisticsBaseInfo.tpl",[],' <caption>基本信息:</caption>\n <thead>\n	  <tr>\n	     <th width = "20%">系统内存的总内存块数:</th>\n	     <th width = "20%"><%=allBlockNum%></th>\n	     <th width = "*%">&nbsp;</td>\n	  </tr>\n	  <tr>\n	     <th >系统内存的空闲内存块数:</th>\n	     <th><%=freeBlockNum%></th>\n	     <th >&nbsp;</td>\n	  </tr>\n </thead>\n'),define("travsky/jcf/1.0.0/view/server/serverMgr4ServerLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/server/serverUpdate_view","travsky/jcf/1.0.0/view/server/server","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/server/serverInputCheck","travsky/jcf/1.0.0/view/confirm_view","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/waiting_view","travsky/jcf/1.0.0/view/server/AuthCheck4ServerUtil"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/server/serverMgr4ServerLayout.tpl"),g=a("travsky/jcf/1.0.0/template/server/serverDetail.tpl"),h=a("travsky/jcf/1.0.0/util/CommonUtil"),i=a("querystring"),j=a("travsky/jcf/1.0.0/util/SidebarUtil"),k=a("travsky/jcf/1.0.0/view/server/serverUpdate_view"),l=a("travsky/jcf/1.0.0/view/server/AuthCheck4ServerUtil"),m=a("travsky/jcf/1.0.0/view/errorPage_view"),n=e.ItemView.extend({template:d.template(g)}),o=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString;var b=l.getJcfCfg4Single(),c=l.getJcfUpdate4Single(),d=l.getRegistryCfg4Single(),e=l.getRegistryUpdate4Single(),f=l.getContextUpdate4Single();this.model.set("jcfCfgFlag",b),this.model.set("jcfUpdateFlag",c),this.model.set("registryCfgFlag",d),this.model.set("registryUpdateFlag",e),this.model.set("contextUpdateFlag",f),this.on("showDownContentRegion",this.showDownContentRegion)},template:d.template(f),regions:{downContentRegion:"#downContentRegion"},events:{"click #serverMgrNav":"changeNavItem"},changeNavItem:function(a){a.stopPropagation(),a.preventDefault();var c=j.getModuleName(),d=b(a.target).attr("href"),e=b(a.target),f=e.parent();f.hasClass("active")||(this.queryString.selectedPageUI=d,appRouter.navigate(c+"/server/param/"+i.stringify(this.queryString)),f.siblings().removeClass("active"),f.addClass("active"),this.model.set("selectNavItem",d),this.showDownContentRegion())},showDownContentRegion:function(){var a="",d=this.model.get("serverId");"paramCfg"==this.model.get("selectNavItem")?a="保存":"serverUpdate"==this.model.get("selectNavItem")&&(a="下一步");var e=this.model.get("selectNavItem"),f=this,g="/"+jcfManager.appName+"/server/searchSingleServer.action",i={serverId:d},j=h.dealAjaxRequest4SimpleParam(g,i);b.when(j).done(function(b){if("true"==b.flag){var d=new c.Model(b);"detailInfo"==e?f.downContentRegion.show(new n({model:d})):(d.set("submitBtnInfo",a),f.downContentRegion.show(new k({model:d})))}else{var g=new m;jcfManager.contentRegion.show(g)}})}});return o}),define("travsky/jcf/1.0.0/template/server/serverMgr4ServerLayout.tpl",[],'<div>\n	<ul class="nav nav-tabs" id = "serverMgrNav">    \n		<li  <%if("detailInfo"==selectNavItem){%>class = "active"<%}%>  ><a href = "detailInfo" >详细信息</a></li> \n		\n		<%\n			if(serverCategory=="1"||serverCategory=="7"){//jcf和适配服务器\n				if(jcfCfgFlag=="true"){\n				  %><li <%if("paramCfg"==selectNavItem){%>class = "active"<%}%> ><a href = "paramCfg" >参数配置</a></li><%\n				}\n				if(jcfUpdateFlag=="true"){\n				  %><li <%if("serverUpdate"==selectNavItem){%>class = "active"<%}%> ><a href = "serverUpdate" >服务器更新</a></li><%\n				}\n			}else if (serverCategory=="3"){//上下文服务器\n				if(contextUpdateFlag=="true"){\n				  %><li <%if("serverUpdate"==selectNavItem){%>class = "active"<%}%> ><a href = "serverUpdate" >服务器更新</a></li><%\n				}\n			}else if (serverCategory=="4"){//注册库服务器\n				if(registryCfgFlag=="true"){\n				   %><li <%if("paramCfg"==selectNavItem){%>class = "active"<%}%> ><a href = "paramCfg" >参数配置</a></li><%\n				}\n				if(registryUpdateFlag=="true"){\n				   %><li <%if("serverUpdate"==selectNavItem){%>class = "active"<%}%> ><a href = "serverUpdate" >服务器更新</a></li><%\n				}\n			}\n		%>\n	</ul>\n	<input type = "hidden" id = "hiddenServerId" value = "<%=serverId%>">\n</div>\n<div id = "downContentRegion"></div>\n\n'),define("travsky/jcf/1.0.0/template/server/serverDetail.tpl",[],'<%\n	if(configInfo.serverCategory==3){\n%>\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">所属分组&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.groupNameShowUser%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">服务器名称&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.serverName%></div>\n	</div>\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">服务器类型&nbsp;:</div>\n	   <div class = "col-sm-3">上下文服务器</div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">服务器IP&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.serverIpShowUser%></div>\n	</div>\n	\n<%		\n	}else if (configInfo.serverCategory==4){\n%>\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">服务库组名&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.groupNameShowUser%></div>\n	</div>\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">服务库名&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.serverName%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">服务库类型&nbsp;:</div>\n	   <div class = "col-sm-3">服务库</div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">服务库IP&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.rmiRegistryHost%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JMX Registry端口&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.rmiRegistryPort%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JMX Server端口&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.rmiServerPort%></div>\n	</div>\n	\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">OSGI端口&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.sshPort%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">堆内存大小&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.java_Memory%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">永久代堆大小&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.java_Perm_Mem%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JVM扩展参数&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.karaf_opts%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">堆内存快照的存储文件路径&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.heapDumpPath%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">GC日志的文件名和路径&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.gcFile%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">GC日志文件的自动转储&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.gcRotation%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">GC日志文件的绕接数目&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.gcFileNum%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">GC日志文件的大小&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.gcFileSize%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">监听端口&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.bindPort%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">注册库同步间隔&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.synchTime%>秒</div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JCF服务器失效超时&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.maxIdleTime%>秒</div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">服务器日志级别&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.serverLogLevel%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">服务器日志类型&nbsp;:</div>\n	   <div class = "col-sm-3">\n	   	<%if(configInfo.serverLogType=="daily"){\n	   	%>按天记录<%	\n	   	}else if (configInfo.serverLogType=="roll"){\n	   	%>按大小记录<%\n	   	}else if (configInfo.serverLogType=="hoursize"){\n	   	%>按小时和大小记录<%\n	   	}else if (configInfo.serverLogType=="dailysize"){\n	   	%>按天和大小记录<%\n	   	}else {\n	   	%>其他<%\n	   	}%>\n	   </div>\n	</div>\n<%	\n	}else if (configInfo.serverCategory==7){\n%>\n\n	<div class = "row detailDivHight">\n		   <div class = "col-sm-3 textRight">服务器组名&nbsp;:</div>\n		   <div class = "col-sm-3"><%=configInfo.groupNameShowUser%></div>\n		</div>\n		\n		<div class = "row detailDivHight">\n		   <div class = "col-sm-3 textRight">服务器名&nbsp;:</div>\n		   <div class = "col-sm-3"><%=configInfo.serverName%></div>\n		</div>\n		\n		<div class = "row detailDivHight">\n		   <div class = "col-sm-3 textRight">服务器类型&nbsp;:</div>\n		   <div class = "col-sm-3">JCFCache服务器</div>\n		</div>\n		\n		<div class = "row detailDivHight">\n		   <div class = "col-sm-3 textRight">JCF服务器IP&nbsp;:</div>\n		   <div class = "col-sm-3"><%=configInfo.rmiRegistryHost%></div>\n		</div>\n		\n		<div class = "row detailDivHight">\n		   <div class = "col-sm-3 textRight">日志级别&nbsp;:</div>\n		   <div class = "col-sm-3"><%=configInfo.serverLogLevel%></div>\n		</div>\n		\n		<div class = "row detailDivHight">\n		   <div class = "col-sm-3 textRight">服务器日志类型&nbsp;:</div>\n		   <div class = "col-sm-3">\n		   	 	<%if(configInfo.serverLogType=="daily"){\n			   	%>按天记录<%	\n			   	}else if (configInfo.serverLogType=="roll"){\n			   	%>按大小记录<%\n			   	}else {\n			   	%><%=configInfo.serverLogType%><%\n			   	}%>\n		   </div>\n		</div>\n		\n		<div class = "row detailDivHight">\n		   <div class = "col-sm-3 textRight">统计数据同步时间(秒)&nbsp;:</div>\n		   <div class = "col-sm-3"><%=configInfo.statisticsSyncTime%></div>\n		</div>\n		\n		\n		\n		<div class = "row detailDivHight">\n		   <div class = "col-sm-3 textRight">JVM内存报警阀值(百分比)&nbsp;:</div>\n		   <div class = "col-sm-3"><%=configInfo.jvmHeapAlert%></div>\n		</div>\n		<div class = "row detailDivHight">\n		   <div class = "col-sm-3 textRight">JVM内存阻塞阀值(百分比)&nbsp;:</div>\n		   <div class = "col-sm-3"><%=configInfo.jvmHeapBlock%></div>\n		</div>\n		<div class = "row detailDivHight">\n		   <div class = "col-sm-3 textRight">存储最大个数&nbsp;:</div>\n		   <div class = "col-sm-3"><%=configInfo.maxSize4Store%></div>\n		</div>\n		<div class = "row detailDivHight">\n		   <div class = "col-sm-3 textRight">存储报警阀值(个)&nbsp;:</div>\n		   <div class = "col-sm-3"><%=configInfo.cacheNodeAlert%></div>\n		</div>\n\n\n<%		\n	}else if (configInfo.serverCategory==1||configInfo.serverCategory==2){//jcf和adapter服务器\n%>\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JCF服务器组名&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.groupNameShowUser%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JCF服务器名&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.serverName%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JCF服务器类型&nbsp;:</div>\n	   <div class = "col-sm-3">JCF服务器</div>\n	</div>\n	\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JCF服务器IP&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.rmiRegistryHost%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JMX Registry端口&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.rmiRegistryPort%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JMX Server端口&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.rmiServerPort%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">HTTP端口&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.httpPort%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">OSGI Console端口&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.sshPort%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">堆内存大小&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.java_Memory%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">永久代堆大小&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.java_Max_Perm_Mem%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JVM扩展参数&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.karaf_opts%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">最大可分配系统内存&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.direct_mem_size%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">GC选项&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.gcoptions%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">堆内存快照的存储路径&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.heapDumpPath%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">GC日志文件名和路径&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.gcFile%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">GC日志的自动转储&nbsp;:</div>\n	   <div class = "col-sm-3"><%if("-XX:+UseGCLogFileRotation"==configInfo.gcRotation){%>是<%}else{%>否<%}%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">GC日志文件绕接数&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.gcFileNum%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">GC日志文件的大小&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.gcFileSize%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">监听端口&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.bindPort%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">负载因子&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.loadFactor%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">系统内存池大小&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.memoryPoolSize%>M</div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">系统内存块大小&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.blockSize%>KB</div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">发送队列大小&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.channelQueueSize%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JVM内存中的消息最大值&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.heapMessageLimit%>Byte</div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">连接并发数&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.channelConcurrent%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">连接重试次数&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.connectionRetry%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">JCF服务器通信的心跳间隔&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.heartBeatTime%>秒</div>\n	</div>\n	\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">注册库IP&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.registryIp%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">注册库端口&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.registryPort%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">注册库同步间隔&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.synchTime%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">跟踪带日志输出规则&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.auditLevelShowUser%></div>\n	</div>\n	\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">服务器持久化队列文件存放路径&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.persistQueueFullPath%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">服务器日志级别&nbsp;:</div>\n	   <div class = "col-sm-3"><%=configInfo.serverLogLevel%></div>\n	</div>\n	\n	<div class = "row detailDivHight">\n	   <div class = "col-sm-3 textRight">服务器日志类型&nbsp;:</div>\n	   <div class = "col-sm-3">\n	   	  	<%if(configInfo.serverLogType=="daily"){\n		   	%>按天记录<%	\n		   	}else if (configInfo.serverLogType=="roll"){\n		   	%>按大小记录<%\n		   	}else if (configInfo.serverLogType=="hoursize"){\n		   	%>按小时和大小记录<%\n		   	}else if (configInfo.serverLogType=="dailysize"){\n		   	%>按天和大小记录<%\n		   	}else {\n		   	%>其他<%\n		   	}%>\n	   </div>\n	</div>\n<%\n	}\n%>'),define("travsky/jcf/1.0.0/view/server/serverUpdate_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/view/server/server","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/server/serverInputCheck","travsky/jcf/1.0.0/util/SidebarUtil","querystring","travsky/jcf/1.0.0/view/confirm_view","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/waiting_view"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/server/serverUpdate.tpl");a("travsky/jcf/1.0.0/view/server/server");var f=a("travsky/jcf/1.0.0/view/server/serverInputCheck"),g=a("travsky/jcf/1.0.0/util/CommonUtil"),h=a("travsky/jcf/1.0.0/util/SidebarUtil"),i=a("querystring"),j=a("travsky/jcf/1.0.0/view/alert_view"),k=a("travsky/jcf/1.0.0/view/confirm_view"),l=a("travsky/jcf/1.0.0/view/waiting_view"),m=d.ItemView.extend({template:c.template(e),initialize:function(){b.extend(this,new f)},events:{"click #updateContextServerInfoBtn":"updateContextServerInfo","click #updateRegistryServerInfoBtn":"updateRegistryServerInfo","click #updateJCFServerInfoBtn":"updateJCFServerInfo","click #updateJCFCacheServerInfoBtn":"updateJCFCacheServerInfo","blur #rmiRegistryPort":"checkServerManagePort4Update","blur #rmiServerPort":"checkServerDeployPort4Update","blur #httpPort":"checkHttpPort4Update","blur #sshPort":"checkSshPort4Update","blur #java_Memory":"checkjava_Memory","blur #java_Max_Perm_Mem":"checkjava_Max_Perm_Mem","blur #java_Perm_Mem":"checkjava_Max_Perm_Mem","blur #direct_mem_size":"checkdirect_mem_size","blur #gcFileNum":"checkgcFileNum","blur #gcFileSize":"checkgcFileSize","blur #bindPort":"checkBindPort4Update","blur #loadFactor":"checkloadfactor","blur #memoryPoolSize":"checkMemoryPoolSize","blur #blockSize":"checkBlockSize","blur #heapMessageLimit":"checkHeapMessageLimit","blur #channelQueueSize":"checkchannelQueueSize","blur #channelConcurrent":"checkchannelConcurrent","blur #connectionRetry":"checkconnectionRetry","blur #heartBeatTime":"checkheartBeatTime","blur #messageBodyLimit":"checkmessageBodyLimit","change #registryIp":"getRegistryBindPort","blur #registryPort":"checkserverport","blur #synchTime":"checksynchtime","blur #maxIdleTime":"checkMaxidletime","blur #persistQueueFullPath":"checkpersistQueueFullPath","change #registryIp":"getRegistryBindPort","blur #statisticsSyncTime":"checkStatisticsSyncTime","blur #statisticsPath":"checkStatisticsPath","blur #jvmHeapAlert":"checkJvmHeapAlert","blur #jvmHeapBlock":"checkJvmHeapBlock","blur #maxSize4Store":"checkMaxSize4Store","blur #cacheNodeAlert":"checkCacheNodeAlert"},updateContextServerInfo:function(a){a.stopPropagation(),a.preventDefault();var c=b(a.target),d="/"+jcfManager.appName+"/server/addOrUpdateServer.action",e=["serverId","serverCategory","serverName","rmiRegistryHost"],f=g.getFormInputObj(e),m=this.checkContextFormSubmit(),n=h.getModuleName(),o=f.serverId;if(m){var p=new k;p.model.set("msg","确定更新？"),jcfManager.dialogRegion.show(p),p.confirm(function(a){if(a){c.addClass("disabled");var e=new l;jcfManager.dialogRegion.show(e),f.ynStart="start";var h=g.dealAjaxRequest4JSObj(d,f);b.when(h).done(function(a){if(jcfManager.dialogRegion.empty(),"true"==a.flag){g.alertEsg("保存信息成功!","true");var b={serverId:o};appRouter.navigate(n+"/server/param/"+i.stringify(b),{trigger:!0})}else{c.removeClass("disabled");var d=new j;d.model.set("msg","更新失败!"),jcfManager.dialogRegion.show(d)}})}})}},updateRegistryServerInfo:function(a){a.stopPropagation(),a.preventDefault();var c=h.getModuleName(),d=b(a.target).text(),e=this.checkRegistryFormSubmit(),f=["serverId","groupName","serverName","serverCategory","rmiRegistryHost","rmiRegistryPort","rmiServerPort","sshPort","java_Memory","java_Perm_Mem","karaf_opts","heapDumpPath","gcFile","gcRotation","gcFileNum","gcFileSize","bindPort","synchTime","maxIdleTime","serverLogLevel","serverLogType"],m=b(a.target),n=g.getFormInputObj(f),o=n.serverId;if(e)if("保存"==d){var p="/"+jcfManager.appName+"/server/updateServerConfig.action",q=g.dealAjaxRequest4JSObj(p,n);m.addClass("disabled"),b.when(q).done(function(a){if("true"==a.flag){g.alertEsg("保存信息成功!","true");var b={serverId:o};appRouter.navigate(c+"/server/param/"+i.stringify(b),{trigger:!0})}else{var d=new j;d.model.set("msg","保存信息失败!"),jcfManager.dialogRegion.show(d)}})}else if("下一步"==d){var r=this.checkServerStatus();if(r){var s=new k;s.model.set("msg","确定更新？"),jcfManager.dialogRegion.show(s),s.confirm(function(a){if(a){var d=new l;jcfManager.dialogRegion.show(d),m.addClass("disabled");var e="/"+jcfManager.appName+"/server/addOrUpdateServer.action";n.ynStart="start";var f=g.dealAjaxRequest4JSObj(e,n);b.when(f).done(function(a){if(jcfManager.dialogRegion.empty(),"true"==a.flag){g.alertEsg("保存信息成功!","true");var b={serverId:o};appRouter.navigate(c+"/server/param/"+i.stringify(b),{trigger:!0})}else{m.removeClass("disabled");var d=new j;d.model.set("msg","更新失败!"),jcfManager.dialogRegion.show(d)}})}})}}},updateJCFCacheServerInfo:function(a){a.stopPropagation(),a.preventDefault();var c=b(a.target),d=h.getModuleName(),e=b(a.target).text(),f=this.checkJcfCacheFormSubmit(),j=["serverId","serverName","jvmMemory4Cache","serverCategory","rmiRegistryHost","serverLogLevel","serverLogType","statisticsSyncTime","statisticsPath","jvmHeapAlert","jvmHeapBlock","maxSize4Store","cacheNodeAlert","groupNameText"],k=g.getFormInputObj(j);k.serverLogType4Cache=k.serverLogType;var l=k.serverId;if(f)if("保存"==e){c.addClass("disabled");var m="/"+jcfManager.appName+"/server/updateServerConfig.action",n=g.dealAjaxRequest4JSObj(m,k);b.when(n).done(function(a){if("true"==a.flag){g.alertEsg("保存信息成功!","true");var b={serverId:l};appRouter.navigate(d+"/server/param/"+i.stringify(b),{trigger:!0})}else c.removeClass("disabled"),g.alertEsg("保存信息失败!")})}else if("下一步"==e){var o=this.checkServerStatus();if(o&&confirm("确定更新？")){c.addClass("disabled");var m="/"+jcfManager.appName+"/server/addOrUpdateServer.action";k.ynStart="start";var n=g.dealAjaxRequest4JSObj(m,k);b.when(n).done(function(a){if("true"==a.flag){g.alertEsg("更新成功!","true");var b={serverId:l};appRouter.navigate(d+"/server/param/"+i.stringify(b),{trigger:!0})}else c.removeClass("disabled"),g.alertEsg("更新失败!")})}}},updateJCFServerInfo:function(a){a.stopPropagation(),a.preventDefault();var c=b(a.target),d=h.getModuleName(),e=b(a.target).text(),f=this.checkJCFServerFormSubmit(),m=["serverId","groupName","serverName","serverCategory","rmiRegistryHost","rmiRegistryPort","rmiServerPort","httpPort","sshPort","java_Memory","java_Max_Perm_Mem","karaf_opts","direct_mem_size","gcoptions","heapDumpPath","gcFile","gcRotation","gcFileNum","gcFileSize","bindPort","loadFactor","memoryPoolSize","blockSize","heapMessageLimit","channelQueueSize","channelConcurrent","connectionRetry","heartBeatTime","messageBodyLimit","registryIp","registryPort","synchTime","auditLevel","persistQueueFullPath","serverLogLevel","serverLogType"],n=g.getFormInputObj(m),o=n.serverId;if(f)if("保存"==e){c.addClass("disabled");var p="/"+jcfManager.appName+"/server/updateServerConfig.action",q=g.dealAjaxRequest4JSObj(p,n);b.when(q).done(function(a){if("true"==a.flag){g.alertEsg("保存成功!","true");var b={serverId:o};appRouter.navigate(d+"/server/param/"+i.stringify(b),{trigger:!0})}else{c.removeClass("disabled");var e=new j;e.model.set("msg","保存信息失败!"),jcfManager.dialogRegion.show(e)}})}else if("下一步"==e){var r=this.checkServerStatus();if(r){var s=new k;s.model.set("msg","确定更新？"),jcfManager.dialogRegion.show(s),s.confirm(function(a){if(a){c.addClass("disabled");var e=new l;jcfManager.dialogRegion.show(e);var f="/"+jcfManager.appName+"/server/addOrUpdateServer.action";n.ynStart="start";var h=g.dealAjaxRequest4JSObj(f,n);b.when(h).done(function(a){if(jcfManager.dialogRegion.empty(),"true"==a.flag){g.alertEsg("更新成功!","true");var b={serverId:o};appRouter.navigate(d+"/server/param/"+i.stringify(b),{trigger:!0})}else{c.removeClass("disabled");var e=new j;e.model.set("msg","更新失败!"),jcfManager.dialogRegion.show(e)}})}})}}},checkContextFormSubmit:function(){var a=this.checkServerStatus();return a},checkRegistryFormSubmit:function(){return this.checkServerManagePort4Update()&&this.checkServerDeployPort4Update()&&this.checkSshPort4Update()&&this.checkBindPort4Update()&&this.checkjava_Memory()&&this.checkjava_Perm_Mem()&&this.checksynchtime()&&this.checkMaxidletime()?!0:!1},checkJCFServerFormSubmit:function(){return this.checkServerManagePort4Update()&&this.checkServerDeployPort4Update()&&this.checkHttpPort4Update()&&this.checkSshPort4Update()&&this.checkBindPort4Update()&&this.checkloadfactor()&&this.checkMemoryPoolSize()&&this.checkBlockSize()&&this.checkHeapMessageLimit()&&this.checkchannelQueueSize()&&this.checkchannelConcurrent()&&this.checkconnectionRetry()&&this.checkheartBeatTime()&&this.checkmessageBodyLimit()&&this.checksynchtime()&&this.checkserviceip()&&this.checkserverport()&&this.checkjava_Memory()&&this.checkjava_Perm_Mem()?!0:!1},checkJcfCacheFormSubmit:function(){return this.checkStatisticsSyncTime()&&this.checkStatisticsPath()&&this.checkJvmHeapAlert()&&this.checkJvmHeapBlock()&&this.checkMaxSize4Store()&&this.checkCacheNodeAlert()?!0:!1},checkServerStatus:function(){var a=b("#serverName").val(),c=b("#rmiRegistryHost").val(),d={serverName:a,serverIp:c},e="/"+jcfManager.appName+"/server/checkUpdateServer.action",f=g.dealSYNCHAjaxRequest4SimpleParam(e,d),h=!1;return b.when(f).done(function(a){if("false"==a.isCanBeUpdate){var b=new j;b.model.set("msg","服务器非停止或更新状态,禁止更新!"),jcfManager.dialogRegion.show(b),h=!1}else if("true"==a.isCanBeUpdate)h=!0;else{var b=new j;b.model.set("msg","请确保节点控制器正常运行!"),jcfManager.dialogRegion.show(b),h=!1}}),h}});return m}),define("travsky/jcf/1.0.0/template/server/serverUpdate.tpl",[],'<%\n   if(configInfo.serverCategory==3){//上下文服务器\n%>\n	<input type="hidden" id="serverId"  value="<%=configInfo.serverId%>"></input>\n	<input type="hidden" id="serverCategory" value="<%=configInfo.serverCategory%>" />\n	<input type="hidden" id="serverName"   value="<%=configInfo.serverName%>" />\n	<input type="hidden" id="rmiRegistryHost" value="<%=configInfo.serverIpShowUser%>" />\n	\n	<div class="form-group">\n	  <div class="col-sm-10">\n	     <button type="button" id = "updateContextServerInfoBtn" class="btn btn-primary">下一步</button>\n	  </div>\n	</div>\n<%\n   }else if (configInfo.serverCategory==4){//注册库\n%>\n	<br/>\n	<form class="form-horizontal" id = "addServerForm"  role="form" method= "POST">\n		<input type="hidden" id="serverId"  value="<%=configInfo.serverId%>"></input>\n		<div class="form-group" >\n		    <label for="groupNameShow" class="col-sm-3 control-label">服务库组名：</label>\n		    <div class="col-sm-4">\n		      	<input  type="text" id="groupNameShow" value = "<%=configInfo.groupNameShowUser%>"  class="form-control input-sm" readonly="readonly"  />\n		      	<input  type="hidden" id="groupName" value = "<%=configInfo.groupName%>" />\n		    </div>\n	    </div>\n	    \n		<div class="form-group" id = "serverNameDiv" >\n		    <label for="serverNameShow" class="col-sm-3 control-label">服务库名：</label>\n		    <div class="col-sm-4">\n		      <input  type="text" id="serverNameShow"  value = "<%=configInfo.serverName%>" class="form-control input-sm" readonly="readonly"  />\n		      <input  type="hidden" id="serverName"  value = "<%=configInfo.serverName%>" />\n		    </div>\n	    </div>\n	    \n		<div class="form-group" id = "serverCategoryDiv" >\n		    <label for="serverCategoryShow" class="col-sm-3 control-label">服务库类型：</label>\n		    <div class="col-sm-4">\n		      <input  type="text" id="serverCategoryShow" value = "服务库"  class="form-control input-sm" readonly="readonly"  />\n		      <input  type="hidden" id="serverCategory" value = "<%=configInfo.serverCategory%>" />\n		    </div>\n	    </div>\n	    \n		<div class="form-group" id = "rmiRegistryHostDiv" >\n		    <label for="rmiRegistryHostShow" class="col-sm-3 control-label">服务库IP：</label>\n		    <div class="col-sm-4">\n		      <input  type="text" id="rmiRegistryHostShow" value = "<%=configInfo.rmiRegistryHost%>"  class="form-control input-sm" readonly="readonly"  />\n		      <input  type="hidden" id="rmiRegistryHost" value = "<%=configInfo.rmiRegistryHost%>" />\n		    </div>\n	    </div>\n	    \n	   <div class="form-group" id = "rmiRegistryPortDiv" >\n	      <label for="rmiRegistryPort" class="col-sm-3 control-label">JMX Registry端口：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="rmiRegistryPort"  value = "<%=configInfo.rmiRegistryPort%>"  class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n	         <input type="hidden" id="orgirmiRegistryPort"  value = "<%=configInfo.rmiRegistryPort%>"  >\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "rmiRegistryPortTip"></span></div>\n	   </div>\n	   \n	   <div class="form-group" id = "rmiServerPortDiv">\n	      <label for="rmiServerPort" class="col-sm-3 control-label">JMX Server端口：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="rmiServerPort"  value = "<%=configInfo.rmiServerPort%>" class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n	         <input type="hidden" id="orgirmiServerPort"  value = "<%=configInfo.rmiServerPort%>" >\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "rmiServerPortTip" ></span></div>\n	   </div>\n	   \n	   <div class="form-group" id = "sshPortDiv" >\n	      <label for="sshPort" class="col-sm-3 control-label">OSGI Console端口：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="sshPort"  value = "<%=configInfo.sshPort%>"  class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n	         <input type="hidden" id="orgisshPort"  value = "<%=configInfo.sshPort%>"  >\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "sshPortTip"></span></div>\n	   </div>\n	   \n	   <div class="form-group" id = "java_MemoryDiv" >\n	      <label for="java_Memory" class="col-sm-3 control-label">堆内存大小：</label>\n	      <div class="col-sm-4 ">\n	         <input type="text" id="java_Memory" value = "<%=configInfo.java_Memory%>"   class="form-control input-sm" value="1536M"  placeholder="单位为kK,mM,gG">\n	      </div>\n	      <div><span>(单位:kK,mM,gG)</span><span id = "java_MemoryTip"></span></div>\n	   </div>\n	   \n	   <div class="form-group" id = "java_Perm_MemDiv" >\n	      <label for="java_Perm_Mem" class="col-sm-3 control-label">永久代堆大小：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="java_Perm_Mem"  value = "<%=configInfo.java_Perm_Mem%>"  class="form-control input-sm"  placeholder="单位为kK,mM,gG">\n	      </div>\n	      <div><span>(单位:kK,mM,gG)&nbsp;</span><span id = "java_Perm_MemTip"></span></div>\n	   </div>\n	   \n	   <div class="form-group" id = "karaf_optsDiv" >\n	      <label for="karaf_opts" class="col-sm-3 control-label">JVM扩展参数：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="karaf_opts" value = "<%=configInfo.karaf_opts%>"  class="form-control input-sm"  placeholder="配置的JVM参数超过系统内存值后将导致错误">\n	      </div>\n	      <div><span id = "karaf_optsTip"></span></div>\n	   </div>\n	   \n	   \n	   \n	   \n	   \n	   \n	   <div class="form-group" id = "heapDumpPathDiv" >\n	      <label for="heapDumpPath" class="col-sm-3 control-label">堆内存快照的存储文件路径：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="heapDumpPath"  value = "<%=configInfo.heapDumpPath%>"  class="form-control input-sm"  placeholder="">\n	      </div>\n	      <div><span id = "heapDumpPathTip"></span></div>\n	   </div>\n	   \n	   <div class="form-group" id = "gcFileDiv" >\n	      <label for="gcFile" class="col-sm-3 control-label">GC日志的文件名和路径：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="gcFile" value = "<%=configInfo.gcFile%>"   class="form-control input-sm"  placeholder="JDK 7版本开始兼容">\n	      </div>\n	      <div><span id = "gcFileTip"></span></div>\n	   </div>\n	   \n	   <div class="form-group" id = "gcRotationDiv" >\n	      <label for="gcRotation" class="col-sm-3 control-label">GC日志自动转储：</label>\n	      <div class="col-sm-4">\n	      	 <select id="gcRotation"  class="form-control input-sm" placeholder="JDK 7版本开始兼容">\n				<%\n	      	 	 if(configInfo.gcRotation=="-XX:+UseGCLogFileRotation"){\n	      	 	 %>\n	      	 	 	<option selected = "selected"  value="-XX:+UseGCLogFileRotation">true</option>\n	      	 	 	<option value="" >false</option>\n	      	 	 <%\n	      	 	 }else if(""==configInfo.gcRotation) {\n	      	 	 %>\n	      	 	 	<option value="-XX:+UseGCLogFileRotation">true</option>\n	      	 	 	<option selected = "selected" value="" selected="selected">false</option>\n	      	 	 <%\n	      	 	 }\n	      	 	%>\n			 </select>\n	      </div>\n	       <div><span id = "gcRotationTip"></span></div>\n	   </div>\n	   \n	   <div class="form-group" id = "gcFileNumDiv" >\n	      <label for="gcFileNum" class="col-sm-3 control-label">GC日志绕接数目：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="gcFileNum"  value = "<%=configInfo.gcFileNum%>"  class="form-control input-sm"  placeholder="JDK 7版本开始兼容">\n	      </div>\n	      <div><span id = "gcFileNumTip"></span></div>\n	   </div>\n	    \n	   <div class="form-group" id = "gcFileSizeDiv" >\n	      <label for="gcFileSize" class="col-sm-3 control-label">GC日志大小：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="gcFileSize"  value = "<%=configInfo.gcFileSize%>"  class="form-control input-sm"  placeholder="单位为k,K,m,M,g,G">\n	      </div>\n	      <div><span>(单位:k,K,m,M,g,G)&nbsp;</span><span id = "gcFileSizeTip"></span></div>\n	   </div> \n	   \n	   <div class="form-group" id = "bindPortDiv" >\n	      <label for="bindPort" class="col-sm-3 control-label">监听端口：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="bindPort"  value = "<%=configInfo.bindPort%>"  class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字" />\n	         <input type="hidden" id="orgibindPort"  value = "<%=configInfo.bindPort%>" />\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "bindPortTip"></span></div>\n	   </div>\n	   \n	   \n	   \n	   \n	   \n	   \n	     \n	   <div class="form-group" id = "synchTimeDiv" >\n	      <label for="synchTime" class="col-sm-3 control-label">注册库同步间隔：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="synchTime" value = "<%=configInfo.synchTime%>"   class="form-control input-sm" value="5" placeholder="必填项，单位：秒（s）" />\n	      </div>\n	      <div><span class = "text-danger">*</span><span>(单位：秒(s))&nbsp;</span><span id = "synchTimeTip"></span></div>\n	   </div>\n	   \n	   <div class="form-group" id = "maxIdleTimeDiv" >\n	      <label for="maxIdleTime" class="col-sm-3 control-label">JCF服务器失效超时：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="maxIdleTime" value = "<%=configInfo.maxIdleTime%>"   class="form-control input-sm" value="180" placeholder="必填项，单位：秒（s）" />\n	      </div>\n	      <div><span class = "text-danger">*</span><span>(单位：秒(s))&nbsp;</span><span  id = "maxIdleTimeTip" ></span></div>\n	   </div>\n	   \n	   \n	   \n	   \n	   <div class="form-group" id = "serverLogLevelDiv" >\n	      <label for="serverLogLevel" class="col-sm-3 control-label">服务日志级别：</label>\n	      <div class="col-sm-4">\n	         <select id = "serverLogLevel" class="form-control input-sm" >\n	         	 <%\n	         	  for(var i = 0 ; i < serverLogLevels.length ;i ++){\n	         	    var curll = serverLogLevels[i] ;\n	         		if(curll==configInfo.serverLogLevel){\n	         		%>\n	         			<option selected = "selected" value = "<%=curll%>" ><%=curll%></option>\n	         		<%\n	         		}else {\n	         		%>\n	         			<option  value = "<%=curll%>" ><%=curll%></option>\n	         		<%\n	         		}\n	         	  }\n	         	%>\n	         </select>\n	      </div>\n	   </div>\n	   \n	   <div class="form-group" id = "serverLogTypeDiv" >\n	      <label for="serverLogType" class="col-sm-3 control-label">服务器日志类型：</label>\n	      <div class="col-sm-4">\n	         <select id = "serverLogType" class="form-control input-sm" >\n	         	<%\n	         	  for(var i = 0 ; i < serverLogTypeList.length ;i ++){\n	         	  	var curlt = serverLogTypeList[i] ;\n	         		if(curlt.key==configInfo.serverLogType){\n	         		%>\n	         			<option selected = "selected"  value = "<%=curlt.key%>" ><%=curlt.value%></option>\n	         		<%\n	         		}else {\n	         		%>\n	         			<option  value = "<%=curlt.key%>" ><%=curlt.value%></option>\n	         		<%\n	         		}\n	         	  }\n	         	%>\n	         </select>\n	      </div>\n	   </div>\n	   \n	   \n	</form>\n	\n	<div class="form-group">\n	  <div class="col-sm-offset-2 col-sm-10">\n	     <button type="button" id = "updateRegistryServerInfoBtn"  class="btn btn-primary"><%=submitBtnInfo%></button>\n	  </div>\n	</div>\n<%   \n   }else if(configInfo.serverCategory==7){\n   	%>\n   	 <form class="form-horizontal" id = "addServerForm"  role="form" method= "POST">\n   	 	<input type = "hidden" id = "jvmMemory4Cache" value = "<%=configInfo.jvmMemory4Cache%>"/>\n		<input id="serverId" type="hidden" value="<%=configInfo.serverId%>"></input>\n		<input id="groupNameText" type="hidden" value="<%=configInfo.groupNameShowUser%>"></input>\n		 <div class="form-group" >\n		    <label for="groupNameShow" class="col-sm-3 control-label">JCF服务器组名：</label>\n		    <div class="col-sm-4">\n		      <input  type="text" id="groupNameShow" value = "<%=configInfo.groupNameShowUser%>"  class="form-control input-sm" readonly="readonly"  />\n		      <input  type="hidden" id="groupName" value = "<%=configInfo.groupName%>"  />\n		    </div>\n	    </div>\n	    \n		<div class="form-group"  >\n		    <label for="serverNameShow" class="col-sm-3 control-label">JCF服务器名：</label>\n		    <div class="col-sm-4">\n		      <input  type="text" id="serverNameShow" value = "<%=configInfo.serverName%>" class="form-control input-sm" readonly="readonly"  />\n		      <input  type="hidden" id="serverName" value = "<%=configInfo.serverName%>"  />\n		    </div>\n	    </div>\n	    \n		<div class="form-group" >\n		    <label for="serverCategoryShow" class="col-sm-3 control-label">JCF服务器类型：</label>\n		    <div class="col-sm-4">\n		      <input  type="text" id="serverCategoryShow" value = "JCF服务器" class="form-control input-sm" readonly="readonly"  />\n		   	  <input  type="hidden" id="serverCategory" value = "<%=configInfo.serverCategory%>"  />\n		    </div>\n	    </div>\n	    \n	    <div class="form-group" id = "rmiRegistryHostDiv" >\n		    <label for="rmiRegistryHostShow" class="col-sm-3 control-label">JCF服务器IP：</label>\n		    <div class="col-sm-4">\n		      <input  type="text" id="rmiRegistryHostShow" value = "<%=configInfo.rmiRegistryHost%>" class="form-control input-sm" readonly="readonly"  />\n		      <input  type="hidden" id="rmiRegistryHost" value = "<%=configInfo.rmiRegistryHost%>"  />\n		    </div>\n	    </div>\n	    \n	    <div class="form-group" id = "serverLogLevelDiv" >\n	      <label for="serverLogLevel" class="col-sm-3 control-label">服务日志级别：</label>\n	      <div class="col-sm-4">\n	         <select id = "serverLogLevel" class="form-control input-sm" >\n	         	<%\n	         	  for(var i = 0 ; i < serverLogLevels.length ;i ++){\n	         	    var curll = serverLogLevels[i] ;\n	         		if(curll==configInfo.serverLogLevel){\n	         		%>\n	         			<option selected = "selected" value = "<%=curll%>" ><%=curll%></option>\n	         		<%\n	         		}else {\n	         		%>\n	         			<option  value = "<%=curll%>" ><%=curll%></option>\n	         		<%\n	         		}\n	         	  }\n	         	%>\n	         </select>\n	      </div>\n	     </div>\n	     \n	     <div class="form-group" id = "serverLogTypeDiv" >\n	      <label for="serverLogType" class="col-sm-3 control-label">服务器日志类型：</label>\n	      <div class="col-sm-4">\n	         <select id = "serverLogType" class="form-control input-sm" >\n	         	<option value="daily" <%if(configInfo.serverLogType==\'daily\'){%>selected="selected"<%}%>>按天记录</option>\n				<option value="roll" <%if(configInfo.serverLogType==\'roll\'){%>selected="selected"<%}%>>按大小记录</option>\n	         </select>\n	      </div>\n	    </div>\n	    \n	   <div class="form-group" id = "statisticsSyncTimeDiv" >\n	      <label for="statisticsSyncTime" class="col-sm-3 control-label">统计数据同步时间：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="statisticsSyncTime" value = "<%=configInfo.statisticsSyncTime%>"  class="form-control input-sm" value="60"  placeholder="">\n	      </div>\n	      <div><span class = "text-danger">*</span><span class= "text-info">(单位:秒(s))</span><span id = "statisticsSyncTimeTip"></span></div>\n	   </div>\n	   \n	   <!--监控文件目标路径隐藏-->\n	   <input type="hidden" id="statisticsPath" value = "<%=configInfo.statisticsPath%>"  class="form-control input-sm" value="../monitor/"  placeholder="">\n	   <!--监控文件目标路径隐藏-->\n	   \n	   \n	   <div class="form-group" id = "jvmHeapAlertDiv" >\n	      <label for="jvmHeapAlert" class="col-sm-3 control-label">JVM内存报警阈值(百分比)：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="jvmHeapAlert" value = "<%=configInfo.jvmHeapAlert%>"  class="form-control input-sm" value="60"  placeholder="">\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "jvmHeapAlertTip"></span></div>\n	   </div>\n	   \n	   \n	   <div class="form-group" id = "jvmHeapBlockDiv" >\n	      <label for="jvmHeapBlock" class="col-sm-3 control-label">JVM内存阻塞阈值(百分比)：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="jvmHeapBlock" value = "<%=configInfo.jvmHeapBlock%>"  class="form-control input-sm" value="85"  placeholder="">\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "jvmHeapBlockTip"></span></div>\n	   </div>\n	   \n	   \n	   <div class="form-group" id = "maxSize4StoreDiv" >\n	      <label for="maxSize4Store" class="col-sm-3 control-label">存储最大个数：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="maxSize4Store" value = "<%=configInfo.maxSize4Store%>"  class="form-control input-sm" value="1000"  placeholder="">\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "maxSize4StoreTip"></span></div>\n	   </div>\n	   \n	   <div class="form-group" id = "cacheNodeAlertDiv" >\n	      <label for="cacheNodeAlert" class="col-sm-3 control-label">存储报警阈值(个)：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="cacheNodeAlert"  value = "<%=configInfo.cacheNodeAlert%>" class="form-control input-sm" value="600"  placeholder="">\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "cacheNodeAlertTip"></span></div>\n	   </div>\n	    \n	  </form>  \n	<div class="form-group">\n	  <div class="col-sm-offset-2 col-sm-10">\n	     <button type="button" id = "updateJCFCacheServerInfoBtn" class="btn btn-primary"><%=submitBtnInfo%></button>\n	  </div>\n	</div>\n		\n   	<%\n   }else if(configInfo.serverCategory==1||configInfo.serverCategory==2){\n%>\n	<br/>\n	<form class="form-horizontal" id = "addServerForm"  role="form" method= "POST">\n		<input id="serverId" type="hidden" value="<%=configInfo.serverId%>"></input>\n		 <div class="form-group" >\n		    <label for="groupNameShow" class="col-sm-3 control-label">JCF服务器组名：</label>\n		    <div class="col-sm-4">\n		      <input  type="text" id="groupNameShow" value = "<%=configInfo.groupNameShowUser%>"  class="form-control input-sm" readonly="readonly"  />\n		      <input  type="hidden" id="groupName" value = "<%=configInfo.groupName%>"  />\n		    </div>\n	    </div>\n	    \n		<div class="form-group"  >\n		    <label for="serverNameShow" class="col-sm-3 control-label">JCF服务器名：</label>\n		    <div class="col-sm-4">\n		      <input  type="text" id="serverNameShow" value = "<%=configInfo.serverName%>" class="form-control input-sm" readonly="readonly"  />\n		      <input  type="hidden" id="serverName" value = "<%=configInfo.serverName%>"  />\n		    </div>\n	    </div>\n	    \n		<div class="form-group" >\n		    <label for="serverCategoryShow" class="col-sm-3 control-label">JCF服务器类型：</label>\n		    <div class="col-sm-4">\n		      <input  type="text" id="serverCategoryShow" value = "JCF服务器" class="form-control input-sm" readonly="readonly"  />\n		   	  <input  type="hidden" id="serverCategory" value = "<%=configInfo.serverCategory%>"  />\n		    </div>\n	    </div>\n	    \n	    <div class="form-group" id = "rmiRegistryHostDiv" >\n		    <label for="rmiRegistryHostShow" class="col-sm-3 control-label">JCF服务器IP：</label>\n		    <div class="col-sm-4">\n		      <input  type="text" id="rmiRegistryHostShow" value = "<%=configInfo.rmiRegistryHost%>" class="form-control input-sm" readonly="readonly"  />\n		      <input  type="hidden" id="rmiRegistryHost" value = "<%=configInfo.rmiRegistryHost%>"  />\n		    </div>\n	    </div>\n	    \n	    \n	    <div class="form-group" id = "rmiRegistryPortDiv" >\n	       <label for="rmiRegistryPort" class="col-sm-3 control-label">JMX Registry端口：</label>\n	       <div class="col-sm-4">\n	         <input type="text" id="rmiRegistryPort" value = "<%=configInfo.rmiRegistryPort%>"  class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n	         <input type="hidden" id="orgirmiRegistryPort" value = "<%=configInfo.rmiRegistryPort%>" >\n	       </div>\n	       <div><span class = "text-danger">*</span><span id = "rmiRegistryPortTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "rmiServerPortDiv">\n	      <label for="rmiServerPort" class="col-sm-3 control-label">JMX Server端口：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="rmiServerPort" value = "<%=configInfo.rmiServerPort%>" class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n	      	 <input type="hidden" id="orgirmiServerPort" value = "<%=configInfo.rmiServerPort%>" >\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "rmiServerPortTip" ></span></div>\n	    </div>\n	    \n	    <div class="form-group" id= "httpPortDiv" >\n	       <label for="httpPort" class="col-sm-3 control-label">HTTP端口：</label>\n	       <div class="col-sm-4">\n	          <input type="text" id="httpPort"  value = "<%=configInfo.httpPort%>" class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n	       	  <input type="hidden" id="orgihttpPort" value = "<%=configInfo.httpPort%>" >\n	       </div>\n	       <div><span class = "text-danger">*</span><span id = "httpPortTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "sshPortDiv" >\n	      <label for="sshPort" class="col-sm-3 control-label">OSGI Console端口：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="sshPort"  value = "<%=configInfo.sshPort%>" class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n	      	 <input type="hidden" id="orgisshPort" value = "<%=configInfo.sshPort%>" >\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "sshPortTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "java_MemoryDiv" >\n	      <label for="java_Memory" class="col-sm-3 control-label">堆内存大小：</label>\n	      <div class="col-sm-4 ">\n	         <input type="text" id="java_Memory"  value = "<%=configInfo.java_Memory%>" class="form-control input-sm" value="1536M"  placeholder="单位为kK,mM,gG">\n	      </div>\n	      <div><span>(单位:kK,mM,gG)&nbsp;</span><span id = "java_MemoryTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "java_Max_Perm_MemDiv" >\n	      <label for="java_Max_Perm_Mem" class="col-sm-3 control-label">永久代堆大小：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="java_Max_Perm_Mem"  value = "<%=configInfo.java_Max_Perm_Mem%>" class="form-control input-sm"  placeholder="单位为kK,mM,gG">\n	      </div>\n	      <div><span>(单位:kK,mM,gG)&nbsp;</span><span id = "java_Max_Perm_MemTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "karaf_optsDiv" >\n	      <label for="karaf_opts" class="col-sm-3 control-label">JVM扩展参数：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="karaf_opts" value = "<%=configInfo.karaf_opts%>" class="form-control input-sm"  placeholder="配置的JVM参数超过系统内存值后将导致错误">\n	      </div>\n	      <div><span id = "karaf_optsTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "direct_mem_sizeDiv" >\n	      <label for="direct_mem_size" class="col-sm-3 control-label">最大可分配系统内存：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="direct_mem_size" value = "<%=configInfo.direct_mem_size%>" class="form-control input-sm"  placeholder="不建议配置">\n	      </div>\n	      <div><span class = "text-info">(单位:kK,mM,gG)&nbsp;</span><span id = "direct_mem_sizeTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "gcoptionsDiv" >\n	      <label for="gcoptions" class="col-sm-3 control-label">GC选项：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="gcoptions" value = "<%=configInfo.gcoptions%>" class="form-control input-sm"  placeholder="">\n	      </div>\n	      <div><span id = "gcoptionsTip"></span></div>\n	    </div>\n	    \n	    \n	    \n	    \n	    \n	    \n	    \n	    \n	    <div class="form-group" id = "heapDumpPathDiv" >\n	      <label for="heapDumpPath" class="col-sm-3 control-label">堆内存快照的存储文件路径：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="heapDumpPath" value = "<%=configInfo.heapDumpPath%>"  class="form-control input-sm"  placeholder="">\n	      </div>\n	      <div><span id = "heapDumpPathTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "gcFileDiv" >\n	      <label for="gcFile" class="col-sm-3 control-label">GC日志的文件名和路径：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="gcFile"  value = "<%=configInfo.gcFile%>" class="form-control input-sm"  placeholder="JDK 7版本开始兼容">\n	      </div>\n	      <div><span id = "gcFileTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "gcRotationDiv" >\n	       <label for="gcRotation" class="col-sm-3 control-label">GC日志自动转储：</label>\n	       <div class="col-sm-4">\n	      	 <select id="gcRotation"  class="form-control input-sm" placeholder="JDK 7版本开始兼容">\n	      	 	<%\n	      	 	 if(configInfo.gcRotation=="-XX:+UseGCLogFileRotation"){\n	      	 	 %>\n	      	 	 	<option selected = "selected"  value="-XX:+UseGCLogFileRotation">true</option>\n	      	 	 	<option value="" >false</option>\n	      	 	 <%\n	      	 	 }else if(""==configInfo.gcRotation){\n	      	 	 %>\n	      	 	 	<option value="-XX:+UseGCLogFileRotation">true</option>\n	      	 	 	<option selected = "selected" value="" selected="selected">false</option>\n	      	 	 <%\n	      	 	 }\n	      	 	%>\n			 </select>\n	       </div>\n	       <div><span id = "gcRotationTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "gcFileNumDiv" >\n	      <label for="gcFileNum" class="col-sm-3 control-label">GC日志绕接数目：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="gcFileNum"  value = "<%=configInfo.gcFileNum%>" class="form-control input-sm"  placeholder="JDK 7版本开始兼容">\n	      </div>\n	      <div><span id = "gcFileNumTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "gcFileSizeDiv" >\n	      <label for="gcFileSize" class="col-sm-3 control-label">GC日志大小：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="gcFileSize" value = "<%=configInfo.gcFileSize%>"  class="form-control input-sm"  placeholder="单位为k,K,m,M,g,G">\n	      </div>\n	      <div><span>(单位:kK,mM,gG)</span><span id = "gcFileSizeTip"></span></div>\n	    </div>\n	    \n	    \n	    \n	    \n	    \n	    \n	    \n	    \n	    \n	    \n	    <div class="form-group" id = "bindPortDiv" >\n	      <label for="bindPort" class="col-sm-3 control-label">监听端口：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="bindPort" value = "<%=configInfo.bindPort%>"  class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字" />\n	         <input type="hidden" id="orgibindPort" value = "<%=configInfo.bindPort%>" />\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "bindPortTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "loadFactorDiv">\n	      <label for="loadFactor" class="col-sm-3 control-label">负载均衡因子：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="loadFactor" value = "<%=configInfo.loadFactor%>" class="form-control input-sm" value="1"  placeholder="必填项,正整数">\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "loadFactorTip"></span></div>\n	    </div>\n	   \n	    <div class="form-group" id = "memoryPoolSizeDiv" >\n	      <label for="memoryPoolSize" class="col-sm-3 control-label">系统内存池的大小：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="memoryPoolSize"  value = "<%=configInfo.memoryPoolSize%>" class="form-control input-sm" value="0"  placeholder="必填项目，单位：M">\n	      </div>\n	      <div><span class = "text-danger">*</span><span>(单位:M)&nbsp;</span><span  id = "memoryPoolSizeTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "blockSizeDiv" >\n	      <label for="blockSize" class="col-sm-3 control-label">系统内存块大小：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="blockSize" value = "<%=configInfo.blockSize%>" class="form-control input-sm"  value="8" placeholder="必填项，单位：KB">\n	      </div>\n	      <div><span class = "text-danger">*</span><span>(单位:KB)&nbsp;</span><span id = "blockSizeTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "heapMessageLimitDiv" >\n	      <label for="heapMessageLimit" class="col-sm-3 control-label">JVM内存中消息体最大值：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="heapMessageLimit" value = "<%=configInfo.heapMessageLimit%>"  class="form-control input-sm" value="-1" placeholder="必填项，单位：Byte">\n	      </div>\n	      <div><span class = "text-danger">*</span><span>(单位:Byte)&nbsp;</span><span id = "heapMessageLimitTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "channelQueueSizeDiv" >\n	      <label for="channelQueueSize" class="col-sm-3 control-label">发送队列大小：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="channelQueueSize" value = "<%=configInfo.channelQueueSize%>"  class="form-control input-sm" value="2048"  placeholder="必填项">\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "channelQueueSizeTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "channelConcurrentDiv" >\n	      <label for="channelConcurrent" class="col-sm-3 control-label">连接并发数：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="channelConcurrent" value = "<%=configInfo.channelConcurrent%>"  class="form-control input-sm"  value="2" placeholder="必填项">\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "channelConcurrentTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "connectionRetryDiv" >\n	      <label for="connectionRetry" class="col-sm-3 control-label">链接重试次数：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="connectionRetry"  value = "<%=configInfo.connectionRetry%>" class="form-control input-sm"  value="3" placeholder="必填项">\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "connectionRetryTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "heartBeatTimeDiv" >\n	      <label for="heartBeatTime" class="col-sm-3 control-label">JCF服务器通信的心跳间隔：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="heartBeatTime"  value = "<%=configInfo.heartBeatTime%>" class="form-control input-sm" value="30"  placeholder="必填项，单位：秒（s）">\n	      </div>\n	      <div><span class = "text-danger">*</span><span>单位：秒(s)&nbsp;</span><span id = "heartBeatTimeTip"></span></div>\n	    </div>\n	    \n	    \n	    <input type="hidden" id="messageBodyLimit"  value = "<%=configInfo.messageBodyLimit%>" />\n	    \n	    \n	    <div class="form-group" id = "registryIpDiv" >\n	      <label for="registryIp" class="col-sm-3 control-label">注册库IP：</label>\n	      <div class="col-sm-4">\n	         <select id = "registryIp" class="form-control input-sm">\n	         	<%\n	         		for(var i= 0 ; i < nodeIpList.length ; i ++){\n	         			var curVo = nodeIpList[i] ;\n	         			var curIp = curVo.serverIp ;\n	         			if(curIp==configInfo.registryIp){\n	         			%>\n	         				<option selected = "selected" value = "<%=curVo.serverIp%>" ><%=curVo.serverIp%></option>\n	         			<%\n	         			}else{\n	         			%>\n	         				<option value = "<%=curVo.serverIp%>" ><%=curVo.serverIp%></option>\n	         			<%\n	         			}\n	         		}\n	         	%>\n	         </select>\n	      </div>\n	    </div>\n	    \n	    <div class="form-group" id = "registryPortDiv" >\n	      <label for="registryPort" class="col-sm-3 control-label">注册库端口：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="registryPort" value = "<%=configInfo.registryPort%>"  class="form-control input-sm"  placeholder="必填项，【1024~65535】之间数字">\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "registryPortTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "synchTimeDiv" >\n	      <label for="synchTime" class="col-sm-3 control-label">注册库同步间隔：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="synchTime"  value = "<%=configInfo.synchTime%>"   class="form-control input-sm" value="5" placeholder="必填项，单位：秒（s）">\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "synchTimeTip"></span></div>\n	    </div>\n	    \n	    \n	    \n	    \n	    \n	    \n	    \n	    <div class="form-group" id = "auditLevelDiv" >\n	      <label for="auditLevel" class="col-sm-3 control-label">跟踪带日志输出规则：</label>\n	      <div class="col-sm-4">\n	      	 <select id="auditLevel" class="form-control input-sm" >\n	      	 	<%for(var i = 0 ; i < tracLogKeyList.length ; i ++){\n	      	 		if(configInfo.auditLevel==""){\n	      	 			if(i==0){\n			      	 		%><option selected = "selected" value="<%=tracLogKeyList[i]%>"><%=tracLogValueList[i]%></option><%\n			      	 	}else{\n			      	 		%><option value="<%=tracLogKeyList[i]%>"><%=tracLogValueList[i]%></option><%\n			      	 	}\n	      	 		}else {\n	      	 			if(configInfo.auditLevel==tracLogKeyList[i]){\n	      	 				%><option selected = "selected" value="<%=tracLogKeyList[i]%>"><%=tracLogValueList[i]%></option><%\n	      	 			}else{\n	      	 				%><option  value="<%=tracLogKeyList[i]%>"><%=tracLogValueList[i]%></option><%\n	      	 			}\n	      	 		}\n	      	 	}%>\n			 </select>\n	      </div>\n	   </div>\n	    \n	    \n	    <div class="form-group" id = "persistQueueFullPathDiv" >\n	      <label for="persistQueueFullPath" class="col-sm-3 control-label">服务器持久化队列文件保存路径：</label>\n	      <div class="col-sm-4">\n	         <input type="text" id="persistQueueFullPath" value = "<%=configInfo.persistQueueFullPath%>"  class="form-control input-sm" value="/opt/applog/jcf/"  placeholder="">\n	      </div>\n	      <div><span class = "text-danger">*</span><span id = "persistQueueFullPathTip"></span></div>\n	    </div>\n	    \n	    <div class="form-group" id = "serverLogLevelDiv" >\n	      <label for="serverLogLevel" class="col-sm-3 control-label">服务日志级别：</label>\n	      <div class="col-sm-4">\n	         <select id = "serverLogLevel" class="form-control input-sm" >\n	         	<%\n	         	  for(var i = 0 ; i < serverLogLevels.length ;i ++){\n	         	    var curll = serverLogLevels[i] ;\n	         		if(curll==configInfo.serverLogLevel){\n	         		%>\n	         			<option selected = "selected" value = "<%=curll%>" ><%=curll%></option>\n	         		<%\n	         		}else {\n	         		%>\n	         			<option  value = "<%=curll%>" ><%=curll%></option>\n	         		<%\n	         		}\n	         	  }\n	         	%>\n	         </select>\n	      </div>\n	    </div>\n	    \n	    <div class="form-group" id = "serverLogTypeDiv" >\n	      <label for="serverLogType" class="col-sm-3 control-label">服务器日志类型：</label>\n	      <div class="col-sm-4">\n	         <select id = "serverLogType" class="form-control input-sm" >\n	         	<%\n	         	  for(var i = 0 ; i < serverLogTypeList.length ;i ++){\n	         	  	var curlt = serverLogTypeList[i] ;\n	         		if(curlt.key==configInfo.serverLogType){\n	         		%>\n	         			<option selected = "selected"  value = "<%=curlt.key%>" ><%=curlt.value%></option>\n	         		<%\n	         		}else {\n	         		%>\n	         			<option  value = "<%=curlt.key%>" ><%=curlt.value%></option>\n	         		<%\n	         		}\n	         	  }\n	         	%>\n	         </select>\n	      </div>\n	    </div>\n	    \n	    \n	    \n	</form>\n	<div class="form-group">\n	  <div class="col-sm-offset-2 col-sm-10">\n	     <button type="button" id = "updateJCFServerInfoBtn" class="btn btn-primary"><%=submitBtnInfo%></button>\n	  </div>\n	</div>\n<%   \n   }\n%>'),define("travsky/jcf/1.0.0/view/waiting_view",["jquery","backbone","underscore","marionette","bs-modal"],function(a){var b=jQuery=a("jquery");
a("backbone");var c=a("underscore"),d=a("marionette");a("bs-modal")(b);var e=a("travsky/jcf/1.0.0/template/waiting.tpl"),f=d.ItemView.extend({initialize:function(){},template:c.template(e),onShow:function(){var a=b("#ycj-waiting");a.modal({backdrop:"static"}),a.modal("show")}});return f}),define("travsky/jcf/1.0.0/template/waiting.tpl",[],' <div id="ycj-waiting" class="modal">\n    <div class="modal-dialog modal-sm">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h5 class="modal-title"><i class="fa fa-exclamation-circle"></i>提示:</h5>\n        </div>\n        <div class="modal-body small">\n          <p><span class = "text-info">操作进行中,请耐心等待.....</span></p>\n        </div>\n        <div class="modal-footer" >\n        </div>\n      </div>\n    </div>\n</div>'),define("travsky/jcf/1.0.0/view/deploy/deployMgrLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/view/deploy/deployList_view","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/deploy/deployUploadLayout","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/deploy/deployMgrLayout.tpl"),g=a("travsky/jcf/1.0.0/view/deploy/deployList_view"),h=a("travsky/jcf/1.0.0/util/CommonUtil"),i=a("travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil"),j=a("travsky/jcf/1.0.0/view/pagebar_view2"),k=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString;var b=i.getUploadAppFlag();this.model.set("uploadAppAuthFlag",b),this.on("showAllAppUI",this.to_showAllAppUI),this.on("updateAppUI",this.to_updateAppUI)},template:d.template(f),tagName:"div",regions:{downContentRegion:"#downContentRegion",pagebarRegion:"#pagebarRegion"},events:{"click #deployMgrNav li a":"clickNavItem"},clickNavItem:function(a){a.stopPropagation(),a.preventDefault();var c=b(a.target).attr("href"),d=b(a.target).parent(),e=d.parent();d.hasClass("active")||(e.find("li").removeClass("active"),d.addClass("active"),"showAllAppUI"==c?(this.queryString.selectedPageUI="showAllAppUI",this.queryString.currentPage="1",this.queryString.changePageFlag="",appRouter.navigate("deployMgr/param/selectedPageUI=showAllAppUI"),this.to_showAllAppUI()):"updateAppUI"==c&&(this.queryString.selectedPageUI="updateAppUI",this.queryString.currentPage="1",this.queryString.changePageFlag="",appRouter.navigate("deployMgr/param/selectedPageUI=updateAppUI"),this.to_updateAppUI()))},onShow:function(){var a=this.queryString.selectedPageUI;this.trigger(""+a)},to_updateAppUI:function(){var b=a("travsky/jcf/1.0.0/view/deploy/deployUploadLayout"),c=new b({queryString:this.queryString});this.pagebarRegion.empty(),this.downContentRegion.show(c),c.trigger("showPageInfo")},to_showAllAppUI:function(){var a=this.queryString.currentPage,d=this.queryString.pageSize;void 0==a&&(this.queryString.currentPage="1",a=1,this.queryString.pageSize=jcfManager.defaultPageSize,d=jcfManager.defaultPageSize);var e=new c.Collection,f=new g({collection:e});this.downContentRegion.show(f);var i={currentPage:a,pageSize:d},k="/"+jcfManager.appName+"/deployMgr/searchAllAppInfo.action",l=h.dealAjaxRequest4SimpleParam(k,i),m=this;b.when(l).done(function(a){if("true"==a.flag){e.set(a.pageBean.recordList);var b=new c.Model(a.pageBean),d=new j({model:b,queryString:m.queryString});m.pagebarRegion.show(d)}else alert("查询出错!")})}});return k}),define("travsky/jcf/1.0.0/template/deploy/deployMgrLayout.tpl",[],'<div>\n	<ul class="nav nav-tabs" id = "deployMgrNav">\n		<li <%if(selectedPageUI=="showAllAppUI"){%>class = "active"<%} %> ><a href="showAllAppUI">查看应用部署</a></li>\n		<%if(uploadAppAuthFlag=="true"){\n			%><li <%if(selectedPageUI=="updateAppUI"){%>class = "active"<%} %> ><a href="updateAppUI" >上传应用</a></li><%\n		}%>\n	</ul>\n</div>\n<br/>\n<div id = "downContentRegion"></div>\n<div id = "pagebarRegion"></div>\n\n\n\n\n\n'),define("travsky/jcf/1.0.0/view/deploy/deployList_view",["jquery","backbone","underscore","marionette"],function(a){jQuery=a("jquery"),a("backbone");var b=a("underscore"),c=a("marionette"),d=a("travsky/jcf/1.0.0/template/deploy/deployItem.tpl"),e=c.ItemView.extend({template:b.template(d),tagName:"tr"}),f=a("travsky/jcf/1.0.0/template/deploy/deployList.tpl"),g=c.CompositeView.extend({initialize:function(){},tagName:"table",className:"table table-bordered list",template:b.template(f),childView:e,childViewContainer:"tbody"});return g}),define("travsky/jcf/1.0.0/template/deploy/deployItem.tpl",[],"<td><%=name%></td>\n<td><%=groupName%></td>\n<td><%=version%></td>\n<td><%=uploadDate%></td>"),define("travsky/jcf/1.0.0/template/deploy/deployList.tpl",[],"<thead>\n  <tr>\n    <th>应用名称</th>\n    <th>分组名称</th>\n    <th>版本号</th>\n    <th>最后更新时间</th>\n  </tr>\n</thead>\n<tbody></tbody>\n\n"),define("travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil",[],function(){var a={};return a.getUploadAppFlag=function(){var a=jcfManager.authModel,b="3_2_1",c=a.get(b)||"";return c},a.getDeployFlag=function(){var a=jcfManager.authModel,b="3_2_2",c=a.get(b)||"";return c},a.getUndeployFlag=function(){var a=jcfManager.authModel,b="3_2_3",c=a.get(b)||"";return c},a.getChageVersionFlag=function(){var a=jcfManager.authModel,b="3_2_4",c=a.get(b)||"";return c},a.getRolebackFlag=function(){var a=jcfManager.authModel,b="3_2_5",c=a.get(b)||"";return c},a.getAppLogOperFlag=function(){var a=jcfManager.authModel,b="7_2_1",c=a.get(b)||"";return c},a.getDeploy4ServerFlag=function(){var a=jcfManager.authModel,b="3_2_2",c=a.get(b)||"";return c},a.getUndeploy4ServerFlag=function(){var a=jcfManager.authModel,b="3_2_3",c=a.get(b)||"";return c},a.getUploadCfgFlag=function(){var a=jcfManager.authModel,b="3_2_7",c=a.get(b)||"";return c},a.getDownloadCfgFlag=function(){var a=jcfManager.authModel,b="3_2_8",c=a.get(b)||"";return c},a.getCreateNewDeployFlag=function(){var a=jcfManager.authModel,b="3_2_2",c=a.get(b)||"";return c},a}),define("travsky/jcf/1.0.0/view/deploy/deployUploadLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/deploy/deployUploadLayout.tpl"),g=a("travsky/jcf/1.0.0/template/deploy/uploadItem.tpl"),h=a("travsky/jcf/1.0.0/template/deploy/uploadList.tpl"),i=a("travsky/jcf/1.0.0/util/CommonUtil"),j="<%=currentPath%>",k=a("travsky/jcf/1.0.0/view/pagebar_view2"),l=a("querystring"),m=a("travsky/jcf/1.0.0/model/listTip_model"),n=a("travsky/jcf/1.0.0/view/listTip_view"),o=e.ItemView.extend({tagName:"span",template:d.template(j)}),p=e.ItemView.extend({tagName:"tr",className:"listPageTr",template:d.template(g)}),q=e.CompositeView.extend({initialize:function(){},tagName:"table",className:"table table-bordered list",template:d.template(h),childView:p,childViewContainer:"tbody"}),r=a("travsky/jcf/1.0.0/template/deploy/upload4AlreadyUploadItem.tpl"),s=a("travsky/jcf/1.0.0/template/deploy/upload4AlreadyUploadList.tpl"),t=e.ItemView.extend({tagName:"tr",template:d.template(r),events:{click:"highlightName"},highlightName:function(){this.$el.toggleClass("warning")}}),u=e.CompositeView.extend({initialize:function(){},template:d.template(s),tagName:"table",className:"table table-bordered list",childView:t,childViewContainer:"tbody"}),v=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString,this.on("showPageInfo",this.showPageInfo)},template:d.template(f),regions:{currentFilePathRegion:"#currentFilePathRegion",listRegion:"#listRegion",pagebarRegion:"#pagebarRegion",alreadyUploadAppRegion:"#alreadyUploadAppRegion",showTipInfoRegion:"#showTipInfoRegion"},events:{"click #backParentFilePathBtn":"backParentFilePath","click #uploadAppBtn":"uploadApp","click .listPageTr td span.file_dir_icon":"goToChildFilePath","click .listPageTr td input:radio[name='selectedAppName']":"clickAppRadio","click .alreadyUploadAppClearTd a":"clearApp"},clearApp:function(a){if(confirm("确定清除?")){var c=b(a.target),d=c.attr("appId"),e=c.attr("appStatus"),f="/"+jcfManager.appName+"/deployMgr/clearApp.action",g={appId:d,appStatus:e},h=i.dealAjaxRequest4SimpleParam(f,g),j=this,k=new m;b.when(h).done(function(a){if(a.flag){k.set("succList",["清除成功!"]);var b=new n({model:k});j.showTipInfoRegion.show(b),j.uploadedAppCollection.each(function(a){var b=a.get("id");return b==d?(j.uploadedAppCollection.remove(a),void 0):void 0})}else{k.set("errList",["清除应用失败!"]);var b=new n({model:k});j.showTipInfoRegion.show(b)}})}},clickAppRadio:function(a){a.stopPropagation();var c=b(a.target);b("#uploadAppName").val(c.val()),b("#uploadAppName").attr("title",c.attr("title")),this.showTipInfoRegion.empty(),this.findUploadedApp(b(a.target).val())},findUploadedApp:function(a){var d="/"+jcfManager.appName+"/deployMgr/ajaxSearchUploadedApp.action",e={appPath:a},f=i.dealAjaxRequest4SimpleParam(d,e),g=this;b.when(f).done(function(a){var b=new c.Collection(a.appInfoList);g.uploadedAppCollection=b,g.alreadyUploadAppRegion.show(new u({collection:b}))})},uploadApp:function(){var a=b("#uploadAppName").val(),c=b("#uploadAppName").attr("title"),d=this,e=new m;if(null==a||""==a){e.set("errList",["请选择应用包！"]);var f=new n({model:e});d.showTipInfoRegion.show(f)}else{var g=this.uploadedAppCollection,h=0,j=!0;if(g.each(function(a){h++;var b=a.get("name")+"_"+a.get("version")+".bar",f=a.get("appStatus");if(c==b)if(2==f||3==f||10==f)confirm("同名同版本的bar包已上传，是否要覆盖?")||(j=!1);else{j=!1,e.set("errList",["该包已部署，不能上传覆盖!"]);var g=new n({model:e});d.showTipInfoRegion.show(g)}}),!j)return;if(h>=3){e.set("errList",["该应用包已上传三个版，不能再上传，请先进行清除！"]);var f=new n({model:e});d.showTipInfoRegion.show(f)}if(!confirm("确定上传应用包"+a+"?"))return;var k="/"+jcfManager.appName+"/deployMgr/mUploadFile.action",l={appPath:a},o=i.dealAjaxRequest4SimpleParam(k,l);b.when(o).done(function(b){if("true"==b.flag){e.set("succList",["上传成功!"]);var c=new n({model:e});d.showTipInfoRegion.show(c),d.findUploadedApp(a)}else{e.set("errList",["上传失败!"+b.msg]);var c=new n({model:e});d.showTipInfoRegion.show(c)}})}},backParentFilePath:function(){var a="parentPath";this.queryString.changePageFlag="false",this.queryString.currentPage="1",appRouter.navigate("deployMgr/param/"+l.stringify(this.queryString)),this.showDirList(a)},goToChildFilePath:function(a){a.stopPropagation(),a.preventDefault();var c=b(a.target),d=c.attr("pathCode");this.queryString.changePageFlag="false",this.queryString.currentPage="1",this.showDirList(d)},showPageInfo:function(){var a="defaultPath";(void 0==this.queryString.currentPage||""==this.queryStringcurrentPage)&&(this.queryString.currentPage="1",this.queryString.pageSize=jcfManager.defaultPageSize),this.showDirList(a)},showDirList:function(a){this.alreadyUploadAppRegion.empty(),b("#uploadAppName").val("");var d="/"+jcfManager.appName+"/deployMgr/mAccessDir.action",e={operPathCode:a,currentPage:this.queryString.currentPage,pageSize:this.queryString.pageSize,changePageFlag:this.queryString.changePageFlag},f=i.dealAjaxRequest4SimpleParam(d,e),g=this;b.when(f).done(function(a){var b=new c.Model({currentPath:a.currentPath}),d=new o({model:b});g.currentFilePathRegion.show(d);var e=new c.Collection(a.pageBean.recordList);g.listRegion.show(new q({collection:e}));var f=new c.Model(a.pageBean);g.queryString.selectedPageUI="updateAppUI",g.queryString.changePageFlag="true",appRouter.navigate("deployMgr/param/"+l.stringify(g.queryString)),g.pagebarRegion.show(new k({model:f,queryString:g.queryString}))}).fail(function(){alert("根目录")})}});return v}),define("travsky/jcf/1.0.0/template/deploy/deployUploadLayout.tpl",[],'<div id = "showTipInfoRegion"></div>\n<div class = "row">\n		<div class = "col-sm-2 text-right"><label class="control-label">应用路径:</label></div>\n		<div class = "col-sm-3"><input type="text" id="uploadAppName"  readonly="readonly" class="form-control"  placeholder="必填项" /></div>\n		<div class = "col-sm-1"><button type="submit" id = "uploadAppBtn"  class="btn btn-default">上传</button></div>\n</div>\n\n<hr/>\n<div class = "row">\n   <div class = "col-sm-2 text-right"><button type="button" id = "backParentFilePathBtn" class="btn btn-default">上层目录</button></div>\n   <div class = "col-sm-2 text-right"><label class="control-label">当前目录:</label></div>\n   <div class = "col-sm-6"><div id = "currentFilePathRegion"></div></div>\n</div>\n\n<br/>\n<div id = "listRegion" ></div><!--显示列表区域-->\n<div id = "pagebarRegion" ></div><!--显示分页栏条区域-->\n<div id = "alreadyUploadAppRegion" ></div><!--显示已上传引用区域-->\n<br/>'),define("travsky/jcf/1.0.0/template/deploy/uploadItem.tpl",[],'<td>\n	<%\n	 if("文件"==category){\n	%>\n		<input type="radio" name = "selectedAppName" title = "<%=name%>"  value = "<%=path%>" >\n	<%\n	 }\n	%>\n</td>\n<td><%if("文件夹"==category){\n		%>\n			<span class = "file_dir_icon myhand" pathCode = "<%=pathCode%>"><%=name%><span>\n		<%\n	 }else if ("文件"==category){\n	 	%>\n			<span class = "file_file_icon"><%=name%><span>\n		<%\n	 }%>\n</td>\n<td><%=category%></td>'),define("travsky/jcf/1.0.0/template/deploy/uploadList.tpl",[],"<thead>\n	<tr>\n		<th></th>\n		<th>名称</th>\n		<th>类型</th>\n	</tr>\n</thead>\n<tbody>	\n</tbody>\n"),define("travsky/jcf/1.0.0/model/listTip_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({defaults:function(){return{succList:[],errList:[]}},urlRoot:""});return c}),define("travsky/jcf/1.0.0/template/deploy/upload4AlreadyUploadItem.tpl",[],'<td><%=name%></td>\n<td><%=groupName%></td>\n<td><%=version%></td>\n<td><%=userName%></td>\n<td><%=uploadDate%></td>\n<td>\n	<%\n		if(appStatus==1){\n		%>已部署<%\n		}else if (appStatus=="2"){\n		%>部署失败<%\n		}else if (appStatus=="3"){\n		%>已反部署<%\n		}else if (appStatus=="4"){\n		%>反部署失败<%\n		}else if (appStatus=="5"){\n		%>已回滚<%\n		}else if(appStatus=="6"){\n		%>回滚失败<%\n		}else if (appStatus=="7"){\n		%>正在部署<%\n		}else if (appStatus=="8"){\n		%>正在反部署<%\n		}else if (appStatus=="8"){\n		%>正在回滚<%\n		}else if(appStatus=="10"){\n		%>未部署<%\n		}else{\n		%>状态不一致<%\n		}\n	%>\n</td>\n<td>\n	<%if(isDefaultVersion=="TRUE"){\n	%><span class = "text-success">是</span><%\n	}else if (isDefaultVersion=="FALSE"){\n	%><span class = "text-warning">否</span><%\n	}else{\n	%><span class = "text-danger">状态不一致</span><%\n	}%>\n</td>\n<td class = "alreadyUploadAppClearTd">	\n	<%\n		if(appStatus=="2"||appStatus=="3"||appStatus=="10"){\n		%><a class = "clearAppBtn myhand" appId = "<%=id%>" appStatus ="<%=appStatus%>" >清除应用</a><%\n		}else{\n		%>清除应用<%\n		}\n	%>\n</td>'),define("travsky/jcf/1.0.0/template/deploy/upload4AlreadyUploadList.tpl",[],"<caption>已上传应用版本:</caption>\n<thead>\n	<tr>\n		<th>应用名称</th>\n		<th>组名称</th>\n		<th>版本</th>\n		<th>上传用户</th>\n		<th>上传时间</th>\n		<th>部署状态</th>\n		<th>是否默认版</th>\n		<th>清除应用</th>\n	</tr>\n</thead>\n<tbody>	\n</tbody>\n"),define("travsky/jcf/1.0.0/view/deploy/groupDeployMgrLayout",["jquery","backbone","underscore","marionette","querystring","travsky/jcf/1.0.0/view/deploy/groupDeployTabAppMgr","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/deploy/rollbackLayout","travsky/jcf/1.0.0/view/deploy/rollback_view","travsky/jcf/1.0.0/view/deploy/rollbackUploadLayout","travsky/jcf/1.0.0/view/deploy/deployUploadLayout","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert","travsky/jcf/1.0.0/collection/deploy/groupApp_collection","travsky/jcf/1.0.0/model/deploy/groupApp_model","travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil","travsky/jcf/1.0.0/view/itemTip_view","travsky/jcf/1.0.0/model/itemTip_model","travsky/jcf/1.0.0/view/waiting_view","travsky/jcf/1.0.0/view/deploy/groupServerAppStautsLayout","travsky/jcf/1.0.0/view/deploy/groupAppConfigLayout","ajaxfileupload","travsky/jcf/1.0.0/view/deploy/groupDeployTabCreateNewDeploy","travsky/jcf/1.0.0/view/deploy/groupDeployAppLogCfgLayout","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/confirm_view","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/deploy/groupDeployTabServerDeployInfo"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/deploy/groupDeployMgrLayout.tpl"),g=a("querystring"),h=a("travsky/jcf/1.0.0/view/deploy/groupDeployTabAppMgr"),i=a("travsky/jcf/1.0.0/view/deploy/groupDeployTabCreateNewDeploy"),j=a("travsky/jcf/1.0.0/view/deploy/groupDeployTabServerDeployInfo"),k=a("travsky/jcf/1.0.0/util/CommonUtil"),l=a("travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil"),m=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString;var b=l.getCreateNewDeployFlag();this.model.set("createNewDeployAuthFlag",b),this.on("queryAndShowPageInfo",this.queryAndShowPageInfo)},template:d.template(f),regions:{downContentRegion:"#downContentRegion"},events:{"click #groupDeployMgrNav li a":"clickNavItem"},clickNavItem:function(a){a.stopPropagation(),a.preventDefault();var c=b(a.target).attr("href"),d=b(a.target).parent(),e=d.parent();d.hasClass("active")||(e.find("li").removeClass("active"),d.addClass("active"),this.queryString.selectedPageUI=c,this.queryString.currentPage="1",appRouter.navigate("deployMgr/group/param/"+g.stringify(this.queryString)),this.queryAndShowPageInfo())},queryAndShowPageInfo:function(){var a=this.queryString.selectedPageUI,d=this;if(void 0==a&&(a="showAllAppUI",this.queryString.selectedPageUI=a),"showAllAppUI"==a){var e=this.queryString.status;(void 0==e||null==e||""==e)&&(this.queryString.status="0");var f=this.queryString.groupId,g=new c.Model({status:this.queryString.status,groupId:f}),l=new h({model:g,queryString:this.queryString});this.downContentRegion.show(l),l.trigger("searchListInfo")}else if("createNewDeployUI"==a){var m="/"+jcfManager.appName+"/deployMgr/toCreateNewDeployUI.action",n=k.dealAjaxRequestWithoutParam(m);b.when(n).done(function(a){var b=new c.Model(a),e=new i({model:b,queryString:d.queryString});d.downContentRegion.show(e),e.trigger("searchListInfo")})}else if("showServerDeployInfoUI"==a){var o=new j({queryString:this.queryString});this.downContentRegion.show(o),o.trigger("searchListInfo")}}});return m}),define("travsky/jcf/1.0.0/template/deploy/groupDeployMgrLayout.tpl",[],'<ul class="nav nav-tabs" id = "groupDeployMgrNav">\n	<li <%if("showAllAppUI"==selectedPageUI){%>class = "active"<%}%>><a href="showAllAppUI">应用管理</a></li>\n	<%if(createNewDeployAuthFlag=="true"){\n	   %>\n		 <li <%if("createNewDeployUI"==selectedPageUI){%>class = "active"<%}%>><a href="createNewDeployUI" >新建部署</a></li>\n	   <%\n	}%>\n	<li <%if("showServerDeployInfoUI"==selectedPageUI){%>class = "active"<%}%>><a href="showServerDeployInfoUI" >服务器部署情况</a></li>\n</ul>\n<br/>\n<div id = "downContentRegion"></div>\n<input type = "hidden" id = "groupDeploy4GroupIdHidden" value = "<%=groupId%>"/>'),define("travsky/jcf/1.0.0/view/deploy/groupDeployTabAppMgr",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/deploy/rollbackLayout","travsky/jcf/1.0.0/view/deploy/rollback_view","travsky/jcf/1.0.0/view/deploy/rollbackUploadLayout","travsky/jcf/1.0.0/view/deploy/deployUploadLayout","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert","travsky/jcf/1.0.0/collection/deploy/groupApp_collection","travsky/jcf/1.0.0/model/deploy/groupApp_model","travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil","travsky/jcf/1.0.0/view/itemTip_view","travsky/jcf/1.0.0/model/itemTip_model","travsky/jcf/1.0.0/view/waiting_view","travsky/jcf/1.0.0/view/deploy/groupServerAppStautsLayout","travsky/jcf/1.0.0/view/deploy/groupAppConfigLayout","ajaxfileupload"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/deploy/groupDeployAppMgrItem.tpl"),g=a("travsky/jcf/1.0.0/template/deploy/groupDeployAppMgrList.tpl"),h=a("travsky/jcf/1.0.0/template/deploy/groupDeployTabAppMgr.tpl"),i=a("travsky/jcf/1.0.0/util/CommonUtil"),j=a("travsky/jcf/1.0.0/view/pagebar_view2"),k=a("querystring"),l=a("travsky/jcf/1.0.0/util/SidebarUtil"),k=a("querystring"),m=a("travsky/jcf/1.0.0/view/deploy/rollbackLayout"),n=a("travsky/jcf/1.0.0/collection/deploy/groupApp_collection"),o=a("travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil"),p=a("travsky/jcf/1.0.0/model/listTip_model"),q=a("travsky/jcf/1.0.0/view/listTip_view"),r=a("travsky/jcf/1.0.0/view/itemTip_view"),s=a("travsky/jcf/1.0.0/view/waiting_view"),t=a("travsky/jcf/1.0.0/view/deploy/groupServerAppStautsLayout"),u=a("travsky/jcf/1.0.0/view/deploy/groupAppConfigLayout"),v=e.ItemView.extend({initialize:function(){var a=b("#groupDeploy4GroupIdHidden").val();this.model.set("groupId",a);var c=o.getDeployFlag(),d=o.getUndeployFlag(),e=o.getChageVersionFlag(),f=o.getRolebackFlag();this.model.set("authDeployFlag",c),this.model.set("authUndeployFlag",d),this.model.set("authChageVersionFlag",e),this.model.set("authRollbackFlag",f),this.listenTo(this.model,"change",this.render)},template:d.template(f),tagName:"tr",events:{"click button.change2Default":"change2DefaultVersion","click button.change2NoDefault":"change2NoDefaultVersion","click td.undeployAppTd a":"undeployApp","click td.showGroupCfgInfoTd a":"showGroupCfgInfo","click td.rollbackVersionTd a":"rollbackVersion","click td.groupAppDetailTd a":"viewAppDetail4Group"},viewAppDetail4Group:function(a){a.preventDefault(),b(a.target);var d=this.model.get("appId"),e=this.model.get("groupId"),f={groupId:e,appId:d},g=l.getModuleName();appRouter.navigate(g+"/group/appDeploy/param/"+k.stringify(f));var h=new c.Model({groupId:e,appId:d}),i=new t({model:h,queryString:f});jcfManager.contentRegion.show(i),i.trigger("showPageInfo")},rollbackVersion:function(a){a.preventDefault();var d=this.checkRegistryRun();if(d){var e=b("#deployStatus4Search").val(),f=this.model.get("groupId"),g=this.model.get("groupName"),h=this.model.get("appId"),i=this.model.get("appName"),j=this.model.get("prevVersion"),n=this.model.get("appVersion"),o={groupId:f,groupName:g,appId:h,appName:i,prevVersion:j,appVersion:n},p=l.getModuleName(),q=b.trim(b("#currentPage").val()),r=b.trim(b("#pageSize").val()),s=new c.Model;s.set("groupId",f),s.set("status",e),s.set("currentPage",q),s.set("pageSize",r),appRouter.navigate(p+"/group/appRollback/param/"+k.stringify(o));var t=new m({model:s,queryString:o});jcfManager.contentRegion.show(t),t.trigger("showPageInfo")}},showGroupCfgInfo:function(a){a.preventDefault();var c=l.getModuleName(),d=b("#deployStatus4Search").val(),e=this.model.get("appName"),f=this.model.get("appVersion"),g=this.model.get("groupId"),h=this.model.get("serverId"),i={groupId:g,serverId:h,appName:e,appVersion:f,status:d};appRouter.navigate(c+"/group/appConfig/param/"+k.stringify(i));var j=new u({queryString:i});jcfManager.contentRegion.show(j),j.trigger("showPageInfo")},undeployApp:function(a){a.preventDefault(),b(a.target);var c=b("#freshPage4GroupAppTabFlag").val();window.clearInterval(c);var d=this.model.get("appId"),e=this.model.get("groupId"),f={};f.appId=d,f.groupId=e,f.mode="group",this.model.get("status");var g=this;if(l.getModuleName(),this.model.set("status","8"),confirm("确定反部署应用?")){var h=this.checkUndeployApp(f);if(h){var j=new s;jcfManager.tipInfoRegion.show(j);var k="/"+jcfManager.appName+"/deployMgr/mUndeployApp.action",m=i.dealAjaxRequest4JSObj(k,f);b.when(m).done(function(a){if("true"==a.flag)g.remove(),jcfManager.tipInfoRegion.empty();else{g.model.set("status","4");var b=new p;b.set("errList",a.errInfoList);var c=new q({model:b});jcfManager.tipInfoRegion.show(c)}})}}},change2DefaultVersion:function(){var a="TRUE";this.changeDefaultVersion(a)},change2NoDefaultVersion:function(){var a="FALSE";this.changeDefaultVersion(a)},changeDefaultVersion:function(a){var c=this,d="确定将应用";d+="TRUE"==a?"切换到默认版?":"切换到非默认版?";var e=this.model.get("groupId"),f=this.model.get("appId"),g=this.model.get("isDefaultVersion");if("TRUE"==g){if("TRUE"==a)return}else if("FALSE"==g){if("FALSE"==a)return}else g="TRUE"==a?"FALSE":"TRUE";var h=this.model.get("appVersion"),j=this.model.get("appName"),k=this.checkRegistryRun();if(k&&confirm(d)){var l="/"+jcfManager.appName+"/deployMgr/changeAppDefaultVersion.action",m={};m.groupId=e,m.appId=f,m.appName=j,m.isDefaultVersion=g,m.currentVersion=h,m.operation="7";var n=i.dealAjaxRequest4JSObj(l,m);b.when(n).done(function(b){var d=b.flag;if("success"==d)c.model.set("isDefaultVersion",a),c.triggerMethod("parent:refreshPageDefaultVersion");else{var e=new r;e.model.set("flag","false"),e.model.set("msg","切换失败!"),jcfManager.tipInfoRegion.show(e)}})}},checkRegistryRun:function(){var a=!1,c="/"+jcfManager.appName+"/deployMgr/checkRegistryStatus.action",d=i.dealSYNCHAjaxRequestWithoutParam(c);return b.when(d).done(function(b){if("true"==b.flag)if("1"==b.status)a=!0;else{var c=new r;c.model.set("flag","false"),c.model.set("msg",b.errMsg),jcfManager.tipInfoRegion.show(c)}else{var c=new r;c.model.set("flag","false"),c.model.set("msg",b.errMsg),jcfManager.tipInfoRegion.show(c)}}),a},checkUndeployApp:function(a){var c=!1,d="/"+jcfManager.appName+"/deployMgr/mApplication.action";a.operation="7";var e=i.dealSYNCHAjaxRequest4JSObj(d,a);return b.when(e).done(function(b){if("true"==b.flag)delete a.operation,c=!0;else{var d=new r;d.model.set("flag","false"),d.model.set("msg",b.msg),jcfManager.tipInfoRegion.show(d)}}),c},render:function(){return this.$el.html(this.template(this.model.attributes)),this}}),w=e.CompositeView.extend({initialize:function(){this.on("freshPage",this.freshPage)},tagName:"table",className:"table table-bordered list",template:d.template(g),childView:v,childViewContainer:"tbody",freshPage:function(){var a=this;this.collection;var c=2e3,d=i.getFefreshPageNum(),e=c*d,f=window.location.hash;b("#freshPage4GroupAppTabUrl").val(f);var g=setInterval(this.updatePageAppStatus,c,a);a.autoFreshPageTTT=g,b("#freshPage4GroupAppTabFlag").val(g),setTimeout("window.clearInterval("+g+")",e)},updatePageAppStatus:function(a){var c=b.trim(b("#hiddenGroupId").val()),d=b.trim(b("#currentPage").val()),e=b.trim(b("#pageSize").val()),f="0",g=a.autoFreshPageTTT,h=window.location.hash,i=b("#freshPage4GroupAppTabUrl").val();h==i?a.collection.fetch({data:{groupId:c,status:f,currentPage:d,pageSize:e},success:function(a){var b=a.length,c=0;a.each(function(a){var b=a.get("status");"7"!=b&&"8"!=b&&"9"!=b&&"0"!=b&&c++}),c==b&&window.clearInterval(g)},error:function(){window.clearInterval(g)}}):window.clearInterval(g)},childEvents:{"parent:refreshPageDefaultVersion":function(a){var b=a.model,c=b.get("appName"),d=b.get("appVersion"),e=b.get("isDefaultVersion");this.collection.each(function(a){a.get("appName")==c&&a.get("appVersion")!=d&&("TRUE"==e?"FALSE"!=a.get("isDefaultVersion")&&a.set("isDefaultVersion","FALSE"):a.set("isDefaultVersion","FALSE"))})},"parent:fresh4UndeployApp":function(a){var c=this,d=2e3,e=i.getFefreshPageNum(),f=d*e,g=window.location.hash;b("#freshPage4GroupAppTabUrl").val(g),c.curChildView=a;var h=setInterval(this.fresh4UndeployApp,d,c);c.autoFreshPageTTT=h,b("#freshPage4GroupAppTabFlag").val(h),setTimeout("window.clearInterval("+h+")",f)}},fresh4UndeployApp:function(a){var c=a.curChildView,d=a.collection,e=c.model,f=a.autoFreshPageTTT,g=window.location.hash,h=b("#freshPage4GroupAppTabUrl").val();if(g==h){var j=e.get("appId"),k=e.get("groupId"),l="/"+jcfManager.appName+"/deployMgr/queryAppCount4Group.action",m={appId:j,groupId:k},n=i.dealAjaxRequest4SimpleParam(l,m);b.when(n).done(function(a){if("true"==a.flag){var b=a.recordCount;0==b&&(d.remove(e),window.clearInterval(f))}else window.clearInterval(f)})}else window.clearInterval(f)}}),x=e.LayoutView.extend({initialize:function(a){this.on("searchListInfo",this.searchListInfo),this.queryString=a.queryString,jcfManager.tipInfoRegion=this.tipInfoRegion},template:d.template(h),events:{"change #deployStatus4Search":"changeDeployStatus4Search","click #groupAppMgrSearchBtn":"groupAppMgrSearch"},regions:{tipInfoRegion:"#tipInfoRegion",listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},groupAppMgrSearch:function(){this.queryString.currentPage="1";var a=l.getModuleName();appRouter.navigate(a+"/group/param/"+k.stringify(this.queryString)),this.trigger("searchListInfo")},changeDeployStatus4Search:function(){var a=this.$el.find("#deployStatus4Search").val();this.queryString.status=a,appRouter.navigate("deployMgr/group/param/"+k.stringify(this.queryString))},searchListInfo:function(){var a=this,d="/"+jcfManager.appName+"/deployMgr/mSearchGroupApp.action",e=this.$el.find("#deployStatus4Search").val(),f={groupId:this.queryString.groupId,status:e,currentPage:this.queryString.currentPage,pageSize:this.queryString.pageSize},g=i.dealAjaxRequest4SimpleParam(d,f);b.when(g).done(function(b){var d=new c.Model(b.pageBean),e=new n(b.pageBean.recordList),f=new w({collection:e});a.listRegion.show(f),f.trigger("freshPage"),d.set("uriSection","group");var g=new j({model:d,queryString:a.queryString});a.pagebarRegion.show(g);var h=a.queryString.freshPage;"true"==h&&f.trigger("freshPage")})}});return x}),define("travsky/jcf/1.0.0/template/deploy/groupDeployAppMgrItem.tpl",[],'<td><%=appName%></td>\n<td><%=appVersion%></td>\n<td>\n	<%if(status=="1"){\n		%><span class = "text-success">已部署</span><%\n	}else if (status=="2"){\n	    %><span class = "text-danger">部署失败</span><%\n	}else if (status=="3"){\n	    %><span class = "text-success">已反部署</span><%\n	}else if (status=="4"){\n	    %><span class = "text-danger">反部署失败</span><%\n	}else if (status=="5"){\n	    %><span class = "text-success">已回滚</span><%\n	}else if (status=="6"){\n	    %><span class = "text-danger">回滚失败</span><%\n	}else if(status=="7"){\n	    %>正在部署..<%\n	}else if (status=="8"){\n	    %>正在反部署..<%\n	}else if(status=="9"){\n	    %>正在回滚..<%\n	}else if(status=="0"){\n	    %><span class = "text-danger">状态不一致</span><%\n	}else{\n	    %><%=status%><%\n	}%>\n</td>\n<td><%=updateDate%></td>\n<td class = "groupAppDetailTd">\n	<a href = "<%=appId%>" >查看详情</a>\n</td>\n<td>\n	<%\n	   if(isDefaultVersion=="TRUE"){\n		   %><span class = "text-success">默认版</span><%\n	   }else if(isDefaultVersion=="FALSE"){\n		   %><span class = "text-warning">非默认版</span><%\n	   }else{\n		  %><span class = "text-danger">状态不一致</span><%\n	   }\n	%>\n</td>\n<td>\n	<%\n		if(status==1){//已部署\n		  if(containSihService=="true"){\n		  	%><span class = "text-info">不支持切换</span><%\n		  }else{\n		  	%>\n		  	<div class="btn-group" data-toggle="buttons">\n			    <button type="button"  class="btn btn-success btn-xs change2Default  <%if(authChageVersionFlag!=\'true\'){%>disabled<%}%>"  name = "toTRUE" >默认</button>\n				<button type="button" class="btn btn-warning btn-xs change2NoDefault <%if(authChageVersionFlag!=\'true\'){%>disabled<%}%>"   name = "toFALSE">非默认</button>\n			</div>\n		  	<%\n		  }\n		}else{//处于未部署状态\n		  %><span class = "text-info">不可切换</span><%\n		}\n	%>\n</td>\n<td class = "undeployAppTd">\n	<%\n		if((status=="1"||status=="4")&&authUndeployFlag=="true"){\n			%><a href = "#" appId = "<%=appId%>" appName = "<%=appName%>" >反部署</a><%\n		}else{\n			%>反部署<%\n		}\n	%>\n</td>\n\n<td class = "rollbackVersionTd" >\n	<%if(rollbackLinkShow=="1"&&isDefaultVersion=="TRUE"&&authRollbackFlag=="true"&&containSihService!="true"){\n		%><a href = "" class = "myhand">回滚</a><%\n	}else{\n		%>回滚<%\n	}%>	\n</td>\n\n<td class = "showGroupCfgInfoTd">\n	<%\n	if(status==1||status==4||status==6){//已部署\n		%><a href = "" class = "myhand">查看</a><%\n	}else{\n		%>查看<%\n	}%>\n</td>'),define("travsky/jcf/1.0.0/template/deploy/groupDeployAppMgrList.tpl",[],"<thead>\n  <tr>\n    <th>应用名</th>\n    <th>版本号</th>\n    <th>部署状态</th>\n    <th>最后更新时间</th>\n    <th>详情</th>\n    <th>当前版本</th>\n    <th>切换版本</th>\n    <th>反部署操作</th>\n    <th>回滚操作</th>\n    <th>配置文件</th>\n  </tr>\n</thead>\n<tbody></tbody>"),define("travsky/jcf/1.0.0/template/deploy/groupDeployTabAppMgr.tpl",[],'<div class = "row">\n	<div class = "col-sm-2 text-right" ><label for="groupName" class="control-label">部署状态：</label></div>\n	<div class = "col-sm-4" >\n		<select  id = "deployStatus4Search" class = "form-control input-sm">\n			<option <%if(status=="0"){%>selected="selected"<%} %>  value="0">全部</option>\n			<option <%if(status=="1"){%>selected="selected"<%} %> value="1">已部署</option>\n			<option <%if(status=="2"){%>selected="selected"<%}%>  value="2">部署失败</option>\n			<option <%if(status=="4"){%>selected="selected"<%} %>  value="4">反部署失败</option>\n		</select>\n	</div>\n	<div class = "col-sm-2" ><button  id = "groupAppMgrSearchBtn" type="button"  class="btn">查询</button></div>\n</div>\n<br/>\n<div id = "tipInfoRegion"></div>\n<div id = "listRegion" ></div>\n<div id = "pagebarRegion"></div>\n<input type = "hidden" id = "hiddenGroupId" value = "<%=groupId%>"/>\n<input type = "hidden" id = "freshPage4GroupAppTabUrl"/>\n<input type = "hidden" id = "freshPage4GroupAppTabFlag"/>\n\n\n'),define("travsky/jcf/1.0.0/view/deploy/rollbackLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/deploy/rollback_view","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/deploy/rollbackUploadLayout","travsky/jcf/1.0.0/view/deploy/deployUploadLayout","travsky/jcf/1.0.0/view/pagebar_view2","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/deploy/rollbackLayout.tpl"),g=a("travsky/jcf/1.0.0/util/CommonUtil"),h=a("travsky/jcf/1.0.0/view/deploy/rollback_view"),i=a("travsky/jcf/1.0.0/view/deploy/rollbackUploadLayout"),j=a("querystring"),k=e.LayoutView.extend({initialize:function(a){this.on("showPageInfo",this.showPageInfo),this.queryString=a.queryString,this.on("refreshBaseInfo",this.refreshBaseInfo)
},template:d.template(f),regions:{baseInfoRegion:"#baseInfoRegion",uploadAppRegion:"#uploadAppRegion"},events:{"click #rollbackAppBackBtn":"rollbackAppBack"},rollbackAppBack:function(){var a=this.model.get("groupId"),b=this.model.get("status"),c=this.model.get("currentPage"),d=this.model.get("pageSize"),e={groupId:a,status:b,selectedPageUI:"showAllAppUI",currentPage:c+"",pageSize:d+""};appRouter.navigate("deployMgr/group/param/"+j.stringify(e),{trigger:!0})},refreshBaseInfo:function(){var a=this,d=this.queryString.appName,e=this.queryString.appVersion,f=this.queryString.prevVersion,i="/"+jcfManager.appName+"/deployMgr/searchAppVersionList.action",j={appName:d},k=g.dealAjaxRequest4SimpleParam(i,j);b.when(k).done(function(b){if("true"==b.flag){var g=new c.Model(b);g.set("prevVersion",f),g.set("appName",d),g.set("appVersion",e);var i=new h({model:g,jsParam:a.queryString});a.baseInfoRegion.show(i)}else alert("获取上传应用版本出错!")})},showPageInfo:function(){var a=this,d=this.queryString.appName,e=this.queryString.appVersion,f=this.queryString.prevVersion,j="/"+jcfManager.appName+"/deployMgr/searchAppVersionList.action",k={appName:d},l=g.dealAjaxRequest4SimpleParam(j,k);b.when(l).done(function(b){if("true"==b.flag){var g=new c.Model(b);g.set("prevVersion",f),g.set("appName",d),g.set("appVersion",e);var j=new h({model:g,jsParam:a.queryString});a.baseInfoRegion.show(j);var k=new i({queryString:a.queryString});a.uploadAppRegion.show(k),k.parent=a,k.trigger("showPageInfo")}else alert("获取上传应用版本出错!")})}});return k}),define("travsky/jcf/1.0.0/template/deploy/rollbackLayout.tpl",[],'<br/>\n<div id = "baseInfoRegion" ></div><!--基本信息显示部分-->\n<div id = "uploadAppRegion"></div><!--上传应用部分-->\n<div>\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n	<button id = "rollbackAppBackBtn" class = "btn btn-primary" >返回</button>\n</div>\n'),define("travsky/jcf/1.0.0/view/deploy/rollback_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","querystring","travsky/jcf/1.0.0/util/SidebarUtil"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/util/CommonUtil"),f=a("travsky/jcf/1.0.0/template/deploy/rollbackView.tpl"),g=a("querystring"),h=a("travsky/jcf/1.0.0/util/SidebarUtil"),i=d.ItemView.extend({initialize:function(a){this.jsParam=a.jsParam},template:c.template(f),events:{"click #rollbackSubmitBtn":"rollbackSubmit","click td.selectVersionTd :radio":"selectVersion"},rollbackSubmit:function(){b("#hiddenAppVersion").val();var a=b("#rollback2Version").val();if(""==a)alert("请选择回滚版本!");else if(confirm("确认回滚?")){var c={};c.groupId=this.jsParam.groupId,c.groupName=this.jsParam.groupName,c.appName=this.jsParam.appName,c.appId=this.jsParam.appId,c.prevVersion=a,c.mode="group";var d=h.getModuleName(),f="/"+jcfManager.appName+"/deployMgr/mRollbackApp.action",i=e.dealAjaxRequest4JSObj(f,c),j=this.jsParam.groupId;b.when(i).done(function(a){if(a.flag="true")if("success"==a.msg){var b={groupId:j,freshPage:"true"};appRouter.navigate(d+"/group/param/"+g.stringify(b),{trigger:!0})}else alert("回滚失败!"+a.msg);else alert("回滚失败!")})}},selectVersion:function(a){var c=b(a.target),d=c.val();b("#rollback2Version").val(d)}});return i}),define("travsky/jcf/1.0.0/template/deploy/rollbackView.tpl",[],'<table class="table">\n   <tbody>\n      <tr>\n         <td width = "12%" class = "text-right">回滚到版本：</td>\n         <td width = "20%"><input type="text" id="rollback2Version"  readonly = "readonly"\n         	  	<%for(var i = 0 ; i < appVersionList.length ; i ++){\n         	  		if(appVersionList[i]==prevVersion){//如果和之前版本相同，则显示\n         	  			%> value = "<%=prevVersion%>"  <%\n         	  		}\n         	  	}%>\n            class="form-control input-sm"  /></td>\n         <td width = "10%"><button class = "btn primary" id = "rollbackSubmitBtn">回滚</button></td>\n         <td width = "15%">当前版本  :&nbsp;<%=appVersion%></td>\n         <td width = "30%">应用名称  :&nbsp;<%=appName%></td>\n         <td width = "*%"><input  type = "hidden" id = "hiddenAppVersion" value = "<%=appVersion%>"/></td>\n      </tr>\n      <tr>\n         <td class = "text-right">回滚版本：</td>\n         <td class = "selectVersionTd" colspan = "3">\n         	 <%\n         	 	for(var i = 0 ; i < appVersionList.length ; i ++){\n         	 	    if(appVersionList[i]!=appVersion){\n	         	 	    if(prevVersion==appVersionList[i]){\n	         	 			%>\n	         	 			<input type = "radio" name = "ccc"  checked = "checked" value = "<%=appVersionList[i]%>"/><%=appVersionList[i]%>\n	         	 			<%\n	         	 		}else{\n	         	 			%>\n	         	 			<input type = "radio" name = "ccc" value = "<%=appVersionList[i]%>"/><%=appVersionList[i]%>\n	         	 			<%\n	         	 		}\n         	 	    }\n         	 	}\n         	 %>\n		 </td>\n      </tr>\n   </tbody>\n</table>'),define("travsky/jcf/1.0.0/view/deploy/rollbackUploadLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/view/deploy/deployUploadLayout","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/view/deploy/deployUploadLayout"),g=a("travsky/jcf/1.0.0/template/deploy/uploadItem.tpl"),h=a("travsky/jcf/1.0.0/template/deploy/uploadList.tpl"),i=a("travsky/jcf/1.0.0/util/CommonUtil"),j="<%=currentPath%>",k=a("travsky/jcf/1.0.0/view/pagebar_view2"),l=a("querystring"),m=a("travsky/jcf/1.0.0/model/listTip_model"),n=a("travsky/jcf/1.0.0/view/listTip_view"),o=e.ItemView.extend({tagName:"span",template:d.template(j)}),p=e.ItemView.extend({tagName:"tr",className:"listPageTr",template:d.template(g)}),q=e.CompositeView.extend({initialize:function(){},tagName:"table",className:"table table-bordered list",template:d.template(h),childView:p,childViewContainer:"tbody"}),r=f.extend({clearApp:function(a){var c=new m;if(confirm("确定清除?")){var d=b(a.target),e=d.attr("appId"),f=d.attr("appStatus"),g="/"+jcfManager.appName+"/deployMgr/clearApp.action",h={appId:e,appStatus:f},j=i.dealAjaxRequest4SimpleParam(g,h),k=this;b.when(j).done(function(a){if(a.flag){c.set("succList",["清除成功!"]);var b=new n({model:c});k.showTipInfoRegion.show(b),k.uploadedAppCollection.each(function(a){var b=a.get("id");return b==e?(k.uploadedAppCollection.remove(a),k.parent.trigger("refreshBaseInfo"),void 0):void 0})}else{c.set("errList",["清除应用失败!"]);var b=new n({model:c});k.showTipInfoRegion.show(b)}})}},uploadApp:function(){var a=b("#uploadAppName").val(),c=b("#uploadAppName").attr("title"),d=this,e=new m;if(null==a||""==a){e.set("errList",["请选择应用包！"]);var f=new n({model:e});d.showTipInfoRegion.show(f)}else{var g=this.uploadedAppCollection,h=0,j=!0;if(g.each(function(a){h++;var b=a.get("name")+"_"+a.get("version")+".bar",f=a.get("appStatus");if(c==b)if(2==f||3==f||10==f)confirm("同名同版本的bar包已上传，是否要覆盖?")||(j=!1);else{j=!1,e.set("errList",["该包已部署，不能上传覆盖!"]);var g=new n({model:e});d.showTipInfoRegion.show(g)}}),!j)return;if(h>=3){e.set("errList",["该应用包已上传三个版，不能再上传，请先进行清除！"]);var f=new n({model:e});d.showTipInfoRegion.show(f)}else if(!confirm("确定上传应用包"+a+"?"))return;var k="/"+jcfManager.appName+"/deployMgr/mUploadFile.action",l={appPath:a},o=i.dealAjaxRequest4SimpleParam(k,l);b.when(o).done(function(b){if("true"==b.flag){e.set("succList",["上传成功!"]);var c=new n({model:e});d.showTipInfoRegion.show(c),d.findUploadedApp(a),d.parent.trigger("refreshBaseInfo")}else{e.set("errList",["上传失败!"+b.msg]);var c=new n({model:e});d.showTipInfoRegion.show(c)}})}},backParentFilePath:function(){var a="parentPath";this.queryString.changePageFlag="false",this.queryString.currentPage="1",appRouter.navigate("deployMgr/group/appRollback/param/"+l.stringify(this.queryString)),this.showDirList(a)},showDirList:function(a){this.alreadyUploadAppRegion.empty(),b("#uploadAppName").val("");var d="/"+jcfManager.appName+"/deployMgr/mAccessDir.action",e={operPathCode:a,currentPage:this.queryString.currentPage,pageSize:this.queryString.pageSize,changePageFlag:this.queryString.changePageFlag},f=i.dealAjaxRequest4SimpleParam(d,e),g=this;b.when(f).done(function(a){var b=new c.Model({currentPath:a.currentPath}),d=new o({model:b});g.currentFilePathRegion.show(d);var e=new c.Collection(a.pageBean.recordList);g.listRegion.show(new q({collection:e}));var f=new c.Model(a.pageBean);f.set("uriSection","group/appRollback"),g.queryString.changePageFlag="true",appRouter.navigate("deployMgr/group/appRollback/param/"+l.stringify(g.queryString)),g.pagebarRegion.show(new k({model:f,queryString:g.queryString}))}).fail(function(){alert("根目录")})}});return r}),define("travsky/jcf/1.0.0/collection/deploy/groupApp_collection",["jquery","backbone","underscore","travsky/jcf/1.0.0/model/deploy/groupApp_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/model/deploy/groupApp_model"),e=b.Collection.extend({model:d,url:"/"+jcfManager.appName+"/deployMgr/mSearchGroupApp.action",parse:function(a){return c.extend(a.pageBean.recordList)}});return e}),define("travsky/jcf/1.0.0/model/deploy/groupApp_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=b.Model.extend({defaults:{groupName:"",appId:"",appName:"",appVersion:"",appStatus:"",serverId:"",updateDate:"",status:"",undeployLinkShow:"",rollbackLinkShow:"",isDefaultVersion:"",prevVersion:""},parse:function(a){return c.extend(a)}});return d}),define("travsky/jcf/1.0.0/view/itemTip_view",["jquery","backbone","underscore","marionette","bs-alert","travsky/jcf/1.0.0/model/itemTip_model"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette");a("bs-alert")(b);var e=a("travsky/jcf/1.0.0/template/itemTip.tpl"),f=a("travsky/jcf/1.0.0/model/itemTip_model"),g=d.ItemView.extend({initialize:function(a){var b="";null!=a&&null!=a.msg&&(b=a.msg),this.model=this.model||new f,b.length>0&&this.model.set("msg",b)},template:c.template(e)});return g}),define("travsky/jcf/1.0.0/template/itemTip.tpl",[],'<div <%if(flag=="true"){%>class="alert alert-success"<%}else{%>class="alert alert-danger"<%}%> >\n	<button type="button" class="close" data-dismiss="alert" aria-hidden="true"> &times;</button>\n    <%=msg%>\n</div>'),define("travsky/jcf/1.0.0/model/itemTip_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({defaults:{flag:"true",msg:"提示内容"}});return c}),define("travsky/jcf/1.0.0/view/deploy/groupServerAppStautsLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/view/listTip_view","bs-alert","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil"],function(b){var c=jQuery=b("jquery"),d=b("backbone"),e=b("underscore"),f=b("marionette"),g=b("travsky/jcf/1.0.0/template/deploy/groupServerAppStautsLayout.tpl"),h=b("travsky/jcf/1.0.0/template/deploy/groupServerAppBaseInfo.tpl"),i=b("travsky/jcf/1.0.0/template/deploy/groupServerAppStatusItem.tpl"),j=b("travsky/jcf/1.0.0/template/deploy/groupServerAppStatusList.tpl"),k=b("travsky/jcf/1.0.0/view/listTip_view"),l=b("travsky/jcf/1.0.0/model/listTip_model"),m=b("travsky/jcf/1.0.0/util/CommonUtil"),n=b("travsky/jcf/1.0.0/view/pagebar_view2");b("querystring");var o=b("travsky/jcf/1.0.0/util/SidebarUtil"),p=b("travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil"),q=f.ItemView.extend({template:e.template(h),tagName:"table",className:"table list"}),r=f.ItemView.extend({initialize:function(){var a=c("#groupIdHiddenOnPage").val();this.model.set("groupId",a);var b=p.getDeployFlag(),d=p.getUndeployFlag();this.model.set("deployAuthFlag",b),this.model.set("undeployAuthFlag",d),this.model.view=this,this.listenTo(this.model,"change",this.render)},template:e.template(i),tagName:"tr",events:{"click td.deployOrNotTd a":"deployOrNotOper","click .serverIds":"singleChecked"},singleChecked:function(){var a=c("input:checkbox[name='serverIds']").length,b=c("input:checkbox[name='serverIds']:checked").length;a==b?c("#selectAll").prop("checked",!0):c("#selectAll").prop("checked",!1)},deployOrNotOper:function(a){a.preventDefault(),jcfManager.tipInfoRegion.empty();var b=c(a.target).attr("href"),d=this.model.get("appId")+"",e=this.model.get("serverId")+"",f=this.model.get("groupId")+"",g={};g.appId=d,g.serverId=e,g.groupId=f,"reDeploy"==b?(g.operation="6",this.deployApp(g)):("undeploy"==b||"reUndeploy"==b)&&(g.operation="7",g.mode="single",this.undeployApp(g))},deployApp:function(a){o.getModuleName();var b=this.check4DeployOrNot(a),d=this;if(b){delete a.operation;var e="/"+jcfManager.appName+"/deployMgr/mDeployApp.action",f=m.dealAjaxRequest4JSObj(e,a);c.when(f).done(function(a){"true"==a.flag?(d.model.set("appStatus","7"),d.triggerMethod("parent:refreshSingleModel")):alert("部署失败!")})}},undeployApp:function(a){if(confirm("确认反部署?")){var b=this.check4DeployOrNot(a);o.getModuleName();var d=this;if(b){delete a.operation;var e="/"+jcfManager.appName+"/deployMgr/mUndeployApp.action",f=m.dealAjaxRequest4JSObj(e,a);c.when(f).done(function(a){"true"==a.flag?(d.model.set("appStatus","8"),d.triggerMethod("parent:refreshSingleModel")):alert("反部署失败!")})}}},check4DeployOrNot:function(a){var b=!1,d="/"+jcfManager.appName+"/deployMgr/mApplication.action",e=m.dealSYNCHAjaxRequest4JSObj(d,a);return c.when(e).done(function(c){"true"==c.flag?(delete a.operation,b=!0):alert(c.msg)}),b},render:function(){return this.$el.html(this.template(this.model.attributes)),this}}),s=f.CompositeView.extend({tagName:"table",className:"table table-bordered list",template:e.template(j),childView:r,childViewContainer:"tbody",events:{"click #selectAll":"selectAll"},selectAll:function(a){var b=c("#selectAll").prop("checked");c(a.target).parents("thead").siblings("tbody").find(":checkbox[name='serverIds']").prop("checked",b)},childEvents:{"parent:refreshSingleModel":function(a){var b=a.model,d=2e3,e=m.getFefreshPageNum(),f=d*e,g=window.location.hash;c("#freshPage4GroupAppUrl").val(g);var h=setInterval(this.refreshSingleStatus,d,b);c("#freshPage4GroupAppFlag").val(h),setTimeout("window.clearInterval("+h+")",f)}},refreshSingleStatus:function(a){var b=window.location.hash,d=c("#freshPage4GroupAppUrl").val(),e=c("#freshPage4GroupAppFlag").val();if(d==b){var f=a.get("serverId"),g=a.get("appId"),h="/"+jcfManager.appName+"/deployMgr/freshAppStatus4Server.action",i=a.get("groupId"),j={groupId:i,serverId:f,appId:g},k=m.dealAjaxRequest4SimpleParam(h,j);c.when(k).done(function(b){if("true"!=b.continueFreshFlag){var c=b.appStatus;"7"!=c&&"8"!=c&&"9"!=c&&(3==c?a.view.destroy():a.set("appStatus",c),window.clearInterval(e))}else window.clearInterval(e)})}else window.clearInterval(e)}}),t=f.LayoutView.extend({initialize:function(a){this.queryString=a.queryString;var b=p.getDeployFlag(),c=p.getUndeployFlag();this.model.set("deployAuthFlag",b),this.model.set("undeployAuthFlag",c),this.on("showPageInfo",this.showPageInfo),jcfManager.tipInfoRegion=this.tipInfoRegion},template:e.template(g),regions:{tipInfoRegion:"#tipInfoRegion",baseInfoRegion:"#baseInfoRegion",listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},events:{"click #batchReDeployBtn":"batchReDeploy","click #batchReundeployBtn":"batchReundeploy"},showPageInfo:function(){var a=this,b=this.queryString.groupId,e=this.queryString.appId,f=this.queryString.currentPage;null==f&&(this.queryString.currentPage="1",this.queryString.pageSize=jcfManager.defaultPageSize);var g="/"+jcfManager.appName+"/deployMgr/viewAppStatus4Group.action",h={groupId:b,appId:e,currentPage:this.queryString.currentPage,pageSize:this.queryString.pageSize},i=m.dealAjaxRequest4SimpleParam(g,h),j=2e3,k=m.getFefreshPageNum(),l=j*k,o=window.location.hash;c("#freshPage4GroupAppUrl").val(o);var p=this.queryString.deployFlag;c.when(i).done(function(b){var e=new d.Model(b.appInfo),f=new q({model:e});a.baseInfoRegion.show(f);var g=new d.Collection(b.pageBean.recordList);a.collection=g;var h=new s({collection:g});a.listRegion.show(h);var i=new d.Model(b.pageBean);i.set("uriSection","group/appDeploy");var k=new n({model:i,queryString:a.queryString});if(a.pagebarRegion.show(k),"true"==p&&(c("#serverId4deployApp").val(a.queryString.serverId),c("#appId4deployApp").val(a.queryString.appId),g.length>0)){var m=setInterval(a.updatePageAppStatus4AllUpdate,j,g);c("#freshPage4GroupAppFlag").val(m),setTimeout("window.clearInterval("+m+")",l)}})},checkboxAllNotUnCheck:function(){c(":checkbox").prop("checked",!1)},batchReDeploy:function(){c("#selectAll").prop("checked",!1);var a="",b=c("input:checkbox[name='serverIds']:checked"),d=b.length,e=this,f=new Array;if(b.each(function(b){var e=c(this).val(),g=c(this).attr("appStatus");"2"==g&&(a+=e,f.push(e),d>b+1&&(a+=","))}),f.length>0){var g={};g.serverId=a,g.groupId=this.queryString.groupId,g.appId=this.queryString.appId,g.mode="more",g.operation="6",c("#serverId4deployApp").val(g.serverId),c("#appId4deployApp").val(g.appId);var h=this.check4DeployOrNot(g);if(h){delete g.operation,delete g.mode;var i="/"+jcfManager.appName+"/deployMgr/mDeployApp.action",j=m.dealAjaxRequest4JSObj(i,g);c.when(j).done(function(a){if(e.checkboxAllNotUnCheck(),"true"==a.flag){for(var b=0;b<f.length;b++){var d=f[b];e.collection.each(function(a){a.get("serverId")==""+d&&a.set("appStatus","7")})}var g=2e3,h=m.getFefreshPageNum(),i=g*h,j=window.location.hash;c("#freshPage4GroupAppUrl").val(j);var k=setInterval(e.updatePageAppStatus4PartUpdate,g,e.collection);c("#freshPage4GroupAppFlag").val(k),setTimeout("window.clearInterval("+k+")",i)}else alert("部署失败!")})}}else{c("input:checkbox[name='serverIds']:checked").prop("checked",!1);var n=new l;n.set("errList",["应用状态必须满足:[‘部署失败’]"]);var o=new k({model:n});this.tipInfoRegion.show(o)}},batchReundeploy:function(){c("#selectAll").prop("checked",!1);var a="",b=this,d=c("input:checkbox[name='serverIds']:checked"),e=d.length,f=new Array;if(d.each(function(b){var d=c(this).val(),g=c(this).attr("appStatus");("1"==g||"4"==g)&&(f.push(d),a+=d,e>b+1&&(a+=","))}),f.length>0){var g={};g.serverId=a,g.groupId=this.queryString.groupId,g.appId=this.queryString.appId,g.mode="more",g.operation="7",c("#serverId4deployApp").val(g.serverId),c("#appId4deployApp").val(g.appId);var h=this.check4DeployOrNot(g);if(h){delete g.operation,delete g.mode;var i="/"+jcfManager.appName+"/deployMgr/mUndeployApp.action",j=m.dealAjaxRequest4JSObj(i,g);c.when(j).done(function(a){if(b.checkboxAllNotUnCheck(),"true"==a.flag){for(var d=0;d<f.length;d++){var e=f[d];b.collection.each(function(a){var b=a.get("serverId");b==e&&a.set("appStatus","8")})}var g=2e3,h=m.getFefreshPageNum(),i=g*h,j=window.location.hash;c("#freshPage4GroupAppUrl").val(j);var k=setInterval(b.updatePageAppStatus4PartUpdate,g,b.collection);c("#freshPage4GroupAppFlag").val(k),setTimeout("window.clearInterval("+k+")",i)}else alert("反部署失败!")})}}else{c("input:checkbox[name='serverIds']:checked").prop("checked",!1);var n=new l;n.set("errList",["应用状态必须满足:[‘已部署’，‘反部署失败’]"]);var o=new k({model:n});this.tipInfoRegion.show(o)}},check4DeployOrNot:function(a){var b=!1,d="/"+jcfManager.appName+"/deployMgr/mApplication.action",e=m.dealSYNCHAjaxRequest4JSObj(d,a);return c.when(e).done(function(c){"true"==c.flag?(delete a.operation,b=!0):alert(c.msg)}),b},arrayContainElement:function(b,c){for(var d=b.length;d--;)if(a[d]==c)return!0;return!1},updatePageAppStatus4AllUpdate:function(a){var b="";a.each(function(a){var c=a.get("serverId");b+=c,b+=","});var e=b.length;a.length>0&&(b=b.substring(0,e-1));var f=window.location.hash,g=c("#freshPage4GroupAppUrl").val(),h=c("#freshPage4GroupAppFlag").val();if(g==f){var i=c("#appId4deployApp").val(),j=b.split(","),k={appId:i,serverId:b},l="/"+jcfManager.appName+"/deployMgr/updatePageDeployStatus.action",n=m.dealAjaxRequest4SimpleParam(l,k);c.when(n).done(function(b){var c=new d.Model(b),e="1",f=j.length;a.each(function(b){for(var d=b.get("serverId"),g=0;f>g;g++){var h=j[g];if(h==d){var i=c.get(""+d);void 0!=i&&"3"!=i?(("7"==i||"8"==i||"9"==i)&&(e="0"),b.set("appStatus",i)):a.remove(b)}}}),"1"==e&&window.clearInterval(h)})}else window.clearInterval(h)},updatePageAppStatus4PartUpdate:function(a){var b=window.location.hash,e=c("#freshPage4GroupAppUrl").val(),f=c("#freshPage4GroupAppFlag").val();if(e==b){var g=c("#appId4deployApp").val(),h=c("#serverId4deployApp").val(),i=h.split(","),j={appId:g,serverId:h},k="/"+jcfManager.appName+"/deployMgr/updatePageDeployStatus.action",l=m.dealAjaxRequest4SimpleParam(k,j);c.when(l).done(function(b){var c=new d.Model(b),e="1",g=i.length;a.each(function(b){for(var d=b.get("serverId"),f=0;g>f;f++){var h=i[f];if(h==d){var j=c.get(""+d);void 0!=j&&"3"!=j?(("7"==j||"8"==j||"9"==j)&&(e="0"),b.set("appStatus",j)):a.remove(b)}}}),"1"==e&&window.clearInterval(f)})}else window.clearInterval(f)}});return t}),define("travsky/jcf/1.0.0/template/deploy/groupServerAppStautsLayout.tpl",[],'<div id = "tipInfoRegion"></div>\n<div id = "baseInfoRegion"></div>\n<div  id = "listRegion"></div>\n<div>\n	<button id = "batchReDeployBtn" class = "btn btn-sm btn-primary <%if(deployAuthFlag!=\'true\'){%>disabled<%}%>">重新部署</button>\n	&nbsp;&nbsp;\n	<button id = "batchReundeployBtn" class = "btn btn-sm btn-primary <%if(undeployAuthFlag!=\'true\'){%>disabled<%}%>">重新反部署</button>\n</div>\n<div id = "pagebarRegion"></div>\n<input type = "hidden" id = "groupIdHiddenOnPage" value = "<%=groupId%>" />\n<input type = "hidden" id = "appIdHiddenOnPage" value = "<%=appId%>" />\n<input id = "freshPage4GroupAppUrl" type = "hidden" />\n<input id = "freshPage4GroupAppFlag" type = "hidden" />\n<input id = "serverId4deployApp" type = "hidden" />\n<input id = "appId4deployApp" type = "hidden" />\n'),define("travsky/jcf/1.0.0/template/deploy/groupServerAppBaseInfo.tpl",[],'<caption>应用基本信息</caption>\n<tbody>\n	<tr>\n		<td width = "10%">应用部署包:</td>\n		<td width  = "20%"><%=appName%></td>\n		<td width = "10%">当前版本号:</td>\n		<td width  = "20%"><%=appVersion%></td>\n		<td width = "*%"></td>\n	</tr>\n</tbody>'),define("travsky/jcf/1.0.0/template/deploy/groupServerAppStatusItem.tpl",[],'<td><input type = "checkbox" class = "serverIds" appStatus = "<%=appStatus%>" name = "serverIds" value = "<%=serverId%>"></td>\n<td><%=serverName%></td>\n<td><%=appName%></td>\n<td>\n	<%\n		if(appStatus=="1"){\n			%>已部署<%\n		}else if (appStatus=="2"){\n			%>部署失败<%\n		}else if (appStatus=="3"){\n			%>已反部署<%\n		}else if (appStatus=="4"){\n			%>反部署失败<%\n		}else if (appStatus=="5"){\n			%>已回滚<%\n		}else if (appStatus=="6"){\n			%>回滚失败<%\n		}else if (appStatus=="7"){\n			%>正在部署<%\n		}else if (appStatus=="8"){\n			%>正在反部署<%\n		}else if (appStatus=="9"){\n			%>正在回滚<%\n		}else{\n			%><%=appStatus%><%\n		}\n	%>\n</td>\n<td><%=uploadDate%></td>\n<td class = "deployOrNotTd">\n	<%\n		if(appStatus=="2"){\n		%>\n			<%if(deployAuthFlag=="true"){\n			%><a href = "reDeploy" class ="myhand">重新部署</a><%\n			} else{\n			%><span class = "text-info">重新部署</span><%\n			}%>\n		<%\n		}else if (appStatus=="1"){\n		%>\n			<%if(undeployAuthFlag=="true"){\n			%><a href = "undeploy" class ="myhand">反部署</a><%\n			} else{\n			%><span class = "text-info">反部署</span><%\n			}%>\n		<%\n		}else if (appStatus=="4"){\n		%>\n			<%if(undeployAuthFlag=="true"){\n			%><a href = "reUndeploy" class ="myhand">重新反部署</a><%\n			} else{\n			%><span class = "text-info">重新反部署</span><%\n			}%>\n		<%\n		}\n	%>\n</td>\n'),define("travsky/jcf/1.0.0/template/deploy/groupServerAppStatusList.tpl",[],'<thead>\n  <tr>\n    <th><input type = "checkbox" id = "selectAll"/></th>\n    <th>服务器名称</th>\n    <th>部署包</th>\n    <th>部署状态</th>\n    <th>上传时间</th>\n    <th>操作</th>\n  </tr>\n</thead>\n<tbody></tbody>'),define("travsky/jcf/1.0.0/view/deploy/groupAppConfigLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil","ajaxfileupload","travsky/jcf/1.0.0/view/itemTip_view","bs-alert","travsky/jcf/1.0.0/model/itemTip_model"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("travsky/jcf/1.0.0/template/deploy/serverAppConfigLayout.tpl"),h=a("travsky/jcf/1.0.0/template/deploy/groupAppCfgBaseInfo.tpl"),i=a("travsky/jcf/1.0.0/template/deploy/serverAppCfgCurPath.tpl"),j=a("travsky/jcf/1.0.0/template/deploy/serverAppCfgItem.tpl"),k=a("travsky/jcf/1.0.0/template/deploy/serverAppCfgList.tpl"),l=a("travsky/jcf/1.0.0/view/pagebar_view2"),m=a("travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil"),n=a("querystring");a("ajaxfileupload");var o=a("travsky/jcf/1.0.0/view/itemTip_view"),p=e.ItemView.extend({template:d.template(h),tagName:"table",className:"table"}),q=e.ItemView.extend({template:d.template(i),tagName:"table",className:"table"}),r=e.ItemView.extend({initialize:function(){var a=m.getDownloadCfgFlag();this.model.set("downloadCfgAuthFlag",a)},tagName:"tr",template:d.template(j)}),s=e.CompositeView.extend({initialize:function(){},tagName:"table",className:"table",template:d.template(k),childView:r,childViewContainer:"tbody"}),t=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString,this.on("showPageInfo",this.showPageInfo);var b=m.getUploadCfgFlag();this.model=new c.Model,this.model.set("uploadCfgAuthFlag",b)},template:d.template(g),regions:{baseInfoRegion:"#baseInfoRegion",tipInfoRegion:"#tipInfoRegion",currentDirRegion:"#currentDirRegion",listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},events:{"click td.fileNameTd span.file_dir_icon":"goToChildPath","click #appCfgBackParentPathBtn":"backParentPath","click td.downloadAppCfgTd a":"downloadAppCfg","click #uploadAppCfgBtn":"uploadAppCfg","click #toLastPageBtn":"toLastPage"},toLastPage:function(){var a=this.queryString.groupId,b=this.queryString.status,c={groupId:a,status:b};appRouter.navigate("deployMgr/group/param/"+n.stringify(c),{trigger:!0})},showPageInfo:function(){var a=this.queryString.appName,c=this.queryString.appVersion,d=this.queryString.groupId,e=this.queryString.serverId,f=this.queryString.currentPage,g=this.queryString.pageSize;(void 0==f||""==f)&&(f=1,g=jcfManager.defaultPageSize);var h={};h.appName=a,h.appVersion=c,h.groupId=d,h.serverId=e,h.currentPage=f,h.pageSize=g;var i=this.queryString.currentCfgPath,j="";j=void 0==i||null==i||0==b.trim(i).length?"":decodeURIComponent(i),h.currentCfgPath=j,this.showPageInfo4Private(h)},showPageInfo4Private:function(a){delete a.status;var d=this,e="/"+jcfManager.appName+"/deployMgr/getConfigFileList4Group.action",g=f.dealAjaxRequest4JSObj(e,a);b.when(g).done(function(a){var b=a.curFilepPath,e=encodeURIComponent(b);d.queryString.currentCfgPath=e,d.queryString.backOrSubstrateDirFlag="",appRouter.navigate("deployMgr/group/appConfig/param/"+n.stringify(d.queryString));var f=new c.Model(a.baseInfo);f.set("appName",a.appName),f.set("appVersion",a.appVersion),f.set("serverName",a.serverName);var g=new p({model:f});d.baseInfoRegion.show(g);var h=new c.Model({curFilepPath:a.curFilepPath}),i=new q({model:h});d.currentDirRegion.show(i);var j=new c.Collection(a.pageBean.recordList),k=new s({collection:j});d.listRegion.show(k);var m=new c.Model(a.pageBean);m.set("uriSection","group/appConfig"),delete d.queryString.backOrSubstrateDirFlag,delete d.queryString.clickPathName;var o=new l({model:m,queryString:d.queryString});d.pagebarRegion.show(o)})},checkUploadCfg:function(){var a=!1,c=b("#inputfile"),d=b.trim(c.val()),e=d.length,g=d.lastIndexOf("."),h=d.substring(g+1,e);if(e>0&&g>0&&("properties"==h||"txt"==h||"xml"==h||"cfg"==h||"drl"==h)&&(a=!0),a){var i=c[0];a=f.checkFileSize(i,1)}else{var j=new o;j.model.set("flag","false"),j.model.set("msg","上传文件格式有误!"),this.tipInfoRegion.show(j)}return a},uploadAppCfg:function(){var a=this.checkUploadCfg();a&&(a=this.checkRegistryRun()),a&&this.ajaxFileUpload()},checkRegistryRun:function(){var a=!1,c="/"+jcfManager.appName+"/deployMgr/checkRegistryStatus.action",d=f.dealSYNCHAjaxRequestWithoutParam(c),e=this;return b.when(d).done(function(b){if("true"==b.flag)if("1"==b.status)a=!0;else{var c=new o;c.model.set("flag","false"),c.model.set("msg",b.errMsg),e.tipInfoRegion.show(c)}else{var c=new o;c.model.set("flag","false"),c.model.set("msg",b.errMsg),e.tipInfoRegion.show(c)}}),a},ajaxFileUpload:function(){var a=this,c=b("#hiddenCurrentCfgPath").val(),d=this.queryString.groupId;b.ajaxFileUpload({url:"/"+jcfManager.appName+"/deployMgr/uploadAppConfigFile4Group.action",type:"post",data:{groupId:""+d,currentCfgPath:c},secureuri:!1,fileElementId:"inputfile",dataType:"JSON",success:function(c){var d=b.parseJSON(b(c).text());if("true"==d.flag)a.showPageInfo();else{var e=new o;e.model.set("flag","false"),e.model.set("msg",""+d.errMsg),a.tipInfoRegion.show(e)}},error:function(a,b,c){alert(c)}})},showDirList:function(a,c){var d=this.queryString;d.backOrSubstrateDirFlag=a,d.clickPathName=c;var e=b("#hiddenCurrentCfgPath").val(),f=e;d.currentCfgPath=f,this.showPageInfo4Private(d)},goToChildPath:function(a){var c=b(a.target),d=b.trim(c.text()),e="next";this.showDirList(e,d)},backParentPath:function(){var a="back",b="parent";this.showDirList(a,b)},downloadAppCfg:function(a){a.preventDefault();var c=b(a.target),d=c.attr("href"),e=b("#hiddenServerId").val(),f=b.trim(b("#hiddenCurrentCfgPath").val()),g="/"+jcfManager.appName+"/deployMgr/downloadAppConfigFile.action",h=b("<form>");h.attr("style","display:none"),h.attr("target",""),h.attr("method","post"),h.attr("action",g);var i=b("<input>");i.attr("type","hidden"),i.attr("name","exportData"),i.attr("value",(new Date).getMilliseconds());var j=b("<input type = 'hidden' name = 'serverName' value = '"+e+"' />"),k=b("<input type = 'hidden' name = 'downloadFileName' value = '"+d+"' />"),l=b("<input type = 'hidden' name = 'currentDirPath4AppCfg' value = '"+f+"' />");b("body").append(h),h.append(i),h.append(j),h.append(k),h.append(l),h.submit()}});return t}),define("travsky/jcf/1.0.0/template/deploy/serverAppConfigLayout.tpl",[],'<div  id = "baseInfoRegion" ></div>\n<div id = "tipInfoRegion"></div>\n<div>\n	<form id = "uploadAppCfgForm"   method="post" enctype="multipart/form-data" target="hidden_frame">\n		<table class="table">\n	   		<caption>上传配置文件</caption>\n	   		 <tbody>\n	   			<tr>\n	   				<td width = "20%"><input type="file" id="inputfile" name = "inputfile" /></td>\n	   				<td width  = "10%">\n	   					<button id = "uploadAppCfgBtn" type="button" class="btn input-sm  <%if(uploadCfgAuthFlag!=\'true\'){%>disabled<%}%>">提交</button>\n	   				</td>\n	   				<td><span class = "text-info">(文件后缀满足:properties,txt,xml,cfg,drl,且文件大小不超过1MB)</span></td>\n	   				<td width = "*%"></td>\n	   			</tr>\n	   		 </tbody>\n	   	</table>\n   	</form>\n</div>\n\n<iframe name="hidden_frame" style="display:none;"></iframe>\n    \n<div  id = "currentDirRegion" ></div>\n<br>\n<div id = "listRegion" ></div>\n<div id = "pagebarRegion" ></div>\n\n<button id = "toLastPageBtn" class = "btn btn-primary" >返回</button>\n'),define("travsky/jcf/1.0.0/template/deploy/groupAppCfgBaseInfo.tpl",[],'<caption>上传配置文件</caption>\n<tbody>\n	<tr>\n		<td width = "9%">应用名称:</td>\n		<td width  = "10%"><%=appName%></td>\n		<td width = "9%">应用版本:</td>\n		<td width  = "10%"><%=appVersion%></td>\n		<td width = "9%">所属分组:</td>\n		<td width  = "10%"><%=groupName%></td>\n		<td width = "9%">服务器:</td>\n		<td width  = "10%"><%=serverName%></td>\n		\n		<td><input type = "hidden" id = "hiddenServerId" value = "<%=serverName%>"/></td>\n	</tr>\n</tbody>'),define("travsky/jcf/1.0.0/template/deploy/serverAppCfgCurPath.tpl",[],'<tr>\n	<td width = "10%"><button type="button" id = "appCfgBackParentPathBtn"  class="btn input-sm">返回上层目录</button></td>\n	<td width = "10%" align ="right">当前目录:</td>\n	<td width = "30%"><%=curFilepPath%></td>\n	<td width = "*%"><input type = "hidden" id = "hiddenCurrentCfgPath" value = "<%=curFilepPath%>"/></td>\n</tr>\n'),define("travsky/jcf/1.0.0/template/deploy/serverAppCfgItem.tpl",[],'<td class = "fileNameTd">\n<%if("文件夹"==category){\n		%>\n			<span class = "file_dir_icon myhand" ><%=name%><span>\n		<%\n	 }else if ("文件"==category){\n	 	%>\n			<span class = "file_file_icon"><%=name%><span>\n		<%\n}%>\n</td>\n<td><%=category%></td>\n<td class = "downloadAppCfgTd" >\n<%if("文件夹"==category||downloadCfgAuthFlag!="true"){\n   %>下载<%\n}else if ("文件"==category){\n   %><a href = "<%=name%>" >下载</a><%\n}%>\n</td>'),define("travsky/jcf/1.0.0/template/deploy/serverAppCfgList.tpl",[],"<thead>\n  <tr>\n    <th>文件名称</th>\n    <th>文件类型</th>\n    <th>下载</th>\n  </tr>\n</thead>\n<tbody></tbody>\n"),define("travsky/jcf/1.0.0/view/deploy/groupDeployTabCreateNewDeploy",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/deploy/groupDeployAppLogCfgLayout","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil","travsky/jcf/1.0.0/view/confirm_view","travsky/jcf/1.0.0/model/confirm_model"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/deploy/groupDeployNewDeployItem.tpl"),g=a("travsky/jcf/1.0.0/template/deploy/groupDeployNewDeployList.tpl"),h=a("travsky/jcf/1.0.0/template/deploy/groupDeployTabCreateNewDeploy.tpl"),i=a("travsky/jcf/1.0.0/util/CommonUtil"),j=a("travsky/jcf/1.0.0/view/pagebar_view2"),k=a("querystring"),l=a("travsky/jcf/1.0.0/util/SidebarUtil"),m=a("travsky/jcf/1.0.0/view/deploy/groupDeployAppLogCfgLayout"),n=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"),o=a("travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil"),p=a("travsky/jcf/1.0.0/view/alert_view"),q=a("travsky/jcf/1.0.0/view/confirm_view"),r=a("travsky/jcf/1.0.0/model/confirm_model"),s=e.ItemView.extend({template:d.template(f),tagName:"tr"}),t=e.CompositeView.extend({initialize:function(){},template:d.template(g),childView:s,childViewContainer:"tbody"}),u=a("travsky/jcf/1.0.0/template/deploy/groupDeployNewDeployServerSelectItem.tpl"),v=a("travsky/jcf/1.0.0/template/deploy/groupDeployNewDeployServerSelectList.tpl"),w=e.ItemView.extend({template:d.template(u),tagName:"tr",events:{"click input:checkbox[name='serverIds']":"selectServer"},selectServer:function(a){var c=b(a.target).parent("td").parent("tr").parent("tbody"),d=c.find("input:checkbox[name='serverIds']"),e=c.find("input:checkbox[name='serverIds']:checked"),f=d.length,g=e.length;
f==g?b("#allSelected4Server").prop("checked",!0):b("#allSelected4Server").prop("checked",!1)}}),x=e.CompositeView.extend({initialize:function(){},template:d.template(v),childView:w,childViewContainer:"tbody",events:{"click #allSelected4Server":"checkedAll"},checkedAll:function(a){var c=b(a.target),d=a.target.checked,e=c.parent("th").parent("tr").parent("thead").siblings("tbody"),f=e.find("input:checkbox[name='serverIds']");f.each(function(){this.checked=d})}}),y=e.LayoutView.extend({template:d.template(h),initialize:function(a){this.queryString=a.queryString;var b=o.getAppLogOperFlag();this.model.set("authAppLogOperFlag",b),this.on("searchListInfo",this.searchListInfo)},regions:{listRegion:"#listRegion",pagebarRegion:"#pagebarRegion",serverListRegion:"#serverListRegion"},events:{"click #groupServerCfgNextStepBtn":"groupServerCfgNextStep","click #backStep4SelectAppBtn":"backStep4SelectApp","click #nextStep4ConfigAppLogBtn":"nextStep4ConfigAppLog","click #appCfgApplyBtn":"appCfgApply","click #appCfgBackBtn":"appCfgBack","click #appCfgNextBtn":"appCfgNext","blur #groupAppName":"checkGroupAppName","blur #appConfigFileName":"checkAppConfigFileName","blur #logSavePath":"checkLogSavePath","blur #maxLogFileSize":"checkMaxLogFileSize","blur #logFileMaxBackupIndex":"checkLogFileMaxBackupIndex","click #selectRunning":"checkSelectRunning","blur #maxRunningLogFileSize":"checkMaxRunningLogFileSize","blur #runningLogFileMaxBackupIndex":"checkRunningLogFileMaxBackupIndex","blur #runningLogSavePath":"checkRunningLogSavePath"},checkSelectRunning:function(){var a=b("#selectRunning").prop("checked");a||(n.clearInput("maxRunningLogFileSize"),n.clearInput("runningLogFileMaxBackupIndex"),n.clearInput("runningLogSavePath"))},appCfgApply:function(a){var c=this.checkLogForm(),d=b("#selectRunning").prop("checked");d&&c&&(c=this.checkRunningLogForm()),c&&(b("#appCfgApplyBtn").addClass("disabled"),this.submitCfgForm(a))},checkLogForm:function(){return this.checkGroupAppName()&&this.checkAppConfigFileName()&&this.checkLogSavePath()&&this.checkMaxLogFileSize()&&this.checkLogFileMaxBackupIndex()?!0:!1},checkRunningLogForm:function(){return this.checkRunningLogSavePath()&&this.checkMaxRunningLogFileSize()&&this.checkRunningLogFileMaxBackupIndex()?!0:!1},submitCfgForm:function(a){var c="/"+jcfManager.appName+"/log/saveAppCfgLog.action",d=["groupAppName","appConfigFileName","logSavePath","maxLogFileSize","logFileMaxBackupIndex","logLevel","logAppenderType","runningLogSavePath","maxRunningLogFileSize","runningLogFileMaxBackupIndex"],e="",f=b("#selectRunning").prop("checked");f&&(e=b("#selectRunning").val());var g=i.getFormInputObj(d),h=this.queryString.groupId;g.groupId=h,g.running=e;var j=this,k=i.dealAjaxRequest4JSObj(c,g);b("#isSubmitFormFlag").val("true");var l=new p;b.when(k).done(function(b){var c="";for(var d in b)"0"===b[d]&&(c=d+"配置失败,");""===c?(l.model.set("msg","日志配置成功!"),jcfManager.dialogRegion.show(l),1==a&&j.showAppLogList()):(l.model.set("msg",c),jcfManager.dialogRegion.show(l))})},checkGroupAppName:function(){var a="groupAppName",b=30,c=n.checkInputMatchMaxLength(a,b);return c},checkAppConfigFileName:function(){var a="appConfigFileName",c=this.queryString.groupId,d=b("#"+a).val(),e=!1,f=n.checkNotNull(a);if(f){var g="/"+jcfManager.appName+"/log/haveSameFileName.action",h={groupId:c,appConfigFileName:d},j=i.dealSYNCHAjaxRequest4SimpleParam(g,h);b.when(j).done(function(a){e="true"==a.flag?confirm("存在配置文件，是否确认覆盖"):!0})}return e},checkLogSavePath:function(){var a="logSavePath",b=200,c=/^\w+(\/\w+)*$/,d="存储路径设置不正确",e=n.checkInputMatchRegularAndNotNull(a,b,c,d);return e},checkMaxLogFileSize:function(){var a="maxLogFileSize",b=10,c=/^[1-9]\d*[kKmMgG][bB]$/,d="单位为kb,KB,mb,MB,gb,GB",e=n.checkInputMatchRegularAndNotNull(a,b,c,d);return e},checkLogFileMaxBackupIndex:function(){var a="logFileMaxBackupIndex",b=10,c=n.checkInputMatchPositiveIntegerAndMaxLength(a,b);return c},checkMaxRunningLogFileSize:function(){var a="maxRunningLogFileSize",c=b("#selectRunning").prop("checked"),d=!0;if(c){var e=10,f=/^[1-9]\d*[kKmMgG][bB]$/,g="单位为kb,KB,mb,MB,gb,GB";d=n.checkInputMatchRegularAndNotNull(a,e,f,g)}else n.clearInput(a);return d},checkRunningLogFileMaxBackupIndex:function(){var a="runningLogFileMaxBackupIndex",c=b("#selectRunning").prop("checked"),d=!0;if(c){var e=10;d=n.checkInputMatchPositiveIntegerAndMaxLength(a,e)}else n.clearInput(a);return d},checkRunningLogSavePath:function(){var a="runningLogSavePath",c=b("#selectRunning").prop("checked"),d=!0;if(c){var e=200,f=/^\w+(\/\w+)*$/,g="存储路径设置不正确";d=n.checkInputMatchRegularAndNotNull(a,e,f,g)}else n.clearInput(a);return d},appCfgBack:function(){this.$el.find("#page2").removeClass("hidden"),this.$el.find("#page3").addClass("hidden")},appCfgNext:function(){var a=b("#isSubmitFormFlag").val(),c=new r;c.set({btnok:"保存",btncl:"不保存",msg:"是否需要保存保存信息?"});var d=new q({model:c}),e=this;"true"==a?this.showAppLogList():(jcfManager.dialogRegion.show(d),d.confirm(function(a){a?e.appCfgApply(!0):e.showAppLogList()}))},backStep4SelectApp:function(){this.$el.find("#page1").removeClass("hidden"),this.$el.find("#page2").addClass("hidden")},nextStep4ConfigAppLog:function(){var a=this.$el.find("#page2"),b=a.find("#serverListRegion").find("input:checkbox[name='serverIds']:checked"),c=new p;if(0==b.length)c.model.set("msg","请选择服务器!"),jcfManager.dialogRegion.show(c);else{var d=a.find("input:radio[name='cfgLogFlag']:checked").val();"true"==d?(this.$el.find("#page2").addClass("hidden"),this.$el.find("#page3").removeClass("hidden")):this.showAppLogList()}},showAppLogList:function(){var a=this.$el.find("#page1 #listRegion"),c=a.find("input:radio.appTagClass[name='appId']:checked"),d=b.trim(c.val()),e="",f=this.$el.find("#page2"),g=f.find("#serverListRegion").find("input:checkbox[name='serverIds']:checked");g.each(function(){var a=b(this).val();e+=a,e+=","}),g.length>0&&(e=e.substring(0,e.length-1));var h={groupId:this.queryString.groupId,appId:d,serverIds:e,currentPage:"1",pageSize:jcfManager.defaultPageSize},i=l.getModuleName();appRouter.navigate(i+"/group/appLogCfg/param/"+k.stringify(h));var j=new m({queryString:h});jcfManager.contentRegion.show(j),j.trigger("showPageInfo")},groupServerCfgNextStep:function(){var a=this.$el.find("#page1 #listRegion"),c=a.find("input:radio.appTagClass[name='appId']:checked"),d=b.trim(c.val()),e=b.trim(c.attr("title")),f=b.trim(c.attr("appVersion")),g=new p,h=e+"_"+f;b("#groupAppName").val(h),0==d.length?(g.model.set("msg","请选择有效应用!"),jcfManager.dialogRegion.show(g)):(this.$el.find("#page1").addClass("hidden"),this.$el.find("#page2").removeClass("hidden"))},searchListInfo:function(){var a=this,d="/"+jcfManager.appName+"/deployMgr/mSearchApp.action",e={groupId:this.queryString.groupId,currentPage:this.queryString.currentPage,pageSize:this.queryString.pageSize},f=i.dealAjaxRequest4SimpleParam(d,e);b.when(f).done(function(b){var d=b.pageBean,e=new c.Model(d),f=new c.Collection(d.recordList),g=new t({collection:f});a.listRegion.show(g),e.set("uriSection","group");var h=new j({model:e,queryString:a.queryString});a.pagebarRegion.show(h);var i=new c.Collection(b.serverList),k=new x({collection:i});a.serverListRegion.show(k)})}});return y}),define("travsky/jcf/1.0.0/template/deploy/groupDeployNewDeployItem.tpl",[],'<td>\n	<input class = "appTagClass" type="radio" checked="checked" name="appId" value="<%=id%>" title="<%=name%>" appVersion = "<%=version %>" />\n</td>\n<td><%=name%></td>\n<td><%=version%></td>\n<td><%=userName%></td>\n<td><%=uploadDate%></td>'),define("travsky/jcf/1.0.0/template/deploy/groupDeployNewDeployList.tpl",[],'<table class = "table table-bordered list">\n<caption>可部署应用包列表</caption>\n<thead>\n  <tr>\n    <th>选择</th>\n    <th>部署包名称</th>\n    <th>版本</th>\n    <th>上传用户</th>\n    <th>上传时间</th>\n  </tr>\n</thead>\n<tbody></tbody>\n</table>\n'),define("travsky/jcf/1.0.0/template/deploy/groupDeployTabCreateNewDeploy.tpl",[],'<!----------------------------------可部署应用包列表页面-------------------------------------------->\n<div id = "page1">\n	<div id = "listRegion"></div><!--显示列表区域-->\n	<div id = "pagebarRegion"></div><!--显示分页栏条区域-->\n	<div>\n		<button type="button" id = "groupServerCfgNextStepBtn" class="btn">下一步</button>\n	</div>\n</div>\n\n<!---------------------------------下面为待部署服务器列表页面--------------------------------------->\n<div id = "page2" class = "hidden" >\n	<div id = "serverListRegion"></div>\n	<div>\n		<table class = "table list">\n			<caption>是否配置应用日志</caption>\n			<tr>\n				<td width = "7%"><input type = "radio" name = "cfgLogFlag" checked = "checked" value = "true"/>是</td>\n				<td width = "7%"><input type = "radio" name = "cfgLogFlag"  value = "false"/>否</td>\n				<td width = "*%"></td>\n			</tr>\n		</table>\n	</div>\n	<div>\n		<button  id = "backStep4SelectAppBtn" type="button"  class="btn">上一步</button>&nbsp;&nbsp;\n		<button  id = "nextStep4ConfigAppLogBtn" type="button"  class="btn">下一步</button>\n	</div>\n</div>\n\n<!----------------------------------应用日志配置页面------------------------->\n<br/>\n<div id = "page3" class = "hidden" >\n   <form class="form-horizontal" id = "appCfgForm"  role="form" method= "POST">\n   		 <div class="form-group" id = "groupAppNameDiv">\n	        <label for="groupAppName" class="col-sm-3 control-label">应用名称：</label>\n	        <div class="col-sm-4">\n	      	   <input type="text" id="groupAppName" readonly="readonly"   class="form-control input-sm"  placeholder="必填项">\n	        </div>\n	        <div><span class = "text-danger">*</span><span id = "groupAppNameTip"></span></div>\n	     </div>\n	     \n   		 <div class="form-group" id = "appConfigFileNameDiv">\n	        <label for="appConfigFileName" class="col-sm-3 control-label">应用日志配置文件名称：</label>\n	        <div class="col-sm-4">\n	      	   <input type="text" id="appConfigFileName"   class="form-control input-sm"  placeholder="名称需与应用包名一致(如为适配服务,建议为适配服务名)">\n	        </div>\n	        <div><span class = "text-danger">*</span><span id = "appConfigFileNameTip"></span></div>\n	     </div>\n	     \n	      <div class="form-group" id = "logSavePathDiv">\n	        <label for="logSavePath" class="col-sm-3 control-label">应用日志存放路径：</label>\n	        <div class="col-sm-4">\n	      	   <input type="text" id="logSavePath"   class="form-control input-sm"  placeholder="如:  app/abc 或  abc">\n	        </div>\n	        <div><span class = "text-danger">*</span><span id = "logSavePathTip"></span></div>\n	     </div>\n	     \n	     <div class="form-group" id = "maxLogFileSizeDiv">\n	        <label for="maxLogFileSize" class="col-sm-3 control-label">应用日志文件最大大小：</label>\n	        <div class="col-sm-4">\n	      	   <input type="text" id="maxLogFileSize"  value = "512MB"  class="form-control input-sm"  placeholder="必填项">\n	        </div>\n	        <div><span class = "text-danger">*</span><span id = "maxLogFileSizeTip"></span></div>\n	     </div>\n	     \n	     <div class="form-group" id = "logFileMaxBackupIndexDiv">\n	        <label for="logFileMaxBackupIndex" class="col-sm-3 control-label">应用日志最多存放个数：</label>\n	        <div class="col-sm-4">\n	      	   <input type="text" id="logFileMaxBackupIndex"   class="form-control input-sm"  value = "10" placeholder="必填项">\n	        </div>\n	        <div><span class = "text-danger">*</span><span id = "logFileMaxBackupIndexTip"></span></div>\n	     </div>\n	     \n	     <div class="form-group" id = "logLevelDiv">\n	        <label for="logLevel" class="col-sm-3 control-label">应用日志级别：</label>\n	        <div class="col-sm-4">\n	           <select id="logLevel" class="form-control input-sm">\n	           		<%for(var i = 0 ; i < logLevels.length ;i++){\n	           			if(i==0){\n	           				%><option selected = "selected" value = "<%=logLevels[i]%>"><%=logLevels[i]%></option><%\n	           			}else{\n	           				%><option value = "<%=logLevels[i]%>"><%=logLevels[i]%></option><%\n	           			}\n	           		}%>\n	           </select>\n	        </div>\n	        <div><span id = "logLevelTip"></span></div>\n	     </div>\n	     \n	     <div class="form-group" id = "logAppenderTypeDiv">\n	        <label for="logAppenderType" class="col-sm-3 control-label">应用日志格式：</label>\n	        <div class="col-sm-4">\n	      	   <select id="logAppenderType" class="form-control input-sm">\n	      	   		<%for(var j = 0 ; j < logTypes.length ; j++){\n	      	   			if(j==0){\n	      	   				%><option selected = "selected" value = "<%=logTypes[j].key%>"><%=logTypes[j].value%></option><%\n	      	   			}else{\n	      	   				%><option value = "<%=logTypes[j].key%>"><%=logTypes[j].value%></option><%\n	      	   			}\n	      	   		}%>\n	           </select>\n	        </div>\n	        <div><span id = "logAppenderTypeTip"></span></div>\n	     </div>\n	     \n	     <!--------------------------------第二部分------------------------------------------>\n	     \n	     \n	     <!--------------------------------第三部分------------------------------------------>\n	     \n	     <div class="form-group" id = "selectRunningDiv">\n	        <label for="selectRunning" class="col-sm-3 control-label">是否记录性能日志：</label>\n	        <div class="col-sm-4">\n	      	   <input id="selectRunning" value="1"  type="checkbox"/>\n	        </div>\n	        <div><span id = "selectRunningTip"></span></div>\n	     </div>\n	     \n	     <div class="form-group" id = "runningLogSavePathDiv">\n	        <label for="runningLogSavePath" class="col-sm-3 control-label">性能日志存放路径：</label>\n	        <div class="col-sm-4">\n	      	   <input type="text" id="runningLogSavePath"   class="form-control input-sm"  placeholder="如:  app/abc 或  abc">\n	        </div>\n	        <div><span class = "text-danger">*</span><span id = "runningLogSavePathTip"></span></div>\n	     </div>\n	     \n	     <div class="form-group" id = "maxRunningLogFileSizeDiv">\n	        <label for="maxRunningLogFileSize" class="col-sm-3 control-label">性能日志文件最大大小：</label>\n	        <div class="col-sm-4">\n	      	   <input type="text" id="maxRunningLogFileSize" value = "512MB"  class="form-control input-sm"  placeholder="必填项">\n	        </div>\n	        <div><span class = "text-danger">*</span><span id = "maxRunningLogFileSizeTip"></span></div>\n	     </div>\n	     \n	     <div class="form-group" id = "runningLogFileMaxBackupIndexDiv">\n	        <label for="runningLogFileMaxBackupIndex" class="col-sm-3 control-label">性能日志最多存放个数：</label>\n	        <div class="col-sm-4">\n	      	   <input type="text" id="runningLogFileMaxBackupIndex" value = "10"  class="form-control input-sm"  placeholder="必填项">\n	        </div>\n	        <div><span class = "text-danger">*</span><span id = "runningLogFileMaxBackupIndexTip"></span></div>\n	     </div>\n   </form>\n   <input type = "hidden" id = "isSubmitFormFlag"/>\n   <div class="form-group">\n	  <div class="col-sm-offset-2 col-sm-10">\n	     <button type="button" id = "appCfgApplyBtn" class="btn btn-warning  <%if(authAppLogOperFlag!=\'true\'){%>disabled<%}%>">应用</button>\n	     <button type="button" id = "appCfgBackBtn" class="btn">上一步</button>\n	     <button type="button" id = "appCfgNextBtn" class="btn">下一步</button>\n	  </div>\n   </div>\n</div>\n'),define("travsky/jcf/1.0.0/view/deploy/groupDeployAppLogCfgLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/deploy/groupDeployAppLogCfgLayout.tpl"),g=a("travsky/jcf/1.0.0/template/deploy/groupDeployAppLogCfgItem.tpl"),h=a("travsky/jcf/1.0.0/template/deploy/groupDeployAppLogCfgList.tpl"),i=a("travsky/jcf/1.0.0/util/CommonUtil"),j=a("travsky/jcf/1.0.0/view/pagebar_view2"),k=a("travsky/jcf/1.0.0/util/SidebarUtil"),l=a("querystring"),m=e.ItemView.extend({tagName:"tr",template:d.template(g)}),n=e.CompositeView.extend({initialize:function(){},template:d.template(h),childView:m,childViewContainer:"tbody"}),o=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString,this.on("showPageInfo",this.showPageInfo)},template:d.template(f),regions:{listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},events:{"click #deploySubmitBtn":"deploySubmit"},deploySubmit:function(){var a=this.queryString.groupId,c={};c.appId=this.queryString.appId,c.groupId=a,c.serverId=this.queryString.serverIds,c.operation="6";var d=k.getModuleName(),e=this.checkRegistryRun();if(e&&(e=this.checkDeployApp(c)),e){var f="/"+jcfManager.appName+"/deployMgr/mDeployApp.action";delete c.operation;var g=b("input:radio[name='configFile']:checked").val();c.configFile=void 0!=g?g:"";var h=i.dealAjaxRequest4JSObj(f,c);b.when(h).done(function(b){if("true"==b.flag){var e={deployFlag:"true",groupId:a,appId:c.appId,serverId:c.serverId};appRouter.navigate(d+"/group/appDeploy/param/"+l.stringify(e),{trigger:!0})}else alert("部署失败!")})}},checkRegistryRun:function(){var a=!1,c="/"+jcfManager.appName+"/deployMgr/checkRegistryStatus.action",d=i.dealSYNCHAjaxRequestWithoutParam(c);return b.when(d).done(function(b){"true"==b.flag?"1"==b.status?a=!0:alert(b.errMsg):alert(b.errMsg)}),a},checkDeployApp:function(a){var c="/"+jcfManager.appName+"/deployMgr/mApplication.action",d=i.dealSYNCHAjaxRequest4JSObj(c,a),e=!1;return b.when(d).done(function(a){"true"==a.flag?e=!0:(e=!1,alert(a.msg))}),e},showPageInfo:function(){var a=this,d="/"+jcfManager.appName+"/deployMgr/findAppLogCfg.action",e=this.queryString.groupId,f=this.queryString.currentPage,g=this.queryString.pageSize,h={groupId:e,currentPage:f,pageSize:g},k=i.dealAjaxRequest4SimpleParam(d,h);b.when(k).done(function(b){var d=new c.Collection(b.pageBean.recordList),e=new n({collection:d});a.listRegion.show(e);var f=new c.Model(b.pageBean);f.set("uriSection","group/appLogCfg");var g=new j({model:f,queryString:a.queryString});a.pagebarRegion.show(g)})}});return o}),define("travsky/jcf/1.0.0/template/deploy/groupDeployAppLogCfgLayout.tpl",[],'<div id = "listRegion"></div>\n<div id = "pagebarRegion"></div>\n<div ><button type="button" id = "deploySubmitBtn" class="btn">部署</button></div>'),define("travsky/jcf/1.0.0/template/deploy/groupDeployAppLogCfgItem.tpl",[],'<td ><input name="configFile" value="<%=appfile%>"  type="radio" checked="checked"/></td>\n<td><%=appfile%></td>'),define("travsky/jcf/1.0.0/template/deploy/groupDeployAppLogCfgList.tpl",[],'<table class = "table table-bordered">\n<caption>应用日志配置列表</caption>\n<thead>\n  <tr>\n    <th>选择</th>\n    <th>文件名称</th>\n  </tr>\n</thead>\n<tbody></tbody>\n</table>'),define("travsky/jcf/1.0.0/template/deploy/groupDeployNewDeployServerSelectItem.tpl",[],'<td><input  type="checkbox" name="serverIds" value="<%=id%>" title="<%=name%>"  checked="checked"/></td>\n<td><%=name%></td>\n<td>\n	<%\n		if(category=="1"){\n			%>JCF服务器<%	\n		}else if (category=="2"){\n			%>适配服务器<%\n		}else if (category=="3"){\n			%>上下文服务器<%\n		}else if (category=="4"){\n			%>服务库<%\n		}else{\n			%><%=category%><%\n		}\n	%>\n</td>\n<td><%=ip%></td>'),define("travsky/jcf/1.0.0/template/deploy/groupDeployNewDeployServerSelectList.tpl",[],'<table class = "table table-bordered">\n<caption>待部署服务器列表</caption>\n<thead>\n  <tr>\n    <th><input id="allSelected4Server" value="0" type="checkbox" checked="checked"/></th>\n    <th>服务器名称</th>\n    <th>服务器类型</th>\n    <th>服务器IP</th>\n  </tr>\n</thead>\n<tbody></tbody>\n</table>'),define("travsky/jcf/1.0.0/view/deploy/groupDeployTabServerDeployInfo",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/deploy/groupDeployServerDeployItem.tpl"),g=a("travsky/jcf/1.0.0/template/deploy/groupDeployServerDeployList.tpl"),h=a("travsky/jcf/1.0.0/template/deploy/groupDeployTabServerDeployInfo.tpl"),i=a("travsky/jcf/1.0.0/util/CommonUtil"),j=a("travsky/jcf/1.0.0/view/pagebar_view2"),k=a("querystring"),l=a("travsky/jcf/1.0.0/util/SidebarUtil"),m=e.ItemView.extend({template:d.template(f),tagName:"tr",events:{"click .serverAppInfoTd a":"serverAppInfo"},serverAppInfo:function(a){a.preventDefault();var b=this.model.get("serverId"),c={serverId:b},d=l.getModuleName();appRouter.navigate(d+"/server/param/"+k.stringify(c),{trigger:!0})}}),n=e.CompositeView.extend({initialize:function(){},template:d.template(g),childView:m,childViewContainer:"tbody"}),o=e.LayoutView.extend({template:d.template(h),initialize:function(a){this.queryString=a.queryString,this.on("searchListInfo",this.searchListInfo)},regions:{listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},searchListInfo:function(){var a=this,d="/"+jcfManager.appName+"/server/searchGroupPageServer.action",e={groupId:this.queryString.groupId,currentPage:this.queryString.currentPage,pageSize:this.queryString.pageSize},f=i.dealAjaxRequest4SimpleParam(d,e);b.when(f).done(function(b){var d=b.pageBean,e=new c.Model(d),f=new c.Collection(d.recordList),g=new n({collection:f});a.listRegion.show(g),e.set("uriSection","group"),e.get("recordCount");var h=new j({model:e,queryString:a.queryString});a.pagebarRegion.show(h)})}});return o}),define("travsky/jcf/1.0.0/template/deploy/groupDeployServerDeployItem.tpl",[],'<td><%=serverName%></td>\n<td><%=groupName%></td>\n<td><%=serverIp%></td>\n<td>\n	<%if("1"==serverCategory){\n		%>JCF服务器<%\n	}else if ("2"==serverCategory){\n		%>适配服务器<%\n	}else if ("3"==serverCategory){\n		%>上下文服务器<%\n	}else if ("4"==serverCategory){\n		%>服务库<%\n	}else{\n		%><%=serverCategory%><%\n	}%>\n</td>\n<td class = "serverAppInfoTd"><a href = "#">查看</a></td>\n'),define("travsky/jcf/1.0.0/template/deploy/groupDeployServerDeployList.tpl",[],'<table class = "table table-bordered list">\n<thead>\n  <tr>\n    <th>服务器名称</th>\n    <th>服务器分组</th>\n    <th>所在节点</th>\n    <th>类别</th>\n    <th>详情</th>\n  </tr>\n</thead>\n<tbody></tbody>\n</table>\n'),define("travsky/jcf/1.0.0/template/deploy/groupDeployTabServerDeployInfo.tpl",[],'<div id = "listRegion"></div><!--显示列表区域-->\n<div id = "pagebarRegion"></div><!--显示分页栏条区域-->'),define("travsky/jcf/1.0.0/view/deploy/serverAppStatusLayout",["jquery","backbone","underscore","marionette","querystring","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/deploy/serverAppConfigLayout","ajaxfileupload","travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil","travsky/jcf/1.0.0/view/itemTip_view","bs-alert","travsky/jcf/1.0.0/model/itemTip_model"],function(require,exports,module){var $=jQuery=require("jquery"),Backbone=require("backbone"),_=require("underscore"),Marionette=require("marionette"),baseInfoTmpStr=require("travsky/jcf/1.0.0/template/deploy/serverBaseInfo.tpl"),itemTmpStr=require("travsky/jcf/1.0.0/template/deploy/serverAppStatusItem.tpl"),listTmpStr=require("travsky/jcf/1.0.0/template/deploy/serverAppStatusList.tpl"),viewTemplateStr=require("travsky/jcf/1.0.0/template/deploy/serverAppStatusLayout.tpl"),QueryString=require("querystring"),util=require("travsky/jcf/1.0.0/util/CommonUtil"),PagebarView=require("travsky/jcf/1.0.0/view/pagebar_view2"),ServerAppCongfigLayout=require("travsky/jcf/1.0.0/view/deploy/serverAppConfigLayout"),sidbarUtil=require("travsky/jcf/1.0.0/util/SidebarUtil"),authCheck=require("travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil"),ItemTipView=require("travsky/jcf/1.0.0/view/itemTip_view"),BaseInfoItemView=Marionette.ItemView.extend({template:_.template(baseInfoTmpStr),tagName:"div",className:"row"}),ItemView=Marionette.ItemView.extend({initialize:function(){var a=$("#hiddenServerId4BaseInfo").val(),b=$("#hiddenGroupId4BaseInfo").val(),c=authCheck.getDeploy4ServerFlag(),d=authCheck.getUndeploy4ServerFlag();this.model.set("authDeployFlag",c),this.model.set("authUndeployFlag",d),this.model.set("serverId",a),this.model.set("groupId",b),this.listenTo(this.model,"change",this.render)},template:_.template(itemTmpStr),tagName:"tr",events:{"click td.serverAppStautsTd a":"getAppConfigFile","click td.appStatusTd a":"deployOrUndeploy"},getAppConfigFile:function(a){a.stopPropagation(),a.preventDefault(),jcfManagement.tipInfoRegion.empty();var b=this.model.get("serverName"),c=this.model.get("appName"),d=this.model.get("currentVersion"),e=this.model.get("serverId"),f={};f.serverId=e,f.serverName=b,f.appName=c,f.appVersion=d;var g=sidbarUtil.getModuleName();appRouter.navigate(g+"/server/appConfig/param/"+QueryString.stringify(f));var h=new ServerAppCongfigLayout({queryString:f});jcfManager.contentRegion.show(h),h.trigger("showPageInfo")},deployOrUndeploy:function(a){a.preventDefault();var b=$(a.target),c=b.attr("href");jcfManagement.tipInfoRegion.empty();var d={};d.serverId=this.model.get("serverId"),d.groupId=this.model.get("groupId"),d.appId=this.model.get("appId"),"deploy"==c?(d.operation="6",this.deployApp(d)):"undeploy"==c&&(d.operation="7",d.mode="single",this.undeployApp(d))},deployApp:function(a){var b=this.check4DeployOrUndeployApp(a),c=this.model.get("status"),d=this;if(b){delete a.operation,this.model.set("status","7");var e="/"+jcfManager.appName+"/deployMgr/mDeployApp.action",f=util.dealAjaxRequest4JSObj(e,a);$.when(f).done(function(a){if("true"==a.flag){var b=2e3,e=util.getFefreshPageNum(),f=b*e,g=window.location.hash;$("#freshPage4SeverAppStatusUrl").val(g);var h=setInterval(d.updatePageAllAppStatus,b,d);d.TTTFlag=h,setTimeout("window.clearInterval("+h+")",f)}else{var i=new ItemTipView({msg:"部署失败!"});i.model.set("flag","false"),jcfManagement.tipInfoRegion.show(i),d.model.set("status",c)}})}},undeployApp:function(a){if(confirm("确认反部署?")){var b=this.check4DeployOrUndeployApp(a);a.serverId;var c=this;if(this.model.get("status"),b){delete a.operation,this.model.set("status","8");var d="/"+jcfManager.appName+"/deployMgr/mUndeployApp.action",e=util.dealAjaxRequest4JSObj(d,a);$.when(e).done(function(a){if("true"==a.flag){var b=2e3,d=util.getFefreshPageNum(),e=b*d,f=window.location.hash;$("#freshPage4SeverAppStatusUrl").val(f);var g=setInterval(c.updatePageAllAppStatus,b,c);c.TTTFlag=g,setTimeout("window.clearInterval("+g+")",e)}else{var h=new ItemTipView({msg:"反部署失败!"});h.model.set("flag","false"),jcfManagement.tipInfoRegion.show(h),c.model.set("status","4")}})}}},check4DeployOrUndeployApp:function(a){var b="/"+jcfManager.appName+"/deployMgr/mApplication.action",c=!1,d=util.dealSYNCHAjaxRequest4JSObj(b,a);return $.when(d).done(function(a){"true"==a.flag?c=!0:(c=!1,alert(a.msg))}),c},updatePageAllAppStatus:function(self){var curHash=window.location.hash,appId=self.model.get("appId"),serverId=self.model.get("serverId"),ttt=self.TTTFlag,oldUrl=$("#freshPage4SeverAppStatusUrl").val();if(curHash==oldUrl){var serverURL="/"+jcfManager.appName+"/deployMgr/updatePageDeployStatus.action",jsonParam={appId:appId,serverId:serverId},ajaxing=util.dealAjaxRequest4SimpleParam(serverURL,jsonParam),isClose=!1;$.when(ajaxing).done(function(data){var eStr="data['"+serverId+"'] ;",cc=eval(eStr);"7"!=cc&&"8"!=cc&&"9"!=cc?(void 0==cc||null==cc||0==cc.length?self.model.set("status","3"):self.model.set("status",cc),window.clearInterval(ttt)):self.model.set("status",cc)})}else window.clearInterval(ttt)}}),ListView=Marionette.CompositeView.extend({initialize:function(){},template:_.template(listTmpStr),childView:ItemView,childViewContainer:"tbody",childEvents:{"parent:freshPageInfo":function(a){var b=a.model.get("appId"),c=a.model.get("serverId"),d=2e3,e=util.getFefreshPageNum(),f=d*e,g=window.location.hash;$("#freshPage4SeverAppStatusUrl").val(g);var h=setInterval(this.updatePageAllAppStatus,d,this);this.TTTFlag=h,this.appId=b,this.serverId=c,setTimeout("window.clearInterval("+h+")",f)}}}),ServerAppStatusLayout=Marionette.LayoutView.extend({initialize:function(a){this.queryString=a.queryString,this.on("queryAndShowPageInfo",this.queryAndShowPageInfo)},template:_.template(viewTemplateStr),regions:{tipInfoRegion:"#tipInfoRegion",baseInfoRegion:"#baseInfoRegion",listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},events:{},queryAndShowPageInfo:function(){jcfManagement.tipInfoRegion=this.tipInfoRegion;var a="/"+jcfManager.appName+"/deployMgr/viewServerAppStatus.action",b=this.queryString.currentPage;(void 0==b||null==b||""==b)&&(this.queryString.currentPage="1",this.queryString.pageSize=jcfManager.defaultPageSize);var c=this.queryString.serverId,b=this.queryString.currentPage,d=this.queryString.pageSize,e={serverId:c,currentPage:b,pageSize:d},f=util.dealAjaxRequest4SimpleParam(a,e),g=this;$.when(f).done(function(a){var b=new Backbone.Model(a.baseInfo);g.baseInfoRegion.show(new BaseInfoItemView({model:b}));var c=new Backbone.Collection(a.pageBean.recordList);g.listRegion.show(new ListView({collection:c}));var d=new Backbone.Model(a.pageBean);d.set("uriSection","server"),g.pagebarRegion.show(new PagebarView({model:d,queryString:g.queryString}))})}});return ServerAppStatusLayout}),define("travsky/jcf/1.0.0/template/deploy/serverBaseInfo.tpl",[],'<br/>\n<div class = "col-sm-1 text-right">名称:</div>\n<div class = "col-sm-2"><%=serverName%></div>\n<div class = "col-sm-1 text-right">分组:</div>\n<div class = "col-sm-2"><%=groupName%></div>\n<div class = "col-sm-1 text-right">类别:</div>\n<div class = "col-sm-2">\n	<%\n		if("1"==serverCategory){\n		   %>JCF服务器<%\n		}else if ("2"==serverCategory){\n		   %>适配服务器<%\n		}else if ("3"==serverCategory){\n		   %>上下文服务器<%\n		}else if ("4"==serverCategory){\n		   %>服务库<%\n		}else{\n		   %><%=serverCategory%><%\n		}\n	%>\n</div>\n<input type = "hidden" id = "hiddenGroupId4BaseInfo" value = "<%=groupId%>" />\n<input type = "hidden" id = "hiddenServerId4BaseInfo" value = "<%=serverId%>" />'),define("travsky/jcf/1.0.0/template/deploy/serverAppStatusItem.tpl",[],'<td><%=appName%></td>\n<td><%=currentVersion%></td>\n<td><%=deployDate%></td>\n<td>\n	<%if(status=="1"){\n		%>已部署<%\n	}else if (status=="2"){\n	    %>部署失败<%\n	}else if (status=="3"){\n	    %>已反部署<%\n	}else if (status=="4"){\n	    %>反部署失败<%\n	}else if (status=="5"){\n	    %>已回滚<%\n	}else if (status=="6"){\n	    %>回滚失败<%\n	}else if(status=="7"){\n	    %>正在部署<%\n	}else if (status=="8"){\n	    %>正在反部署<%\n	}else if(status=="9"){\n	    %>正在回滚<%\n	}else if(status=="0"){\n	    %>状态不一致<%\n	}else{\n	    %><%=status%><%\n	}%>\n</td>\n<td class = "appStatusTd">\n	<%\n		if(status=="2"){\n		  %>\n		  	<%if(authDeployFlag=="true"){\n		  		%><a href = "deploy" >重新部署</a><%\n		  	}else{\n		  		%>重新部署<%\n		  	}%>\n		  <%\n		}else if (status=="1"){\n		  %>\n		  	<%if(authUndeployFlag=="true"){\n		  		%><a href = "undeploy" >反部署</a><%\n		  	}else{\n		  		%>反部署<%\n		  	}%>\n		  <%\n		}else if (status=="4"){\n		  %>\n		  	<%if(authUndeployFlag=="true"){\n		  		%><a href = "undeploy" >重新反部署</a><%\n		  	}else{\n		  		%>重新反部署<%\n		  	}%>\n		  <%\n		}\n	%>\n</td>\n<td class = "serverAppStautsTd" >\n	<%if(status=="1"||status=="4"||status=="6"){\n	   %><a  href = "#">查看</a><%\n	}else{\n	   %>查看<%\n	}%>\n</td>\n'),define("travsky/jcf/1.0.0/template/deploy/serverAppStatusList.tpl",[],'<table class = "table table-bordered list">\n<thead>\n  <tr>\n    <th>部署包名称</th>\n    <th>版本号</th>\n    <th>部署时间</th>\n    <th>部署状态</th>\n    <th>操作</th>\n    <th>配置文件</th>\n  </tr>\n</thead>\n<tbody></tbody>\n</table>\n'),define("travsky/jcf/1.0.0/template/deploy/serverAppStatusLayout.tpl",[],'<div  id = "tipInfoRegion"></div>\n<div  id = "baseInfoRegion"></div>\n<br/>\n<div  id = "listRegion" ></div>\n<div id = "pagebarRegion"></div>\n<input type = "hidden" id = "freshPage4SeverAppStatusUrl"/>\n'),define("travsky/jcf/1.0.0/view/deploy/serverAppConfigLayout",["jquery","backbone","underscore","ajaxfileupload","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil","travsky/jcf/1.0.0/view/itemTip_view","bs-alert","travsky/jcf/1.0.0/model/itemTip_model"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore");
a("ajaxfileupload");var e=a("marionette"),f=a("travsky/jcf/1.0.0/template/deploy/serverAppConfigLayout.tpl"),g=a("travsky/jcf/1.0.0/util/CommonUtil"),h=a("travsky/jcf/1.0.0/template/deploy/serverAppCfgBaseInfo.tpl"),i=a("travsky/jcf/1.0.0/template/deploy/serverAppCfgCurPath.tpl"),j=a("travsky/jcf/1.0.0/template/deploy/serverAppCfgItem.tpl"),k=a("travsky/jcf/1.0.0/template/deploy/serverAppCfgList.tpl"),l=a("travsky/jcf/1.0.0/view/pagebar_view2"),m=a("travsky/jcf/1.0.0/view/deploy/AuthCheck4DeployUtil"),n=a("querystring"),o=a("travsky/jcf/1.0.0/view/itemTip_view"),p=e.ItemView.extend({template:d.template(h),tagName:"table",className:"table"}),q=e.ItemView.extend({template:d.template(i),tagName:"table",className:"table"}),r=e.ItemView.extend({initialize:function(){var a=m.getDownloadCfgFlag();this.model.set("downloadCfgAuthFlag",a)},tagName:"tr",template:d.template(j)}),s=e.CompositeView.extend({initialize:function(){},tagName:"table",className:"table",template:d.template(k),childView:r,childViewContainer:"tbody"}),t=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString;var b=m.getUploadCfgFlag();this.model=new c.Model({uploadCfgAuthFlag:b}),this.on("showPageInfo",this.showPageInfoIndex)},template:d.template(f),events:{"click td.fileNameTd span.file_dir_icon":"goToChildPath","click #appCfgBackParentPathBtn":"backParentPath","click td.downloadAppCfgTd a":"downloadAppCfg","click #uploadAppCfgBtn":"uploadAppCfg","click #toLastPageBtn":"toLastPage"},toLastPage:function(){var a=this.queryString.serverId,b={serverId:a};appRouter.navigate("deployMgr/server/param/"+n.stringify(b),{trigger:!0})},regions:{baseInfoRegion:"#baseInfoRegion",tipInfoRegion:"#tipInfoRegion",currentDirRegion:"#currentDirRegion",listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},uploadAppCfg:function(){var a=this.checkUploadFile();a&&(a=this.checkRegistryRun()),a&&this.ajaxFileUpload()},checkRegistryRun:function(){var a=!1,c="/"+jcfManager.appName+"/deployMgr/checkRegistryStatus.action",d=g.dealSYNCHAjaxRequestWithoutParam(c),e=this;return b.when(d).done(function(b){if("true"==b.flag)if("1"==b.status)a=!0;else{var c=new o;c.model.set("flag","false"),c.model.set("msg",b.errMsg),e.tipInfoRegion.show(c)}else{var c=new o;c.model.set("flag","false"),c.model.set("msg",b.errMsg),e.tipInfoRegion.show(c)}}),a},checkUploadFile:function(){var a=!1,c=b("#inputfile"),d=b.trim(c.val()),e=d.length,f=d.lastIndexOf("."),h=d.substring(f+1,e);if(e>0&&f>0&&("properties"==h||"txt"==h||"xml"==h||"cfg"==h||"drl"==h)&&(a=!0),a){var i=c[0];a=g.checkFileSize(i,1)}else{var j=new o;j.model.set("flag","false"),j.model.set("msg","上传文件类型有误!"),this.tipInfoRegion.show(j)}return a},ajaxFileUpload:function(){var a=this,c=b("#hiddenCurrentCfgPath").val(),d=this.queryString.serverName;return b.ajaxFileUpload({url:"/"+jcfManager.appName+"/deployMgr/uploadAppConfigFile.action",type:"post",data:{serverName:""+d,currentCfgPath:c},secureuri:!1,fileElementId:"inputfile",dataType:"JSON",success:function(c){var d=b.parseJSON(b(c).text());"true"==d.flag?a.showPageInfoIndex():alert("上传失败!")},error:function(a,b,c){alert(c)}}),!1},showPageInfoIndex:function(){var a=this.queryString,c=this.queryString.currentCfgPath,d="";d=void 0==c||null==c||0==b.trim(c).length?"":decodeURIComponent(c),a.currentCfgPath=d,this.showPageInfo(a)},showPageInfo:function(a){var d=this,e="/"+jcfManager.appName+"/deployMgr/getPageConfigFile.action",f=g.dealAjaxRequest4JSObj(e,a);b.when(f).done(function(a){var b=a.curFilepPath,e=encodeURIComponent(b);d.queryString.currentCfgPath=e,d.queryString.backOrSubstrateDirFlag="",appRouter.navigate("deployMgr/server/appConfig/param/"+n.stringify(d.queryString));var f=new c.Model(a.baseInfo);f.set("appName",a.appName),f.set("appVersion",a.appVersion);var g=new p({model:f});d.baseInfoRegion.show(g);var h=new c.Model({curFilepPath:a.curFilepPath}),i=new q({model:h});d.currentDirRegion.show(i);var j=new c.Collection(a.pageBean.recordList),k=new s({collection:j});d.listRegion.show(k);var m=new c.Model(a.pageBean);m.set("uriSection","server/appConfig"),delete d.queryString.backOrSubstrateDirFlag,delete d.queryString.clickPathName;var o=new l({model:m,queryString:d.queryString});d.pagebarRegion.show(o)})},goToChildPath:function(a){var c=b(a.target),d=b.trim(c.text()),e="next";this.showDirList(e,d)},backParentPath:function(){var a="back",b="parent";this.showDirList(a,b)},showDirList:function(a,c){var d=this.queryString,e=b("#hiddenCurrentCfgPath").val(),f=e;d.currentCfgPath=f,d.backOrSubstrateDirFlag=a,d.clickPathName=c,this.showPageInfo(d)},downloadAppCfg:function(a){a.preventDefault();var c=b(a.target),d=c.attr("href"),e=this.queryString.serverName,f=b.trim(b("#hiddenCurrentCfgPath").val()),g="/"+jcfManager.appName+"/deployMgr/downloadAppConfigFile.action",h=b("<form>");h.attr("style","display:none"),h.attr("target",""),h.attr("method","post"),h.attr("action",g);var i=b("<input>");i.attr("type","hidden"),i.attr("name","exportData"),i.attr("value",(new Date).getMilliseconds());var j=b("<input type = 'hidden' name = 'serverName' value = '"+e+"' />"),k=b("<input type = 'hidden' name = 'downloadFileName' value = '"+d+"' />"),l=b("<input type = 'hidden' name = 'currentDirPath4AppCfg' value = '"+f+"' />");b("body").append(h),h.append(i),h.append(j),h.append(k),h.append(l),h.submit()}});return t}),define("travsky/jcf/1.0.0/template/deploy/serverAppCfgBaseInfo.tpl",[],'<caption>上传配置文件</caption>\n<tbody>\n	<tr>\n		<td width = "5%">应用名称:</td>\n		<td width  = "10%"><%=appName%></td>\n		<td width = "5%">应用版本:</td>\n		<td width  = "5%"><%=appVersion%></td>\n		<td width = "5%">服务器名称:</td>\n		<td width  = "10%"><%=serverName%></td>\n		<td width = "5%">服务器类别:</td>\n		<td width  = "10%">\n			<%\n				if(serverCategory==1){\n					%>JCF服务器<%\n				}else if(serverCategory==2){\n					%>适配服务器<%\n				}else if(serverCategory==3){\n					%>上下文服务器<%\n				}else if(serverCategory==4){\n					%>服务库<%\n				}else{\n					%>其他<%\n				}\n			%>\n		</td>\n	</tr>\n</tbody>\n'),define("travsky/jcf/1.0.0/view/service/serviceMgrLayout",["jquery","backbone","underscore","marionette","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/service/serviceTab4ListLayout","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","travsky/jcf/1.0.0/view/service/serviceTab4ConfigLayout","travsky/jcf/1.0.0/view/service/serviceConfig_view","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert","travsky/jcf/1.0.0/view/service/AuthCheck4Service"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/service/serviceMgrLayout.tpl"),g=a("querystring"),h=a("travsky/jcf/1.0.0/util/SidebarUtil"),i=a("travsky/jcf/1.0.0/view/service/serviceTab4ListLayout"),j=a("travsky/jcf/1.0.0/view/service/serviceTab4ConfigLayout"),k=a("travsky/jcf/1.0.0/util/CommonUtil"),l=a("travsky/jcf/1.0.0/view/service/AuthCheck4Service"),m=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString;var b=l.getGroupServiceCfgFlag();this.model.set("authGroupCfgFlag",b),this.on("showPageInfo",this.showPageInfo)},events:{"click #serviceMgrNav":"clickNavItem"},template:d.template(f),regions:{downContentRegion:"#downContentRegion"},clickNavItem:function(a){a.stopPropagation(),a.preventDefault();var c=b(a.target).attr("href"),d=b(a.target).parent(),e=d.parent(),f=h.getModuleName();d.hasClass("active")||(e.find("li").removeClass("active"),d.addClass("active"),this.queryString.selectedPageUI=c,appRouter.navigate(f+"/param/"+g.stringify(this.queryString)),this.showPageInfo())},showPageInfo:function(){var a=this,d=h.getModuleName(),e=this.queryString.selectedPageUI;if(appRouter.navigate(d+"/param/"+g.stringify(this.queryString)),"serviceListUI"==e){var f=new i({queryString:this.queryString});this.downContentRegion.show(f),f.trigger("showPageInfo")}else if("groupServiceCfgUI"==e){var l="/"+jcfManager.appName+"/service/getGroupNameList.action",m=k.dealAjaxRequestWithoutParam(l);b.when(m).done(function(b){var d=new c.Model(b),e=new j({model:d});a.downContentRegion.show(e)})}}});return m}),define("travsky/jcf/1.0.0/template/service/serviceMgrLayout.tpl",[],'<div>\n	<ul class="nav nav-tabs tttt" id = "serviceMgrNav">      \n		<li  <%if(selectedPageUI==\'serviceListUI\'){%>class = "active"<%}%>  ><a href="serviceListUI">服务列表</a></li>    \n	</ul>\n</div>\n<div  id = "downContentRegion"></div>\n'),define("travsky/jcf/1.0.0/view/service/serviceTab4ListLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/pageDataLayout.tpl"),g=a("travsky/jcf/1.0.0/template/service/serviceItem.tpl"),h=a("travsky/jcf/1.0.0/template/service/serviceList.tpl"),i=a("travsky/jcf/1.0.0/util/CommonUtil"),j=a("travsky/jcf/1.0.0/view/pagebar_view2"),k=e.ItemView.extend({tagName:"tr",template:d.template(g)}),l=e.CompositeView.extend({initialize:function(){},tagName:"table",className:"table table-bordered list",template:d.template(h),childView:k,childViewContainer:"tbody"}),m=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString,this.on("showPageInfo",this.showPageInfo)},template:d.template(f),regions:{listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},showPageInfo:function(){var a=this,d="/"+jcfManager.appName+"/service/searchAllService.action",e={currentPage:this.queryString.currentPage,pageSize:this.queryString.pageSize},f=i.dealAjaxRequest4SimpleParam(d,e);b.when(f).done(function(b){var d=new c.Collection(b.recordList),e=new l({collection:d});a.listRegion.show(e);var f=new c.Model(b),g=new j({model:f,queryString:a.queryString});a.pagebarRegion.show(g)})}});return m}),define("travsky/jcf/1.0.0/template/pageDataLayout.tpl",[],'<div  id = "listRegion"></div>\n<div id = "pagebarRegion"></div>\n'),define("travsky/jcf/1.0.0/template/service/serviceItem.tpl",[],"<td><%=serverName%></td>\n<td><%=serviceName%></td>\n<td><%=serviceCategory%></td>\n<td><%=appVersion%></td>\n\n"),define("travsky/jcf/1.0.0/template/service/serviceList.tpl",[],"<thead>\n  <tr>\n    <th>服务器名称</th>\n    <th>服务名称</th>\n    <th>服务类型</th>\n    <th>服务版本</th>\n  </tr>\n</thead>\n<tbody></tbody>\n"),define("travsky/jcf/1.0.0/view/service/serviceTab4ConfigLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/service/serviceConfig_view","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/service/serviceTab4ConfigLayout.tpl"),g=a("travsky/jcf/1.0.0/util/CommonUtil"),h=a("travsky/jcf/1.0.0/view/service/serviceConfig_view"),i=a("travsky/jcf/1.0.0/model/listTip_model"),j=a("travsky/jcf/1.0.0/view/listTip_view"),k=e.LayoutView.extend({initialize:function(){this.on("showPageInfo",this.showPageInfo)},template:d.template(f),regions:{downContentRegion:"#downContentRegion",showTipRegion:"#showTipRegion"},events:{"change #serviceGroupName":"changeServiceGroupName","change #serviceName":"changeServiceName"},changeServiceName:function(){var a=this,d=b.trim(b("#serviceGroupName").val()),e=b.trim(b("#serviceName").val());if(e.length>0){var f="/"+jcfManager.appName+"/service/getServiceCategory.action",k={groupId:d,serviceId:e},l=g.dealAjaxRequest4SimpleParam(f,k);b.when(l).done(function(b){var d=new i,e=b.serverName;d.set("succList",["配置是从"+e+"中获取的"]);var f=new j({model:d});a.showTipRegion.show(f);var g=new c.Model(b.serviceParameter);g.set("flag",b.flag),g.set("serviceId",b.serviceId),g.set("serviceCategory",b.serviceCategory),g.set("serverName",b.serverName),g.set("configError",b.configError);var k=new h({model:g});a.downContentRegion.show(k)})}else this.downContentRegion.empty(),this.showTipRegion.empty()},changeServiceGroupName:function(){var a=b.trim(b("#serviceGroupName").val()),c=b("#serviceName");if(this.downContentRegion.empty(),a.length>0){var d="/"+jcfManager.appName+"/service/getSericeNameList.action",e={groupId:a},f=g.dealAjaxRequest4SimpleParam(d,e);b.when(f).done(function(a){var b=a.serviceInfoList;c.html("<option selected = 'selected'></option>");for(var d=0;d<b.length;d++){var e=b[d].serviceId,f=b[d].serviceName,g=b[d].appVersion,h=f+"_"+g,i="<option value = '"+e+"'>"+h+"</option>";c.append(i)}})}else c.html("<option selected = 'selected'></option>"),this.showTipRegion.empty()}});return k}),define("travsky/jcf/1.0.0/template/service/serviceTab4ConfigLayout.tpl",[],'<br/>\n<div  id = "upContentRegion" >\n	<div class = "row">\n		<div class = "col-sm-2 text-right"><label for="addGroup_groupCategory" class="control-label">服务器组名称：</label></div>\n		<div class = "col-sm-3">\n			<select id = "serviceGroupName"  class  = "form-control input-sm">\n	         	 	<option value="" selected="selected"></option>\n	         	 	<%\n	         	 		for(var i = 0 ; i < groupNameList.length ;i ++){\n	         	 			%><option value="<%=groupNameList[i].groupId%>" ><%=groupNameList[i].groupName%></option><%\n	         	 		}\n	         	 	%>\n	        </select>\n		</div>\n		\n		<div class = "col-sm-2 text-right"><label for="addGroup_groupCategory" class="control-label">服务名称：</label></div>\n		<div class = "col-sm-3">\n			<select id = "serviceName"  class  = "form-control input-sm">\n	         	<!-- <option value="" selected="selected"></option> -->\n	        </select>\n		</div>\n	</div>\n</div>\n<div id = "showTipRegion"></div>\n<br/>\n<div id = "downContentRegion" ></div>'),define("travsky/jcf/1.0.0/view/service/serviceConfig_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/service/serviceConfigView.tpl"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"),h=d.ItemView.extend({template:c.template(e),initialize:function(){this.listenTo(this.model,"change:messageMode",this.render)},events:{"click #submitFormBtn":"submitForm","blur #requestQueueSize":"checkRequestQueueSize","blur #invokeContextSize":"checkInvokeContextSize","blur #threadPoolSize":"checkThreadPoolSize","blur #upperLimit":"checkUpperLimit","blur #inputQueue":"checkInputQueue","blur #outputQueue":"checkOutputQueue","blur #inMpeNum":"checkInMpeNum","blur #outMpeNum":"checkOutMpeNum","blur #invokeTimeout":"checkInvokeTimeout","change #messageMode":"changeMessageMode"},changeMessageMode:function(){var a=b.trim(b("#messageMode").val());this.model.set("messageMode",a)},submitBusiServiceForm:function(a){var c="/"+jcfManager.appName+"/service/updateBusiServiceCfg.action",d=f.dealAjaxRequest4JSObj(c,a),e=this;b.when(d).done(function(a){e.dealReturnInfo(a)})},submitAdapterServiceForm:function(a){var c="/"+jcfManager.appName+"/service/updateAdapterServiceCfg.action",d=f.dealAjaxRequest4JSObj(c,a),e=this;b.when(d).done(function(a){e.dealReturnInfo(a)})},submitHttpServiceForm:function(a){var c="/"+jcfManager.appName+"/service/updateHttpServiceCfg.action",d=f.dealAjaxRequest4JSObj(c,a),e=this;b.when(d).done(function(a){e.dealReturnInfo(a)})},submitForm:function(){b("#submitFormBtn").addClass("disabled");var a=b("#submitFormBtn").attr("name"),c=b("#serviceId").val();b("#serverName").val();var d=b.trim(b("#serviceGroupName").val());if("BusinessService"==a){var e=this.checkBusinessServiceForm();if(e){var g=["requestQueueSize","invokeContextSize","threadPoolSize","messageMode","upperLimit","queueType"],h=f.getFormInputObj(g);h.serviceId=c,h.groupId=d,this.submitBusiServiceForm(h)}}else if("AdapterService"==a){var e=this.checkAdapterServiceForm();if(e){var g=["inputQueue","outputQueue","inMpeNum","outMpeNum","threadPoolSize","mqServerInfo","requestQueueSize","invokeContextSize","messageMode","upperLimit","queueType"],h=f.getFormInputObj(g);h.serviceId=c,h.groupId=d,this.submitAdapterServiceForm(h)}}else if("http"==a){var e=this.checkHttpServiceForm();if(e){var g=["invokeServiceName","invokeTimeout","threadPoolSize"],h=f.getFormInputObj(g);h.serviceId=c,h.groupId=d,this.submitHttpServiceForm(h)}}else if("webservice"==a){var e=this.checkWebServiceForm();if(e){var g=["invokeServiceName","invokeTimeout","threadPoolSize"],h=f.getFormInputObj(g);h.serviceId=c,h.groupId=d,this.submitWebServiceForm(h)}}},submitWebServiceForm:function(a){var c="/"+jcfManager.appName+"/service/updateWebServiceCfg.action",d=f.dealAjaxRequest4JSObj(c,a),e=this;b.when(d).done(function(a){e.dealReturnInfo(a)})},dealReturnInfo:function(a){if("1"==a.status)alert("组配置成功"),b("#submitFormBtn").removeClass("disabled");else{b("#submitFormBtn").removeClass("disabled");var c="";for(var d in a.serviceUpdateConfigList)0===a.serviceUpdateConfigList[d].serviceConfigUpdateStatus&&(1===a.serviceUpdateConfigList[d].JMXConnectError&&(c=c+a.serviceUpdateConfigList[d].serverName+" 配置时连接被拒绝"),1===a.serviceUpdateConfigList[d].illegalArgument&&(c=c+a.serviceUpdateConfigList[d].serverName+" 配置时出现非法参数"),1===a.serviceUpdateConfigList[d].malformedObjectName&&(c=c+a.serviceUpdateConfigList[d].serverName+" 配置时出现非法的对象名"),1===a.serviceUpdateConfigList[d].nullPointer&&(c=c+a.serviceUpdateConfigList[d].serverName+" 配置时出现空指针"),1===a.serviceUpdateConfigList[d].loginException&&(c=c+a.serviceUpdateConfigList[d].serverName+" 登录异常"),1===a.serviceUpdateConfigList[d].errorServiceConfigException&&(c=c+a.serviceUpdateConfigList[d].serverName+" 找不到对应的配置文件"),1===a.serviceUpdateConfigList[d].exception&&(c=c+a.serviceUpdateConfigList[d].serverName+" 配置时出现未知异常,建议查看karaf log"));alert(c)}},checkRequestQueueSize:function(){var a="requestQueueSize",b=1,c=1e7,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkInvokeContextSize:function(){var a="invokeContextSize",b=1,c=1e7,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkThreadPoolSize:function(){var a="threadPoolSize",b=1,c=1e4,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkUpperLimit:function(){var a="upperLimit",b=1,c=99,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkInputQueue:function(){var a="inputQueue",c=b.trim(b("#"+a).val());return""==c?g.clearInput(a):g.successInput(a),!0},checkOutputQueue:function(){var a="outputQueue",c=b.trim(b("#"+a).val());return""==c?g.clearInput(a):g.successInput(a),!0},checkInMpeNum:function(){var a="inMpeNum",c=b.trim(b("#"+a).val()),d=!0;if(c.length>0){var e=1,f=1e4;d=g.checkInputMatchInt_MinNum__MaxNum(a,e,f)}else g.clearInput(a);return d},checkOutMpeNum:function(){var a="outMpeNum",c=b.trim(b("#"+a).val()),d=!0;if(c.length>0){var e=1,f=1e4;d=g.checkInputMatchInt_MinNum__MaxNum(a,e,f)}else g.clearInput(a);return d},checkInvokeTimeout:function(){var a="invokeTimeout",b=1,c=1e3,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkBusinessServiceForm:function(){return this.checkRequestQueueSize()&&this.checkInvokeContextSize()&&this.checkThreadPoolSize()&&this.checkUpperLimit()?!0:!1},checkAdapterServiceForm:function(){return this.checkValidateQueueNameAndNum()&&this.checkInputQueue()&&this.checkOutputQueue()&&this.checkThreadPoolSize()&&this.checkUpperLimit()?!0:!1},checkHttpServiceForm:function(){var a=!1;return this.checkInvokeTimeout()&&this.checkThreadPoolSize()&&(a=!0),a},checkWebServiceForm:function(){var a=!1;return this.checkInvokeTimeout()&&this.checkThreadPoolSize()&&(a=!0),a},checkValidateQueueNameAndNum:function(){var a=!1,c="inputQueue",d="outputQueue",e=g.checkNotNull(c),f=g.checkNotNull(d);if(e||f){g.successInput(c),g.successInput(d);var h=b.trim(b("#"+c).val());if(a=""==h?""==b.trim(b("#inMpeNum").val())?g.successInput(c):g.errInput(c,"接入MQ队列名称不能为空"):""==b.trim(b("#inMpeNum").val())?g.errInput("inMpeNum","接入MQ连接数不能为空"):g.successInput("inMpeNum")){var i=b.trim(b("#"+d).val());a=""==i?""==b.trim(b("#outMpeNum").val())?g.successInput(d):g.errInput(d,"接出MQ队列名称不能为空"):""==b.trim(b("#outMpeNum").val())?g.errInput("outMpeNum","接出MQ连接数不能为空"):g.successInput("outMpeNum")}}else a=g.errInput(c,"接入队列和接出队列至少需要配置一个");return a}});return h}),define("travsky/jcf/1.0.0/template/service/serviceConfigView.tpl",[],'<%	\nif(flag=="true"){//正确返回数据\n%>		\n	<form class="form-horizontal"   role="form" method= "POST">\n		 <input type = "hidden" id = "serviceId" value = "<%=serviceId%>"/>\n		 <input type = "hidden" id = "serverName" value = "<%=serverName%>"/>\n	<%\n		if("BusinessService"==serviceCategory){//1111111111111111111111\n		   %>\n		      <div class="form-group" id = "requestQueueSizeDiv" >\n		         <label for="requestQueueSize" class="col-sm-4 control-label  text-left">请求队列大小：</label>\n		         <div class="col-sm-4">\n		            <input  id="requestQueueSize"  value = "<%=requestQueueSize%>"   type="text" class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span class = "text-danger">*</span><span id = "requestQueueSizeTip"></span></div>\n		      </div>\n		      \n		      <div class="form-group" id = "invokeContextSizeDiv" >\n		         <label for="invokeContextSize" class="col-sm-4 control-label">应答队列大小：</label>\n		         <div class="col-sm-4">\n		            <input  id="invokeContextSize" value = "<%=invokeContextSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span class = "text-danger">*</span><span id = "invokeContextSizeTip"></span></div>\n		      </div>\n		      \n		      \n		      <div class="form-group" id = "threadPoolSizeDiv" >\n		         <label for="threadPoolSize" class="col-sm-4 control-label">线程池大小：</label>\n		         <div class="col-sm-4">\n		             <input  id="threadPoolSize" value = "<%=threadPoolSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "threadPoolSizeTip"></span></div>\n		      </div>\n		      \n		      \n		      <div class="form-group" id = "messageModeDiv" >\n		         <label for="messageMode" class="col-sm-4 control-label">信息模式：</label>\n		         <div class="col-sm-4">\n		            <select id="messageMode"   class="form-control input-sm">\n		            	<option <%if(messageMode=="one_way"){%>selected = "selected" <%}%> value="one_way" selected="selected">one_way</option>\n		            	<option <%if(messageMode=="request_response"){%>selected = "selected" <%}%>  value="request_response">request_response</option>\n		            	<option <%if(messageMode=="reliable_one_way"){%>selected = "selected" <%}%>  value="reliable_one_way">reliable_one_way</option>	\n		            </select>\n		         </div>\n		         <div><span id = "messageModeTip"></span></div>\n		      </div>\n		      \n		      <div class="form-group" id = "upperLimitDiv" >\n		         <label for="upperLimit" class="col-sm-4 control-label">队列预警值：</label>\n		         <div class="col-sm-4">\n		            <input id="upperLimit" value = "<%=upperLimit%>"   type="text"  class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span class ="text-info">(%)</span><span id = "upperLimitTip"></span></div>\n		      </div>\n		      \n		      <div class="form-group" id = "queueTypeDiv" >\n		         <label for="queueType" class="col-sm-4 control-label">队列类型：</label>\n		         <div class="col-sm-4">\n		            <select id="queueType"   class="form-control input-sm">\n		             	<%if(messageMode=="one_way"){%>\n		             		<option value="SimpleQueue" <%if(queueType=="SimpleQueue"){%>selected="selected"<%}%> >SimpleQueue</option>\n		               		<option value="PersistQueue" <%if(queueType=="PersistQueue"){%>selected="selected"<%}%> >PersistQueue</option>\n		             	<%}else{%>\n		             		<option value="SimpleQueue" selected="selected" >SimpleQueue</option>\n		             	<%}%>\n					</select>\n		         </div>\n		         <div><span id = "queueTypeTip"></span></div>\n		      </div>\n		      \n		      <div class="form-group">\n			     <div class="col-sm-offset-4 col-sm-10">\n			        <button type="button" id = "submitFormBtn" name = "BusinessService" class="btn btn-primary">应用</button>\n			     </div>\n			  </div>\n		   <%\n		}else if ("sih"==serviceCategory||"tumsb"==serviceCategory||"tumst"==serviceCategory||"utl"==serviceCategory){//22222222222222222222222\n		   %>\n		 	<div class="form-group" id = "inputQueueDiv" >\n		         <label for="inputQueue" class="col-sm-4 control-label">接入MQ队列名称：</label>\n		         <div class="col-sm-4">\n		            <input id="inputQueue" value = "<%=inputQueue%>"  type="text" class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "inputQueueTip"></span></div>\n		    </div>\n		    \n		    <div class="form-group" id = "inMpeNumDiv" >\n		         <label for="inMpeNum" class="col-sm-4 control-label">接入MQ连接个数：</label>\n		         <div class="col-sm-4">\n		            <input id="inMpeNum" value = "<%= (inMpeNum==\'0\'?\'\':inMpeNum)%>" type="text"  class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "inMpeNumTip"></span></div>\n		    </div>\n		    \n		 	<div class="form-group" id = "outputQueueDiv" >\n		         <label for="outputQueue" class="col-sm-4 control-label">接出MQ队列名称：</label>\n		         <div class="col-sm-4">\n		            <input id="outputQueue" value = "<%=outputQueue%>" type="text"  class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "outputQueueTip"></span></div>\n		    </div>\n		    \n		    \n		 	<div class="form-group" id = "outMpeNumDiv" >\n		         <label for="outMpeNum" class="col-sm-4 control-label">接出MQ连接个数：</label>\n		         <div class="col-sm-4">\n		            <input id="outMpeNum"  value = "<%= (outMpeNum==\'0\'?\'\':outMpeNum)%>" type="text" class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "outMpeNumTip"></span></div>\n		    </div>\n		    \n		 	<div class="form-group" id = "threadPoolSizeDiv" >\n		         <label for="threadPoolSize" class="col-sm-4 control-label">适配服务线程池大小：</label>\n		         <div class="col-sm-4">\n		            <input id="threadPoolSize" value = "<%=threadPoolSize%>" type="text"  class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "threadPoolSizeTip"></span></div>\n		    </div>\n		    \n		 	<div class="form-group" id = "mqServerInfoDiv" >\n		         <label for="mqServerInfo" class="col-sm-4 control-label">MQ服务器信息（格式IP/PORT/通道名/队列管理器名/超时转移时间）：</label>\n		         <div class="col-sm-4">\n		            <input id="mqServerInfo" value = "<%=mqServerInfo%>" type="text"  class="form-control input-sm"  placeholder="" />\n		            <input  id="mode" value = "" type="hidden" />\n		            <input  id="serviceName" value = "" type="hidden"  />\n		         </div>\n		         <div><span id = "mqServerInfoTip"></span></div>\n		    </div>\n		 	\n		 	<div class="form-group" id = "requestQueueSizeDiv" >\n		         <label for="requestQueueSize" class="col-sm-4 control-label">请求队列大小：</label>\n		         <div class="col-sm-4">\n		            <input id="requestQueueSize" value = "<%=requestQueueSize%>"  type="text"  class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "requestQueueSizeTip"></span></div>\n		    </div>\n		 	\n		 	<div class="form-group" id = "invokeContextSizeDiv" >\n		         <label for="invokeContextSize" class="col-sm-4 control-label">应答队列大小：</label>\n		         <div class="col-sm-4">\n		            <input id="invokeContextSize" value = "<%=invokeContextSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "invokeContextSizeTip"></span></div>\n		    </div>\n		 	\n		 	<div class="form-group" id = "messageModeDiv" >\n		         <label for="messageMode" class="col-sm-4 control-label">信息模式：</label>\n		         <div class="col-sm-4">\n		            <input id="messageMode"  value = "<%=messageMode%>" readonly="readonly" type="text"  class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "messageModeTip"></span></div>\n		    </div>\n		 	\n		 	<div class="form-group" id = "upperLimitDiv" >\n		         <label for="upperLimit" class="col-sm-4 control-label">队列预警值：</label>\n		         <div class="col-sm-4">\n		            <input id="upperLimit" value = "<%=upperLimit%>" type="text" class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span class ="text-info">(%)</span><span id = "upperLimitTip"></span></div>\n		    </div>\n		    \n		     <div class="form-group" id = "queueTypeDiv" >\n		         <label for="queueType" class="col-sm-4 control-label">队列类型：</label>\n		         <div class="col-sm-4">\n		            <select id="queueType"   class="form-control input-sm">\n		               	<%if(messageMode=="one_way"){%>\n		             		<option value="SimpleQueue" <%if(queueType=="SimpleQueue"){%>selected="selected"<%}%> >SimpleQueue</option>\n		               		<option value="PersistQueue" <%if(queueType=="PersistQueue"){%>selected="selected"<%}%> >PersistQueue</option>\n		             	<%}else{%>\n		             		<option value="SimpleQueue" selected="selected" >SimpleQueue</option>\n		             	<%}%>\n					</select>\n		         </div>\n		         <div><span id = "queueTypeTip"></span></div>\n		     </div>\n		     \n		     \n		      <div class="form-group">\n			     <div class="col-sm-offset-4 col-sm-10">\n			        <button type="button" id = "submitFormBtn" name = "AdapterService" class="btn btn-primary">应用</button>\n			     </div>\n			  </div>\n		 	\n		   <%\n		}else if ("http"==serviceCategory){//33333333333333333333333333333333\n		   %>\n		   	  <div class="form-group" id = "invokeServiceNameDiv" >\n		         <label for="invokeServiceName" class="col-sm-4 control-label">调用服务名称 ：</label>\n		         <div class="col-sm-4">\n		            <input id="invokeServiceName" value = "<%=invokeServiceName%>" readonly="readonly" type="text"  class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "invokeServiceNameTip"></span></div>\n		      </div>\n		      \n		      <div class="form-group" id = "invokeTimeoutDiv" >\n		         <label for="invokeTimeout" class="col-sm-4 control-label">调用超时时间 ：</label>\n		         <div class="col-sm-4">\n		            <input id="invokeTimeout" value = "<%=invokeTimeout%>" type="text" class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "invokeTimeoutTip"></span></div>\n		      </div>\n		      \n		      <div class="form-group" id = "threadPoolSizeDiv" >\n		        <label for="threadPoolSize" class="col-sm-4 control-label">线程池大小：</label>\n	            <div class="col-sm-4">\n	            	<input  id="threadPoolSize" value = "<%=threadPoolSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n	            </div>\n		        <div><span class = "text-danger">*</span><span id = "threadPoolSizeTip"></span></div>\n		      </div>\n		      \n		       <div class="form-group">\n			     <div class="col-sm-offset-4 col-sm-10">\n			        <button type="button" id = "submitFormBtn" name = "http" class="btn btn-primary">应用</button>\n			     </div>\n			  </div>\n		      \n		   <%\n		}else if ("webservice"==serviceCategory){//4444444444444444444444444444444444\n		   %>\n		      <div class="form-group" id = "invokeServiceNameDiv" >\n		         <label for="invokeServiceName" class="col-sm-4 control-label">调用服务名称 ：</label>\n		         <div class="col-sm-4">\n		            <input id="invokeServiceName" value = "<%=invokeServiceName%>" readonly="readonly"  type="text" class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "invokeServiceNameTip"></span></div>\n		      </div>\n		      \n		      <div class="form-group" id = "invokeTimeoutDiv" >\n		         <label for="invokeTimeout" class="col-sm-4 control-label">调用超时时间 ：</label>\n		         <div class="col-sm-4">\n		            <input id="invokeTimeout" value = "<%=invokeTimeout%>" type="text" class="form-control input-sm"  placeholder="" />\n		         </div>\n		         <div><span id = "invokeTimeoutTip"></span></div>\n		      </div>\n		      \n		      <div class="form-group" id = "threadPoolSizeDiv" >\n		        <label for="threadPoolSize" class="col-sm-4 control-label">线程池大小：</label>\n	            <div class="col-sm-4">\n	            	<input  id="threadPoolSize" value = "<%=threadPoolSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n	            </div>\n		        <div><span class = "text-danger">*</span><span id = "threadPoolSizeTip"></span></div>\n		      </div>\n		      \n		      <div class="form-group">\n			     <div class="col-sm-offset-4 col-sm-10">\n			        <button type="button" id = "submitFormBtn" name = "webservice" class="btn btn-primary">应用</button>\n			     </div>\n			  </div>\n		   <%\n		}\n	 %>\n	 </form>\n<%}else{%>\n		<div >\n			<div id="unknowServiceTips" style="color:red;"><%=configError%></div>\n		</div>	\n<%}%>\n\n\n\n'),define("travsky/jcf/1.0.0/view/service/AuthCheck4Service",[],function(){var a={};
return a.getGroupServiceCfgFlag=function(){var a=jcfManager.authModel,b="4_2_3",c=a.get(b)||"";return c},a.getSearchService4GroupFlag=function(){var a=jcfManager.authModel,b="4_2_1",c=a.get(b)||"";return c},a.getJcfStart4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-1",c=a.get(b)||"";return c},a.getJcfStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-2",c=a.get(b)||"";return c},a.getJcForceStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-3",c=a.get(b)||"";return c},a.getJcfSXQH4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-4",c=a.get(b)||"";return c},a.getJcfCfg4GroupFlag=function(){var a=jcfManager.authModel,b="4_4_1-5-4",c=a.get(b)||"";return c},a.getSihStart4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-6",c=a.get(b)||"";return c},a.getSihStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-7",c=a.get(b)||"";return c},a.getSihForceStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-8",c=a.get(b)||"";return c},a.getSihSXQH4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-9",c=a.get(b)||"";return c},a.getSihCfg4GroupFlag=function(){var a=jcfManager.authModel,b="4_4_1-10-4",c=a.get(b)||"";return c},a.getHttpStart4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-11",c=a.get(b)||"";return c},a.getHttpStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-12",c=a.get(b)||"";return c},a.getHttpForceStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-13",c=a.get(b)||"";return c},a.getHttpSXQH4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-14",c=a.get(b)||"";return c},a.getHttpCfg4GroupFlag=function(){var a=jcfManager.authModel,b="4_4_1-15-4",c=a.get(b)||"";return c},a.getWebStart4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-16",c=a.get(b)||"";return c},a.getWebStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-17",c=a.get(b)||"";return c},a.getWebForceStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-18",c=a.get(b)||"";return c},a.getWebSXQH4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-19",c=a.get(b)||"";return c},a.getWebCfg4GroupFlag=function(){var a=jcfManager.authModel,b="4_4_1-20-4",c=a.get(b)||"";return c},a.getTbStart4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-21",c=a.get(b)||"";return c},a.getTbStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-22",c=a.get(b)||"";return c},a.getTbForceStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-23",c=a.get(b)||"";return c},a.getTbSXQH4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-24",c=a.get(b)||"";return c},a.getTbCfg4GroupFlag=function(){var a=jcfManager.authModel,b="4_4_1-25-4",c=a.get(b)||"";return c},a.getTtStart4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-26",c=a.get(b)||"";return c},a.getTtStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-27",c=a.get(b)||"";return c},a.getTtForceStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-28",c=a.get(b)||"";return c},a.getTtSXQH4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-29",c=a.get(b)||"";return c},a.getTtCfg4GroupFlag=function(){var a=jcfManager.authModel,b="4_4_1-30-4",c=a.get(b)||"";return c},a.getUtlStart4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-31",c=a.get(b)||"";return c},a.getUtlStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-32",c=a.get(b)||"";return c},a.getUtlForceStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-33",c=a.get(b)||"";return c},a.getUtlSXQH4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-34",c=a.get(b)||"";return c},a.getUtlCfg4GroupFlag=function(){var a=jcfManager.authModel,b="4_3_1-35-4",c=a.get(b)||"";return c},a.getUtlForceStop4GroupFlag=function(){var a=jcfManager.authModel,b="4_2_3",c=a.get(b)||"";return c},a.getSearchService4ServerFlag=function(){var a=jcfManager.authModel,b="4_2_2",c=a.get(b)||"";return c},a.getJcfMoniService4ServerFlag=function(){var a=jcfManager.authModel,b="4_3_1-5",c=a.get(b)||"";return c},a.getJcfMoni4ServerFlag=function(){var a=jcfManager.authModel,b="4_2_2",c=a.get(b)||"";return c},a.getSihMoni4ServerFlag=function(){var a=jcfManager.authModel,b="4_3_1-10",c=a.get(b)||"";return c},a.getHttpMoni4ServerFlag=function(){var a=jcfManager.authModel,b="4_3_1-15",c=a.get(b)||"";return c},a.getWebMoni4ServerFlag=function(){var a=jcfManager.authModel,b="4_3_1-20",c=a.get(b)||"";return c},a.getTbMoni4ServerFlag=function(){var a=jcfManager.authModel,b="4_3_1-25",c=a.get(b)||"";return c},a.getTtMoni4ServerFlag=function(){var a=jcfManager.authModel,b="4_3_1-30",c=a.get(b)||"";return c},a.getUtlMoni4ServerFlag=function(){var a=jcfManager.authModel,b="4_3_1-35",c=a.get(b)||"";return c},a.getSwitchDefaultVersionFlag=function(){var a=jcfManager.authModel,b="4_2_5",c=a.get(b)||"";return c},a.getClearQueueInfoFlag=function(){var a=jcfManager.authModel,b="4_6_6",c=a.get(b)||"";return c},a}),define("travsky/jcf/1.0.0/view/service/groupServiceMgrLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/view/service/groupServiceTabServiceMgr","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/service/serviceDetailLayout","travsky/jcf/1.0.0/view/service/AuthCheck4Service","travsky/jcf/1.0.0/view/service/ServiceOperHelper","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/confirm_view","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert","travsky/jcf/1.0.0/view/service/monitorService_view","travsky/jcf/1.0.0/view/service/groupServiceCfg","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/service/serviceGrayConfig_view","travsky/jcf/1.0.0/view/service/serviceDegradeConfig_view","travsky/jcf/1.0.0/view/service/respGroupMoni_view","my97Date","travsky/jcf/1.0.0/view/service/groupServiceChart_view","highcharts"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/service/groupServiceMgrLayout.tpl"),g=a("travsky/jcf/1.0.0/view/service/groupServiceTabServiceMgr"),h=a("travsky/jcf/1.0.0/util/CommonUtil"),i=a("querystring"),j=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString,this.on("showPageInfo",this.showPageInfo)},template:d.template(f),regions:{downContentRegion:"#downContentRegion"},events:{"click #groupServiceMgrNav li a":"clickNavItem"},clickNavItem:function(a){a.stopPropagation(),a.preventDefault();var c=b(a.target).attr("href"),d=b(a.target).parent(),e=d.parent();d.hasClass("active")||(e.find("li").removeClass("active"),d.addClass("active"),this.queryString.selectedPageUI=c,this.queryString.currentPage="1",appRouter.navigate("serviceMgr/group/param/"+i.stringify(this.queryString)),this.showPageInfo())},showPageInfo:function(){var a=this.queryString.selectedPageUI;void 0==a&&(a="showServiceMgrUI",this.queryString.selectedPageUI=a);var d=this.queryString.groupId,e=void 0==this.queryString.category?"":this.queryString.category,f=void 0==this.queryString.status?"":this.queryString.status,i=void 0==this.queryString.appName?"":this.queryString.appName,j="/"+jcfManager.appName+"/service/toSearchGroupServiceUI.action",k={groupId:d};if("showServiceMgrUI"==a){var l=h.dealAjaxRequest4SimpleParam(j,k),m=this;b.when(l).done(function(a){var b=new c.Model(a);b.set("paramCategory",e),b.set("paramStatus",f),b.set("paramAppName",i),b.set("groupId",d);var h=new g({model:b,queryString:m.queryString});m.downContentRegion.show(h),h.trigger("showPageInfo")})}else if("configGroupServiceUI"==a){var l=h.dealAjaxRequest4SimpleParam(j,k),m=this;b.when(l).done(function(a){var b=new c.Model(a);b.set("paramCategory",e),b.set("paramStatus",f),b.set("paramAppName",i),b.set("groupId",d);var g=new GroupServiceTabConfig({model:b,queryString:m.queryString});m.downContentRegion.show(g),g.trigger("showPageInfo")})}}});return j}),define("travsky/jcf/1.0.0/template/service/groupServiceMgrLayout.tpl",[],'<ul class="nav nav-tabs" id = "groupServiceMgrNav">\n	<li  <%if("showServiceMgrUI"==selectedPageUI){%> class = "active"<%}%>  ><a href="showServiceMgrUI">服务管理</a></li>\n</ul>\n<br/>\n<div id = "downContentRegion"></div>\n<input type = "hidden" id = "groupService4GroupIdHidden" value = "<%=groupId%>"/>'),define("travsky/jcf/1.0.0/view/service/groupServiceTabServiceMgr",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/service/serviceDetailLayout","travsky/jcf/1.0.0/view/service/AuthCheck4Service","travsky/jcf/1.0.0/view/service/ServiceOperHelper","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/confirm_view","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert","travsky/jcf/1.0.0/view/service/monitorService_view","travsky/jcf/1.0.0/view/service/groupServiceCfg","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/service/serviceGrayConfig_view","travsky/jcf/1.0.0/view/service/serviceDegradeConfig_view","travsky/jcf/1.0.0/view/service/respGroupMoni_view","my97Date","travsky/jcf/1.0.0/view/service/groupServiceChart_view","highcharts"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/service/groupServiceTabMgrLayout.tpl"),g=a("travsky/jcf/1.0.0/template/service/groupServiceItem.tpl"),h=a("travsky/jcf/1.0.0/template/service/groupServiceList.tpl"),i=a("travsky/jcf/1.0.0/util/CommonUtil"),j=a("travsky/jcf/1.0.0/view/pagebar_view2"),k=a("travsky/jcf/1.0.0/util/SidebarUtil"),l=a("querystring");a("bs-modal")(b);var m=a("travsky/jcf/1.0.0/view/service/serviceDetailLayout"),n=a("travsky/jcf/1.0.0/view/service/AuthCheck4Service"),o=a("travsky/jcf/1.0.0/model/listTip_model"),p=a("travsky/jcf/1.0.0/view/listTip_view"),q=a("travsky/jcf/1.0.0/view/service/ServiceOperHelper"),r=a("travsky/jcf/1.0.0/view/service/groupServiceCfg"),s=a("travsky/jcf/1.0.0/view/service/serviceGrayConfig_view"),t=a("travsky/jcf/1.0.0/view/service/serviceDegradeConfig_view"),u=e.ItemView.extend({initialize:function(){var a=n.getJcfStart4GroupFlag(),c=n.getJcfStop4GroupFlag(),d=n.getJcForceStop4GroupFlag(),e=n.getJcfSXQH4GroupFlag();this.model.set("authJcfStartFlag",a),this.model.set("authJcfStopFlag",c),this.model.set("authJcfForceStopFlag",d),this.model.set("authJcfSXQHFlag",e);var f=n.getSihStart4GroupFlag(),g=n.getSihStop4GroupFlag(),h=n.getSihForceStop4GroupFlag(),i=n.getSihSXQH4GroupFlag();this.model.set("authSihStartFlag",f),this.model.set("authSihStopFlag",g),this.model.set("authSihForceStopFlag",h),this.model.set("authSihSXQHFlag",i);var j=n.getHttpStart4GroupFlag(),k=n.getHttpStop4GroupFlag(),l=n.getHttpForceStop4GroupFlag(),m=n.getHttpSXQH4GroupFlag();this.model.set("authHttpStartFlag",j),this.model.set("authHttpStopFlag",k),this.model.set("authHttpForceStopFlag",l),this.model.set("authHttpSXQHFlag",m);var o=n.getWebStart4GroupFlag(),p=n.getWebStop4GroupFlag(),q=n.getWebForceStop4GroupFlag(),r=n.getWebSXQH4GroupFlag();this.model.set("authWebStartFlag",o),this.model.set("authWebStopFlag",p),this.model.set("authWebForceStopFlag",q),this.model.set("authWebSXQHFlag",r);var s=n.getTbStart4GroupFlag(),t=n.getTbStop4GroupFlag(),u=n.getTbForceStop4GroupFlag(),v=n.getTbSXQH4GroupFlag();this.model.set("authTbStartFlag",s),this.model.set("authTbStopFlag",t),this.model.set("authTbForceStopFlag",u),this.model.set("authTbSXQHFlag",v);var w=n.getTtStart4GroupFlag(),x=n.getTtStop4GroupFlag(),y=n.getTtForceStop4GroupFlag(),z=n.getTtSXQH4GroupFlag();this.model.set("authTtStartFlag",w),this.model.set("authTtStopFlag",x),this.model.set("authTtForceStopFlag",y),this.model.set("authTtSXQHFlag",z);var A=n.getUtlStart4GroupFlag(),B=n.getUtlStop4GroupFlag(),C=n.getUtlForceStop4GroupFlag(),D=n.getUtlSXQH4GroupFlag();this.model.set("authUtlStartFlag",A),this.model.set("authUtlStopFlag",B),this.model.set("authUtlForceStopFlag",C),this.model.set("authUtlSXQHFlag",D);var E=n.getSwitchDefaultVersionFlag();this.model.set("authSwitchDefaultVersionFlag",E),this.model.set("groupId",b("#hiddenGroupIdOnPage").val()),this.model.on("change",this.render)},tagName:"tr",template:d.template(g),events:{"click .serviceOperationTd a":"operServiceStatus","click .changeDomainBtn":"changeVisibly","click .serviceDetail":"toServiceDetailUI","click .GroupMoniView":"toGroupMoniViewUI","click .changeDefaultVersionTd button":"changeDefaultVersion","click a.serviceDegradeConfig":"serviceDegradeConfig","click a.openServiceDegradeConfig":"openServiceDegradeConfig","click a.closeServiceDegradeConfig":"closeServiceDegradeConfig","click a.serviceGrayConfig":"serviceGrayConfig","click a.openServiceGrayConfig":"openServiceGrayConfig","click a.closeServiceGrayConfig":"closeServiceGrayConfig","click .groupServiceCfgTd":"groupServiceCfg"},changeDefaultVersion:function(){var a=this,c=b("#freshPage4GroupServiceFlag").val();window.clearInterval(c);var d=this.model.get("isDefaultVersion"),e="",f="确定将应用从";"TRUE"==d?(e="FALSE",f+="默认版切换到非默认版?"):(e="TRUE",f+="非默认版切换到默认版?");var g=this.checkRegistryRun();if(g){var h=b.trim(b("#hiddenGroupIdOnPage").val()),j=this.model.get("serviceId"),k=this.model.get("isDefaultVersion"),l=this.model.get("appVersion"),m=this.model.get("serviceName"),n=this.model.get("grayEnable"),q={};if(q.groupId=h,q.serviceId=j,q.isDefaultVersion=k,q.currentVersion=l,q.serviceName=m,q.grayEnable=n,confirm(f)){var r="/"+jcfManager.appName+"/service/changeServiceDefaultVersion.action",s=i.dealAjaxRequest4JSObj(r,q);b.when(s).done(function(b){if("success"==b.msg)a.model.set("isDefaultVersion",e),a.model.set("grayEnable",b.grayEnable),a.model.set("grayConfig",b.grayConfig),a.trigger("parent:refreshPageDefaultVersion");else{var c=new o;c.set("errList",["切换失败!"]);var d=new p({model:c});jcfManager.tipInfoRegion.show(d)}})}}},checkRegistryRun:function(){var a=!1,c="/"+jcfManager.appName+"/deployMgr/checkRegistryStatus.action",d=i.dealSYNCHAjaxRequestWithoutParam(c);return b.when(d).done(function(b){if("true"==b.flag)if("1"==b.status)a=!0;else{var c=new o;c.set("errList",[""+b.errMsg]);var d=new p({model:c});jcfManager.tipInfoRegion.show(d)}else{var c=new o;c.set("errList",[""+b.errMsg]);var d=new p({model:c});jcfManager.tipInfoRegion.show(d)}}),a},toServiceDetailUI:function(a){a.preventDefault();var c=b("#freshPage4GroupServiceFlag").val();window.clearInterval(c);var d=this.model.get("groupId"),e=this.model.get("serviceId"),f={groupId:d,serviceId:e},g=k.getModuleName();appRouter.navigate(g+"/group/detail/param/"+l.stringify(f));var h=new m({queryString:f});jcfManager.contentRegion.show(h),h.trigger("showPageInfo")},toGroupMoniViewUI:function(c){c.stopPropagation(),c.preventDefault();var d=b("#freshPage4GroupServiceFlag").val();window.clearInterval(d);var e=a("travsky/jcf/1.0.0/view/service/respGroupMoni_view");this.model.set("checkGroupCategory","1"),jcfManager.dialogRegion.show(new e({model:this.model})),b("#queryGroupDataModal").modal("show")},operServiceStatus:function(a){a.stopPropagation(),a.preventDefault();var c=b("#freshPage4GroupServiceFlag").val();window.clearInterval(c);var d=b(a.target).attr("href"),e=new q,f="group";"stop"==d?e.stopService(this.model,f):"forceStop"==d?e.forceStopService(this.model,f):"start"==d&&e.startService(this.model,f)},changeVisibly:function(){var a=this,c=b("#freshPage4GroupServiceFlag").val();window.clearInterval(c);var d=this.checkRegistryRun();if(d){var e=a.model.get("serviceName"),f=!0,g="";1==this.model.get("serviceProperty")?(f=!1,g="0"):(f=!0,g="1");var h={serviceName:e,visibly:f},j="/"+jcfManager.appName+"/service/setServiceVisibly.action",k=i.dealAjaxRequest4SimpleParam(j,h);b.when(k).done(function(b){if("true"==b.flag)a.model.set("serviceProperty",g);else{var c=new o;c.set("errList",["切换失败"]);var d=new p({model:c});jcfManager.tipInfoRegion.show(d)}})}},groupServiceCfg:function(a){a.stopPropagation(),a.preventDefault(),k.getModuleName();var d="/"+jcfManager.appName+"/service/getGroupServiceConfig.action",e=this.model.get("groupId"),f=this.model.get("serviceId"),g=this.model.get("serviceCategory"),h=this.model.get("appName"),j=this.model.get("appVersion"),l=this.model.get("serviceName"),m={groupId:e,serviceId:f,serviceCategory:g,appName:h,appVersion:j,serviceName:l},n=i.dealAjaxRequest4SimpleParam(d,m),o=this;b.when(n).done(function(a){var d=a.errorFlag;if(""==d){var i=a.groupName,k=new c.Model(a);k.set({groupName:i,serviceId:f,groupId:e,appName:h,appVersion:j,serviceName:l,serviceCategory:g});var m=new r({model:k,preModel:o.model});jcfManager.dialogRegion.show(m),b("#groupServiceConfigModal").modal("show")}else alert(d)})},render:function(){return this.$el.html(this.template(this.model.attributes)),this},serviceDegradeConfig:function(a){a.stopPropagation(),a.preventDefault();var d=this.model.get("serviceId"),e=this.model.get("appVersion"),f=this.model.get("serviceName"),g=this.model.get("groupId"),h=this.model.get("serviceCategory"),j="/"+jcfManager.appName+"/service/getServiceDegradeConfig.action",k={serviceId:d,appVersion:e,serviceName:f,groupId:g,serviceCategory:h},l=i.dealAjaxRequest4SimpleParam(j,k);b.when(l).done(function(a){if(""==a.errorMsg){var i=new c.Model(a);i.set({serviceName:f,appVersion:e,serviceCategory:h,groupId:g,serviceId:d});var j=new t({model:i});jcfManager.dialogRegion.show(j),b("#degradeModal").modal("show")}else alert(a.errorMsg)})},serviceGrayConfig:function(a){a.stopPropagation(),a.preventDefault();var d=this.model.get("serviceId"),e=this.model.get("appVersion"),f=this.model.get("serviceName"),g=this.model.get("grayEnable"),h=this.model.get("groupId"),j="/"+jcfManager.appName+"/service/getServiceGrayConfig.action",k={serviceId:d},l=i.dealAjaxRequest4SimpleParam(j,k);b.when(l).done(function(a){var i=a.errorFlag;if(""==i){var j=new c.Model(a);j.set({groupId:h,serviceId:d,appVersion:e,serviceName:f,grayEnable:g});var k=new s({model:j});jcfManager.dialogRegion.show(k),b("#grayModal").modal("show")}else alert(i)})},openServiceDegradeConfig:function(){var a=this,c={groupId:this.model.get("groupId"),serviceName:this.model.get("serviceName"),appVersion:this.model.get("appVersion"),serviceCategory:this.model.get("serviceCategory"),serviceId:this.model.get("serviceId")},d="/"+jcfManager.appName+"/service/enableServiceDegrade.action",e=i.dealAjaxRequest4SimpleParam(d,c);b.when(e).done(function(b){b.flag?a.model.set("degradeEnable","true"):alert("开启失败")})},closeServiceDegradeConfig:function(){var a=this,c={groupId:a.model.get("groupId"),serviceName:a.model.get("serviceName"),appVersion:a.model.get("appVersion"),serviceCategory:a.model.get("serviceCategory"),serviceId:a.model.get("serviceId")},d="/"+jcfManager.appName+"/service/disableServiceDegrade.action",e=i.dealAjaxRequest4SimpleParam(d,c);b.when(e).done(function(b){b.flag?a.model.set("degradeEnable","false"):alert("关闭失败")})},openServiceGrayConfig:function(){var a=this,c={serviceId:a.model.get("serviceId"),serviceName:a.model.get("serviceName")},d="/"+jcfManager.appName+"/service/enableServiceGray.action",e=i.dealAjaxRequest4SimpleParam(d,c);b.when(e).done(function(b){b.flag?a.model.set("grayEnable","true"):alert("开启失败!"+b.errorMsg)})},closeServiceGrayConfig:function(){var a=this,c={serviceId:a.model.get("serviceId")},d="/"+jcfManager.appName+"/service/disableServiceGray.action",e=i.dealAjaxRequest4SimpleParam(d,c);b.when(e).done(function(b){b.flag?a.model.set("grayEnable","false"):alert("关闭失败")})}}),v=e.CompositeView.extend({initialize:function(){},template:d.template(h),tagName:"table",className:"table table-bordered",childView:u,childViewContainer:"tbody",childEvents:{"parent:refreshPageDefaultVersion":function(a){var b=a.model,c=b.get("serviceName"),d=b.get("appVersion"),e=b.get("isDefaultVersion");"TRUE"==e&&this.collection.each(function(a){a.get("serviceName")==c&&a.get("appVersion")!=d&&(a.set("isDefaultVersion","FALSE"),a.set("grayConfig","TRUE"))})}}}),w=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString,this.on("showPageInfo",this.showPageInfo),jcfManager.tipInfoRegion=this.tipInfoRegion},template:d.template(f),regions:{tipInfoRegion:"#tipInfoRegion",listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},events:{"click #searchGroupServiceBtn":"searchGroupService"},searchGroupService:function(){var a=b("#search4ServiceType").val(),c=b("#search4RuningStatus").val(),d=b("#search4AppName").val();this.queryString.currentPage="1",(void 0==this.queryString.pageSize||""==this.queryString.pageSize)&&(this.queryString.pageSize=jcfManager.defaultPageSize);var e={};e.currentPage=this.queryString.currentPage,e.pageSize=this.queryString.pageSize,e.groupId=this.queryString.groupId,e.category=a,e.status=c,e.appName=d;var f=k.getModuleName();appRouter.navigate(f+"/group/param/"+l.stringify(e)),this.showPageInfo2(e)},showPageInfo:function(){(void 0==this.queryString.currentPage||""==this.queryString.currentPage)&&(this.queryString.currentPage="1",this.queryString.pageSize=jcfManager.defaultPageSize);var a={};a.currentPage=this.queryString.currentPage,a.pageSize=this.queryString.pageSize,a.groupId=this.queryString.groupId,a.category=this.queryString.category,a.status=this.queryString.status,a.appName=this.queryString.appName,this.showPageInfo2(a)},showPageInfo2:function(a){var d=this,e=2e3,f=i.getFefreshPageNum(),g=e*f,h=window.location.hash;b("#freshPage4GroupServiceUrl").val(h);var k="/"+jcfManager.appName+"/service/searchGroupService.action",l=i.dealAjaxRequest4JSObj(k,a);b.when(l).done(function(a){var f=new c.Collection(a.recordList),h=new v({collection:f});d.listRegion.show(h);var i=new c.Model(a);i.set("uriSection","group");var k=new j({model:i,queryString:d.queryString});if(d.pagebarRegion.show(k),d.collection=f,f.length>0){var l=setInterval(d.updatePageServiceStatus,e,d);b("#freshPage4GroupServiceFlag").val(l),setTimeout("window.clearInterval("+l+")",g)}})},updatePageServiceStatus:function(a){var d=a.queryString.groupId,e=a.collection,f=window.location.hash,g=b("#freshPage4GroupServiceUrl").val(),h=b("#freshPage4GroupServiceFlag").val();if(g==f){var j={groupId:d},k="/"+jcfManager.appName+"/service/searchGroupServiceStatus.action",l=i.dealAjaxRequest4SimpleParam(k,j);b.when(l).done(function(a){var b=new c.Model(a);e.each(function(a){var c=a.get("serviceId"),d=b.get(""+c);void 0!=d&&a.set("serviceStatus",d)})})}else window.clearInterval(h)}});return w}),define("travsky/jcf/1.0.0/template/service/groupServiceTabMgrLayout.tpl",[],'<div id = "tipInfoRegion"></div>\n<div  id = "searchBarRegion">\n	<table class = "table">\n		<tr>\n			<td width = "8%">服务类型:</td>\n			<td width = "20%">\n				<select id = "search4ServiceType"  class  = "form-control input-sm">\n	         	 	<option value="" selected="selected">全部</option>\n	         	 	<%\n	         	 		for(var i = 0 ; i < categoryList.length ; i ++){\n	         	 			if(paramCategory==categoryList[i].key){\n	         	 				%><option selected = "selected" value="<%=categoryList[i].key%>"><%=categoryList[i].value%></option><%\n	         	 			}else{\n	         	 				%><option value="<%=categoryList[i].key%>"><%=categoryList[i].value%></option><%\n	         	 			}\n	         	 		}\n	         	 	%>\n         	 	</select>\n			</td>\n			<td width = "8%">运行状态:</td>\n			<td width = "20%">\n				<select id = "search4RuningStatus"  class  = "form-control input-sm">\n	         	 	<option value="" selected="selected">全部</option>\n	         	 	<%\n	         	 		for(var j = 0 ; j < statusList.length ; j ++){\n	         	 			if(paramStatus==statusList[j].key){\n	         	 			   %><option selected = "selected" value="<%=statusList[j].key%>"><%=statusList[j].value%></option><%\n	         	 			}else{\n	         	 			   %><option value="<%=statusList[j].key%>"><%=statusList[j].value%></option><%\n	         	 			}\n	         	 		}\n	         	 	%>\n         	 	</select>\n			</td>\n			<td width = "8%">应用列表:</td>\n			<td width = "20%">\n				<select id = "search4AppName"  class  = "form-control input-sm">\n	         	 	<option value="" selected="selected">全部</option>\n					<%\n	         	 		for(var k = 0 ; k < appNameList.length ; k ++){\n	         	 			if(paramAppName==appNameList[k]){\n	         	 				%><option selected = "selected" value="<%=appNameList[k]%>"><%=appNameList[k]%></option><%\n	         	 			}else{\n	         	 				%><option value="<%=appNameList[k]%>"><%=appNameList[k]%></option><%\n	         	 			}\n	         	 		}\n	         	 	%>\n         	 	</select>\n			</td>\n			<td width = "8%"><button id = "searchGroupServiceBtn"  class = "btn">查询</button></td>\n			<td width = "*%"></td>\n		</tr>\n	</table>\n</div>\n<div  id = "listRegion"></div>\n<div  id = "pagebarRegion"></div>\n<input id = "hiddenGroupIdOnPage" type = "hidden" value = "<%=groupId%>"/>\n<input id = "freshPage4GroupServiceFlag" type = "hidden" />\n<input id = "freshPage4GroupServiceUrl" type = "hidden" />\n'),define("travsky/jcf/1.0.0/template/service/groupServiceItem.tpl",[],'<td><%=appName%></td>\n<td><%=serviceName%></td>\n<td><%=serviceCategory%></td>\n<td><%=appVersion%></td>\n<%\n	if(serviceCategory=="BusinessService"){\n	%>\n		<td>\n			<%if(serviceProperty==1){\n				%>[域外]&nbsp;<button type="button" class="changeDomainBtn btn btn-success btn-xs <%if(authJcfSXQHFlag!="true"){%>disabled<%}%> ">切换</button><%\n			}else if(serviceProperty==0){\n				%>[域内]&nbsp;<button type="button"  class="changeDomainBtn btn btn-warning  btn-xs <%if(authJcfSXQHFlag!="true"){%>disabled<%}%> ">切换</button><%\n			}%>\n		</td>\n		<td class = "changeDefaultVersionTd" >\n			<%\n			 if(isDefaultVersion=="TRUE"){\n			%>[是]\n				<%if(authSwitchDefaultVersionFlag=="true"){\n					%>&nbsp;<button type="button"  class="btn btn-success btn-xs">切换</button><%\n				}\n			}else{\n			%>[否]\n				<%if(authSwitchDefaultVersionFlag=="true"){\n					%>&nbsp;<button type="button" class="btn btn-warning btn-xs">切换</button><%\n				}\n			 }\n			%>\n		</td>\n		<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				[启动]&nbsp;\n				<%if(authJcfStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authJcfForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				[停止]&nbsp;\n				<%if(authJcfStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>[启动中]<%\n			}else if(serviceStatus=="4"){\n			%>\n				[停止中]&nbsp;\n				<%if(authJcfForceStopFlag=="true"){\n					%><a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>[挂起]<%\n			}else if(serviceStatus=="6"){\n				%>[挂起中]<%\n			}else if(serviceStatus=="7"){\n				%>[未知]<%\n			}else if(serviceStatus=="8"){\n				%>[查询中]<%\n			}else if (serviceStatus=="9"){\n			%>\n				[服务停止，补偿服务运行]&nbsp;\n				<%if(authJcfStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n				<%if(authJcfStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authJcfForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				[服务运行，补偿服务停止]&nbsp;\n				<%if(authJcfStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authJcfForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else{\n				%>[未知]<%\n			}%>\n		</td>\n	<%}else if (serviceCategory=="sih"){%>\n		<td>\n			<%if(serviceProperty==1){\n			   %>[域外]<%\n			}else if(serviceProperty==0){\n			   %>[域内]<%\n			}%>\n		</td>\n		<td class = "changeDefaultVersionTd" >\n		 <span class = "text-info">不支持切换</span>\n		</td>\n		\n		<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				[启动]&nbsp;\n				<%if(authSihStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authSihForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				[停止]&nbsp;\n				<%if(authSihStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>[启动中]<%\n			}else if(serviceStatus=="4"){\n			%>\n				[停止中]&nbsp;\n				<%if(authSihForceStopFlag=="true"){\n					%><a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>[挂起]<%\n			}else if(serviceStatus=="6"){\n				%>[挂起中]<%\n			}else if(serviceStatus=="7"){\n				%>[未知]<%\n			}else if(serviceStatus=="8"){\n				%>[查询中]<%\n			}else if (serviceStatus=="9"){\n			%>\n				[服务停止，补偿服务运行]&nbsp;\n				<%if(authSihStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n				<%if(authSihStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authSihForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				[服务运行，补偿服务停止]&nbsp;\n				<%if(authSihStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authSihForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else{\n				%>[未知]<%\n			}%>\n		</td>\n	<%\n	}else if (serviceCategory=="http"){\n	%>\n		<td>\n			<%if(serviceProperty==1){\n			   %>[域外]<%\n			}else if(serviceProperty==0){\n			   %>[域内]<%\n			}%>\n		</td>\n		<td class = "changeDefaultVersionTd" >\n		 <span class = "text-info">不支持切换</span>\n		</td>\n		\n		\n		<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				[启动]&nbsp;\n				<%if(authHttpStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authHttpForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				[停止]&nbsp;\n				<%if(authHttpStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>[启动中]<%\n			}else if(serviceStatus=="4"){\n			%>\n				[停止中]&nbsp;\n				<%if(authHttpForceStopFlag=="true"){\n					%><a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>[挂起]<%\n			}else if(serviceStatus=="6"){\n				%>[挂起中]<%\n			}else if(serviceStatus=="7"){\n				%>[未知]<%\n			}else if(serviceStatus=="8"){\n				%>[查询中]<%\n			}else if (serviceStatus=="9"){\n			%>\n				[服务停止，补偿服务运行]&nbsp;\n				<%if(authHttpStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n				<%if(authHttpStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authHttpForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				[服务运行，补偿服务停止]&nbsp;\n				<%if(authHttpStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authHttpForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else{\n				%>[未知]<%\n			}%>\n		</td>\n	<%\n	}else if (serviceCategory=="webservice"){\n	%>\n		<td>\n			<%if(serviceProperty==1){\n			   %>[域外]<%\n			}else if(serviceProperty==0){\n			   %>[域内]<%\n			}%>\n		</td>\n		<td class = "changeDefaultVersionTd" >\n		<span class = "text-info">不支持切换</span>\n		</td>\n		\n		<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				[启动]&nbsp;\n				<%if(authWebStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authWebForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				[停止]&nbsp;\n				<%if(authWebStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>[启动中]<%\n			}else if(serviceStatus=="4"){\n			%>\n				[停止中]&nbsp;\n				<%if(authWebForceStopFlag=="true"){\n					%><a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>[挂起]<%\n			}else if(serviceStatus=="6"){\n				%>[挂起中]<%\n			}else if(serviceStatus=="7"){\n				%>[未知]<%\n			}else if(serviceStatus=="8"){\n				%>[查询中]<%\n			}else if (serviceStatus=="9"){\n			%>\n				[服务停止，补偿服务运行]&nbsp;\n				<%if(authWebStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n				<%if(authWebStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authWebForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				[服务运行，补偿服务停止]&nbsp;\n				<%if(authWebStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authWebForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else{\n				%>[未知]<%\n			}%>\n		</td>\n	<%\n	}else if (serviceCategory=="tumsb"){\n	%>\n		<td>\n			<%if(serviceProperty==1){\n			   %>[域外]<%\n			}else if(serviceProperty==0){\n			   %>[域内]<%\n			}%>\n		</td>\n		<td class = "changeDefaultVersionTd" >\n		<span class = "text-info">不支持切换</span>\n		</td>\n		\n		<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				[启动]&nbsp;\n				<%if(authTbStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authTbForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				[停止]&nbsp;\n				<%if(authTbStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>[启动中]<%\n			}else if(serviceStatus=="4"){\n			%>\n				[停止中]&nbsp;\n				<%if(authTbForceStopFlag=="true"){\n					%><a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>[挂起]<%\n			}else if(serviceStatus=="6"){\n				%>[挂起中]<%\n			}else if(serviceStatus=="7"){\n				%>[未知]<%\n			}else if(serviceStatus=="8"){\n				%>[查询中]<%\n			}else if (serviceStatus=="9"){\n			%>\n				[服务停止，补偿服务运行]&nbsp;\n				<%if(authTbStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n				<%if(authTbStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authTbForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				[服务运行，补偿服务停止]&nbsp;\n				<%if(authTbStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authTbForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else{\n				%>[未知]<%\n			}%>\n		</td>\n	<%\n	}else if (serviceCategory=="tumst"){\n	%>\n		<td>\n			<%if(serviceProperty==1){\n			   %>[域外]<%\n			}else if(serviceProperty==0){\n			   %>[域内]<%\n			}%>\n		</td>\n		<td class = "changeDefaultVersionTd" >\n		<span class = "text-info">不支持切换</span>\n		</td>\n		\n		\n		<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				[启动]&nbsp;\n				<%if(authTtStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authTtForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				[停止]&nbsp;\n				<%if(authTtStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>[启动中]<%\n			}else if(serviceStatus=="4"){\n			%>\n				[停止中]&nbsp;\n				<%if(authTtForceStopFlag=="true"){\n					%><a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>[挂起]<%\n			}else if(serviceStatus=="6"){\n				%>[挂起中]<%\n			}else if(serviceStatus=="7"){\n				%>[未知]<%\n			}else if(serviceStatus=="8"){\n				%>[查询中]<%\n			}else if (serviceStatus=="9"){\n			%>\n				[服务停止，补偿服务运行]&nbsp;\n				<%if(authTtStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n				<%if(authTtStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authTtForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				[服务运行，补偿服务停止]&nbsp;\n				<%if(authTtStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authTtForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else{\n				%>[未知]<%\n			}%>\n		</td>\n	<%\n	}else if (serviceCategory=="utl"){\n	%>\n		<td>\n			<%if(serviceProperty==1){\n			   %>[域外]<%\n			}else if(serviceProperty==0){\n			   %>[域内]<%\n			}%>\n		</td>\n		<td class = "changeDefaultVersionTd" >\n		<span class = "text-info">不支持切换</span>\n		</td>\n		\n		<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				[启动]&nbsp;\n				<%if(authUtlStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authUtlForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				[停止]&nbsp;\n				<%if(authUtlStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>[启动中]<%\n			}else if(serviceStatus=="4"){\n			%>\n				[停止中]&nbsp;\n				<%if(authUtlForceStopFlag=="true"){\n					%><a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>[挂起]<%\n			}else if(serviceStatus=="6"){\n				%>[挂起中]<%\n			}else if(serviceStatus=="7"){\n				%>[未知]<%\n			}else if(serviceStatus=="8"){\n				%>[查询中]<%\n			}else if (serviceStatus=="9"){\n			%>\n				[服务停止，补偿服务运行]&nbsp;\n				<%if(authUtlStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}%>\n				<%if(authUtlStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authUtlForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				[服务运行，补偿服务停止]&nbsp;\n				<%if(authUtlStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}%>\n				<%if(authUtlForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强停</a><%\n				}%>\n			<%\n			}else{\n				%>[未知]<%\n			}%>\n		</td>\n	<%\n	}\n%>\n\n\n<td class="degradeConfig">\n\n <% if(serviceCategory == "BusinessService" && messageMode =="request_response" ){ %>\n	<%\n	   if ((degradeConfig == "false" || degradeConfig == "FALSE") && (degradeEnable == "false" || degradeEnable == "FALSE")){\n	%>\n	   <a href="javascript:void(0);" class="serviceDegradeConfig">配置</a>\n	<%\n	}else if ((degradeConfig == "true" || degradeConfig == "TRUE") && (degradeEnable == "false" || degradeEnable == "FALSE")){\n	%>\n		关闭 &nbsp;&nbsp;&nbsp; <a href="serviceDegradeConfig" class="serviceDegradeConfig">配置</a>\n		||\n		<a href="javascript:void(0);" class="openServiceDegradeConfig">开启</a>\n	<%\n	}\n	   else if (degradeConfig == "true" && degradeEnable == "true"){\n	%>\n		开启 &nbsp;&nbsp;&nbsp; <a href="serviceDegradeConfig" class="serviceDegradeConfig">配置</a>\n		||\n		<a href="javascript:void(0);" class="closeServiceDegradeConfig">关闭</a>\n	<%\n	}else if ((degradeConfig == "false" || degradeConfig == "FALSE") && degradeEnable == "true"){\n	%>\n		开启 &nbsp;&nbsp;&nbsp; <a href="javascript:void(0);" class="serviceDegradeConfig">配置</a>\n		||\n		<a href="javascript:void(0);" class="closeServiceDegradeConfig">关闭</a>\n	<%\n	}\n	}else{ %>\n       <span >不支持 </span>\n	<% } %>\n</td>\n\n<td>\n    <% if(isDefaultVersion == "TRUE" ||  isDefaultVersion=="true" || grayConfig== "false" || grayConfig == "FALSE") { %>\n       <span >不支持 </span>\n     <% }\n    else {\n		if(grayEnable=="TRUE" || grayEnable =="true"){ %>\n		   开启 &nbsp;&nbsp;&nbsp;<a href="javascript:void(0);" class="serviceGrayConfig">配置</a>\n			||\n			<a href="javascript:void(0);" class="closeServiceGrayConfig" >关闭</a>\n	<%	}else if(grayEnable=="FALSE" || grayEnable =="false"){ %>\n		  关闭 &nbsp;&nbsp;&nbsp;  <a href="javascript:void(0);" class="serviceGrayConfig">配置</a>\n			||\n			<a href="javascript:void(0);" class="openServiceGrayConfig" >开启</a>\n	<%	}\n    }%>\n</td>\n\n<td class="groupServiceCfgTd"> <a class = "myhand">组配置</a></td>\n<td><a class = "myhand serviceDetail">详情</a></td>\n<td><a class = "myhand GroupMoniView">查看</a></td>\n\n'),define("travsky/jcf/1.0.0/template/service/groupServiceList.tpl",[],"<thead>\n  <tr>\n   	<th>应用名称</th>\n  	<th>服务名称</th>\n    <th>类型</th>\n    <th>版本</th>\n    <th>属性</th>\n    <th>默认版</th>\n    <th>状态</th>\n    <th>降级</th>\n    <th>灰度</th>\n    <th>组配置</th>\n     <th>详情</th>\n     <th>度量数据</th>\n  </tr>\n</thead>\n<tbody>\n</tbody>\n"),define("travsky/jcf/1.0.0/view/service/serviceDetailLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/service/AuthCheck4Service","travsky/jcf/1.0.0/view/service/ServiceOperHelper","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/confirm_view","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert","travsky/jcf/1.0.0/view/service/monitorService_view"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/service/serviceDetailLayout.tpl"),g=a("travsky/jcf/1.0.0/template/service/serviceDetailBaseInfo.tpl"),h=a("travsky/jcf/1.0.0/template/service/serviceDetailItem.tpl"),i=a("travsky/jcf/1.0.0/template/service/serviceDetailList.tpl"),j=a("travsky/jcf/1.0.0/util/CommonUtil"),k=a("travsky/jcf/1.0.0/view/pagebar_view2"),l=a("travsky/jcf/1.0.0/util/SidebarUtil"),m=a("querystring"),n=a("travsky/jcf/1.0.0/view/service/AuthCheck4Service"),o=a("travsky/jcf/1.0.0/view/service/ServiceOperHelper"),p=e.ItemView.extend({template:d.template(g),tagName:"table",className:"table table-bordered"}),q=e.ItemView.extend({initialize:function(){var a=n.getJcfStart4GroupFlag(),b=n.getJcfStop4GroupFlag(),c=n.getJcForceStop4GroupFlag(),d=n.getJcfMoni4ServerFlag();
this.model.set("authJcfStartFlag",a),this.model.set("authJcfStopFlag",b),this.model.set("authJcfForceStopFlag",c),this.model.set("authJcfMoniFlag",d);var e=n.getSihStart4GroupFlag(),f=n.getSihStop4GroupFlag(),g=n.getSihForceStop4GroupFlag(),h=n.getSihMoni4ServerFlag();this.model.set("authSihStartFlag",e),this.model.set("authSihStopFlag",f),this.model.set("authSihForceStopFlag",g),this.model.set("authSihMoniFlag",h);var i=n.getHttpStart4GroupFlag(),j=n.getHttpStop4GroupFlag(),k=n.getHttpForceStop4GroupFlag(),l=n.getHttpMoni4ServerFlag();this.model.set("authHttpStartFlag",i),this.model.set("authHttpStopFlag",j),this.model.set("authHttpForceStopFlag",k),this.model.set("authHttpMoniFlag",l);var m=n.getWebStart4GroupFlag(),o=n.getWebStop4GroupFlag(),p=n.getWebForceStop4GroupFlag(),q=n.getWebMoni4ServerFlag();this.model.set("authWebStartFlag",m),this.model.set("authWebStopFlag",o),this.model.set("authWebForceStopFlag",p),this.model.set("authWebMoniFlag",q);var r=n.getTbStart4GroupFlag(),s=n.getTbStop4GroupFlag(),t=n.getTbForceStop4GroupFlag(),u=n.getTbMoni4ServerFlag();this.model.set("authTbStartFlag",r),this.model.set("authTbStopFlag",s),this.model.set("authTbForceStopFlag",t),this.model.set("authTbMoniFlag",u);var v=n.getTtStart4GroupFlag(),w=n.getTtStop4GroupFlag(),x=n.getTtForceStop4GroupFlag(),y=n.getTtMoni4ServerFlag();this.model.set("authTtStartFlag",v),this.model.set("authTtStopFlag",w),this.model.set("authTtForceStopFlag",x),this.model.set("authTtMoniFlag",y);var z=n.getUtlStart4GroupFlag(),A=n.getUtlStop4GroupFlag(),B=n.getUtlForceStop4GroupFlag(),C=n.getUtlMoni4ServerFlag();this.model.set("authUtlStartFlag",z),this.model.set("authUtlStopFlag",A),this.model.set("authUtlForceStopFlag",B),this.model.set("authUtlMoniFlag",C);var D=n.getJcfCfg4GroupFlag(),E=n.getSihCfg4GroupFlag(),F=n.getHttpCfg4GroupFlag(),G=n.getWebCfg4GroupFlag(),H=n.getTbCfg4GroupFlag(),I=n.getTtCfg4GroupFlag(),J=n.getUtlCfg4GroupFlag();this.model.set("authJcfCfgFlag",D),this.model.set("authSihCfgFlag",E),this.model.set("authHttpCfgFlag",F),this.model.set("authWebCfgFlag",G),this.model.set("authTbCfgFlag",H),this.model.set("authTtCfgFlag",I),this.model.set("authUtlCfgFlag",J),this.listenTo(this.model,"change",this.render)},template:d.template(h),tagName:"tr",events:{"click .serviceStatusOperTd a":"operServiceStatus","click .serviceCfgTd a":"toServerServiceCfgUI","click .showCompensate div":"toggleCompensate","click .serviceMonitorTd a":"serviceMonitor"},toggleCompensate:function(a){var c=b(a.target),d=this.model.get("serverName"),e=c.parent("td").parent("tr");c.hasClass("arrow_down")?(c.removeClass("arrow_down"),c.addClass("arrow_right"),e.siblings("."+d).remove()):(c.removeClass("arrow_right"),c.addClass("arrow_down"),e.siblings("."+d).remove(),this.dealCompensateDataOnPage(e,d))},dealCompensateDataOnPage:function(a,c){var d="~compensate~",e=d+this.model.get("serviceName"),f="/"+jcfManager.appName+"/service/getServerCompansateService.action",g=this.model.get("serverId"),h=e,i=this.model.get("appVersion"),k={serverId:g,serviceName:h,version:i},l=j.dealAjaxRequest4SimpleParam(f,k),m=this;b.when(l).done(function(b){if(null!=b){var d=m.convertServiceStatus(b.serviceStatus),e="<tr class = '"+c+"'>"+"<td>补偿服务</td>"+"<td>"+b.serverName+"</td>"+"<td>"+b.serviceName+"</td>"+"<td>"+b.serviceCategory+"</td>"+"<td>"+d+"</td>"+"<td>----</td>"+"<td>----</td>"+"<td>----</td>"+"</tr>";a.after(e)}})},serviceMonitor:function(d){d.preventDefault();var e=b("#freshPage4DetailServiceFlag").val();window.clearInterval(e);var f=a("travsky/jcf/1.0.0/view/service/monitorService_view"),g="/"+jcfManager.appName+"/service/monitorService.action",h=this.model.get("serverId"),i=this.model.get("serviceId"),k={serverId:h,serviceId:i};appRouter.navigate("serviceMgr/server/monitor/param/"+m.stringify(k));var l=j.dealAjaxRequest4SimpleParam(g,k);b.when(l).done(function(a){if(void 0!=a.errorFlag&&a.errorFlag.length>0)alert(a.errorFlag);else{var b=new c.Model(a),d=a.configInfo.version||"",e=a.configInfo.name||"",g=a.configInfo.requestQueueSize||"";b.set("version",d),b.set("serviceName",e),b.set("requestQueueSize",g);var j={serverId:h,serviceId:i},k=new f({model:b,queryString:j});jcfManager.contentRegion.show(k)}})},convertServiceStatus:function(a){var b=a;return"1"===a?b="启动":"2"===a?b="停止":"3"===a?b="启动中":"4"===a?b="停止中":"5"===a?b="挂起":"6"===a?b="挂起中":"7"===a?b="未知":"8"===a&&(b=""),b},toServerServiceCfgUI:function(a){a.preventDefault();var c=b("#freshPage4DetailServiceFlag").val();window.clearInterval(c);var d=l.getModuleName(),e=this.model.get("serverId"),f=this.model.get("serviceId"),g={serverId:e,serviceId:f};appRouter.navigate(d+"/server/cfg/param/"+m.stringify(g),{trigger:!0})},operServiceStatus:function(a){a.preventDefault();var c="server",d=new o,e=b("#freshPage4DetailServiceFlag").val();window.clearInterval(e);var f=this.model.get("serverName"),g=b(a.target).parent("td").parent("tr"),h=g.find("td.showCompensate div");h.hasClass("arrow_down")&&(h.removeClass("arrow_down"),h.addClass("arrow_right"),g.siblings("."+f).remove());var i=b(a.target).attr("href"),e=b("#freshPage4ServerServiceFlag").val();window.clearInterval(e),"stop"==i?d.stopService(this.model,c):"forceStop"==i?d.forceStopService(this.model,c):"start"==i&&d.startService(this.model,c)},render:function(){return this.$el.html(this.template(this.model.attributes)),this}}),r=e.CompositeView.extend({initialize:function(){},template:d.template(i),tagName:"table",className:"table table-bordered",childView:q,childViewContainer:"tbody"}),s=e.LayoutView.extend({template:d.template(f),initialize:function(a){this.queryString=a.queryString,this.on("showPageInfo",this.showPageInfo),jcfManager.tipInfoRegion=this.tipInfoRegion},regions:{baseRegion:"#baseRegion",tipInfoRegion:"#tipInfoRegion",listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},events:{"click #bacBtn":"bac"},bac:function(){window.history.back()},showPageInfo:function(){var a=this,d="/"+jcfManager.appName+"/service/findServiceById4Group.action",e=this.queryString.serviceId,f=this.queryString.groupId,g=this.queryString.currentPage;void 0==g&&(this.queryString.currentPage="1",this.queryString.pageSize=jcfManager.defaultPageSize);var h={};h.serviceId=e,h.groupId=f,h.currentPage=this.queryString.currentPage,h.pageSize=this.queryString.pageSize;var i=j.dealAjaxRequest4JSObj(d,h),l=window.location.hash;b("#freshPage4DetailServiceUrl").val(l);var m=2e3,n=j.getFefreshPageNum(),o=m*n;b.when(i).done(function(d){var e=new c.Model(d.baseInfo),f=new p({model:e});a.baseRegion.show(f);var g=new c.Collection(d.pageBean.recordList),h=new r({collection:g});a.listRegion.show(h);var i=new c.Model(d.pageBean);i.set("uriSection","group/detail");var j=new k({model:i,queryString:a.queryString});if(a.pagebarRegion.show(j),g.length>0){var l=setInterval(a.updatePageServiceStatus,m,g);b("#freshPage4DetailServiceFlag").val(l),setTimeout("window.clearInterval("+l+")",o)}})},updatePageServiceStatus:function(a){var d=window.location.hash,e=b("#freshPage4DetailServiceUrl").val(),f=b("#freshPage4DetailServiceFlag").val();if(e==d){var g="/"+jcfManager.appName+"/service/updateStatus4Group.action",h=j.dealAjaxRequestWithoutParam(g);b.when(h).done(function(b){var d=new c.Model(b);a.each(function(a){var b=a.get("serverId"),c=d.get(b+"");void 0!=c&&a.set("serviceStatus",c)})})}else window.clearInterval(f)}});return s}),define("travsky/jcf/1.0.0/template/service/serviceDetailLayout.tpl",[],'<div id = "baseRegion"></div>\n<div id = "tipInfoRegion"></div>\n<div  id = "listRegion"></div>\n<div id = "pagebarRegion"></div>\n<input type = "hidden" id = "freshPage4DetailServiceUrl" />\n<input type = "hidden" id = "freshPage4DetailServiceFlag" />\n<button class="btn btn-primary" id="bacBtn" type="button">返回</button>'),define("travsky/jcf/1.0.0/template/service/serviceDetailBaseInfo.tpl",[],"<caption>服务基本信息</caption>\n<thead>\n	<tr>\n		<th>所属分组</th>\n		<th>当前版本</th>\n		<th>应用包</th>\n	</tr>\n</thead>\n<tbody>\n	<tr>\n		<td><%=groupName%></td>\n		<td><%=appVersion%></td>\n		<td><%=appName%></td>\n	</tr>\n</tbody>\n"),define("travsky/jcf/1.0.0/template/service/serviceDetailItem.tpl",[],'<%if(hasCompensateService=="1"){//表示有补偿服务\n  %><td class = "showCompensate"><div class = "arrow_rigth myhand">&nbsp;</div></td><%	\n}else{\n  %><td>无补偿服务</td><%	\n}%>\n<td><%=serverName%></td>\n<td><%=serviceName%></td>\n<td><%=serviceCategory%></td>\n<td>\n	<%\n		if(serviceStatus=="1"){\n		   %>启动<%\n		}else if (serviceStatus=="2"){\n		   %>停止<%\n		}else if (serviceStatus=="3"){\n		   %>启动中...<%\n		}else if (serviceStatus=="4"){\n		   %>停止中...<%\n		}else if (serviceStatus=="5"){\n		   %>挂起<%\n		}else if (serviceStatus=="6"){\n		   %>挂起中...<%\n		}else if (serviceStatus=="7"){\n		   %>异常<%\n		}else if (serviceStatus=="8"){\n		   %>查询中...<%\n		}else if (serviceStatus=="9"){\n		   %>停止,补偿流程还未停止<%\n		}else if (serviceStatus=="10"){\n		   %>服务运行，补偿流程停止<%\n		}else if (serviceStatus=="21"){\n		   %>服务器状态：启动<%\n		}else if (serviceStatus=="22"){\n		   %>服务器状态：停止<%\n		}else if (serviceStatus=="23"){\n		   %>服务器状态：启动中<%\n		}else if (serviceStatus=="24"){\n		   %>服务器状态：停止中<%\n		}else if (serviceStatus=="25"){\n		   %>服务器状态：服务器异常<%\n		}else if (serviceStatus=="26"){\n		   %>服务器状态：Down<%\n		}else if (serviceStatus=="27"){\n		   %>服务器状态：查询中<%\n		}else if (serviceStatus=="28"){\n		   %>服务器状态：连接异常<%\n		}\n	%>\n</td>\n\n\n<%if(serviceCategory=="BusinessService"){\n%>\n	<td class = "serviceStatusOperTd">\n		<%\n			if(serviceStatus=="1"){%>\n				<%if(authJcfStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authJcfForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="2"){%>\n				<%if(authJcfStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="3"){\n			  %>启动/停止<%\n			}else if (serviceStatus=="4"){%>\n				<%if(authJcfForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="5"){\n			  %>未知<%\n			}else if (serviceStatus=="6"){\n			  %>未知<%\n			}else if (serviceStatus=="7"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="8"){\n			  %>无操作<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authJcfStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n				<%if(authJcfStopFlag=="true"){\n					%><a href = "stop" class = "myhand">|停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authJcfForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">|强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authJcfStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authJcfForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="21"){%>\n				<%if(authJcfStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="22"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="23"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="24"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="25"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="26"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="27"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="28"){\n			  %>&nbsp;<%\n			}\n		%>\n	</td>\n	<td class = "serviceCfgTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="2"||serviceStatus=="9"||serviceStatus=="10")&&authJcfCfgFlag=="true"){%>\n			<a  href = "#" class = "myhand">配置</a>\n		<%}else{%>\n			<span class = "text-info">配置</span>\n		<%}%>\n	</td>\n	<td class = "serviceMonitorTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="10")&&authJcfMoniFlag=="true"){%>\n			  <a  href = "#" class = "myhand">查看</a><%\n		}else{%>\n			 <span class = "text-info"> 查看</span>\n		<%}%>\n	</td>\n<%\n}else if (serviceCategory=="sih"){\n%>\n	<td class = "serviceStatusOperTd">\n		<%\n			if(serviceStatus=="1"){%>\n				<%if(authSihStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authSihForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="2"){%>\n				<%if(authSihStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="3"){\n			  %>启动/停止<%\n			}else if (serviceStatus=="4"){%>\n				<%if(authSihForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="5"){\n			  %>未知<%\n			}else if (serviceStatus=="6"){\n			  %>未知<%\n			}else if (serviceStatus=="7"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="8"){\n			  %>无操作<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authSihStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n				<%if(authSihStopFlag=="true"){\n					%><a href = "stop" class = "myhand">|停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authSihForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">|强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authSihStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authSihForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="21"){%>\n				<%if(authSihStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="22"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="23"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="24"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="25"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="26"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="27"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="28"){\n			  %>&nbsp;<%\n			}\n		%>\n	</td>\n	<td class = "serviceCfgTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="2"||serviceStatus=="9"||serviceStatus=="10")&&authSihCfgFlag=="true"){%>\n			 <a  href = "#" class = "myhand">配置</a>\n		<%}else{%>\n			<span class = "text-info"> 配置</span>\n		<%}%>\n	</td>\n	<td class = "serviceMonitorTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="10")&&authSihMoniFlag=="true"){%>\n			  <a  href = "#" class = "myhand">查看</a><%\n		}else{%>\n			 <span class = "text-info"> 查看</span>\n		<%}%>\n	</td>\n<%\n}else if (serviceCategory=="http"){\n%>\n	<td class = "serviceStatusOperTd">\n		<%\n			if(serviceStatus=="1"){%>\n				<%if(authHttpStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authHttpForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="2"){%>\n				<%if(authHttpStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="3"){\n			  %>启动/停止<%\n			}else if (serviceStatus=="4"){%>\n				<%if(authHttpForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="5"){\n			  %>未知<%\n			}else if (serviceStatus=="6"){\n			  %>未知<%\n			}else if (serviceStatus=="7"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="8"){\n			  %>无操作<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authHttpStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n				<%if(authHttpStopFlag=="true"){\n					%><a href = "stop" class = "myhand">|停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authHttpForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">|强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authHttpStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authHttpForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="21"){%>\n				<%if(authHttpStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="22"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="23"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="24"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="25"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="26"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="27"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="28"){\n			  %>&nbsp;<%\n			}\n		%>\n	</td>\n	<td class = "serviceCfgTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="2"||serviceStatus=="9"||serviceStatus=="10")&&authHttpCfgFlag=="true"){%>\n			 <a  href = "#" class = "myhand">配置</a>\n		<%}else{%>\n			<span class = "text-info"> 配置</span>\n		<%}%>\n	</td>\n	<td class = "serviceMonitorTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="10")&&authHttpMoniFlag=="true"){%>\n			  <a  href = "#" class = "myhand">查看</a><%\n		}else{%>\n			 <span class = "text-info"> 查看</span>\n		<%}%>\n	</td>\n<%\n}else if (serviceCategory=="webservice"){\n%>\n	<td class = "serviceStatusOperTd">\n		<%\n			if(serviceStatus=="1"){%>\n				<%if(authWebStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authWebForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="2"){%>\n				<%if(authWebStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="3"){\n			  %>启动/停止<%\n			}else if (serviceStatus=="4"){%>\n				<%if(authWebForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="5"){\n			  %>未知<%\n			}else if (serviceStatus=="6"){\n			  %>未知<%\n			}else if (serviceStatus=="7"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="8"){\n			  %>无操作<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authWebStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n				<%if(authWebStopFlag=="true"){\n					%><a href = "stop" class = "myhand">|停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authWebForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">|强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authWebStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authWebForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="21"){%>\n				<%if(authWebStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="22"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="23"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="24"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="25"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="26"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="27"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="28"){\n			  %>&nbsp;<%\n			}\n		%>\n	</td>\n	<td class = "serviceCfgTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="2"||serviceStatus=="9"||serviceStatus=="10")&&authWebCfgFlag=="true"){%>\n			 <a  href = "#" class = "myhand">配置</a>\n		<%}else{%>\n			<span class = "text-info"> 配置</span>\n		<%}%>\n	</td>\n	<td class = "serviceMonitorTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="10")&&authWebMoniFlag=="true"){%>\n			  <a  href = "#" class = "myhand">查看</a><%\n		}else{%>\n			 <span class = "text-info"> 查看</span>\n		<%}%>\n	</td>\n<%\n}else if (serviceCategory=="tumsb"){\n%>\n	<td class = "serviceStatusOperTd">\n		<%\n			if(serviceStatus=="1"){%>\n				<%if(authTbStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authTbForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="2"){%>\n				<%if(authTbStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="3"){\n			  %>启动/停止<%\n			}else if (serviceStatus=="4"){%>\n				<%if(authTbForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="5"){\n			  %>未知<%\n			}else if (serviceStatus=="6"){\n			  %>未知<%\n			}else if (serviceStatus=="7"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="8"){\n			  %>无操作<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authTbStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n				<%if(authTbStopFlag=="true"){\n					%><a href = "stop" class = "myhand">|停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authTbForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">|强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authTbStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authTbForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="21"){%>\n				<%if(authTbStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="22"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="23"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="24"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="25"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="26"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="27"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="28"){\n			  %>&nbsp;<%\n			}\n		%>\n	</td>\n	<td class = "serviceCfgTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="2"||serviceStatus=="9"||serviceStatus=="10")&&authTbCfgFlag=="true"){%>\n			 <a  href = "#" class = "myhand">配置</a>\n		<%}else{%>\n			<span class = "text-info"> 配置</span>\n		<%}%>\n	</td>\n	<td class = "serviceMonitorTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="10")&&authTbMoniFlag=="true"){%>\n			  <a  href = "#" class = "myhand">查看</a><%\n		}else{%>\n			 <span class = "text-info"> 查看</span>\n		<%}%>\n	</td>\n<%\n}else if (serviceCategory=="tumst"){\n%>\n	<td class = "serviceStatusOperTd">\n		<%\n			if(serviceStatus=="1"){%>\n				<%if(authTtStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authTtForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="2"){%>\n				<%if(authTtStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="3"){\n			  %>启动/停止<%\n			}else if (serviceStatus=="4"){%>\n				<%if(authTtForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="5"){\n			  %>未知<%\n			}else if (serviceStatus=="6"){\n			  %>未知<%\n			}else if (serviceStatus=="7"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="8"){\n			  %>无操作<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authTtStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n				<%if(authTtStopFlag=="true"){\n					%><a href = "stop" class = "myhand">|停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authTtForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">|强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authTtStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authTtForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="21"){%>\n				<%if(authTtStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="22"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="23"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="24"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="25"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="26"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="27"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="28"){\n			  %>&nbsp;<%\n			}\n		%>\n	</td>\n	<td class = "serviceCfgTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="2"||serviceStatus=="9"||serviceStatus=="10")&&authTtCfgFlag=="true"){%>\n			 <a  href = "#" class = "myhand">配置</a>\n		<%}else{%>\n			<span class = "text-info"> 配置</span>\n		<%}%>\n	</td>\n	<td class = "serviceMonitorTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="10")&&authTtMoniFlag=="true"){%>\n			  <a  href = "#" class = "myhand">查看</a><%\n		}else{%>\n			 <span class = "text-info"> 查看</span>\n		<%}%>\n	</td>\n<%\n}else if (serviceCategory=="utl"){\n%>\n	<td class = "serviceStatusOperTd">\n		<%\n			if(serviceStatus=="1"){%>\n				<%if(authUtlStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authUtlForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="2"){%>\n				<%if(authUtlStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="3"){\n			  %>启动/停止<%\n			}else if (serviceStatus=="4"){%>\n				<%if(authUtlForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%}else if (serviceStatus=="5"){\n			  %>未知<%\n			}else if (serviceStatus=="6"){\n			  %>未知<%\n			}else if (serviceStatus=="7"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="8"){\n			  %>无操作<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authUtlStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n				<%if(authUtlStopFlag=="true"){\n					%><a href = "stop" class = "myhand">|停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authUtlForceStopFlag=="true"){\n			  		%><a href = "forceStop" class = "myhand">|强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authUtlStopFlag=="true"){\n					%><a href = "stop" class = "myhand">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n			  	<%if(authUtlForceStopFlag=="true"){\n			  		%>|<a href = "forceStop" class = "myhand">强制停止</a><%\n			  	}else{\n			  		%><span class = "text-info">强制停止</span><%\n			  	}%>	\n			<%\n			}else if (serviceStatus=="21"){%>\n				<%if(authUtlStartFlag=="true"){\n					%><a href = "start" class = "myhand">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%}else if (serviceStatus=="22"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="23"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="24"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="25"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="26"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="27"){\n			  %>&nbsp;<%\n			}else if (serviceStatus=="28"){\n			  %>&nbsp;<%\n			}\n		%>\n	</td>\n	<td class = "serviceCfgTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="2"||serviceStatus=="9"||serviceStatus=="10")&&authUtlCfgFlag=="true"){%>\n			 <a  href = "#" class = "myhand">配置</a>\n		<%}else{%>\n			<span class = "text-info"> 配置</span>\n		<%}%>\n	</td>\n	<td class = "serviceMonitorTd" >\n		<%if((serviceStatus=="1"||serviceStatus=="10")&&authUtlMoniFlag=="true"){%>\n			  <a  href = "#" class = "myhand">查看</a><%\n		}else{%>\n			 <span class = "text-info"> 查看</span>\n		<%}%>\n	</td>\n<%\n}%>'),define("travsky/jcf/1.0.0/template/service/serviceDetailList.tpl",[],"<caption>组服务列表</caption>\n<thead>\n  <tr>\n  	<th>展开</th>\n    <th>服务器名称</th>\n    <th>服务名称</th>\n    <th>服务类型</th>\n    <th>状态</th>\n    <th>操作</th>\n    <th>参数配置</th>\n    <th>详情监控</th>\n  </tr>\n</thead>\n<tbody></tbody>"),define("travsky/jcf/1.0.0/view/service/ServiceOperHelper",["travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/confirm_view","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert"],function(a){var b=a("travsky/jcf/1.0.0/util/CommonUtil"),c=a("travsky/jcf/1.0.0/model/confirm_model"),d=a("travsky/jcf/1.0.0/view/confirm_view"),e=a("travsky/jcf/1.0.0/model/listTip_model"),f=a("travsky/jcf/1.0.0/view/listTip_view"),g=function(){this.getSgStr=function(a){var b="0";
return b="group"==a?"1":"2"},this.startService=function(a,b){var c=this.getSgStr(b),d="",e="0",f="",g=a.get("serviceStatus"),h=a.get("hasCompensateService");a.set("serviceStatus","3"),f="1_"+c+"_",d="1","1"==h?"9"==g?(f+="1",e="1"):f+="2":(f+="1",e="0"),this.serviceOperation(f,e,d,g,a,b)},this.stopService=function(a,b){var e=this.getSgStr(b),f="",g="0",h="",i=a.get("serviceStatus"),j=a.get("hasCompensateService");h="2_"+e+"_",f="2";var k=new c;k.set({title:"停止服务确认",msg:"是否停止补偿服务?",btnok:"停止",btncl:"不停止"});var l=new d({model:k}),m=this;"1"==j?(jcfManager.dialogRegion.show(l),l.confirm(function(c){a.set("serviceStatus","4"),c?(h+="2",g="0"):(f="9",h+="1",g="1"),m.serviceOperation(h,g,f,i,a,b)})):(a.set("serviceStatus","4"),h+="1",g="0",this.serviceOperation(h,g,f,i,a,b))},this.forceStopService=function(a,b){var e=this.getSgStr(b),f="",g="0",h="",i=a.get("serviceStatus"),j=a.get("hasCompensateService");h="3_"+e+"_",f="2";var k=new c;k.set({title:"停止服务确认",msg:"是否停止补偿服务?",btnok:"停止",btncl:"不停止"});var l=new d({model:k}),m=this;"1"==j?(jcfManager.dialogRegion.show(l),l.confirm(function(c){a.set("serviceStatus","4"),c?(h+="2",g="0"):(f="9",h+="1",g="1"),m.serviceOperation(h,g,f,i,a,b)})):(a.set("serviceStatus","4"),h+="1",g="0",this.serviceOperation(h,g,f,i,a,b))},this.serviceOperation=function(a,g,h,i,j,k){var l="/"+jcfManager.appName+"/service/serviceOperation.action",m=j.get("serviceId"),n={serviceId:m,operationType:g,serviceOperation:a};if("group"==k){var o=j.get("groupId");n.groupId=o}else{if("server"!=k)return alert("无效操作，请检查!"),void 0;var p=j.get("serverId");n.serverId=p}$.when(b.dealAjaxRequest4SimpleParam(l,n)).done(function(a){if("true"==a.flag)if(1==a.status)j.set("serviceStatus",h);else{var b=a.errMsgList,g=new e;g.set("errList",b);var k=new f({model:g});jcfManager.tipInfoRegion.show(k);var l=new c;l.set({btnok:"确定",btncl:"关闭"});var m=new d({model:l});l.set("msg","启停操作未成功!"),jcfManager.dialogRegion.show(m),m.confirm(),j.set("serviceStatus",i)}else{var l=new c;l.set({btnok:"确定",btncl:"关闭"});var m=new d({model:l});l.set("msg","操作出错!"),jcfManager.dialogRegion.show(m),m.confirm(),j.set("serviceStatus",i)}})}};return g}),define("travsky/jcf/1.0.0/view/service/monitorService_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","querystring","travsky/jcf/1.0.0/view/service/AuthCheck4Service"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/service/monitoryService_view.tpl"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("querystring"),h=a("travsky/jcf/1.0.0/view/service/AuthCheck4Service"),g=a("querystring"),i=d.ItemView.extend({initialize:function(a){this.queryString=a.queryString;var b=h.getClearQueueInfoFlag();this.model.set("authClearQueueFlag",b),this.listenTo(this.model,"change",this.render)},template:c.template(e),events:{"click #clearQueueInfoBtn":"clearQueueInfo","click #monitorServiceBackBtn":"monitorServiceBack","click #monitorServiceRefreshBtn":"refreshPage"},monitorServiceBack:function(){var a=this.queryString.serverId,b={serverId:a};appRouter.navigate("serviceMgr/server/param/"+g.stringify(b),{trigger:!0})},refreshPage:function(){var a=this.queryString.serverId,b=this.queryString.serviceId,c=(new Date).getTime(),d={serverId:a,serviceId:b,t:c};appRouter.navigate("serviceMgr/server/monitor/param/"+g.stringify(d),{trigger:!0})},clearQueueInfo:function(){var a=this,c="/"+jcfManager.appName+"/service/clearServiceQueue.action",d=this.model.get("serverName"),e=this.model.get("serviceName"),h=this.model.get("version"),i={serverName:d,serviceName:e,version:h},j=f.dealAjaxRequest4SimpleParam(c,i);b.when(j).done(function(b){if("true"==b.flag){var c=(new Date).valueOf();a.queryString.t=c,appRouter.navigate("serviceMgr/server/monitor/param/"+g.stringify(a.queryString),{trigger:!0})}else alert("清除失败!")})},render:function(){return this.$el.html(this.template(this.model.attributes)),this}});return i}),define("travsky/jcf/1.0.0/template/service/monitoryService_view.tpl",[],'<table class = "table table-bordered">\n	<caption>服务实例基本信息</caption>\n	<thead></thead>\n	<tbody>\n	  <tr>\n	  	<td>服务名称&nbsp;:&nbsp;</td>\n	  	<td><%=name%></td>\n	  	<td>所属分组&nbsp;:&nbsp;</td>\n	  	<td><%=gname%></td>\n	  </tr>\n	  <tr>\n	  	<td>当前版本&nbsp;:&nbsp;</td>\n	  	<td><%=currentVersion%></td>\n	  	<td>服务器名称&nbsp;:&nbsp;</td>\n	  	<td><%=serverName%></td>\n	  </tr>\n	</tbody>\n</table>\n<br/>\n<table class = "table table-condensed">\n	<thead>\n	</thead>\n	<tbody>\n	  <tr>\n	    <td width = "40%">请求处理线程池的主动执行任务的近似线程数 &nbsp;:&nbsp;</td>\n	    <td width = "10%"><%=configInfo.requestPoolActive%></td>\n	    <td width = "10%"></td>\n	    <td width = "*%"></td>\n	  </tr>\n	  <tr>\n	    <td>应答处理线程池的主动执行任务的近似线程数 &nbsp;:&nbsp;</td>\n	    <td><%=configInfo.responsePoolActive%></td>\n	    <td></td>\n	    <td width = "*%"></td>\n	  </tr>\n	  <tr>\n	    <td>请求处理线程池的曾经同时位于线程池中的最大线程数 &nbsp;:&nbsp;</td>\n	    <td><%=configInfo.requestPoolLargestPoolSize%></td>\n	    <td></td>\n	    <td width = "*%"></td>\n	  </tr>\n	  <tr>\n	    <td>应答处理线程池的曾经同时位于线程池中的最大线程数&nbsp;:&nbsp;</td>\n	    <td><%=configInfo.responsePoolLargestPoolSize%></td>\n	    <td></td>\n	    <td width = "*%"></td>\n	  </tr>\n	  <tr>\n	    <td>应答队列中消息大小&nbsp;:&nbsp;</td>\n	    <td><%=configInfo.replyQueueSize%></td>\n	    <td></td>\n	    <td width = "*%"></td>\n	  </tr>\n	  <tr>\n	    <td>请求队列中消息大小&nbsp;:&nbsp;</td>\n	    <td><%=requestQueueSize%></td>\n	    <td><button id = "clearQueueInfoBtn" class = "btn <%if(authClearQueueFlag!="true"){%>disabled<%}%>">清除队列</button></td>\n	    <td width = "*%"></td>\n	  </tr>\n	</tbody>\n</table>\n<br/>\n<%if(compensate=="1"){%>\n<table class = "table table-condensed">\n	<caption>补偿服务信息</caption>\n	<thead>\n	</thead>\n	<tbody>\n	  <tr>\n	    <td width = "40%">请求处理线程池的主动执行任务的近似线程数 &nbsp;:&nbsp;</td>\n	    <td width = "10%"><%=compensateRunningInfo.requestPoolActive%></td>\n	    <td width = "*%"></td>\n	  </tr>\n	  <tr>\n	    <td>应答处理线程池的主动执行任务的近似线程数 &nbsp;:&nbsp;</td>\n	    <td><%=compensateRunningInfo.responsePoolActive%></td>\n	    <td></td>\n	  </tr>\n	  <tr>\n	    <td>请求处理线程池的曾经同时位于线程池中的最大线程数 &nbsp;:&nbsp;</td>\n	    <td><%=compensateRunningInfo.requestPoolLargestPoolSize%></td>\n	    <td ></td>\n	  </tr>\n	  <tr>\n	    <td>应答处理线程池的曾经同时位于线程池中的最大线程数 &nbsp;:&nbsp;</td>\n	    <td><%=compensateRunningInfo.responsePoolLargestPoolSize%></td>\n	    <td></td>\n	  </tr>\n	  <tr>\n	    <td>应答队列中消息大小&nbsp;:&nbsp;</td>\n	    <td><%=compensateRunningInfo.replyQueueSize%></td>\n	    <td></td>\n	  </tr>\n	  <tr>\n	    <td>请求队列中消息大小 &nbsp;:&nbsp;</td>\n	    <td><%=compensateRunningInfo.requestQueueSize%></td>\n	    <td></td>\n	  </tr>\n	</tbody>\n</table>\n<%\n}%>\n\n<div>\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n	<button id = "monitorServiceBackBtn" class = "btn btn-default" >返回</button>\n	<button id = "monitorServiceRefreshBtn" class = "btn btn-primary" >刷新</button>\n</div>'),define("travsky/jcf/1.0.0/view/service/groupServiceCfg",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","querystring","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/confirm_view"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/service/groupServiceCfg.tpl"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2");a("querystring");var h=a("travsky/jcf/1.0.0/model/confirm_model"),i=a("travsky/jcf/1.0.0/view/confirm_view");a("bs-modal")(b);var j=d.LayoutView.extend({template:c.template(e),events:{"click #submitFormBtn":"submitForm","click #backBtn":"toBackPage","click #help":"help","blur #inputQueue":"checkInputQueue","blur #outputQueue":"checkOutputQueue","blur #inMpeNum":"checkInMpeNum","blur #outMpeNum":"checkOutMpeNum","blur #requestQueueSize":"checkRequestQueueSize","blur #invokeContextSize":"checkInvokeContextSize","blur #threadPoolSize":"checkThreadPoolSize","blur #upperLimit":"checkUpperLimit","blur #invokeTimeout":"checkInvokeTimeout","blur #stickyHeader":"checkStickyHeader","change #messageMode":"changeMessageMode"},initialize:function(a){this.preModel=a.preModel,this.listenTo(this.model,"change:messageMode",this.render)},toBackPage:function(){this.remove()},help:function(){window.open("help.html#stickyHeaderTips")},submitForm:function(){b("#submitFormBtn").addClass("disabled");var a=b("#hiddenPageFlag").val(),c=this.model.get("serviceId"),d=this.model.get("groupId"),e=this.model.get("appName"),g=this.model.get("appVersion"),h=this.model.get("groupName"),i=this.model.get("serviceName"),j=this.model.get("serviceCategory"),k=null;if("page2"==a){var l=this.checkBusinessServiceForm();if(l){var m=["requestQueueSize","invokeContextSize","threadPoolSize","messageMode","upperLimit","queueType","stickyHeader","sticky"];k=f.getFormInputObj(m),k.serviceId=c,k.groupId=d,k.appName=e,k.appVersion=g,k.groupName=h,k.serviceName=i,k.serviceCategory=j;var n="/"+jcfManager.appName+"/service/updateGroupServiceCfg.action",o=f.dealAjaxRequest4JSObj(n,k),p=this;b.when(o).done(function(a){p.dealReturnInfo(a,k.messageMode)})}}else if("page1"==a){var l=this.checkAdapterServiceForm();if(l){var m=["inputQueue","outputQueue","inMpeNum","outMpeNum","mqServerInfo","requestQueueSize","upperLimit","invokeContextSize","threadPoolSize","messageMode"];k=f.getFormInputObj(m),k.serviceId=c,k.groupId=d,k.appName=e,k.appVersion=g,k.groupName=h,k.serviceName=i,k.serviceCategory=j;var n="/"+jcfManager.appName+"/service/updateGroupServiceCfg.action",o=f.dealAjaxRequest4JSObj(n,k),p=this;b.when(o).done(function(a){p.dealReturnInfo(a,k.messageMode)})}}else if("page3"==a){var l=this.checkHttpServiceForm();if(l){var m=["invokeServiceName","invokeTimeout"];k=f.getFormInputObj(m),k.serviceId=c,k.groupId=d,k.appName=e,k.appVersion=g,k.groupName=h,k.serviceName=i,k.serviceCategory=j;var n="/"+jcfManager.appName+"/service/updateGroupServiceCfg.action",o=f.dealAjaxRequest4JSObj(n,k),p=this;b.when(o).done(function(a){p.dealReturnInfo(a,k.messageMode)})}}b("#submitFormBtn").removeClass("disabled")},dealReturnInfo:function(a,c){if("1"==a.status){var d=new h;d.set({btnok:"确定",btncl:"关闭"});var e=new i({model:d});d.set("msg","组配置成功!"),jcfManager.dialogRegion.show(e),e.confirm(),this.preModel.set("messageMode",c),b("#submitFormBtn").removeClass("disabled"),this.remove()}else{b("#submitFormBtn").removeClass("disabled");var f="";for(var g in a.serviceUpdateConfigList)0===a.serviceUpdateConfigList[g].serviceConfigUpdateStatus&&(1===a.serviceUpdateConfigList[g].JMXConnectError&&(f=f+a.serviceUpdateConfigList[g].serverName+" 配置时连接被拒绝!"),1===a.serviceUpdateConfigList[g].illegalArgument&&(f=f+a.serviceUpdateConfigList[g].serverName+" 配置时出现非法参数!"),1===a.serviceUpdateConfigList[g].malformedObjectName&&(f=f+a.serviceUpdateConfigList[g].serverName+" 配置时出现非法的对象名!"),1===a.serviceUpdateConfigList[g].nullPointer&&(f=f+a.serviceUpdateConfigList[g].serverName+" 配置时出现空指针!"),1===a.serviceUpdateConfigList[g].loginException&&(f=f+a.serviceUpdateConfigList[g].serverName+" 登录异常!"),1===a.serviceUpdateConfigList[g].errorServiceConfigException&&(f=f+a.serviceUpdateConfigList[g].serverName+" 找不到对应的配置文件!"),1===a.serviceUpdateConfigList[g].exception&&(f=f+a.serviceUpdateConfigList[g].serverName+" 配置时出现未知异常,建议查看karaf log!"));var d=new h;d.set({btnok:"确定",btncl:"关闭"});var e=new i({model:d});d.set("msg",f),jcfManager.dialogRegion.show(e),e.confirm()}},changeMessageMode:function(){var a=b.trim(b("#messageMode").val());this.model.set("messageMode",a),b("#groupServiceConfigModal").modal("show")},checkRequestQueueSize:function(){var a="requestQueueSize",b=1,c=1e7,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkInvokeContextSize:function(){var a="invokeContextSize",b=1,c=1e7,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkThreadPoolSize:function(){var a="threadPoolSize",b=1,c=1e4,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkUpperLimit:function(){var a="upperLimit",b=1,c=99,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkInputQueue:function(){var a="inputQueue",c=b.trim(b("#"+a).val());return""==c?g.clearInput(a):g.successInput(a),!0},checkOutputQueue:function(){var a="outputQueue",c=b.trim(b("#"+a).val());return""==c?g.clearInput(a):g.successInput(a),!0},checkInMpeNum:function(){var a="inMpeNum",c=b.trim(b("#"+a).val()),d=!0;if(c.length>0){var e=1,f=1e4;d=g.checkInputMatchInt_MinNum__MaxNum(a,e,f)}else g.clearInput(a);return d},checkOutMpeNum:function(){var a="outMpeNum",c=b.trim(b("#"+a).val()),d=!0;if(c.length>0){var e=1,f=1e4;d=g.checkInputMatchInt_MinNum__MaxNum(a,e,f)}else g.clearInput(a);return d},checkInvokeTimeout:function(){var a="invokeTimeout",b=1,c=1e3,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkBusinessServiceForm:function(){return this.checkRequestQueueSize()&&this.checkInvokeContextSize()&&this.checkThreadPoolSize()&&this.checkUpperLimit()&&this.checkStickyHeader()?!0:!1},checkAdapterServiceForm:function(){return this.checkValidateQueueNameAndNum()&&this.checkInputQueue()&&this.checkOutputQueue()&&this.checkThreadPoolSize()&&this.checkUpperLimit()?!0:!1},checkStickyHeader:function(){var a="stickyHeader",b=this.model.get("sticky");return"true"==b||"TRUE"==b?g.checkNotNull(a):!0},checkHttpServiceForm:function(){return this.checkInvokeTimeout()},checkWebServiceForm:function(){return this.checkInvokeTimeout()},checkValidateQueueNameAndNum:function(){var a=!1,c="inputQueue",d="outputQueue",e=g.checkNotNull(c),f=g.checkNotNull(d);if(e||f){g.successInput(c),g.successInput(d);var h=b.trim(b("#"+c).val());if(a=""==h?""==b.trim(b("#inMpeNum").val())?g.successInput(c):g.errInput(c,"接入MQ队列名称不能为空"):""==b.trim(b("#inMpeNum").val())?g.errInput("inMpeNum","接入MQ连接数不能为空"):g.successInput("inMpeNum")){var i=b.trim(b("#"+d).val());a=""==i?""==b.trim(b("#outMpeNum").val())?g.successInput(d):g.errInput(d,"接出MQ队列名称不能为空"):""==b.trim(b("#outMpeNum").val())?g.errInput("outMpeNum","接出MQ连接数不能为空"):g.successInput("outMpeNum")}}else a=g.errInput(c,"接入队列和接出队列至少需要配置一个");return a}});return j}),define("travsky/jcf/1.0.0/template/service/groupServiceCfg.tpl",[],'<!--\n<div  id = "groupServiceConfigModal"  class="modal fade" id="myModal" tabindex="-1" role="dialog" \n   aria-labelledby="myModalLabel" aria-hidden="true"   data-backdrop="static">\n-->\n<div id = "groupServiceConfigModal" class="modal" aria-hidden="true" style="z-index:10400;"  data-backdrop="static">\n   <div class="modal-dialog">\n      <div class="modal-content">\n         <div class="modal-header">\n            <button type="button" class="close" \n               data-dismiss="modal" aria-hidden="true">\n                  &times;\n            </button>\n            <h4 class="modal-title" id="myModalLabel">\n                    组服务配置\n            </h4>\n         </div>\n         <div class="modal-body">\n         <input id = "hiddenPageFlag" type = "hidden" value = "<%=pageFlag%>"/>\n       <%\n	if("page1"==pageFlag){//SIH/TUMST/TUMSB/UTL类型适配服务返回页面//SIHServiceData\n	   %>\n	   		<form class="form-horizontal" role="form">\n	   			<input type="hidden" id="serviceId" value="<%=serviceId%>" /> \n			    <div class="form-group" id = "inputQueueDiv" >\n		            <label for="inputQueue" class="col-sm-4 control-label">接入MQ队列名称：</label>\n		            <div class="col-sm-4">\n		            	<input  id="inputQueue" value = "<%=inputQueue%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger"></span><span id = "inputQueueTip"></span></div>\n		        </div>\n		        \n		          \n		        <div class="form-group" id = "inMpeNumDiv" >\n		            <label for="inMpeNum" class="col-sm-4 control-label">接入MQ连接个数：</label>\n		            <div class="col-sm-4">\n		            	<input  id="inMpeNum" value = "<%=inMpeNum%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "inMpeNumTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "outputQueueDiv" >\n		            <label for="outputQueue" class="col-sm-4 control-label">接出MQ队列名称：</label>\n		            <div class="col-sm-4">\n		            	<input  id="outputQueue" value = "<%=outputQueue%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "outputQueueTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "outMpeNumDiv" >\n		            <label for="outMpeNum" class="col-sm-4 control-label">接出MQ连接个数：</label>\n		            <div class="col-sm-4">\n		            	<input  id="outMpeNum" value = "<%=outMpeNum%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "outMpeNumTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "mqServerInfoDiv" >\n		            <label for="mqServerInfo" class="col-sm-4 control-label">MQ服务器信息(IP/PORT/通道名/队列管理器名/超时转移时间):</label>\n		            <div class="col-sm-4">\n		            	<input  id="mqServerInfo" value = "<%=mqServerInfo%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "mqServerInfoTip"></span></div>\n		        </div>\n		        \n		        \n		        <div class="form-group" id = "requestQueueSizeDiv" >\n		            <label for="requestQueueSize" class="col-sm-4 control-label">请求队列大小:</label>\n		            <div class="col-sm-4">\n		            	<input  id="requestQueueSize" value = "<%=requestQueueSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "requestQueueSizeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "invokeContextSizeDiv" >\n		            <label for="invokeContextSize" class="col-sm-4 control-label">应答队列大小:</label>\n		            <div class="col-sm-4">\n		            	<input  id="invokeContextSize" value = "<%=invokeContextSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "invokeContextSizeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "threadPoolSizeDiv" >\n		            <label for="threadPoolSize" class="col-sm-4 control-label">适配服务线程池大小:</label>\n		            <div class="col-sm-4">\n		            	<input  id="threadPoolSize" value = "<%=threadPoolSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "threadPoolSizeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "messageModeDiv" >\n		            <label for="messageMode" class="col-sm-4 control-label">信息模式:</label>\n		            <div class="col-sm-4">\n		            	<input  id="messageMode" value = "<%=messageMode%>" readonly="readonly" type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "messageModeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "upperLimitDiv" >\n		            <label for="upperLimit" class="col-sm-4 control-label">队列预警值:</label>\n		            <div class="col-sm-4">\n		            	<input  id="upperLimit" value = "<%=upperLimit%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*%(1-99)</span><span id = "upperLimitTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "queueTypeDiv" >\n		            <label for="queueType" class="col-sm-4 control-label">队列类型:</label>\n		            <div class="col-sm-4">\n		            	<select id="queueType"   class="form-control input-sm">\n		            		<%if(messageMode=="one_way"){%>\n	            				<%for(var i = 0 ; i < queueTypes.length ; i ++){%>\n		            				<option <%if(queueType==queueTypes[i]){%>selected = "selected"<%}%>  value = "<%=queueTypes[i]%>"><%=queueTypes[i]%></option>\n		            			<%}%>\n	            			<%}else{%>\n	            				<option value="SimpleQueue" selected="selected" >SimpleQueue</option>\n	            			<%}%>\n		            	</select>\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "queueTypeTip"></span></div>\n		        </div>\n	   		</form>\n	   <%	\n	}   \n else if ("page2"==pageFlag){//businessService\n	   %>\n	   		<form class="form-horizontal" role="form">\n	   			<input type="hidden" id="serviceId" value="<%=serviceId%>" /> \n	   			<div class="form-group" id = "requestQueueSizeDiv" >\n		            <label for="requestQueueSize" class="col-sm-4 control-label">请求队列大小：</label>\n		            <div class="col-sm-4">\n		            	<input  id="requestQueueSize" value = "<%=requestQueueSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "requestQueueSizeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "invokeContextSizeDiv" >\n		            <label for="invokeContextSize" class="col-sm-4 control-label">应答队列大小：</label>\n		            <div class="col-sm-4">\n		            	<input  id="invokeContextSize" value = "<%=invokeContextSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "invokeContextSizeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "threadPoolSizeDiv" >\n		            <label for="threadPoolSize" class="col-sm-4 control-label">线程池大小：</label>\n		            <div class="col-sm-4">\n		            	<input  id="threadPoolSize" value = "<%=threadPoolSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "threadPoolSizeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "messageModeDiv" >\n		            <label for="messageMode" class="col-sm-4 control-label">信息模式：</label>\n		            <div class="col-sm-4">\n		            	<select id="messageMode"   class="form-control input-sm">\n		            		<%for(var j = 0 ; j < messageModes.length ; j ++){\n		            			if(messageMode== messageModes[j]){\n		            			  %><option selected = "selected" value = "<%=messageModes[j]%>"><%=messageModes[j]%></option><%\n		            			}else{\n		            			  %><option value = "<%=messageModes[j]%>"><%=messageModes[j]%></option><%\n		            			}\n		            		}%>\n		            	</select>\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "messageModeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "upperLimitDiv" >\n		            <label for="upperLimit" class="col-sm-4 control-label">队列预警值：</label>\n		            <div class="col-sm-4">\n		            	<input  id="upperLimit" value = "<%=upperLimit%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "upperLimitTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "queueTypeDiv" >\n		            <label for="queueType" class="col-sm-4 control-label">队列类型:</label>\n		            <div class="col-sm-4">\n		            	<select id="queueType"   class="form-control input-sm">\n		            		<%if(messageMode=="one_way"){%>\n	            				<%for(var i = 0 ; i < queueTypes.length ; i ++){%>\n		            				<option <%if(queueType==queueTypes[i]){%>selected = "selected"<%}%>  value = "<%=queueTypes[i]%>"><%=queueTypes[i]%></option>\n		            			<%}%>\n	            			<%}else{%>\n	            				<option value="SimpleQueue" selected="selected" >SimpleQueue</option>\n	            			<%}%>\n		            	</select>\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "queueTypeTip"></span></div>\n		        </div>\n		        <input type="hidden" id="sticky" value="<%=sticky%>" />\n		        <% if(sticky== "true" || sticky =="TRUE") { %>\n		        <div class="form-group" id = "stickyDiv">\n		            <label class="col-sm-4 control-label">亲和服务消息头名称：</label>\n		            <div class="col-sm-4">\n		            	<input id="stickyHeader" value="<%=stickyHeader%>" type="text" class="form-control input-sm"/>\n		          \n		            </div>\n		            <div>\n		            	<span class="text-danger">*</span>\n		            	<span id="stickyHeaderTip"></span>\n		            	<a href="javascript:void(0);" id="help" class="helpClass">帮助</a>\n		            </div>\n		        </div>\n		        <%}%>\n	   			\n	   		</form>	\n	   <%	\n	}else if ("page3"==pageFlag){//http\n	   %>\n	   	<form class="form-horizontal" role="form">\n	   		<input type="hidden" id="serviceId" value="<%=serviceId%>" /> \n	   		<div class="form-group" id = "invokeServiceNameDiv" >\n		        <label for="invokeServiceName" class="col-sm-4 control-label">调用服务名称：</label>\n		        <div class="col-sm-4">\n		           <input  id="invokeServiceName" value = "<%=invokeServiceName%>" readonly="readonly"  type="text" class="form-control input-sm"  placeholder="" />\n		        </div>\n		        <div><span class = "text-danger">*</span><span id = "invokeServiceNameTip"></span></div>\n		    </div>\n		    \n	   		<div class="form-group" id = "invokeTimeoutDiv" >\n		        <label for="invokeTimeout" class="col-sm-4 control-label">调用超时时间：</label>\n		        <div class="col-sm-4">\n		           <input  id="invokeTimeout" value = "<%=invokeTimeout%>"  type="text" class="form-control input-sm"  placeholder="" />\n		        </div>\n		        <div><span class = "text-danger">*</span><span id = "invokeTimeoutTip"></span></div>\n		    </div>\n		    \n	   	</form>\n	   <%	\n	}\n%>               \n         </div>\n         <div class="modal-footer">\n            <button type="button"  id = "backBtn" class="btn btn-default"  data-dismiss="modal">返回</button>\n            <button type="button" id = "submitFormBtn" class="btn btn-primary" >修改</button>\n         </div>\n      </div><!-- /.modal-content -->\n</div><!-- /.modal -->'),define("travsky/jcf/1.0.0/view/service/serviceGrayConfig_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/confirm_view"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/service/serviceGrayConfig.tpl"),f=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"),g=a("travsky/jcf/1.0.0/util/CommonUtil"),h=a("travsky/jcf/1.0.0/model/confirm_model"),i=a("travsky/jcf/1.0.0/view/confirm_view");a("bs-modal")(b);var j=d.LayoutView.extend({template:c.template(e),events:{"click .config":"configGray","click  .cancel":"cancel","click .helpClass":"grayHelp","click .grayConfig":"toggleSelect","blur #serviceTraffic":"checkServiceTraffic"},grayHelp:function(){window.open("help.html#grayHelpTips")},toggleSelect:function(){var a=b("#serviceTrafficSelected").is(":checked");a?(b("#serviceTraffic").removeAttr("readonly"),b("#serviceHeader").attr("readonly","readonly")):(b("#serviceHeader").removeAttr("readonly"),b("#serviceTraffic").attr("readonly","readonly"))},configGray:function(){if(this.checkForm()){b("#submitFormBtn").addClass("disabled");var a=this.model.get("appVersion"),c=this.model.get("grayEnable"),d=this.model.get("serviceId"),e=this.model.get("serviceName"),f="/"+jcfManager.appName+"/service/setServiceGrayConfig.action",j={serviceId:d,serviceName:e,appVersion:a,grayEnable:c},k=b("#serviceTrafficSelected").is(":checked"),l=b("#serviceHeaderSelected").is(":checked");if(j.serviceTrafficSelected=k,j.serviceHeaderSelected=l,k){var m=b("#serviceTraffic").val();j.serviceTraffic=m}else{var n=b("#serviceHeader").val().replace(/\"/gm,"'");j.serviceHeader=n}var o=g.dealAjaxRequest4SimpleParam(f,j);b.when(o).done(function(a){var c=a.errorMsg,d="";if(""==c){d="配置成功";var e=new h;e.set({btnok:"确定",btncl:"关闭"});var f=new i({model:e});e.set("msg",d),jcfManager.dialogRegion.show(f),f.confirm(),b("#submitFormBtn").removeClass("disabled")}else{d="配置失败";var e=new h;e.set({btnok:"确定",btncl:"关闭"});var f=new i({model:e});e.set("msg",d),jcfManager.dialogRegion.show(f),f.confirm()}})}},cancel:function(){this.remove()},checkServiceTraffic:function(){var a="serviceTraffic";return f.checkInputMatchInt_MinNum__MaxNum(a,1,99)},checkServiceHeader:function(){var a="serviceHeader";return f.checkNotNull(a)},render:function(){return this.$el.html(this.template(this.model.attributes)),this},checkForm:function(){var a=b("#serviceTrafficSelected").is(":checked"),c=b("#serviceHeaderSelected").is(":checked");return a?this.checkServiceTraffic():c?this.checkServiceHeader():!1}});return j}),define("travsky/jcf/1.0.0/template/service/serviceGrayConfig.tpl",[],'<div class="modal fade" id="grayModal" tabindex="-1" role="dialog" \n   aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">\n   <div class="modal-dialog">\n      <div class="modal-content">\n         <div class="modal-header">\n            <button type="button" class="close" \n               data-dismiss="modal" aria-hidden="true">\n                  &times;\n            </button>\n            <h4 class="modal-title" id="myModalLabel">\n                      灰度配置\n            </h4>\n         </div>\n         <div class="modal-body">\n                <form class="form-horizontal">\n                  <div class="form-group" >\n					      <label  class="col-sm-3 control-label">按流量百分比</label>\n					      <div class="col-sm-5">\n					        <input type="radio"  id="serviceTrafficSelected"   name="grayConfig"  class="grayConfig" <%if (serviceTrafficSelected){%>checked="checked"<%}%> value="serviceTraffic" />\n					      </div>\n					      <div></div>\n				    </div>\n				    \n				    <div class="form-group" >\n					      <label  class="col-sm-3 control-label">流量配置</label>\n					      <div class="col-sm-5">\n					        <input id="serviceTraffic" name="serviceTraffic"  class="form-control input-sm"  type="text" value="<%=serviceTraffic%>"  <%if (!serviceTrafficSelected){%>readonly="readonly"<%}%> placeholder="正整数" />\n					      </div>\n					      <div><span class = "text-danger">*%(1-99)</span><span id = "serviceTrafficTip"></span></div>\n				    </div>\n				    \n				     <div class="form-group" >\n					      <label  class="col-sm-3 control-label">按报文头</label>\n					      <div class="col-sm-5">\n					        <input id="serviceHeaderSelected"  name="grayConfig" class="grayConfig"  type="radio" <%if (serviceHeaderSelected){%>checked="checked"<%}%> value="serviceHeader" />\n					      </div>\n				    </div>\n				    \n				      <div class="form-group"  >\n					      <label  class="col-sm-3 control-label">报文头配置</label>\n					      <div class="col-sm-5">\n					        <input id="serviceHeader" name="serviceHeader" class="form-control input-sm" type="text" value="<%=serviceHeader%>"  <%if (!serviceHeaderSelected){%>readonly="readonly"<%}%>  placeholder="key-value形式"/>\n					      </div>\n					     <div class="warn">\n			                <span class="text-danger">*</span>\n			                <span id="serviceHeaderTip"></span>\n			                <a href="javascript:void(0);" id="grayHelp" class="helpClass">帮助</a>\n		                 </div>\n				     </div>\n               </form>\n        </div>\n        <div class="modal-footer">\n               <button type="button" class="btn btn-default cancel" id = "backBtn"  data-dismiss="modal">返回</button>\n	    	  <button type="button" class="btn btn-primary config" id = "submitFormBtn">修改</button>\n        </div>\n      </div><!-- /.modal-content -->\n</div><!-- /.modal -->\n\n'),define("travsky/jcf/1.0.0/view/service/serviceDegradeConfig_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/confirm_view","querystring"],function(a){var b=jQuery=a("jquery");
a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"),f=a("travsky/jcf/1.0.0/template/service/serviceDegradeConfig.tpl"),g=a("travsky/jcf/1.0.0/util/CommonUtil"),h=a("travsky/jcf/1.0.0/model/confirm_model"),i=a("travsky/jcf/1.0.0/view/confirm_view"),j=a("querystring");a("bs-modal")(b);var k=d.LayoutView.extend({template:c.template(f),events:{"click .select":"toggleSelect","click .config":"configDegrade","blur #degradeTPU":"checkTPU","blur #degradeTimeUnit":"checkTimeUnit","blur #degradePercent":"checkPercent"},toggleSelect:function(){var a=b("#tpsSelected").is(":checked"),c=b("#queueSelected").is(":checked");a?(b("#degradeTPU").removeAttr("readonly"),b("#degradeTimeUnit").removeAttr("readonly")):(b("#degradeTPU").attr("readonly","readonly"),b("#degradeTimeUnit").attr("readonly","readonly")),c?b("#degradePercent").removeAttr("readonly"):b("#degradePercent").attr("readonly","readonly")},configDegrade:function(){if(this.checkForm()){var a=b("#tpsSelected").is(":checked"),c=b("#queueSelected").is(":checked"),d=b("#degradeServiceName").val(),e=b("#degradeTPU").val(),f=b("#degradeTimeUnit").val(),k=this.$el.find("#degradePercent").val(),l=this.model.get("serviceName"),m=this.model.get("appVersion"),n=this.model.get("serviceCategory"),o=this.model.get("groupId"),p=this.model.get("serviceId"),q="/"+jcfManager.appName+"/service/setServiceDegradeConfig.action",r={serviceName:l,appVersion:m,serviceCategory:n,groupId:o,serviceId:p,tpsSelected:a,queueSelected:c,degradeServiceName:d,degradeTPU:e,degradeTimeUnit:f,degradePercent:k},s=g.dealAjaxRequest4SimpleParam(q,r),t=this;b.when(s).done(function(a){var c=a.errorMsg,d=a.flag,e=(new Date).getTime(),f=t.model.get("groupId"),g={groupId:f,t:e};if(d){var k=new h;k.set({btnok:"确定",btncl:"关闭"});var l=new i({model:k});k.set("msg","配置成功!"),jcfManager.dialogRegion.show(l),l.confirm(),b("#submitFormBtn").removeClass("disabled"),appRouter.navigate("/serviceMgr/group/param/"+j.stringify(g),{trigger:!0})}else{var k=new h;k.set({btnok:"确定",btncl:"关闭"});var l=new i({model:k});k.set("msg",c),jcfManager.dialogRegion.show(l),l.confirm()}})}},checkDegradeServiceName:function(){return e.checkNotNull("degradeServiceName")},checkTPU:function(){var a=b("#tpsSelected").is(":checked");return a?e.checkInputMatchPositiveIntegerAndMaxLength("degradeTPU",10):!1},checkTimeUnit:function(){var a=b("#tpsSelected").is(":checked");return a?e.checkInputMatchPositiveIntegerAndMaxLength("degradeTimeUnit",10):!1},checkPercent:function(){var a=b("#queueSelected").is(":checked");return a?e.checkInputMatchInt_MinNum__MaxNum("degradePercent",0,100):!1},checkForm:function(){var a=!1,c=!1,d=!0,e=b("#tpsSelected").is(":checked"),f=b("#queueSelected").is(":checked");return e&&(a=!0,d=this.checkTPU()&&this.checkTimeUnit()?!0:!1),f&&(c=!0,d=this.checkPercent()&&d?!0:!1),c||a?d:(alert("降级规则必须选一项！"),void 0)}});return k}),define("travsky/jcf/1.0.0/template/service/serviceDegradeConfig.tpl",[],'<div id="degradeModal"  class="modal" aria-hidden="true" style="z-index:10400;"  data-backdrop="static"> \n   <div class="modal-dialog" style = "width:700px;">\n      <div class="modal-content">\n         <div class="modal-header">\n            <button type="button" class="close" \n               data-dismiss="modal" aria-hidden="true">\n                  &times;\n            </button>\n            <h4 class="modal-title" id="myModalLabel">\n                         降级服务配置\n            </h4>\n         </div>\n         <div class="modal-body">\n              <form class="form-horizontal">\n                  <div class="form-group" >\n					      <label  class="col-sm-3 control-label">降级服务名称</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="degradeServiceName" name="degradeServiceName"  class="form-control input-sm"  type="text" value="<%=degradeServiceName%>" />\n					      </div>\n					      <div><span class = "text-danger"></span><span id = "degradeServiceNameTip"></span></div>\n				    </div>\n				    \n				    <div class="form-group"  >\n					      <label  class="col-sm-3 control-label">按单位时间内交易数</label>\n					      <div class="col-sm-5">\n					        <input type="checkbox"  id="tpsSelected"  class="select" <%if (tpsSelected){%>checked="checked"<%}%> />\n					      </div>\n					      <div></div>\n				    </div>\n				    \n				    <div class="form-group" >\n					      <label  class="col-sm-3 control-label">交易数</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="degradeTPU" name="degradeTPU"  class="form-control input-sm"  type="text" value="<%=degradeTPU%>" <%if (!tpsSelected){%>readonly="readonly"<%}%> />\n					      </div>\n					      <div><span class = "text-danger">*</span><span id = "degradeTPUTip"></span></div>\n				    </div>\n				    \n				     <div class="form-group" >\n					      <label  class="col-sm-3 control-label">时间单位</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="degradeTimeUnit" name="degradeTimeUnit"  class="form-control input-sm"  type="text" value="<%if(degradeTimeUnit!=null && degradeTimeUnit!=""){ %> <%=degradeTimeUnit%> <% } else {%> 1000 <%}%>"  <%if (!tpsSelected){%>readonly="readonly"<%}%>  placeholder="1000"/>\n					      </div>\n					      <div><span class = "text-danger">*ms</span><span id = "degradeTimeUnitTip"></span></div>\n				    </div>\n				    \n				      <div class="form-group"  >\n					      <label  class="col-sm-3 control-label">按队列百分比</label>\n					      <div class="col-sm-5">\n					        <input type="checkbox"  id="queueSelected" class="select"  <%if (queueSelected){%>checked="checked"<%}%>/>\n					      </div>\n					      <div></div>\n				     </div>\n				    \n				    <div class="form-group" >\n					      <label  class="col-sm-3 control-label">队列百分比%</label>\n					      <div class="col-sm-5">\n					        <input type="text" id="degradePercent" name="degradePercent"  class="form-control input-sm"  type="text" value="<%=degradePercent%>" <%if (!queueSelected){%>readonly="readonly"<%}%> placeholder="正整数" />\n					      </div>\n					      <div><span class = "text-danger">* 0-100</span><span id = "degradePercentTip"></span></div>\n				    </div>\n\n               </form>\n              \n           </div>\n              <div class="modal-footer">\n                 <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>\n                 <button id ="submitFormBtn" type="button" class="btn btn-primary config">修改</button>\n         </div>\n      </div><!-- /.modal-content -->\n</div><!-- /.modal -->\n\n\n\n'),define("travsky/jcf/1.0.0/view/service/respGroupMoni_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SidebarUtil","my97Date","querystring","travsky/jcf/1.0.0/view/service/groupServiceChart_view","highcharts"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("travsky/jcf/1.0.0/util/SidebarUtil");a("my97Date");var h=a("querystring");a("bs-modal")(b);var i=a("travsky/jcf/1.0.0/template/service/groupServiceChartOpt.tpl"),j=e.LayoutView.extend({initialize:function(){this.listenTo(this.model,"change",this.render)},regions:{errInfoShowRegion:"#errInfoShowRegion",singleErrInfoShowRegion:"#singleErrInfoShowRegion"},template:d.template(i),events:{"change #dataType":"changeGroupCategory","click #queryDataBtn":"queryData","click #startDate":"startDate","click #endDate":"endDate"},changeGroupCategory:function(){var a=this.$el.find("#dataType").val();this.model.set("checkGroupCategory",a),b("#queryGroupDataModal").modal("show")},startDate:function(){WdatePicker({el:$dp.$("startTime"),dateFmt:"yyyy-MM-dd HH:mm:ss"})},endDate:function(){WdatePicker({el:$dp.$("endTime"),dateFmt:"yyyy-MM-dd HH:mm:ss"})},getCacheConfigFormInputParam:function(){var a=["dataType","disposeType"],b=f.getFormInputObj(a);return b},checkCacheGroupCfgInfo:function(){return this.checkGroupName()&&this.checkGroupPassword()&&this.checkBroadcastURL()&&this.checkMaxSize4Store()&&this.checkSingleDataMaxLength()&&this.checkCacheNodeAlert()&&this.checkJvmMemory()&&this.checkJvmHeapAlert()&&this.checkDataBackupNum()&&this.checkStatisticsPath()&&this.checkStatisticsSyncTime()&&this.checkJvmHeapBlock()&&this.checkMaxSize4Cache()&&this.checkaNetworkPort()&&this.checkaddTcpIPMember()?!0:!1},queryData:function(){var d={},e=g.getModuleName(),i="/"+jcfManager.appName+"/service/chartGroupSearch.action";d=this.getCacheConfigFormInputParam(),d.groupId=this.model.get("groupId"),d.serviceId=this.model.get("serviceId");var j=f.dealAjaxRequest4JSObj(i,d),k=this;k.remove(),appRouter.navigate(e+"/group/MoniOption/param/"+h.stringify(d)),b.when(j).done(function(b){if("error"!=b.flag){var d=new c.Model(b);d.set("groupId",k.model.get("groupId"));var e=a("travsky/jcf/1.0.0/view/service/groupServiceChart_view"),f=new e({model:d});jcfManager.contentRegion.show(f)}else alert("度量数据加载失败")})}});return j}),define("travsky/jcf/1.0.0/template/service/groupServiceChartOpt.tpl",[],'<div id = "queryGroupDataModal" class="modal" aria-hidden="true" style="z-index:10400;"  data-backdrop="static">\n   <div class="modal-dialog" style = "width:700px;">\n      <div class="modal-content">\n         <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n            <h4 class="modal-title" id="myModalLabel">数据查询选项</h4>\n         </div>\n         <div class="modal-body">\n         <form class="form-horizontal"  role="form" method= "POST">\n 	          <div class="form-group" id = "addGroup_groupCategoryDiv" >\n			      <label for="addGroup_groupCategory" class="col-sm-3 control-label">数据类型：</label>\n			      <div class="col-sm-5">\n			          <select id="dataType"  class  = "form-control input-sm">\n			          	 <%\n					      	   if(1==checkGroupCategory){\n					      		  %><option selected = "selected"  value = "1" >实时数据</option>\n					     			<option value = "2" >历史数据</option><%\n					      	   }else{\n					      	 	  %><option value = "1" >实时数据</option>\n					     			<option selected = "selected" value = "2" >历史数据</option><%\n					      	   }\n					     %>\n				     </select>\n			      </div>\n			  </div>	\n         	  			\n 			  <div class="form-group" id = "addGroup_groupNameDiv" >\n			      <label for="addGroup_groupCategory" class="col-sm-3 control-label">处理类型：</label>\n			      <div class="col-sm-5">\n			          <select id="disposeType"  class  = "form-control input-sm">\n					     <option selected = "selected"  value = "1" >处理时间</option>\n					     <option value = "2" >处理结果</option>\n				     </select>\n			      </div>\n			   </div>\n         </form>\n          <%\n		   	if(checkGroupCategory=="2"){//选择历史数据\n		  %>\n		   	   	<form class="form-horizontal" id = "addServerForm"  role="form" method= "POST">\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_groupPasswordDiv" >\n					      <label for="addGroup_groupPassword" class="col-sm-3 control-label">开始日期：</label>\n					      <div class="col-sm-5">\n					      	<input type="text" id="startTime" type="text" class="form-control input-sm"  placeholder="必填项" />\n							\n					      </div>\n					      <div>\n					      		<span class = "text-danger">\n					      			<img  id="startDate" src="./static/js/seajs-modules/My97DatePicker/skin/datePicker.gif"width="16" height="22" align="absmiddle">\n					      		</span>\n					      		<span id = "addGroup_groupPasswordTip"></span>\n					      </div>\n				    </div>\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_broadcastURLDiv" >\n					      <label for="addGroup_broadcastURL" class="col-sm-3 control-label">结束日期：</label>\n					      <div class="col-sm-5">\n					      	<input type="text" id="endTime" type="text" class="form-control input-sm"  placeholder="必填项" />\n							\n					      </div>\n					      <div><span class = "text-danger">\n					      	<img  id="endDate" src="./static/js/seajs-modules/My97DatePicker/skin/datePicker.gif"width="16" height="22" align="absmiddle"></span>\n					      	<span id = "addGroup_groupPasswordTip"></span>\n					      </div>\n				    </div>\n		   	   	</form>\n		   	<%\n		   	}\n		   %>\n         </div>\n         <div class="modal-footer">\n            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>\n            <button id = "queryDataBtn" type="button" class="btn btn-primary">查询 </button>\n         </div>\n      </div>\n</div>'),define("travsky/jcf/1.0.0/view/service/groupServiceChart_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","highcharts","querystring"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("travsky/jcf/1.0.0/util/CommonUtil");a("highcharts");var e=a("marionette");a("querystring");var f=a("travsky/jcf/1.0.0/template/service/groupServiceChart_view.tpl");a("bs-modal")(b);var g=e.ItemView.extend({template:c.template(f),events:{"click #backBtn":"toBackPage"},initialize:function(){},onShow:function(){"1"==this.model.get("dataType")?this.showRealPageInfo():this.showHistoryPageInfo()},toBackPage:function(){window.history.back()},refreshChart:function(a){var b=a.autoFreshPageTTT,c=window.location.hash,d=a.oldUrl;d==c?a.directUpdate(a):window.clearInterval(b)},directUpdate:function(a){var c,e,f,g,h={},i="/"+jcfManager.appName+"/service/chartGroupCurrentData.action";h.serviceName=a.model.get("serviceName"),h.serverNames=a.model.get("serverNames"),h.disposeType=a.model.get("disposeType"),h.appVersion=a.model.get("appVersion"),h.time=a.model.get("lastTime");var j=d.dealAjaxRequest4JSObj(i,h);"1"==a.model.get("disposeType")?(c=a.series[0],e=a.series[1],b.when(j).done(function(b){"error"!=b.flag&&(a.model.set("lastTime",b.lastTime),c.addPoint([b.averageBTime[0].x,b.averageBTime[0].y],!0,!0),e.addPoint([b.maxBTime[0].x,b.maxBTime[0].y],!0,!0))})):(c=a.series[0],e=a.series[1],f=a.series[2],g=a.series[3],b.when(j).done(function(b){"error"!=b.flag&&(a.model.set("lastTime",b.lastTime),c.addPoint([b.totalTPU[0].x,b.totalTPU[0].y],!0,!0),e.addPoint([b.succTPU[0].x,b.succTPU[0].y],!0,!0),f.addPoint([b.sysFailTPU[0].x,b.sysFailTPU[0].y],!0,!0),g.addPoint([b.failTPU[0].x,b.failTPU[0].y],!0,!0))}))},showRealPageInfo:function(){var a,b,c=this.model.get("serviceName")+"服务-实时数据记录",d=this;b="1"==this.model.get("disposeType")?"处理时间":"处理结果",a=new Highcharts.Chart({chart:{borderRadius:1,shadow:!1,zoomType:"x",reflow:!0,renderTo:"charts",defaultSeriesType:"spline",marginBottom:35,events:{load:function(){d.series=this.series;var a=window.location.hash;d.oldUrl=a;var b=setInterval(d.refreshChart,5e3,d);d.autoFreshPageTTT=b}}},title:{text:c},subtitle:{text:b},xAxis:{type:"datetime",dateTimeLabelFormats:{second:"%H:%M:%S"},tickPixelInterval:100},yAxis:{title:"",min:0},tooltip:{formatter:function(){return Highcharts.numberFormat(this.y,2)+"   "+Highcharts.dateFormat("%H:%M:%S",this.x)}},legend:{enabled:!0,layout:"horizontal",backgroundColor:"#ffc",align:"left",verticalAlign:"top",x:65,y:70,borderWidth:0,floating:!0,shadow:!0},exporting:{enabled:!1},credits:{text:"JCF Domain Info",url:"#"},series:this.paraData()})},showHistoryPageInfo:function(){var a,b,c=this.model.get("serviceName")+"服务-历史数据记录";b="1"==this.model.get("disposeType")?"处理时间":"处理结果",a=new Highcharts.Chart({chart:{borderRadius:1,shadow:!1,zoomType:"x",renderTo:"charts",defaultSeriesType:"spline",inverted:!1,reflow:!0,marginBottom:35},credits:{enabled:!1,text:"JCF Domain Info",url:"#"},title:{text:c,x:0,y:10},subtitle:{text:b},xAxis:{categories:["2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21"],gridLineWidth:1,labels:{y:15}},yAxis:{title:"",min:0},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!0}},tooltip:{formatter:function(){return Highcharts.numberFormat(this.y,2)}},legend:{enabled:!0,layout:"horizontal",backgroundColor:"#ffc",align:"left",verticalAlign:"top",x:65,y:70,borderWidth:0,floating:!0,shadow:!0},exporting:{enabled:!1},series:[{name:"总处理数",data:[21.3,12.2,4.5,13.1,19.8,24,25.8,24.4,19.3,12.4,4.1,18.2]},{name:"成功处理数",data:[13.3,14.4,17.7,21.9,24.6,27.2,30.8,32.1,27.2,23.7,21.3,15.6]},{name:"失败处理数",data:[10.3,11.4,13.7,22.9,24.6,37.2,35.8,32.1,29.2,21.7,11.3,5.6]},{name:"系统失败处理数",data:[12.3,15.4,17.7,22.9,23.6,27.2,35.8,32.1,24.2,21.7,10.3,9.6]}]})},paraData:function(){var a=[];if("1"==this.model.get("disposeType"))var a=[{name:"平均处理时间",data:this.model.get("averageBTime")},{name:"最大处理时间",data:this.model.get("maxBTime")}];else var a=[{name:"单位时间内总的处理数",data:this.model.get("totalTPU")},{name:"单位时间内成功的处理数",data:this.model.get("succTPU")},{name:"单位时间内系统总的失败处理数",data:this.model.get("sysFailTPU")},{name:"单位时间内失败的处理数",data:this.model.get("failTPU")}];return a}});return g}),define("travsky/jcf/1.0.0/template/service/groupServiceChart_view.tpl",[],'<div id="charts" >\n	Hello highcharts\n</div>\n<br/>\n<div class="form-group">\n	<div class="col-sm-offset-11">\n		<button type="button" id = "backBtn" class="btn btn-primary" >返回</button>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/view/service/serverServiceChart_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","highcharts","querystring"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("travsky/jcf/1.0.0/util/CommonUtil");a("highcharts");var e=a("marionette");a("querystring");var f=a("travsky/jcf/1.0.0/template/service/serverServiceChart_view.tpl");a("bs-modal")(b);var g=e.ItemView.extend({template:c.template(f),events:{"click #backBtn":"toBackPage"},initialize:function(){},onShow:function(){"1"==this.model.get("dataType")?this.showRealPageInfo():this.showHistoryPageInfo()},toBackPage:function(){window.history.back()},refreshChart:function(a){var b=a.autoFreshPageTTT,c=window.location.hash,d=a.oldUrl;d==c?a.directUpdate(a):window.clearInterval(b)},directUpdate:function(a){var c,e,f,g,h={},i="/"+jcfManager.appName+"/service/chartCurrentData.action";h.serviceName=a.model.get("serviceName"),h.serverName=a.model.get("serverName"),h.disposeType=a.model.get("disposeType"),h.appVersion=a.model.get("appVersion"),h.time=a.model.get("lastTime");var j=d.dealAjaxRequest4JSObj(i,h);"1"==a.model.get("disposeType")?(c=a.series[0],e=a.series[1],b.when(j).done(function(b){"error"!=b.flag&&(a.model.set("lastTime",b.lastTime),c.addPoint([b.averageBTime[0].x,b.averageBTime[0].y],!0,!0),e.addPoint([b.maxBTime[0].x,b.maxBTime[0].y],!0,!0))})):(c=a.series[0],e=a.series[1],f=a.series[2],g=a.series[3],b.when(j).done(function(b){"error"!=b.flag&&(a.model.set("lastTime",b.lastTime),c.addPoint([b.totalTPU[0].x,b.totalTPU[0].y],!0,!0),e.addPoint([b.succTPU[0].x,b.succTPU[0].y],!0,!0),f.addPoint([b.sysFailTPU[0].x,b.sysFailTPU[0].y],!0,!0),g.addPoint([b.failTPU[0].x,b.failTPU[0].y],!0,!0))}))},showRealPageInfo:function(){var a,b,c=this.model.get("serviceName")+"服务-实时数据记录",d=this;b="1"==this.model.get("disposeType")?"处理时间":"处理结果",a=new Highcharts.Chart({chart:{borderRadius:1,shadow:!1,zoomType:"x",reflow:!0,renderTo:"charts",defaultSeriesType:"spline",marginBottom:35,events:{load:function(){d.series=this.series;var a=window.location.hash;d.oldUrl=a;var b=setInterval(d.refreshChart,5e3,d);d.autoFreshPageTTT=b}}},title:{text:c},subtitle:{text:b},xAxis:{type:"datetime",dateTimeLabelFormats:{second:"%H:%M:%S"},tickPixelInterval:100},yAxis:{title:"",min:0},tooltip:{formatter:function(){return Highcharts.numberFormat(this.y,2)+"   "+Highcharts.dateFormat("%H:%M:%S",this.x)}},legend:{enabled:!0,layout:"horizontal",backgroundColor:"#ffc",align:"left",verticalAlign:"top",x:65,y:70,borderWidth:0,floating:!0,shadow:!0},exporting:{enabled:!1},credits:{text:"JCF Domain Info",url:"#"},series:this.paraData()})},showHistoryPageInfo:function(){var a,b,c=this.model.get("serviceName")+"服务-历史数据记录";b="1"==this.model.get("disposeType")?"处理时间":"处理结果",a=new Highcharts.Chart({chart:{borderRadius:1,shadow:!1,zoomType:"x",renderTo:"charts",defaultSeriesType:"spline",inverted:!1,reflow:!0,marginBottom:35},credits:{enabled:!1,text:"JCF Domain Info",url:"#"},title:{text:c,x:0,y:10},subtitle:{text:b},xAxis:{categories:["2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21","2015.3.21 10:32:21"],gridLineWidth:1,labels:{y:15}},yAxis:{title:"",min:0},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!0}},tooltip:{formatter:function(){return Highcharts.numberFormat(this.y,2)}},legend:{enabled:!0,layout:"horizontal",backgroundColor:"#ffc",align:"left",verticalAlign:"top",x:65,y:70,borderWidth:0,floating:!0,shadow:!0},exporting:{enabled:!1},series:[{name:"总处理数",data:[21.3,12.2,4.5,13.1,19.8,24,25.8,24.4,19.3,12.4,4.1,18.2]},{name:"成功处理数",data:[13.3,14.4,17.7,21.9,24.6,27.2,30.8,32.1,27.2,23.7,21.3,15.6]},{name:"失败处理数",data:[10.3,11.4,13.7,22.9,24.6,37.2,35.8,32.1,29.2,21.7,11.3,5.6]},{name:"系统失败处理数",data:[12.3,15.4,17.7,22.9,23.6,27.2,35.8,32.1,24.2,21.7,10.3,9.6]}]})},paraData:function(){var a=[];if("1"==this.model.get("disposeType"))var a=[{name:"平均处理时间",data:this.model.get("averageBTime")},{name:"最大处理时间",data:this.model.get("maxBTime")}];else var a=[{name:"单位时间内总的处理数",data:this.model.get("totalTPU")},{name:"单位时间内成功的处理数",data:this.model.get("succTPU")},{name:"单位时间内系统总的失败处理数",data:this.model.get("sysFailTPU")},{name:"单位时间内失败的处理数",data:this.model.get("failTPU")}];return a}});return g}),define("travsky/jcf/1.0.0/template/service/serverServiceChart_view.tpl",[],'<div id="charts" >\n	Hello highcharts\n</div>\n<br/>\n<div class="form-group">\n	<div class="col-sm-offset-11">\n		<button type="button" id = "backBtn" class="btn btn-primary" >返回</button>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/view/service/serverServiceMgrLayout",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/pagebar_view2","querystring","travsky/jcf/1.0.0/util/SidebarUtil","travsky/jcf/1.0.0/view/service/serverServiceCfg_view","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2","travsky/jcf/1.0.0/view/service/AuthCheck4Service","travsky/jcf/1.0.0/model/listTip_model","travsky/jcf/1.0.0/view/listTip_view","bs-alert","travsky/jcf/1.0.0/view/service/ServiceOperHelper","travsky/jcf/1.0.0/model/confirm_model","travsky/jcf/1.0.0/view/confirm_view","travsky/jcf/1.0.0/view/service/respMoni_view","my97Date","travsky/jcf/1.0.0/view/service/serverServiceChart_view","highcharts"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/template/service/serverServiceMgrLayout.tpl"),g=a("travsky/jcf/1.0.0/template/service/serverServiceItem.tpl"),h=a("travsky/jcf/1.0.0/template/service/serverServiceList.tpl"),i=a("travsky/jcf/1.0.0/util/CommonUtil"),j=a("travsky/jcf/1.0.0/view/pagebar_view2"),k=a("travsky/jcf/1.0.0/util/SidebarUtil"),l=a("querystring"),m=a("travsky/jcf/1.0.0/view/service/serverServiceCfg_view"),n=a("travsky/jcf/1.0.0/view/service/AuthCheck4Service"),o=a("travsky/jcf/1.0.0/model/listTip_model"),p=a("travsky/jcf/1.0.0/view/listTip_view"),q=a("travsky/jcf/1.0.0/view/service/ServiceOperHelper");a("bs-modal")(b);var r=e.ItemView.extend({initialize:function(){this.model.set("serverId",b("#hiddenServerIdOnPage").val());var a=n.getJcfStart4GroupFlag(),c=n.getJcfStop4GroupFlag(),d=n.getJcForceStop4GroupFlag(),e=n.getJcfMoni4ServerFlag();this.model.set("authJcfStartFlag",a),this.model.set("authJcfStopFlag",c),this.model.set("authJcfForceStopFlag",d),this.model.set("authJcfMoniFlag",e);var f=n.getSihStart4GroupFlag(),g=n.getSihStop4GroupFlag(),h=n.getSihForceStop4GroupFlag(),i=n.getSihMoni4ServerFlag();this.model.set("authSihStartFlag",f),this.model.set("authSihStopFlag",g),this.model.set("authSihForceStopFlag",h),this.model.set("authSihMoniFlag",i);var j=n.getHttpStart4GroupFlag(),k=n.getHttpStop4GroupFlag(),l=n.getHttpForceStop4GroupFlag(),m=n.getHttpMoni4ServerFlag();this.model.set("authHttpStartFlag",j),this.model.set("authHttpStopFlag",k),this.model.set("authHttpForceStopFlag",l),this.model.set("authHttpMoniFlag",m);var o=n.getWebStart4GroupFlag(),p=n.getWebStop4GroupFlag(),q=n.getWebForceStop4GroupFlag(),r=n.getWebMoni4ServerFlag();this.model.set("authWebStartFlag",o),this.model.set("authWebStopFlag",p),this.model.set("authWebForceStopFlag",q),this.model.set("authWebMoniFlag",r);var s=n.getTbStart4GroupFlag(),t=n.getTbStop4GroupFlag(),u=n.getTbForceStop4GroupFlag(),v=n.getTbMoni4ServerFlag();this.model.set("authTbStartFlag",s),this.model.set("authTbStopFlag",t),this.model.set("authTbForceStopFlag",u),this.model.set("authTbMoniFlag",v);var w=n.getTtStart4GroupFlag(),x=n.getTtStop4GroupFlag(),y=n.getTtForceStop4GroupFlag(),z=n.getTtMoni4ServerFlag();this.model.set("authTtStartFlag",w),this.model.set("authTtStopFlag",x),this.model.set("authTtForceStopFlag",y),this.model.set("authTtMoniFlag",z);var A=n.getUtlStart4GroupFlag(),B=n.getUtlStop4GroupFlag(),C=n.getUtlForceStop4GroupFlag(),D=n.getUtlMoni4ServerFlag();this.model.set("authUtlStartFlag",A),this.model.set("authUtlStopFlag",B),this.model.set("authUtlForceStopFlag",C),this.model.set("authUtlMoniFlag",D);var E=n.getJcfCfg4GroupFlag(),F=n.getSihCfg4GroupFlag(),G=n.getHttpCfg4GroupFlag(),H=n.getWebCfg4GroupFlag(),I=n.getTbCfg4GroupFlag(),J=n.getTtCfg4GroupFlag(),K=n.getUtlCfg4GroupFlag();this.model.set("authJcfCfgFlag",E),this.model.set("authSihCfgFlag",F),this.model.set("authHttpCfgFlag",G),this.model.set("authWebCfgFlag",H),this.model.set("authTbCfgFlag",I),this.model.set("authTtCfgFlag",J),this.model.set("authUtlCfgFlag",K),this.model.on("change",this.render)},tagName:"tr",template:d.template(g),events:{"click :checkbox[name='selected']":"singleSelect","click .serviceOperationTd a":"operServiceStatus","click .serverServiceCfgTd a":"toServerServiceCfgUI","click .serviceCfgMoniTd a":"serviceCfgMoni","click .serverServiceRespTd a":"toServerServiceRespUI"},singleSelect:function(a){var c=b(a.target).parents("tbody"),d=c.find("input:checkbox[name='selected']").length,e=c.find("input:checkbox[name='selected']:checked").length;d==e?b("#allSelected").prop("checked",!0):b("#allSelected").prop("checked",!1)},serviceCfgMoni:function(a){a.stopPropagation(),a.preventDefault();var b=this.model.get("serverId"),c=this.model.get("serviceId"),d={serverId:b,serviceId:c};appRouter.navigate("serviceMgr/server/monitor/param/"+l.stringify(d),{trigger:!0})},toServerServiceCfgUI:function(a){a.stopPropagation(),a.preventDefault();var d=k.getModuleName(),e="/"+jcfManager.appName+"/service/toConfigServiceUI.action",f=this.model.get("serverId"),g=this.model.get("serviceId"),h={serverId:f,serviceId:g},j=i.dealAjaxRequest4SimpleParam(e,h),n={serverId:f,serviceId:g};appRouter.navigate(d+"/server/cfg/param/"+l.stringify(n)),b.when(j).done(function(a){var b=a.errorFlag;if(""==b){var d=new c.Model(a.serviceParamInfo);d.set("queueTypes",a.queueTypes||""),d.set("messageModes",a.messageModes||""),d.set("pageFlag",a.pageFlag||""),d.set("serviceId",a.baseInfo.serviceId||""),d.set("serverId",a.baseInfo.serverId||""),d.set("serviceName",a.baseInfo.serviceName||""),d.set("groupName",a.baseInfo.groupName||""),d.set("currentVersion",a.baseInfo.currentVersion||""),d.set("serverName",a.baseInfo.serverName||""),d.set("mode",a.serviceParamInfo.mode||"");var e=new m({model:d});jcfManager.contentRegion.show(e)}else{var f=new o;f.set("errList",[""+b]);var g=new p({model:f});jcfManager.tipInfoRegion.show(g)}})},toServerServiceRespUI:function(c){c.stopPropagation(),c.preventDefault();var d=b("#freshPage4ServerServiceFlag").val();window.clearInterval(d);var e=a("travsky/jcf/1.0.0/view/service/respMoni_view");this.model.set("checkGroupCategory","1"),jcfManager.dialogRegion.show(new e({model:this.model})),b("#queryDataModal").modal("show")},operServiceStatus:function(a){a.preventDefault();var c="server";helper=new q;var d=b(a.target).attr("href"),e=b("#freshPage4ServerServiceFlag").val();window.clearInterval(e),"stop"==d?helper.stopService(this.model,c):"forceStop"==d?helper.forceStopService(this.model,c):"start"==d&&helper.startService(this.model,c)},render:function(){return this.$el.html(this.template(this.model.attributes)),this}}),s=e.CompositeView.extend({initialize:function(){},template:d.template(h),events:{"click #allSelected":"allSelected"},childView:r,childViewContainer:"tbody",allSelected:function(a){var c=a.target.checked,d=b(a.target).parents("thead").siblings("tbody");d.find("input:checkbox[name='selected']").prop("checked",c)}}),t=e.LayoutView.extend({initialize:function(a){this.queryString=a.queryString,this.on("showPageInfo",this.showPageInfo);var b=n.getSearchService4ServerFlag();this.model.set("authSearch4ServerFlag",b),jcfManager.tipInfoRegion=this.tipInfoRegion},template:d.template(f),regions:{tipInfoRegion:"#tipInfoRegion",listRegion:"#listRegion",pagebarRegion:"#pagebarRegion"},events:{"click #searchServerServiceBtn":"searchServerService"},searchServerService:function(){var a=b("#search4ServiceType").val(),c=b("#search4RuningStatus").val();this.queryString.currentPage="1",(void 0==this.queryString.pageSize||""==this.queryString.pageSize)&&(this.queryString.pageSize=jcfManager.defaultPageSize);var d={};d.currentPage=this.queryString.currentPage,d.pageSize=this.queryString.pageSize,d.serverId=this.queryString.serverId,d.category=a,d.status=c;var e=k.getModuleName();appRouter.navigate(e+"/server/param/"+l.stringify(d)),this.showPageInfo2(d)},showPageInfo:function(){(void 0==this.queryString.currentPage||""==this.queryString.currentPage)&&(this.queryString.currentPage="1",this.queryString.pageSize=jcfManager.defaultPageSize);var a={};a.currentPage=this.queryString.currentPage,a.pageSize=this.queryString.pageSize,a.serverId=this.queryString.serverId,a.category=this.queryString.category,a.status=this.queryString.status,this.showPageInfo2(a)},showPageInfo2:function(a){var d=this,e=2e3,f=i.getFefreshPageNum(),g=e*f,h=window.location.hash;b("#freshPage4ServerServiceUrl").val(h);var k="/"+jcfManager.appName+"/service/searchServerService.action",l=i.dealAjaxRequest4JSObj(k,a);b.when(l).done(function(a){var f=new c.Collection(a.recordList),h=new s({collection:f});d.listRegion.show(h);var i=new c.Model(a);i.set("uriSection","server");var k=new j({model:i,queryString:d.queryString});if(d.pagebarRegion.show(k),f.length>0){var l=setInterval(d.updatePageServiceStatus,e,f);b("#freshPage4ServerServiceFlag").val(l),setTimeout("window.clearInterval("+l+")",g)}})},updatePageServiceStatus:function(a){var d=window.location.hash,e=b("#freshPage4ServerServiceUrl").val(),f=b("#freshPage4ServerServiceFlag").val();if(e==d){var g="/"+jcfManager.appName+"/service/searchServerServiceStatus.action",h=i.dealAjaxRequestWithoutParam(g);b.when(h).done(function(b){var d=new c.Model(b);a.each(function(a){var b=a.get("serviceId"),c=d.get(""+b);void 0!=c&&a.set("serviceStatus",c)})})}else window.clearInterval(f)}});return t}),define("travsky/jcf/1.0.0/template/service/serverServiceMgrLayout.tpl",[],'<br/>\n<div id = "tipInfoRegion"></div>\n<div  id = "searchBarRegion">\n	<div class = "row">\n		<div class = "col-sm-2 text-right"><label for="addGroup_groupCategory" class="control-label">服务类型：</label></div>\n		<div class = "col-sm-2">\n			<select id = "search4ServiceType"  class  = "form-control input-sm">\n	         	 <option value="" selected="selected">全部</option>\n	         	 <%\n	         	 	for(var i = 0 ; i < categoryList.length ; i ++){\n         	 			if(paramCategory==categoryList[i].key){\n         	 				%><option selected = "selected" value="<%=categoryList[i].key%>"><%=categoryList[i].value%></option><%\n         	 			}else{\n         	 				%><option value="<%=categoryList[i].key%>"><%=categoryList[i].value%></option><%\n         	 			}\n	         	 	}\n	         	 %>\n         	 </select>\n		</div>\n		<div class = "col-sm-2 text-right"><label for="addGroup_groupCategory" class="control-label">运行状态：</label></div>\n		<div class = "col-sm-2">\n			<select id = "search4RuningStatus"  class  = "form-control input-sm">\n         	 	<option value="" selected="selected">全部</option>\n         	 	<%\n         	 		for(var j = 0 ; j < statusList.length ; j ++){\n         	 			if(paramStatus==statusList[j].key){\n         	 			   %><option selected = "selected" value="<%=statusList[j].key%>"><%=statusList[j].value%></option><%\n         	 			}else{\n         	 			   %><option value="<%=statusList[j].key%>"><%=statusList[j].value%></option><%\n         	 			}\n         	 		}\n         	 	%>\n         	 </select>\n		</div>\n		<div class = "col-sm-2"><button id= "searchServerServiceBtn" class = "btn">查询</button></div>\n	</div>\n</div>\n<br/>\n<div  id = "listRegion"></div>\n<div  id = "pagebarRegion"></div>\n<input id = "hiddenServerIdOnPage" type = "hidden" value = "<%=serverId%>"/>\n<input id = "freshPage4ServerServiceFlag" type = "hidden" />\n<input id = "freshPage4ServerServiceUrl" type = "hidden" />'),define("travsky/jcf/1.0.0/template/service/serverServiceItem.tpl",[],'<!--\n<td>\n	<input type="checkbox" name="selected" class="select" value="selected"/>\n</td>\n-->\n<td><%=serviceName%></td>\n<td><%=serviceCategory%></td>\n<td><%=appVersion%></td>\n<td class="sericeStatus">\n	<%if(serviceStatus==1){\n		%>启动<%\n	}else if(serviceStatus==2){\n		%>停止<%\n	}else if(serviceStatus==3){\n		%>启动中<%\n	}else if(serviceStatus==4){\n		%>停止中<%\n	}else if(serviceStatus==5){\n		%>挂起<%\n	}else if(serviceStatus==6){\n		%>挂起中<%\n	}else if(serviceStatus==7){\n		%>异常<%\n	}else if(serviceStatus==8){\n		%>查询中<%\n	}else if(serviceStatus==9){\n		%>服务停止,补偿流程未停止<%\n	}else if (serviceStatus==10){\n		%>服务运行，补偿流程已停止<%\n	}else{\n		%>未知<%\n	}%>\n</td>\n\n<%\n	if(serviceCategory=="BusinessService"){\n	 %>\n	 	<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				<%if(authJcfStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n				\n				<%if(authJcfForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n				    %>|<span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				<%if(authJcfStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>停止||强制停止<%\n			}else if(serviceStatus=="4"){\n			%>\n				<%if(authJcfForceStopFlag=="true"){\n					%><a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>挂起<%\n			}else if(serviceStatus=="6"){\n				%>挂起中<%\n			}else if(serviceStatus=="7"){\n				%>异常<%\n			}else if(serviceStatus=="8"){\n				%>查询中<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authJcfStartFlag=="true"){\n					%><a class="start myhand" href = "start">启动</a><%\n				}else{\n					%><span class = "text-info">启动</span><%\n				}%>\n				<%if(authJcfStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n				<%if(authJcfForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n				    %>|<span class = "text-info">强制停止</span><%\n				}%>\n			<% \n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authJcfStopFlag=="true"){\n					%><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n					%><span class = "text-info">停止</span><%\n				}%>\n				<%if(authJcfForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n				    %>|<span class = "text-info">强制停止</span><%\n				}%>\n			<% \n			}else {\n				%>未知<%\n			}%>\n		</td>\n		<td class="serverServiceCfgTd">\n			<%\n			if(serviceStatus!="3"&&serviceStatus!="4"&&serviceStatus!="5"&&serviceStatus!="6"&&serviceStatus!="7"&&serviceStatus!="8"&&authJcfCfgFlag=="true"){\n			  %><a  href = "#" class = "myhand">服务配置</a><%\n			}else{\n			  %><span class = "text-info">服务配置</span><%\n			}\n			%>\n		</td>\n		<td class = "serviceCfgMoniTd">\n			<%if(serviceStatus=="1"&&authJcfMoniFlag=="true"){\n				%><a class = "myhand">查看</a><%\n			}else{\n				%><span class = "text-info">查看</span><%\n			}%>\n		</td>\n		<td class="serverServiceRespTd">\n			<!--<a  href = "#" class = "myhand">查看</a>-->\n			<span class = "text-info">查看</span>\n		</td>\n	 <%\n	}else if (serviceCategory=="sih"){\n	 %>\n	 	<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				<%if(authSihStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authSihForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				<%if(authSihStopFlag=="true"){\n				   %><a class="start myhand" href = "start">启动</a><%\n				}else{\n				   %><span class = "text-info">启动</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>停止||强制停止<%\n			}else if(serviceStatus=="4"){\n			%>\n				<%if(authSihForceStopFlag=="true"){\n					%><a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>挂起<%\n			}else if(serviceStatus=="6"){\n				%>挂起中<%\n			}else if(serviceStatus=="7"){\n				%>异常<%\n			}else if(serviceStatus=="8"){\n				%>查询中<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authSihStopFlag=="true"){\n				   %><a class="start myhand" href = "start">启动</a><%\n				}else{\n				   %><span class = "text-info">启动</span><%\n				}%>\n				<%if(authSihStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authSihForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authSihStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authSihForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else{\n				%>未知<%\n			}%>\n		</td>\n		<td class="serverServiceCfgTd">\n			<%\n			if(serviceStatus!="3"&&serviceStatus!="4"&&serviceStatus!="5"&&serviceStatus!="6"&&serviceStatus!="7"&&serviceStatus!="8"&&authSihCfgFlag=="true"){\n			  %><a  href = "#" class = "myhand">服务配置</a><%\n			}else{\n			  %><span class = "text-info">服务配置</span><%\n			}\n			%>\n		</td>\n		<td class = "serviceCfgMoniTd">\n			<%if(serviceStatus=="1"&&authSihMoniFlag=="true"){\n				%><a class = "myhand">查看</a><%\n			}else{\n			    %><span class = "text-info">查看</span><%\n			}%>\n		</td>\n		<td class="serverServiceRespTd">\n			<!--<a  href = "#" class = "myhand">查看</a>-->\n			<span class = "text-info">查看</span>\n		</td>\n	 <%\n	}else if (serviceCategory=="http"){\n	 %>\n	 	<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				<%if(authHttpStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authHttpForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				<%if(authHttpStartFlag=="true"){\n				   %><a class="start myhand" href = "start">启动</a><%\n				}else{\n				   %><span class = "text-info">启动</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>停止||强制停止<%\n			}else if(serviceStatus=="4"){\n			%>\n				<%if(authHttpForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>挂起<%\n			}else if(serviceStatus=="6"){\n				%>挂起中<%\n			}else if(serviceStatus=="7"){\n				%>异常<%\n			}else if(serviceStatus=="8"){\n				%>查询中<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authHttpStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authHttpForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authHttpStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authHttpForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else{\n				%>未知<%\n			}%>\n		</td>\n		<td class="serverServiceCfgTd">\n			<%\n			if(serviceStatus!="3"&&serviceStatus!="4"&&serviceStatus!="5"&&serviceStatus!="6"&&serviceStatus!="7"&&serviceStatus!="8"&&authHttpCfgFlag=="true"){\n			  %><a  href = "#" class = "myhand">服务配置</a><%\n			}else{\n			  %><span class = "text-info">服务配置</span><%\n			}\n			%>\n		</td>\n		\n		<td class = "serviceCfgMoniTd">\n			<%if(serviceStatus=="1"&&authHttpMoniFlag=="true"){\n				%><a class = "myhand">查看</a><%\n			}else{\n			    %><span class = "text-info">查看</span><%\n			}%>\n		</td>\n		<td class="serverServiceRespTd">\n			<!--<a  href = "#" class = "myhand">查看</a>-->\n			<span class = "text-info">查看</span>\n		</td>\n	 <%\n	}else if (serviceCategory=="webservice"){\n	 %>\n	 	<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				<%if(authWebStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authWebForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				<%if(authWebStartFlag=="true"){\n				   %><a class="start myhand" href = "start">启动</a><%\n				}else{\n				   %><span class = "text-info">启动</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>停止||强制停止<%\n			}else if(serviceStatus=="4"){\n			%>\n				<%if(authWebForceStopFlag=="true"){\n					%><a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>挂起<%\n			}else if(serviceStatus=="6"){\n				%>挂起中<%\n			}else if(serviceStatus=="7"){\n				%>异常<%\n			}else if(serviceStatus=="8"){\n				%>查询中<%\n			}else if (serviceStatus=="9"){\n			%>	\n				<%if(authWebStartFlag=="true"){\n				   %><a class="start myhand" href = "start">启动</a><%\n				}else{\n				   %><span class = "text-info">启动</span><%\n				}%>\n				<%if(authWebStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authWebForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authWebStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authWebForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else{\n				%>未知<%\n			}%>\n		</td>\n		<td class="serverServiceCfgTd">\n			<%\n			if(serviceStatus!="3"&&serviceStatus!="4"&&serviceStatus!="5"&&serviceStatus!="6"&&serviceStatus!="7"&&serviceStatus!="8"&&authWebCfgFlag=="true"){\n			  %><a  href = "#" class = "myhand">服务配置</a><%\n			}else{\n			  %><span class = "text-info">服务配置</span><%\n			}\n			%>\n		</td>\n		<td class = "serviceCfgMoniTd">\n			<%if(serviceStatus=="1"&&authWebMoniFlag=="true"){\n				%><a class = "myhand">查看</a><%\n			}else{\n			    %><span class = "text-info">查看</span><%\n			}%>\n		</td>\n		<td class="serverServiceRespTd">\n			<!--<a  href = "#" class = "myhand">查看</a>-->\n			<span class = "text-info">查看</span>\n		</td>\n	 <%\n	}else if (serviceCategory=="tumsb"){\n	 %>\n	 	<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				<%if(authTbStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authTbForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				<%if(authTbStartFlag=="true"){\n				   %><a class="start myhand" href = "start">启动</a><%\n				}else{\n				   %><span class = "text-info">启动</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>停止||强制停止<%\n			}else if(serviceStatus=="4"){\n			%>\n				<%if(authTbForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>挂起<%\n			}else if(serviceStatus=="6"){\n				%>挂起中<%\n			}else if(serviceStatus=="7"){\n				%>异常<%\n			}else if(serviceStatus=="8"){\n				%>查询中<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authTbStartFlag=="true"){\n				   %><a class="start myhand" href = "start">启动</a><%\n				}else{\n				   %><span class = "text-info">启动</span><%\n				}%>\n				<%if(authTbStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authTbForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authTbStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authTbForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else{\n				%>未知<%\n			}%>\n		</td>\n		<td class="serverServiceCfgTd">\n			<%\n			if(serviceStatus!="3"&&serviceStatus!="4"&&serviceStatus!="5"&&serviceStatus!="6"&&serviceStatus!="7"&&serviceStatus!="8"&&authTbCfgFlag=="true"){\n			  %><a  href = "#" class = "myhand">服务配置</a><%\n			}else{\n			  %><span class = \'text-info\'>服务配置</span><%\n			}\n			%>\n		</td>\n		<td class = "serviceCfgMoniTd">\n			<%if(serviceStatus=="1"&&authTbMoniFlag=="true"){\n				%><a class = "myhand">查看</a><%\n			}else{\n			    %><span class = "text-info">查看</span><%\n			}%>\n		</td>\n		<td class="serverServiceRespTd">\n			<!--<a  href = "#" class = "myhand">查看</a>-->\n			<span class = "text-info">查看</span>\n		</td>\n	 <%\n	}else if (serviceCategory=="tumst"){\n	 %>\n	 	<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				<%if(authTtStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authTtForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				<%if(authTtStartFlag=="true"){\n				   %><a class="start myhand" href = "start">启动</a><%\n				}else{\n				   %><span class = "text-info">启动</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>停止||强制停止<%\n			}else if(serviceStatus==4){\n			%>\n				<%if(authTtForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>挂起<%\n			}else if(serviceStatus=="6"){\n				%>挂起中<%\n			}else if(serviceStatus=="7"){\n				%>异常<%\n			}else if(serviceStatus=="8"){\n				%>查询中<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authTtStartFlag=="true"){\n				   %><a class="start myhand" href = "start">启动</a><%\n				}else{\n				   %><span class = "text-info">启动</span><%\n				}%>\n				<%if(authTtStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authTtForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authTtStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authTtForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else{\n				%>未知<%\n			}%>\n		</td>\n		<td class="serverServiceCfgTd">\n			<%\n			if(serviceStatus!="3"&&serviceStatus!="4"&&serviceStatus!="5"&&serviceStatus!="6"&&serviceStatus!="7"&&serviceStatus!="8"&&authTtCfgFlag=="true"){\n			  %><a  href = "#" class = "myhand">服务配置</a><%\n			}else{\n			  %><span class = "text-info">服务配置</span><%\n			}\n			%>\n		</td>\n		<td class = "serviceCfgMoniTd">\n			<%if(serviceStatus=="1"&&authTtMoniFlag=="true"){\n				%><a class = "myhand">查看</a><%\n			}else{\n			    %><span class = "text-info">查看</span><%\n			}%>\n		</td>\n		<td class="serverServiceRespTd">\n			<!--<a  href = "#" class = "myhand">查看</a>-->\n			<span class = "text-info">查看</span>\n		</td>\n	 <%\n	}else if (serviceCategory=="utl"){\n	 %>\n	 	<td class="serviceOperationTd">\n			<%if(serviceStatus=="1"){\n			%>\n				<%if(authUtlStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authUtlForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="2"){\n			%>\n				<%if(authUtlStartFlag=="true"){\n				   %><a class="start myhand" href = "start">启动</a><%\n				}else{\n				   %><span class = "text-info">启动</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="3"){\n				%>停止||强制停止<%\n			}else if(serviceStatus=="4"){\n			%>\n				<%if(authUtlForceStopFlag=="true"){\n					%><a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if(serviceStatus=="5"){\n				%>挂起<%\n			}else if(serviceStatus=="6"){\n				%>挂起中<%\n			}else if(serviceStatus=="7"){\n				%>异常<%\n			}else if(serviceStatus=="8"){\n				%>查询中<%\n			}else if (serviceStatus=="9"){\n			%>\n				<%if(authUtlStartFlag=="true"){\n				   %><a class="start myhand" href = "start">启动</a><%\n				}else{\n				   %><span class = "text-info">启动</span><%\n				}%>\n				<%if(authUtlStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authUtlForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else if (serviceStatus=="10"){\n			%>\n				<%if(authUtlStopFlag=="true"){\n				   %><a class="stop myhand" href = "stop">停止</a><%\n				}else{\n				   %><span class = "text-info">停止</span><%\n				}%>\n				<%if(authUtlForceStopFlag=="true"){\n					%>|<a class="forceStop myhand" href = "forceStop">强制停止</a><%\n				}else{\n					%><span class = "text-info">强制停止</span><%\n				}%>\n			<%\n			}else{\n				%>未知<%\n			}%>\n		</td>\n		<td class="serverServiceCfgTd">\n			<%\n			if(serviceStatus!="3"&&serviceStatus!="4"&&serviceStatus!="5"&&serviceStatus!="6"&&serviceStatus!="7"&&serviceStatus!="8"&&authUtlCfgFlag=="true"){\n			  %><a  href = "#" class = "myhand">服务配置</a><%\n			}else{\n			  %><span class = "text-info">服务配置</span><%\n			}\n			%>\n		</td>\n		<td class = "serviceCfgMoniTd">\n			<%if(serviceStatus=="1"&&authUtlMoniFlag=="true"){\n				%><a class = "myhand">查看</a><%\n			}else{\n			    %><span class = "text-info">查看</span><%\n			}%>\n		</td>\n		<td class="serverServiceRespTd">\n			<!--<a  href = "#" class = "myhand">查看</a>-->\n			<span class = "text-info">查看</span>\n		</td>\n	 <%\n	}\n%>\n'),define("travsky/jcf/1.0.0/template/service/serverServiceList.tpl",[],'<table class = "table table-bordered">\n    <thead>\n      <tr>\n      	<!--\n      	<th>\n      		<input type="checkbox" class="select" value="0" name="allselected" id="allSelected">\n      	</th>\n      	-->\n      	<th>名称</th>\n        <th>类型</th>\n        <th>版本</th>\n        <th>状态</th>\n        <th>操作</th>\n        <th>配置</th>\n        <th>详情监控</th>\n        <th>度量数据</th>\n      </tr>\n    </thead>\n    <tbody>\n    </tbody>\n</table>\n<div class="paginate">\n\n</div>'),define("travsky/jcf/1.0.0/view/service/serverServiceCfg_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"],function(a){var b=jQuery=a("jquery");
a("backbone");var c=a("underscore"),d=a("marionette"),e=a("travsky/jcf/1.0.0/template/service/serverServiceCfg.tpl"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil2"),h=d.ItemView.extend({template:c.template(e),initialize:function(){this.listenTo(this.model,"change:messageMode",this.render)},events:{"click #submitFormBtn":"submitForm","click #backBtn":"toBackPage","blur #inputQueue":"checkInputQueue","blur #outputQueue":"checkOutputQueue","blur #inMpeNum":"checkInMpeNum","blur #outMpeNum":"checkOutMpeNum","blur #requestQueueSize":"checkRequestQueueSize","blur #invokeContextSize":"checkInvokeContextSize","blur #threadPoolSize":"checkThreadPoolSize","blur #upperLimit":"checkUpperLimit","blur #invokeTimeout":"checkInvokeTimeout","change #messageMode":"changeMessageMode"},changeMessageMode:function(){var a=b.trim(b("#messageMode").val());this.model.set("messageMode",a)},toBackPage:function(){window.history.back()},checkInputQueue:function(){var a="inputQueue",c=b.trim(b("#"+a).val());return""==c?g.clearInput(a):g.successInput(a),!0},checkOutputQueue:function(){var a="outputQueue",c=b.trim(b("#"+a).val());return""==c?g.clearInput(a):g.successInput(a),!0},checkInMpeNum:function(){var a="inMpeNum",c=b.trim(b("#"+a).val()),d=!0;if(""==c)g.clearInput(a);else{var e=1,f=1e4;d=g.checkInputMatchInt_MinNum__MaxNum(a,e,f)}return d},checkOutMpeNum:function(){var a="outMpeNum",c=b.trim(b("#"+a).val()),d=!0;if(""==c)g.clearInput(a);else{var e=1,f=1e4;d=g.checkInputMatchInt_MinNum__MaxNum(a,e,f)}return d},checkRequestQueueSize:function(){var a="requestQueueSize",b=1,c=1e7,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkInvokeContextSize:function(){var a="invokeContextSize",b=1,c=1e7,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkThreadPoolSize:function(){var a="threadPoolSize",b=1,c=1e4,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkUpperLimit:function(){var a="upperLimit",b=1,c=99,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},checkInvokeTimeout:function(){var a="invokeTimeout",b=1,c=1e3,d=g.checkInputMatchInt_MinNum__MaxNum(a,b,c);return d},submitForm:function(){var a=b.trim(b("#hiddenPageFlag").val()),c={},d=!1;if("page1"==a?(d=this.checkForm1(),d&&(c=this.getFormObj1())):"page2"==a?(d=this.checkForm2(),d&&(c=this.getFormObj2())):"page3"==a&&(d=this.checkForm3(),d&&(c=this.getFormObj3())),d){var e="/"+jcfManager.appName+"/service/saveServiceConfig.action",g=f.dealAjaxRequest4JSObj(e,c);b.when(g).done(function(a){"true"==a.flag?alert("成功!"):alert("失败!")})}},checkForm1:function(){return this.checkValidateQueueNameAndNum()&&this.checkThreadPoolSize()&&this.checkUpperLimit()?!0:!1},checkForm2:function(){return this.checkRequestQueueSize()&&this.checkInvokeContextSize()&&this.checkThreadPoolSize()&&this.checkUpperLimit()?!0:!1},checkForm3:function(){return this.checkInvokeTimeout()&&this.checkThreadPoolSize()?!0:!0},getFormObj1:function(){var a=["serverId","serviceId","inputQueue","outputQueue","inMpeNum","outMpeNum","mqServerInfo","requestQueueSize","invokeContextSize","threadPoolSize","messageMode","upperLimit","queueType"],b=f.getFormInputObj(a);return b},getFormObj2:function(){var a=["serverId","serviceId","requestQueueSize","invokeContextSize","threadPoolSize","messageMode","upperLimit","queueType"],b=f.getFormInputObj(a);return b},getFormObj3:function(){var a=["serverId","serviceId","invokeServiceName","invokeTimeout","threadPoolSize"],b=f.getFormInputObj(a);return b},checkValidateQueueNameAndNum:function(){var a=!1,c="inputQueue",d="outputQueue",e=g.checkNotNull(c),f=g.checkNotNull(d);if(e||f){g.successInput(c),g.successInput(d);var h=b.trim(b("#"+c).val());if(a=""==h?""==b.trim(b("#inMpeNum").val())?g.successInput(c):g.errInput(c,"接入MQ队列名称不能为空!"):""==b.trim(b("#inMpeNum").val())?g.errInput("inMpeNum","接入MQ连接数不能为空!"):g.successInput("inMpeNum")){var i=b.trim(b("#"+d).val());a=""==i?""==b("#outMpeNum").val()?g.successInput(d):g.errInput(d,"接出MQ队列名称不能为空"):""==b("#outMpeNum").val()?g.errInput("outMpeNum","接出MQ连接数不能为空"):g.successInput("outMpeNum")}}else g.errInput(c,"接入队列和接出队列至少需要配置一个"),a=!1;return a}});return h}),define("travsky/jcf/1.0.0/template/service/serverServiceCfg.tpl",[],'<br/>\n<input id = "hiddenPageFlag" type = "hidden" value = "<%=pageFlag%>"/>\n<%\n	if("page1"==pageFlag){//SIH/TUMST/TUMSB/UTL类型适配服务返回页面//SIHServiceData\n	   %>\n	   		<form class="form-horizontal" role="form">\n				<input type="hidden" id="serverId" value="<%=serverId%>" />\n	   			<input type="hidden" id="serviceId" value="<%=serviceId%>" /> \n			    <div class="form-group" id = "inputQueueDiv" >\n		            <label for="inputQueue" class="col-sm-4 control-label">接入MQ队列名称：</label>\n		            <div class="col-sm-4">\n		            	<input  id="inputQueue" value = "<%=inputQueue%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger"></span><span id = "inputQueueTip"></span></div>\n		        </div>\n		        \n		          \n		        <div class="form-group" id = "inMpeNumDiv" >\n		            <label for="inMpeNum" class="col-sm-4 control-label">接入MQ连接个数：</label>\n		            <div class="col-sm-4">\n		            	<input  id="inMpeNum" value = "<%=inMpeNum%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "inMpeNumTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "outputQueueDiv" >\n		            <label for="outputQueue" class="col-sm-4 control-label">接出MQ队列名称：</label>\n		            <div class="col-sm-4">\n		            	<input  id="outputQueue" value = "<%=outputQueue%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "outputQueueTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "outMpeNumDiv" >\n		            <label for="outMpeNum" class="col-sm-4 control-label">接出MQ连接个数：</label>\n		            <div class="col-sm-4">\n		            	<input  id="outMpeNum" value = "<%=outMpeNum%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "outMpeNumTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "mqServerInfoDiv" >\n		            <label for="mqServerInfo" class="col-sm-4 control-label">MQ服务器信息(IP/PORT/通道名/队列管理器名/超时转移时间):</label>\n		            <div class="col-sm-4">\n		            	<input  id="mqServerInfo" value = "<%=mqServerInfo%>"  type="text" class="form-control input-sm"  placeholder="" />\n		           		<input  id="mode" value = "<%=mode%>"  type="hidden" />\n		            	<input  id="service" value = "<%=serviceName%>"  type="hidden" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "mqServerInfoTip"></span></div>\n		        </div>\n		        \n		        \n		        <div class="form-group" id = "requestQueueSizeDiv" >\n		            <label for="requestQueueSize" class="col-sm-4 control-label">请求队列大小:</label>\n		            <div class="col-sm-4">\n		            	<input  id="requestQueueSize" value = "<%=requestQueueSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "requestQueueSizeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "invokeContextSizeDiv" >\n		            <label for="invokeContextSize" class="col-sm-4 control-label">应答队列大小:</label>\n		            <div class="col-sm-4">\n		            	<input  id="invokeContextSize" value = "<%=invokeContextSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "invokeContextSizeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "threadPoolSizeDiv" >\n		            <label for="threadPoolSize" class="col-sm-4 control-label">适配服务线程池大小:</label>\n		            <div class="col-sm-4">\n		            	<input  id="threadPoolSize" value = "<%=threadPoolSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "threadPoolSizeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "messageModeDiv" >\n		            <label for="messageMode" class="col-sm-4 control-label">信息模式:</label>\n		            <div class="col-sm-4">\n		            	<input  id="messageMode" value = "<%=messageMode%>" readonly="readonly" type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "messageModeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "upperLimitDiv" >\n		            <label for="upperLimit" class="col-sm-4 control-label">队列预警值:</label>\n		            <div class="col-sm-4">\n		            	<input  id="upperLimit" value = "<%=upperLimit%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span class ="text-info">(%)</span><span id = "upperLimitTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "queueTypeDiv" >\n		            <label for="queueType" class="col-sm-4 control-label">队列类型:</label>\n		            <div class="col-sm-4">\n		            	<select id="queueType"   class="form-control input-sm">\n	            			<%if(messageMode=="one_way"){%>\n	            				<%for(var i = 0 ; i < queueTypes.length ; i ++){%>\n		            				<option <%if(queueType==queueTypes[i]){%>selected = "selected"<%}%>  value = "<%=queueTypes[i]%>"><%=queueTypes[i]%></option>\n		            			<%}%>\n	            			<%}else{%>\n	            				<option value="SimpleQueue" selected="selected" >SimpleQueue</option>\n	            			<%}%>\n		            	</select>\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "queueTypeTip"></span></div>\n		        </div>\n				   \n				<div class="form-group">\n				   <div class="col-sm-offset-3">\n				       <button type="button" id = "submitFormBtn" class="btn btn-primary">修改</button>\n				       <button type="button" id = "backBtn" class="btn btn-primary" >返回</button>\n				   </div>\n			    </div>\n	   		</form>\n	   <%	\n	}else if ("page2"==pageFlag){//configBusinessService.jsp\n	   %>\n	   		<form class="form-horizontal" role="form">\n				<input type="hidden" id="serverId" value="<%=serverId%>" />\n	   			<input type="hidden" id="serviceId" value="<%=serviceId%>" /> \n	   			<div class="form-group" id = "requestQueueSizeDiv" >\n		            <label for="requestQueueSize" class="col-sm-4 control-label">请求队列大小：</label>\n		            <div class="col-sm-4">\n		            	<input  id="requestQueueSize" value = "<%=requestQueueSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "requestQueueSizeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "invokeContextSizeDiv" >\n		            <label for="invokeContextSize" class="col-sm-4 control-label">应答队列大小：</label>\n		            <div class="col-sm-4">\n		            	<input  id="invokeContextSize" value = "<%=invokeContextSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "invokeContextSizeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "threadPoolSizeDiv" >\n		            <label for="threadPoolSize" class="col-sm-4 control-label">线程池大小：</label>\n		            <div class="col-sm-4">\n		            	<input  id="threadPoolSize" value = "<%=threadPoolSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "threadPoolSizeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "messageModeDiv" >\n		            <label for="messageMode" class="col-sm-4 control-label">信息模式：</label>\n		            <div class="col-sm-4">\n		            	<select id="messageMode"   class="form-control input-sm">\n		            		<%for(var j = 0 ; j < messageModes.length ; j ++){\n		            			if(messageMode== messageModes[j]){\n		            			  %><option selected = "selected" value = "<%=messageModes[j]%>"><%=messageModes[j]%></option><%\n		            			}else{\n		            			  %><option value = "<%=messageModes[j]%>"><%=messageModes[j]%></option><%\n		            			}\n		            		}%>\n		            	</select>\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "messageModeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "upperLimitDiv" >\n		            <label for="upperLimit" class="col-sm-4 control-label">队列预警值：</label>\n		            <div class="col-sm-4">\n		            	<input  id="upperLimit" value = "<%=upperLimit%>"  type="text" class="form-control input-sm"  placeholder="" />\n		            </div>\n		            <div><span class = "text-danger">*</span><span class ="text-info">(%)</span><span id = "upperLimitTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group" id = "queueTypeDiv" >\n		            <label for="queueType" class="col-sm-4 control-label">队列类型:</label>\n		            <div class="col-sm-4">\n		            	<select id="queueType"   class="form-control input-sm">\n		            		<%if(messageMode=="one_way"){%>\n	            				<%for(var i = 0 ; i < queueTypes.length ; i ++){%>\n		            				<option <%if(queueType==queueTypes[i]){%>selected = "selected"<%}%>  value = "<%=queueTypes[i]%>"><%=queueTypes[i]%></option>\n		            			<%}%>\n	            			<%}else{%>\n	            				<option value="SimpleQueue" selected="selected" >SimpleQueue</option>\n	            			<%}%>\n		            	</select>\n		            </div>\n		            <div><span class = "text-danger">*</span><span id = "queueTypeTip"></span></div>\n		        </div>\n		        \n		        <div class="form-group">\n				   <div class="col-sm-offset-3">\n				       <button type="button" id = "submitFormBtn" class="btn btn-primary">修改</button>\n				       <button type="button" id = "backBtn" class="btn btn-primary" >返回</button>\n				   </div>\n			    </div>\n	   			\n	   		</form>	\n	   <%	\n	}else if ("page3"==pageFlag){//业务服务返回页面\n	   %>\n	   	<form class="form-horizontal" role="form">\n			<input type="hidden" id="serverId" value="<%=serverId%>" />\n	   		<input type="hidden" id="serviceId" value="<%=serviceId%>" /> \n	   		<div class="form-group" id = "invokeServiceNameDiv" >\n		        <label for="invokeServiceName" class="col-sm-4 control-label">调用服务名称：</label>\n		        <div class="col-sm-4">\n		           <input  id="invokeServiceName" value = "<%=invokeServiceName%>" readonly="readonly"  type="text" class="form-control input-sm"  placeholder="" />\n		        </div>\n		        <div><span class = "text-danger">*</span><span id = "invokeServiceNameTip"></span></div>\n		    </div>\n		    \n	   		<div class="form-group" id = "invokeTimeoutDiv" >\n		        <label for="invokeTimeout" class="col-sm-4 control-label">调用超时时间：</label>\n		        <div class="col-sm-4">\n		           <input  id="invokeTimeout" value = "<%=invokeTimeout%>"  type="text" class="form-control input-sm"  placeholder="" />\n		        </div>\n		        <div><span class = "text-danger">*</span><span id = "invokeTimeoutTip"></span></div>\n		    </div>\n		    \n		    \n		    <div class="form-group" id = "threadPoolSizeDiv" >\n		        <label for="threadPoolSize" class="col-sm-4 control-label">线程池大小：</label>\n	            <div class="col-sm-4">\n	            	<input  id="threadPoolSize" value = "<%=threadPoolSize%>"  type="text" class="form-control input-sm"  placeholder="" />\n	            </div>\n		        <div><span class = "text-danger">*</span><span id = "threadPoolSizeTip"></span></div>\n		    </div>\n		    \n	        <div class="form-group">\n			   <div class="col-sm-offset-3">\n			       <button type="button" id = "submitFormBtn" class="btn btn-primary">修改</button>\n			       <button type="button" id = "backBtn" class="btn btn-primary" >返回</button>\n			   </div>\n		    </div>\n		    \n	   	</form>\n	   <%	\n	}\n%>'),define("travsky/jcf/1.0.0/view/service/respMoni_view",["jquery","backbone","underscore","marionette","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SidebarUtil","my97Date","querystring","travsky/jcf/1.0.0/view/service/serverServiceChart_view","highcharts"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("marionette"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("travsky/jcf/1.0.0/util/SidebarUtil");a("my97Date");var h=a("querystring");a("bs-modal")(b);var i=a("travsky/jcf/1.0.0/template/service/serviceChartOpt.tpl"),j=e.LayoutView.extend({initialize:function(){this.listenTo(this.model,"change",this.render)},regions:{errInfoShowRegion:"#errInfoShowRegion",singleErrInfoShowRegion:"#singleErrInfoShowRegion"},template:d.template(i),events:{"change #dataType":"changeGroupCategory","click #queryDataBtn":"queryData","click #startDate":"startDate","click #endDate":"endDate"},changeGroupCategory:function(){var a=this.$el.find("#dataType").val();this.model.set("checkGroupCategory",a),b("#queryDataModal").modal("show")},startDate:function(){WdatePicker({el:$dp.$("startTime"),dateFmt:"yyyy-MM-dd HH:mm:ss"})},endDate:function(){WdatePicker({el:$dp.$("endTime"),dateFmt:"yyyy-MM-dd HH:mm:ss"})},getCacheConfigFormInputParam:function(){var a=["dataType","disposeType"],b=f.getFormInputObj(a);return b},checkCacheGroupCfgInfo:function(){return this.checkGroupName()&&this.checkGroupPassword()&&this.checkBroadcastURL()&&this.checkMaxSize4Store()&&this.checkSingleDataMaxLength()&&this.checkCacheNodeAlert()&&this.checkJvmMemory()&&this.checkJvmHeapAlert()&&this.checkDataBackupNum()&&this.checkStatisticsPath()&&this.checkStatisticsSyncTime()&&this.checkJvmHeapBlock()&&this.checkMaxSize4Cache()&&this.checkaNetworkPort()&&this.checkaddTcpIPMember()?!0:!1},queryData:function(){var d={},e=g.getModuleName(),i="/"+jcfManager.appName+"/service/chartSearch.action";d=this.getCacheConfigFormInputParam(),d.serviceName=this.model.get("serviceName"),d.serverName=this.model.get("serverName"),d.appVersion=this.model.get("appVersion");var j=f.dealAjaxRequest4JSObj(i,d),k=this;k.remove(),appRouter.navigate(e+"/server/MoniOption/param/"+h.stringify(d)),b.when(j).done(function(b){if("error"!=b.flag){var d=new c.Model(b);d.set("serverId",k.model.get("serverId")),d.set("appVersion",k.model.get("appVersion"));var e=a("travsky/jcf/1.0.0/view/service/serverServiceChart_view"),f=new e({model:d});jcfManager.contentRegion.show(f)}else alert("度量数据加载失败")})}});return j}),define("travsky/jcf/1.0.0/template/service/serviceChartOpt.tpl",[],'<div id = "queryDataModal" class="modal" aria-hidden="true" style="z-index:10400;"  data-backdrop="static">\n   <div class="modal-dialog" style = "width:700px;">\n      <div class="modal-content">\n         <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n            <h4 class="modal-title" id="myModalLabel">数据查询选项</h4>\n         </div>\n         <div class="modal-body">\n         <form class="form-horizontal"  role="form" method= "POST">\n 	          <div class="form-group" id = "addGroup_groupCategoryDiv" >\n			      <label for="addGroup_groupCategory" class="col-sm-3 control-label">数据类型：</label>\n			      <div class="col-sm-5">\n			          <select id="dataType"  class  = "form-control input-sm">\n			          	 <%\n					      	   if(1==checkGroupCategory){\n					      		  %><option selected = "selected"  value = "1" >实时数据</option>\n					     			<option value = "2" >历史数据</option><%\n					      	   }else{\n					      	 	  %><option value = "1" >实时数据</option>\n					     			<option selected = "selected" value = "2" >历史数据</option><%\n					      	   }\n					     %>\n				     </select>\n			      </div>\n			  </div>	\n         	  			\n 			  <div class="form-group" id = "addGroup_groupNameDiv" >\n			      <label for="addGroup_groupCategory" class="col-sm-3 control-label">处理类型：</label>\n			      <div class="col-sm-5">\n			          <select id="disposeType"  class  = "form-control input-sm">\n					     <option selected = "selected"  value = "1" >处理时间</option>\n					     <option value = "2" >处理结果</option>\n				     </select>\n			      </div>\n			   </div>\n         </form>\n          <%\n		   	if(checkGroupCategory=="2"){//选择历史数据\n		  %>\n		   	   	<form class="form-horizontal" id = "addServerForm"  role="form" method= "POST">\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_groupPasswordDiv" >\n					      <label for="addGroup_groupPassword" class="col-sm-3 control-label">开始日期：</label>\n					      <div class="col-sm-5">\n					      	<input type="text" id="startTime" type="text" class="form-control input-sm"  placeholder="必填项" />\n							\n					      </div>\n					      <div>\n					      		<span class = "text-danger">\n					      			<img  id="startDate" src="./static/js/seajs-modules/My97DatePicker/skin/datePicker.gif"width="16" height="22" align="absmiddle">\n					      		</span>\n					      		<span id = "addGroup_groupPasswordTip"></span>\n					      </div>\n				    </div>\n		   	   		\n		   	   		<div class="form-group" id = "addGroup_broadcastURLDiv" >\n					      <label for="addGroup_broadcastURL" class="col-sm-3 control-label">结束日期：</label>\n					      <div class="col-sm-5">\n					      	<input type="text" id="endTime" type="text" class="form-control input-sm"  placeholder="必填项" />\n							\n					      </div>\n					      <div><span class = "text-danger">\n					      	<img  id="endDate" src="./static/js/seajs-modules/My97DatePicker/skin/datePicker.gif"width="16" height="22" align="absmiddle"></span>\n					      	<span id = "addGroup_groupPasswordTip"></span>\n					      </div>\n				    </div>\n		   	   	</form>\n		   	<%\n		   	}\n		   %>\n         </div>\n         <div class="modal-footer">\n            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>\n            <button id = "queryDataBtn" type="button" class="btn btn-primary">查询 </button>\n         </div>\n      </div>\n</div>'),define("travsky/jcf/1.0.0/model/service/service_degrade_config_model",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=a("travsky/jcf/1.0.0/util/CommonUtil"),d=c.getAppName(),e=b.Model.extend({urlRoot:"/"+d+"/service/serviceDegradeConfig.action",defaults:function(){return{degradeServiceName:"",tpsSelected:!1,degradeTPU:"",degradeTimeUnit:"1000",queueSelected:!1,degradePercent:""}},isTpsSelected:function(){return this.get("tpsSelected")},isQueueSelected:function(){return this.get("queueSelected")}});return e}),define("travsky/jcf/1.0.0/model/service/service_gray_config_model",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=a("travsky/jcf/1.0.0/util/CommonUtil"),d=c.getAppName(),e=b.Model.extend({urlRoot:"/"+d+"/service/serviceGrayConfig.action",defaults:function(){return{serviceTrafficSelected:!1,serviceHeaderSelected:!1,serviceTraffic:"traffic",serviceHeader:"header"}},isServiceTrafficSelected:function(){return this.get("serviceTrafficSelected")},isServiceHeaderSelected:function(){return this.get("serviceHeaderSelected")}});return e}),define("travsky/jcf/1.0.0/collection/dataSource/dataSource_collection",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/dataSource/dataSource_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/CommonUtil"),e=d.getAppName(),f=a("travsky/jcf/1.0.0/model/dataSource/dataSource_model"),g=b.Collection.extend({model:f,url:"/"+e+"/dataSource/getAlldataSourceList.action",parse:function(a){return c.extend(a)}});return g}),define("travsky/jcf/1.0.0/model/dataSource/dataSource_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({urlRoot:""});return c}),define("travsky/jcf/1.0.0/view/dataSource/dataSourceList_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/dataSource/dataSourceItem_view"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore");a("querystring");var e=a("travsky/jcf/1.0.0/util/CommonUtil"),f=a("travsky/jcf/1.0.0/template/dataSource/dataSourceList.tpl"),g=a("travsky/jcf/1.0.0/view/dataSource/dataSourceItem_view"),h=c.View.extend({el:"#content-body",template:d.template(f),events:{},initialize:function(a){this.options=a||{};var b="/"+jcfManager.appName+"/dataSource/getAllDataSource.action";e.dealAjaxRequestWithoutParam(b),this.dataSourceList=a.collection,this.dataSourceList.bind("reset",this.addAllDataSources,this),this.views=[]},render:function(){return b(this.el).html(this.template()),this},addDataSource:function(a){var b=new g({model:a});this.$el.find("#dataSourceListBody").append(b.render()),this.views.push(b)},addAllDataSources:function(){var a=this;d.each(this.views,function(a){a.remove().off()}),this.views=[],this.dataSourceList.each(function(b){a.addDataSource(b)})},refresh:function(a){this.dataSourceList.refresh(a)}});return h}),define("travsky/jcf/1.0.0/template/dataSource/dataSourceList.tpl",[],'<div id="dataSourceListHead" class="dsList">\n	<div class="allserverName">服务器名称</div>\n	<div class="alldsName">数据源名称</div>\n	<div class="alldsURL">URL</div>\n    <div class="alldsUserName">用户名</div>\n    <div class="alldsDriverClassName">驱动</div>\n</div>\n<div id="dataSourceListBody" class="dsList">\n	\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/dataSourceItem_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore");a("travsky/jcf/1.0.0/util/CommonUtil");var d=a("travsky/jcf/1.0.0/template/dataSource/dataSourceItem.tpl"),e=b.View.extend({template:c.template(d),tagName:"div",className:"dsList",events:{},initialize:function(a){this.model=a.model},render:function(){return this.$el.html(this.template(this.model.toJSON()))}});return e}),define("travsky/jcf/1.0.0/template/dataSource/dataSourceItem.tpl",[],'<div class="allserverName"><%=serverName%></div>\n<div class="alldsName"><%=dataSourceName%></div>\n<div class="alldsURL"><%=URL%></div>\n<div class="alldsUserName"><%=userName%></div>\n<div class="alldsDriverClassName"><%=driverClassName%></div>'),define("travsky/jcf/1.0.0/collection/dataSource/group_dataSource_collection",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/dataSource/group_dataSource_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/CommonUtil"),e=d.getAppName(),f=a("travsky/jcf/1.0.0/model/dataSource/group_dataSource_model"),g=b.Collection.extend({model:f,url:"/"+e+"/dataSource/groupDataSourceList.action",parse:function(a){return c.extend(a)},selectAll:function(){this.each(function(a){a.set("selected",!0)})},clearSelectAll:function(){this.each(function(a){a.set("selected",!1)})},selectedDataSource:function(){return this.filter(function(a){return a.isSelected()})},isAllSelected:function(){return 0==this.selectedDataSource().length?!1:this.selectedDataSource().length==this.length},refresh:function(a){this.fetch({data:a,reset:!0})}});return g}),define("travsky/jcf/1.0.0/model/dataSource/group_dataSource_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({urlRoot:"",defaults:function(){return{showDataSourceConfig:!1,showDataSourceMonitor:!1,restart:!1,connected:!1,confirmRestart:!1,confirmUndeploy:!1,selected:!1}},isSelected:function(){return 1==this.get("selected")}});return c}),define("travsky/jcf/1.0.0/view/dataSource/groupDataSourceList_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/dataSource/groupDataSourceItem_view","travsky/jcf/1.0.0/view/dataSource/dataSourceWait_view","travsky/jcf/1.0.0/view/dataSource/tip_view","travsky/jcf/1.0.0/view/dataSource/global_view","travsky/jcf/1.0.0/util/DataSourceAuthCheckUtil"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("querystring"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("travsky/jcf/1.0.0/template/dataSource/groupDataSourceList.tpl"),h=a("travsky/jcf/1.0.0/view/dataSource/groupDataSourceItem_view"),i=a("travsky/jcf/1.0.0/util/DataSourceAuthCheckUtil"),j=c.View.extend({el:"#content-body",template:d.template(g),events:{"click #allSelected":"toggleSelectAll"},initialize:function(a){this.options=a||{},this.groupId=a.queryString.groupId;var b={groupId:this.groupId},c="/"+jcfManager.appName+"/dataSource/getGroupDataSource.action";f.dealAjaxRequest4SimpleParam(c,b),this.dataSourceList=a.collection,this.dataSourceList.bind("change:restart",this.restartDataSource,this),this.dataSourceList.bind("change:uninstall",this.uninstallDataSource,this),this.dataSourceList.bind("reset",this.addAllGroupDataSources,this),this.dataSourceList.bind("remove",this.addAllGroupDataSources,this),this.dataSourceList.bind("change:selected",this.isSelectAll,this),this.views=[]},render:function(){return b(this.el).html(this.template()),this},addGroupDataSource:function(a){var b=i.getServerDataSourceUninstallAuth(),c=i.getServerDataSourceRestartAuth();a.set({groupUninstallAuthFlag:b,groupRestartAuthFlag:c});var d=new h({model:a,groupId:this.groupId});this.$el.find("#dataSourceListBody").append(d.render()),this.views.push(d)},addAllGroupDataSources:function(){var a=this;d.each(this.views,function(a){a.remove().off()}),this.views=[],this.dataSourceList.each(function(b){a.addGroupDataSource(b)})},toggleSelectAll:function(){var a=this;a.dataSourceList.isAllSelected()?this.dataSourceList.clearSelectAll():this.dataSourceList.selectAll()},isSelectAll:function(){var a=this;a.dataSourceList.isAllSelected()?this.$el.find("#allSelected").prop("checked",!0):this.$el.find("#allSelected").removeAttr("checked")},uninstallDataSource:function(){this.render(),this.refresh(e.stringify(this.options.queryString))
},restartDataSource:function(){this.render(),this.refresh(e.stringify(this.options.queryString))},refresh:function(a){this.dataSourceList.refresh(a)}});return j}),define("travsky/jcf/1.0.0/template/dataSource/groupDataSourceList.tpl",[],'<div id="dataSourceListHead" class="dsList">\n	<div class="groupselect"><input id="allSelected" class="select" type="checkbox"></input></div>\n	<div class="groupserverName">服务器名称</div>\n	<div class="groupdsName">数据源名称</div>\n	<div class="groupdsURL">URL</div>\n    <div class="groupdsUserName">用户名</div>\n    <div class="groupdsundeploy">组卸载</div>\n    <div class="groupdsrestart">组重启</div>\n</div>\n<div id="dataSourceListBody" class="dsList">\n	\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/groupDataSourceItem_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/dataSource/dataSourceWait_view","travsky/jcf/1.0.0/view/dataSource/tip_view","travsky/jcf/1.0.0/view/dataSource/global_view"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("travsky/jcf/1.0.0/util/CommonUtil"),f=a("travsky/jcf/1.0.0/template/dataSource/groupDataSourceItem.tpl"),g=a("travsky/jcf/1.0.0/view/dataSource/dataSourceWait_view"),h=a("travsky/jcf/1.0.0/view/dataSource/tip_view"),i=a("travsky/jcf/1.0.0/view/dataSource/global_view"),j=c.View.extend({template:d.template(f),tagName:"div",className:"dsList",events:{"click .groupdsundeploy a":"showGroupDataSourceUndeployView","click .groupdsrestart a":"showGroupDataSourceRestartView","click #cancel":"closeConfig","click .select":"toggleSelect"},initialize:function(a){this.model=a.model,this.groupId=a.groupId,this.model.bind("change:selected",this.modelChange,this),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"change:confirmRestart",this.groupDataSourceRestart),this.listenTo(this.model,"change:confirmUndeploy",this.groupDataSourceUndeploy)},render:function(){return this.$el.html(this.template(this.model.toJSON()))},showGroupDataSourceUndeployView:function(){var a=new h({headerMessage:"卸载组数据源",bodyMessage:"确定要卸载组数据源"+this.model.get("dataSourceName")+"么？",model:this.model,type:"undeploy"});this.$el.append(a.render()),a.show()},groupDataSourceUndeploy:function(){var a=this,c=new g;b("#tip").append(c.render()),c.show();var d={groupId:this.groupId,dsName:this.model.get("dataSourceName")},f="/"+jcfManager.appName+"/dataSource/groupDataSourceUninstall.action",h=e.dealAjaxRequest4SimpleParam(f,d);b.when(h).done(function(b){c.remove(),a.model.set("uninstall",!0),b.flag&&(b.messageList=["组数据源卸载成功"]);var d=new i({model:b});d.render()})},showGroupDataSourceRestartView:function(){var a=new h({headerMessage:"重启组数据源",bodyMessage:"确定要重启组数据源"+this.model.get("dataSourceName")+"么？",model:this.model,type:"restart"});this.$el.append(a.render()),a.show()},groupDataSourceRestart:function(){var a=this,c={groupId:this.groupId,dsName:this.model.get("dataSourceName")},d="/"+jcfManager.appName+"/dataSource/groupDataSourceRestart.action",f=e.dealAjaxRequest4SimpleParam(d,c);b.when(f).done(function(b){if(a.model.set("restart",!0),"true"==b.flag){var c=(new Date).getTime();appRouter.navigate("dataSrcMgr/group/param/groupId="+a.groupId+"&t="+c,{trigger:!0})}else{b.messageList=["组数据源重启失败"];var d=new i({model:b});d.render()}})},toggleSelect:function(){var a=this;a.model.set("selected",!a.model.get("selected"))},modelChange:function(){var a=this;a.model.hasChanged("selected")&&(a.$el.toggleClass("active",a.model.isSelected()),a.model.isSelected()?a.$(".select").prop("checked",a.model.isSelected()):a.$(".select").removeAttr("checked"))}});return j}),define("travsky/jcf/1.0.0/template/dataSource/groupDataSourceItem.tpl",[],'<div class="groupselect"><input class="select" type="checkbox" <%if (selected == true){%>checked="true"<%}%>/></div>\n<div class="groupserverName"><%=serverName%></div>\n<div class="groupdsName"><%=dataSourceName%></div>\n<div class="groupdsURL"><%=URL%></div>\n<div class="groupdsUserName"><%=userName%></div>\n<div class="groupdsundeploy">\n	<%if(groupUninstallAuthFlag==\'true\'){\n		%><a href="javascript:void(0);">组卸载</a><%\n	}else{\n		%>组卸载<%\n	}%>\n</div>\n<div class="groupdsrestart">\n	<%if(groupRestartAuthFlag==\'true\'){\n		%><a href="javascript:void(0);">组重启</a><%\n	}else{\n		%>组重启<%\n	}%>\n</div>\n'),define("travsky/jcf/1.0.0/view/dataSource/dataSourceWait_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/dataSource/dataSourceWait.tpl"),e=b.View.extend({tagName:"div",className:"tip",template:c.template(d),events:{},initialize:function(){},render:function(){return this.$el.html(this.template())},show:function(){this.$el.find("#modal").modal("show")},remove:function(){this.$el.find("#modal").modal("hide")}});return e}),define("travsky/jcf/1.0.0/template/dataSource/dataSourceWait.tpl",[],'<div id="modal" class="modal" aria-hidden="true" style="z-index: 10400;">\n    <div class="modal-dialog">\n    	<div class="modal-content">          \n			<div class="modal-header">        \n				<h3>操作中</h3>      \n			</div>        \n			<div class="modal-body">\n				<div>请稍后......</div>\n			</div>    \n		</div>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/tip_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/dataSource/tip.tpl"),e=b.View.extend({tagName:"div",className:"tip",template:c.template(d),events:{"click .modal-footer .ok":"confirm","click .modal-footer .cancel":"cancel"},initialize:function(a){this.options=a||{},this.headerMessage=a.headerMessage,this.bodyMessage=a.bodyMessage,this.model=a.model,this.type=a.type},render:function(){return this.$el.html(this.template({headerMessage:this.headerMessage,bodyMessage:this.bodyMessage}))},show:function(){this.$el.find("#modal").modal("show")},remove:function(){console.log("tip remove"),this.$el.find("#modal").remove()},confirm:function(){this.remove(),"restart"==this.type?this.model.set("confirmRestart",!0):this.model.set("confirmUndeploy",!0)},cancel:function(){"restart"==this.type?this.model.set("confirmRestart",!1):this.model.set("confirmUndeploy",!1),this.remove()}});return e}),define("travsky/jcf/1.0.0/template/dataSource/tip.tpl",[],'<div id="modal" class="modal" aria-hidden="true" style="z-index: 10400;">\n    <div class="modal-dialog">\n    	<div class="modal-content">          \n			<div class="modal-header">        \n				<h3><%=headerMessage%></h3>      \n			</div>        \n			<div class="modal-body">\n				<div><p><%=bodyMessage%></p></div>\n			</div>    \n			<div class="modal-footer">      \n				<a id="confirm" class="btn ok btn-primary" href="javascript:void(0);">确定</a>\n				<a id="cancle" class="btn cancel" href="javascript:void(0);">取消</a>\n			</div>\n		</div>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/global_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/dataSource/global.tpl"),e=b.View.extend({el:"#global",template:c.template(d),events:{"click .close-btn":"close"},initialize:function(a){this.model=a.model},render:function(){return this.$el.html(this.template(this.model)),this},close:function(){this.$el.find("div").remove()}});return e}),define("travsky/jcf/1.0.0/template/dataSource/global.tpl",[],'<div id="<%if (flag == true){%>success<%}else{%>failure<%}%>">\n	<div style="display:inline-block">\n		<%for (var i = 0; i < messageList.length; i++){%>\n			<%=messageList[i]%>\n		<%}%>\n	</div>\n	<a class="close-btn"></a>\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/groupDataSourceListHead_view",["jquery","backbone","underscore","querystring"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore");a("querystring");var d=a("travsky/jcf/1.0.0/template/dataSource/groupDataSourceListHead.tpl"),e=b.View.extend({el:"#content-header",template:c.template(d),events:{},initialize:function(a){this.options=a||{},this.groupId=a.queryString.groupId,this.dataSourceList=a.collection,this.dataSourceList.bind("change:selected",this.addOptions,this)},render:function(){return this.$el.html(this.template()),this}});return e}),define("travsky/jcf/1.0.0/template/dataSource/groupDataSourceListHead.tpl",[],'<div id="optionMenus">\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/groupDeployDataSource_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/util/DataSourceUtil","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil","travsky/jcf/1.0.0/model/dataSource/group_dataSource_deploy_model","travsky/jcf/1.0.0/collection/dataSource/group_dataSource_server_collection","travsky/jcf/1.0.0/model/dataSource/group_dataSource_server_model","travsky/jcf/1.0.0/view/dataSource/groupDataSourceServerList_view","travsky/jcf/1.0.0/view/dataSource/groupDataSourceServerItem_view","travsky/jcf/1.0.0/view/dataSource/global_view"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("querystring"),e=a("travsky/jcf/1.0.0/util/DataSourceUtil"),f=a("travsky/jcf/1.0.0/model/dataSource/group_dataSource_deploy_model"),g=a("travsky/jcf/1.0.0/collection/dataSource/group_dataSource_server_collection"),h=a("travsky/jcf/1.0.0/template/dataSource/groupDeployDataSource.tpl"),i=a("travsky/jcf/1.0.0/view/dataSource/groupDataSourceServerList_view"),j=a("travsky/jcf/1.0.0/view/dataSource/global_view"),k=b.View.extend({el:"#content-body",template:c.template(h),events:{"blur #dataSourceName":"checkDataSourceName","blur #userName":"checkUserName","blur #password":"checkPassWord","blur #URL":"checkURL","click #save":"deployDataSource"},initialize:function(a){this.options=a||{},this.groupId=a.queryString.groupId,this.groupDataSourceServerCollection=new g},render:function(){return this.$el.html(this.template()),this},getServerList:function(){var a=new i({groupId:this.groupId,collection:this.groupDataSourceServerCollection});this.groupDataSourceServerCollection.fetch({reset:!0,data:d.stringify(this.options.queryString)}),a.render()},deployDataSource:function(){if(this.checkForm()){var a=[];if(this.groupDataSourceServerCollection.selectedServer().length>0){this.groupDataSourceServerCollection.each(function(b){var c=b.get("serverId"),d=a.indexOf(c);b.isSelected()&&0>d&&a.push(c),!b.isSelected()&&d>=0&&a.splice(d,1)});var b=new f,c=this.$el.find("#dataSourceName").val().trim(),d=this.$el.find("#userName").val().trim(),e=this.$el.find("#password").val().trim(),g=this.$el.find("#URL").val().trim(),h=this.$el.find("#driverClassName").val().trim();b.set("dataSourceName",c),b.set("username",d),b.set("password",e),b.set("URL",g),b.set("driverClassName",h),b.save({allSelectedItems:a},{success:function(a,b){1==b.flag&&(b.messageList=["组部署数据源成功"]);var c=new j({model:b});c.render()}})}else{var i={};i.flag=!1,i.messageList=["请选择需要部署的服务器"];var k=new j({model:i});k.render()}}else{var i={flag:"false",messageList:"页面参数验证失败"},l=new j({model:i});l.render()}},checkDataSourceName:function(){var a=e.checkDataSourceName("dataSourceName");return a},checkUserName:function(){var a=e.checkUserName("userName");return a},checkPassWord:function(){var a=e.checkPassWord("password");return a},checkURL:function(){var a=e.checkURL("URL");return a},checkForm:function(){return this.checkDataSourceName()&&this.checkUserName()&&this.checkPassWord()&&this.checkURL()?!0:!1}});return k}),define("travsky/jcf/1.0.0/util/DataSourceUtil",["jquery","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","backbone","underscore","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil"],function(a){var b=jQuery=a("jquery");a("travsky/jcf/1.0.0/util/CommonUtil");var c=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil"),d={checkDataSourceName:function(a){var b=c.checkNotNull(a);if(b){var d="^[a-zA-Z0-9_#]*$";b=c.checkMatchRegular(a,d,"只能包含字母、数字、下划线和警号")}return this.renderInput(a,b),b},checkUserName:function(a){var b=c.checkNotNull(a);if(b){var d="^[a-zA-Z0-9_#]*$";b=c.checkMatchRegular(a,d,"只能包含字母、数字、下划线和警号")}return this.renderInput(a,b),b},checkPassWord:function(a){var c=b.trim(b("#"+a).val()),d=!0;if(c.length>0){if(this.checkStrContainChinese(c)){d=!1;var e=b("#"+a+"Tip");e.html("不能包含中文!")}this.renderInput(a,d)}return d},checkURL:function(a){var b=c.checkNotNull(a);return this.renderInput(a,b),b},checkMaxActive:function(a){var d;return d=c.checkNotNull(a)?c.checkIsNum(a)?c.checkIsGreaterThanOrEqualNum(a,b("#maxIdle").val())?c.checkIsGreaterThanOrEqualNum(a,b("#initialSize").val())?!0:!1:!1:!1:!1,this.renderInput(a,d),d},checkMaxWait:function(a){var b=c.checkNotNull(a);return b&&(b=c.checkIsNum(a)),this.renderInput(a,b),b},checkMaxIdle:function(a){var b=c.checkNotNull(a);return b&&(b=c.checkIsPositiveInteger(a)),b&&(b=c.checkIsGreaterThanOrEqualNum(a,0)),b&&(b=c.checkIsLessThanOrEqualNum(a,500)),this.renderInput(a,b),b},checkMinIdle:function(a){var d=c.checkNotNull(a);return d&&(d=c.checkIsNotNegativeInteger(a)),d&&(d=c.checkIsGreaterThanOrEqualNum(a,0)),d&&(d=c.checkIsLessThanOrEqualNum(a,500)),d&&(d=c.checkIsLessThanOrEqualNum(a,b("#maxIdle").val())),this.renderInput(a,d),d},checkInitialSize:function(a){var b=c.checkInputMatchIsNotNegativeAndNotNull(a);return this.renderInput(a,b),b},checkStrContainChinese:function(a){for(var b=0;b<a.length;b++){var c=a.charAt(b);if(c.charCodeAt()>16384&&c.charCodeAt()<65024)return!0}return!1},renderInput:function(a,c){if(c){var d=b("#"+a);d.parent().addClass("has-success"),d.parent().hasClass("has-error")&&d.parent().removeClass("has-error")}else{var d=b("#"+a);d.parent().addClass("has-error"),d.parent().hasClass("has-success")&&d.parent().removeClass("has-success")}}};return d}),define("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil",["jquery"],function(a){var b=jQuery=a("jquery"),c={checkInputFileNameNotContainExt:function(a,c){var d=this.checkInputMatchMaxLength(a,c),e=b("#"+a).val();if(d)if(e.indexOf(".")>-1){var f="日志保存路径不能含有后缀名";d=this.errInput(a,f)}else d=this.successInput(a);return d},checkInputMatchRegularCanNull:function(a,c,d,e){var f=b.trim(b("#"+a).val());if(0==f.length)return this.clearInput(a),!0;var g=this.checkMaxLengthValid(a,c);return g&&(g=this.checkMatchRegular(a,d,e)),g},checkInputMatchRegularAndNotNull:function(a,b,c,d){var e=this.checkNotNull(a);return e&&(e=this.checkMaxLengthValid(a,b)),e&&(e=this.checkMatchRegular(a,c,d)),e},checkInputMatchPort:function(a){var c=this.checkNotNull(a);if(c&&(c=this.checkIsPositiveInteger(a)),c){var d=b("#"+a),e=d.val(),f=parseInt(e);if(1024>f||f>65535){var g="端口应为1024~65535之间的数字";c=this.errInput(a,g)}else c=this.successInput(a)}return c},checkInputMatchIP:function(a){var b=this.checkNotNull(a);return b&&(b=this.checkIsIP(a)),b},checkInputMatchPositiveIntegerAndMaxLengthCanNull:function(a,c){var d=b.trim(b("#"+a).val());if(0==d.length)return this.clearInput(a),!0;var e=this.checkMaxLengthValid(a,c);return e&&(e=this.checkIsPositiveInteger(a)),e},checkInputMatchPositiveIntegerAndMaxLength:function(a,b){var c=this.checkNotNull(a);return c&&(c=this.checkMaxLengthValid(a,b)),c&&(c=this.checkIsPositiveInteger(a)),c},checkInputMatchIntegerAndMaxLength:function(a,b){var c=this.checkNotNull(a);return c&&(c=this.checkMaxLengthValid(a,b)),c&&(c=this.checkInteger(a)),c},checkInputMatchInt_MinNum__MaxNum:function(a,c,d){var e=this.checkNotNull(a);if(e&&(e=this.checkIsPositiveInteger(a)),e){var f=b("#"+a),g=f.val(),h=parseInt(g);if(h>=c&&d>=h)e=this.successInput(a);else{var i="正整数范围["+c+"-"+d+"]";e=this.errInput(a,i)}}return e},checkInputMatchNumAndMaxLength:function(a,b){var c=this.checkNotNull(a);return c&&(c=this.checkMaxLengthValid(a,b)),c&&(c=this.checkIsNum(a)),c},checkInputMatchMaxLengthCanNull:function(a,c){var d=b.trim(b("#"+a).val()),e=!0;return d.length>0?e=this.checkMaxLengthValid(a,c):this.clearInput(a),e},checkInputMatchMaxLength:function(a,b){var c=this.checkNotNull(a);return c&&(c=this.checkMaxLengthValid(a,b)),c},checkInputMatchGoodLength:function(a,b,c){var d=this.checkNotNull(a);return d&&(d=this.checkGoodLengthValid(a,b,c)),d},checkInputMatchIsNotNegativeAndNotNull:function(a){var b=this.checkNotNull(a);return b&&(b=this.checkIsNotNegativeInteger(a)),b},checkInteger:function(a){var c=b("#"+a).val(),d=/^\d+$/,e=d.test(c);if(e)this.successInput(a);else{var f="只能输入正数";this.errInput(a,f)}return e},checkIsPositiveInteger:function(a){var c=b("#"+a),d=b.trim(c.val()),e=/^[0-9]*[1-9][0-9]*$/;if(e.test(d))return this.successInput(a);var f="只能输入正整数";return this.errInput(a,f)},checkIsNum:function(a){var c=b("#"+a),d=b.trim(c.val());if(isNaN(d)||d.indexOf(".")>-1){var e="只能输入整数";return this.errInput(a,e)}return this.successInput(a)},checkIsNumValue:function(a,b){if(isNaN(b)||b.indexOf(".")>-1){var c="只能输入整数";return this.errInput(a,c)}return this.successInput(a)},checkIsIP:function(a){var b=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,c="IP格式不合法",d=this.checkMatchRegular(a,b,c);return d},checkGoodString:function(a){var c=b("#"+a),d=b.trim(c.val()),e="^\\w+$";if(d.match(e))return this.successInput(a);var f="含有非法字符(只能含有字母、整数、下划线)";return this.errInput(a,f)},checkMatchRegular:function(a,c,d){var e=b("#"+a),f=b.trim(e.val());if(f.match(c))return this.successInput(a);var d="格式不符合要求("+d+")";return this.errInput(a,d)},checkMatchRegularValue:function(a,b,c,d){if(d.match(b))return this.successInput(a);var c="格式不符合要求("+c+")";return this.errInput(a,c)},checkGoodLengthValid:function(a,c,d){var e=b("#"+a),f=b.trim(e.val());if(f.length>d){var g="最大允许输入"+d+"位";return this.errInput(a,g)}if(f.length<c){var g="最小允许输入"+c+"位";return this.errInput(a,g)}return this.successInput(a)},checkMaxLengthValid:function(a,c){var d=b("#"+a),e=b.trim(d.val());if(e.length>c){var f="最大允许输入"+c+"位";return this.errInput(a,f)}return this.successInput(a)},checkNotNull:function(a){var c=b("#"+a),d=b.trim(c.val());return 0!=d.length?this.successInput(a):(this.errInput(a,"不能为空"),void 0)},checkStrongPassword:function(a){var c=b("#"+a),d=b.trim(c.val()),e=/[a-z]/g,f=/[A-Z]/g,g=/[0-9]/g,h=/[\x21-\x2f\x3a-\x40\x5b-\x60\x7b-\x7e]/g,i=/^[\x21-\x7e]{8,20}$/g,j=4;return i.test(d)?(e.test(d)||j--,f.test(d)||j--,g.test(d)||j--,h.test(d)||j--,j>=3?this.successInput(a):this.errInput(a,"密码应同时包含大小写字母、数字、特殊字符中的至少三种！")):this.errInput(a,"密码长度应该为8-20位")},checkIpAndPortInArray:function(a,c,d){b("#"+a);var e=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5]):([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/;for(i=0;i<c.length;i++)if(!c[i].match(e)){var d="格式不符合要求("+d+")";return this.errInput(a,d)}return this.successInput(a)},checkEmail:function(a){var c=b("#"+a),d=new RegExp(/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]+$/),e=b.trim(c.val()),f=d.test(e),g="邮箱格式有误";return f?this.successInput(a):this.errInput(a,g),f},checkIsNotNegativeInteger:function(a){var c=b("#"+a),d=b.trim(c.val()),e=/^\d+$/;if(e.test(d))return this.successInput(a);var f="只能输入非负整数";return this.errInput(a,f)},checkIsGreaterThanNum:function(a,c){var d=parseInt(b("#"+a).val());if(d>c)return this.successInput(a);var e="填入数据应该大于"+c;return this.errInput(a,e)},checkIsLessThanNum:function(a,c){var d=parseInt(b("#"+a).val());if(c>d)return this.successInput(a);var e="填入数据应该小于"+c;return this.errInput(a,e)},checkIsGreaterThanOrEqualNum:function(a,c){var d=parseInt(b("#"+a).val());if(d>=c)return this.successInput(a);var e="填入数据不能小于"+c;return this.errInput(a,e)},checkIsLessThanOrEqualNum:function(a,c){var d=parseInt(b("#"+a).val());if(c>=d)return this.successInput(a);var e="填入数据不能大于"+c;return this.errInput(a,e)},errInput:function(a,c){var d=b("#"+a),e=b("#"+a+"Div"),f=b("#"+a+"Tip");return e.hasClass("has-success")&&(e.removeClass("has-success"),f.removeClass("text-success")),e.hasClass("has-error")||(e.addClass("has-error"),f.addClass("text-danger")),f.html(c),d.focus(),!1},checkServerAndPortList:function(a){for(var c=b.trim(b("#"+a).val()),d=!0,e=c.split(" "),f=0;f<e.length;f++)d&&(d=this.checkServerAndPort_Value(a,e[f]));return d},checkServerAndPort_Value:function(a,b){var c=b.split(":");if(2==c.length){var d=c[0],e=c[1],f=this.checkIsIPs(a,d);return f&&(f=this.checkInputMatchPort1(a,e)),f}return this.errInput(a,"服务器列表格式不正确"),!1},checkIsIPs:function(a,b){var c=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,d="IP格式不合法",e=this.checkMatchRegularValue(a,c,d,b);return e},checkInputMatchPort1:function(a,b){var c=parseInt(b),d=this.checkIsNumValue(a,b);if(d)if(1024>c||c>65535){var e="端口应为1024~65535之间的数字";d=this.errInput(a,e)}else d=this.successInput(a);return d},successInput:function(a){var c=b("#"+a+"Div"),d=b("#"+a+"Tip");return c.hasClass("has-error")&&(c.removeClass("has-error"),d.removeClass("text-danger")),c.hasClass("has-success")||(c.addClass("has-success"),d.addClass("text-success")),d.html(""),!0},clearInput:function(a){var c=b("#"+a+"Div"),d=b("#"+a+"Tip");c.removeClass("has-error").removeClass("has-success"),d.removeClass("text-danger").removeClass("text-success"),d.html("")}};return c}),define("travsky/jcf/1.0.0/model/dataSource/group_dataSource_deploy_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=b.Model.extend({urlRoot:"/"+jcfManager.appName+"/dataSource/groupDeployDataSource.action",defaults:{dataSourceName:"",URL:"",userName:"",password:"",driverClassName:""},parse:function(a){return this.flag=a.flag,this.message=a.message,c.extend(a)}});return d}),define("travsky/jcf/1.0.0/collection/dataSource/group_dataSource_server_collection",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/dataSource/group_dataSource_server_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/CommonUtil"),e=d.getAppName(),f=a("travsky/jcf/1.0.0/model/dataSource/group_dataSource_server_model"),g=b.Collection.extend({model:f,url:"/"+e+"/dataSource/searchAllServerByGroup.action",parse:function(a){return this.flag=a.flag,this.serverList=a.serverList,c.extend(a.serverList)},selectAll:function(){this.each(function(a){a.set("selected",!0)})},clearSelectAll:function(){this.each(function(a){a.set("selected",!1)})},selectedServer:function(){return this.filter(function(a){return a.isSelected()})},isAllSelected:function(){return 0==this.selectedServer().length?!1:this.selectedServer().length==this.length}});return g}),define("travsky/jcf/1.0.0/model/dataSource/group_dataSource_server_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({urlRoot:"",defaults:function(){return{selected:!1}},isSelected:function(){return 1==this.get("selected")}});return c}),define("travsky/jcf/1.0.0/template/dataSource/groupDeployDataSource.tpl",[],'<div id="groupDataSourceServerList">\n\n</div>\n<div id="addDataSource">\n	<div class="line">\n		<div class="content">\n			<label>数据源名称：</label>\n		</div>\n		<div class="value">\n			<input id="dataSourceName" name="dataSourceName" class="length form-control" type="text" value="" placeholder="必填项：字母、数字、下划线、#">\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="dataSourceNameTip">&nbsp;</span>\n		</div>\n		<div class="content">\n			<label>用户名：</label>\n		</div>\n		<div class="value">\n			<input id="userName" name="userName" class="length form-control" type="text" value="" placeholder="必填项：字母、数字、下划线、#">\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="userNameTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>密码： </label>\n		</div>\n		<div class="value">\n			<input id="password" name="password" class="length form-control" type="password" placeholder="必填项">\n	  	</div>\n	  	<div class="warn">\n	  		<span class = "text-danger">*</span>\n	  		<span id = "passwordTip"></span>\n	  	</div>\n	  	<div class="content">\n	  		<label>Url：</label>\n	  	</div>\n		<div class="value">\n			<input type="text" id="URL" name="URL" class="length form-control" type="text" value="" placeholder="必填项">\n		</div>\n		<div class="warn">\n			<span class = "text-danger">*</span>\n			<span id = "URLTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>驱动：</label>\n		</div>\n		<div class="value">\n			<select id="driverClassName" name="driverClassName" class="length" autocomplete="off">\n				<option value="com.ibm.db2.jcc.DB2Driver">com.ibm.db2.jcc.DB2Driver</option>\n				<option value="oracle.jdbc.OracleDriver">oracle.jdbc.OracleDriver</option>\n				<option value="org.postgresql.Driver">org.postgresql.Driver</option>\n				<option value="com.mysql.jdbc.Driver">com.mysql.jdbc.Driver</option>    		\n			</select>\n		</div>\n		<div class="warn">\n			<span id="driverClassNameTip">&nbsp;</span>\n		</div>\n	</div>\n	<div>\n		<div class="col-sm-offset-4">\n			<button id="save" class="btn btn-primary" type="button">部署</button>\n		</div>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/groupDataSourceServerList_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/collection/dataSource/group_dataSource_server_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/dataSource/group_dataSource_server_model","travsky/jcf/1.0.0/view/dataSource/groupDataSourceServerItem_view"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore");a("travsky/jcf/1.0.0/collection/dataSource/group_dataSource_server_collection");var d=a("travsky/jcf/1.0.0/template/dataSource/groupDataSourceServerList.tpl"),e=a("travsky/jcf/1.0.0/view/dataSource/groupDataSourceServerItem_view"),f=b.View.extend({el:"#groupDataSourceServerList",template:c.template(d),events:{"click #allSelected":"toggleSelectAll"},initialize:function(a){this.options=a||{},this.groupId=a.groupId,this.serverList=a.collection,this.serverList.bind("reset",this.addAllGroupServers,this),this.serverList.bind("change:selected",this.isSelectAll,this)},render:function(){return this.$el.html(this.template()),this},addGroupServer:function(a){var b=new e({model:a,groupId:this.groupId});this.$el.find("tbody").append(b.render()),this.views.push(b)},addAllGroupServers:function(){var a=this;c.each(this.views,function(a){a.remove().off()}),this.views=[],this.serverList.each(function(b){a.addGroupServer(b)})},toggleSelectAll:function(){var a=this;a.serverList.isAllSelected()?this.serverList.clearSelectAll():this.serverList.selectAll()},isSelectAll:function(){var a=this;a.serverList.isAllSelected()?this.$el.find("#allSelected").prop("checked",!0):this.$el.find("#allSelected").removeAttr("checked")}});return f}),define("travsky/jcf/1.0.0/template/dataSource/groupDataSourceServerList.tpl",[],'<table id="serverList" class="table table-bordered">\n	<thead>\n		<tr>\n			<th><input id="allSelected" type="checkBox"/></th>\n			<th>服务器名称</th>\n			<th>服务器类型</th>\n			<th>服务器IP</th>\n	    	<th>服务器管理端口</th>\n	  	</tr>\n	</thead>\n	<tbody>\n	</tbody>\n</table>'),define("travsky/jcf/1.0.0/view/dataSource/groupDataSourceServerItem_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/dataSource/groupDataSourceServerItem.tpl"),e=[],f=b.View.extend({template:c.template(d),tagName:"tr",events:{"click .select":"toggleSelect"},initialize:function(a){this.options=a||{},this.model=a.model,this.model.bind("change:selected",this.modelChange,this)},render:function(){return this.$el.html(this.template(this.model.toJSON()))},toggleSelect:function(){var a=this;a.model.set("selected",!a.model.get("selected"))},modelChange:function(){var a=this;if(a.model.hasChanged("selected")){a.$el.toggleClass("active",a.model.isSelected()),a.model.isSelected()?a.$(".select").prop("checked",a.model.isSelected()):a.$(".select").removeAttr("checked");var b=a.model.get("serverId"),c=e.indexOf(b);a.model.isSelected()&&0>c&&e.push(b),!a.model.isSelected()&&c>=0&&e.splice(c,1)}}});return f}),define("travsky/jcf/1.0.0/template/dataSource/groupDataSourceServerItem.tpl",[],'<td><input class="select" type="checkbox"></td>\n<td><%=serverName%></td>\n<td>JCF服务器</td>\n<td><%=serverIp%></td>\n<td><%=serverManagePort%></td>\n'),define("travsky/jcf/1.0.0/view/dataSource/groupDataSourceConfig_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/util/DataSourceUtil","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil","travsky/jcf/1.0.0/view/dataSource/global_view"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore");a("querystring");var d=a("travsky/jcf/1.0.0/util/DataSourceUtil"),e=a("travsky/jcf/1.0.0/template/dataSource/groupDataSourceConfig.tpl"),f=a("travsky/jcf/1.0.0/view/dataSource/global_view"),g=b.View.extend({el:"#content-body",template:c.template(e),events:{"blur #userName":"checkUserName","blur #password":"checkPassword","blur #URL":"checkURL","blur #maxActive":"checkMaxActive","blur #maxWait":"checkMaxWait","blur #maxIdle":"checkMaxIdle","blur #minIdle":"checkMinIdle","blur #initialSize":"checkInitialSize","click #save":"saveConfig"},initialize:function(a){this.options=a||{},this.model=a.model,this.groupId=a.queryString.groupId,this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},saveConfig:function(){if(this.checkForm()){var a=this,b=a.$el.find("#userName").val(),c=a.$el.find("#password").val(),d=a.$el.find("#URL").val(),e=a.$el.find("#driverClassName").val(),g=a.$el.find("#maxActive").val(),h=a.$el.find("#maxWait").val(),i=a.$el.find("#maxIdle").val(),j=a.$el.find("#minIdle").val(),k=a.$el.find("#initialSize").val();a.model.get("userName")!=b&&a.model.set("userName",b),""!=c&&(a.model.set("password",c),a.model.set("passwordChanged",!0)),a.model.get("URL")!=d&&a.model.set("URL",d),a.model.get("driverClassName")!=e&&a.model.set("driverClassName",e),a.model.get("maxActive")!=g&&a.model.set("maxActive",g),a.model.get("maxWait")!=h&&a.model.set("maxWait",h),a.model.get("maxIdle")!=i&&a.model.set("maxIdle",i),a.model.get("minIdle")!=j&&a.model.set("minIdle",j),a.model.get("initialSize")!=k&&a.model.set("initialSize",k),a.model.save({groupId:a.groupId},{success:function(b,c){c.flag&&(a.model.set("maxActive",g),a.model.set("maxWait",h),a.model.set("maxIdle",i),a.model.set("minIdle",j),a.model.set("initialSize",k),c.messageList=["组数据源修改成功。***重启后生效***"]);var d=new f({model:c});d.render()}})}else{var l={flag:"false",messageList:"页面参数验证失败"},m=new f({model:l});m.render()}},checkUserName:function(){var a=d.checkUserName("userName");return a},checkPassword:function(){var a=d.checkPassWord("password");return a},checkURL:function(){var a=d.checkURL("URL");return a},checkMaxActive:function(){var a=d.checkMaxActive("maxActive");return a},checkMaxWait:function(){var a=d.checkMaxWait("maxWait");return a},checkMaxIdle:function(){var a=d.checkMaxIdle("maxIdle");return a
},checkMinIdle:function(){var a=d.checkMinIdle("minIdle");return a},checkInitialSize:function(){var a=d.checkInitialSize("initialSize");return a},checkForm:function(){return this.checkUserName()&&this.checkPassword()&&this.checkURL()&&this.checkMaxActive()&&this.checkMaxWait()&&this.checkMaxIdle()&&this.checkMinIdle()&&this.checkInitialSize()?!0:!1}});return g}),define("travsky/jcf/1.0.0/template/dataSource/groupDataSourceConfig.tpl",[],'<div class="dataSourceConfig">\n	<div class="line">\n		<div class="content">\n			<label>服务器名称：</label>\n		</div>\n		<div class="value">\n			<input id="serverName" name="serverName" class="length readonly" type="text" value="<%=serverName%>" readonly="true">\n		</div>\n		<div class="warn">\n			<span id="dataSourceNameTip">&nbsp;</span>\n		</div>\n		<div class="content">\n			<label>用户名：</label>\n		</div>\n		<div class="value">\n			<input id="userName" name="userName" class="length form-control" type="text" value="<%=userName%>" placeholder="必填项">\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="userNameTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>密码： </label>\n		</div>\n		<div class="value">\n			<input id="password" name="password" class="length form-control" type="text">\n	  	</div>\n	  	<div class="warn">\n	  		<span class = "text-danger">*</span>\n	  		<span id = "passwordTip"></span>\n	  	</div>\n	  	<div class="content">\n	  		<label>Url：</label>\n	  	</div>\n		<div class="value">\n			<input id="URL" name="URL" class="length form-control" type="text" value="<%=URL%>" placeholder="必填项">\n		</div>\n		<div class="warn">\n			<span class = "text-danger">*</span>\n			<span id = "URLTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>驱动：</label>\n		</div>\n		<div class="value">\n			<select id="driverClassName" name="driverClassName" class="length" autocomplete="off">\n				<option value="com.ibm.db2.jcc.DB2Driver" <%if(driverClassName=="com.ibm.db2.jcc.DB2Driver"){%>selected="selected"<%}%>>com.ibm.db2.jcc.DB2Driver</option>\n				<option value="oracle.jdbc.OracleDriver" <%if(driverClassName=="oracle.jdbc.OracleDriver"){%>selected="selected"<%}%>>oracle.jdbc.OracleDriver</option>\n				<option value="org.postgresql.Driver" <%if(driverClassName=="org.postgresql.Driver"){%>selected="selected"<%}%>>org.postgresql.Driver</option>\n				<option value="com.mysql.jdbc.Driver" <%if(driverClassName=="com.mysql.jdbc.Driver"){%>selected="selected"<%}%>>com.mysql.jdbc.Driver</option>    		\n			</select>\n		</div>\n		<div class="warn">\n			<span id="driverClassNameTip">&nbsp;</span>\n		</div>\n		<div class="content">\n			<label>最大连接数：</label>\n		</div>\n		<div class="value">\n			<input id="maxActive" name="maxActive" class="length form-control" value="<%=maxActive%>" type="text" placeholder="必填项">\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="maxActiveTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>最大等待连接时间：</label>\n		</div>\n		<div class="value">\n			<input id="maxWait" name="maxWait" class="length form-control" value="<%=maxWait%>" type="text" placeholder="必填项">\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span class = "text-info">(单位:毫秒)</span>\n			<span id="maxWaitTip"></span>\n		</div>\n		<div class="content">\n			<label>最大空闲数：</label>\n		</div>\n		<div class="value">\n			<input id="maxIdle" name="maxIdle" class="length form-control" value="<%=maxIdle%>" type="text" placeholder="必填项">\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="maxIdleTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>最小空闲数：</label>\n		</div>\n		<div class="value">\n			<input id="minIdle" name="minIdle" class="length form-control" value="<%=minIdle%>" type="text" placeholder="必填项">\n	  	</div>\n		<div class="warn">\n			<span class = "text-danger">*</span>\n			<span id = "minIdleTip"></span>\n		</div>\n		<div class="content">\n			<label>初始连接数：</label>\n		</div>\n		<div class="value">\n			<input id="initialSize" name="initialSize" class="length form-control" value="<%=initialSize%>" type="text" placeholder="必填项">\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="initialSizeTip"></span>\n		</div>\n	</div>\n	<div>\n		<div class="col-sm-offset-4">\n			<button id="save" class="btn btn-primary" type="button">保存</button>\n		</div>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/groupDataSourceConfigHead_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/collection/dataSource/group_dataSource_name_collection","travsky/jcf/1.0.0/model/dataSource/group_dataSource_name_model"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("querystring");a("travsky/jcf/1.0.0/util/CommonUtil");var f=a("travsky/jcf/1.0.0/collection/dataSource/group_dataSource_name_collection"),g=a("travsky/jcf/1.0.0/template/dataSource/groupDataSourceConfigHead.tpl"),h=c.View.extend({el:"#content-header",template:d.template(g),events:{"change #groupDataSourceName":"getConfig"},initialize:function(a){this.options=a||{},this.model=a.model,this.queryString=a.queryString,this.groupId=a.queryString.groupId,this.dataSourceList=this.getGroupDataSourceList(),this.dataSourceList.bind("reset",this.render,this)},render:function(){return this.$el.html(this.template({dataSourceNameList:this.dataSourceList.toJSON()})),this},getGroupDataSourceList:function(){var a=new f;return a.fetch({data:e.stringify(this.options.queryString),reset:!0}),a},getConfig:function(){""!=b("#groupDataSourceName").val()&&this.model.fetch({data:{groupId:this.groupId,dsName:b("#groupDataSourceName").val()}})}});return h}),define("travsky/jcf/1.0.0/collection/dataSource/group_dataSource_name_collection",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/dataSource/group_dataSource_name_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/CommonUtil"),e=d.getAppName(),f=a("travsky/jcf/1.0.0/model/dataSource/group_dataSource_name_model"),g=b.Collection.extend({model:f,url:"/"+e+"/dataSource/getGroupDataSourceNameList.action",parse:function(a){return c.extend(a)}});return g}),define("travsky/jcf/1.0.0/model/dataSource/group_dataSource_name_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({urlRoot:"",defaults:function(){return{dataSourceName:""}}});return c}),define("travsky/jcf/1.0.0/template/dataSource/groupDataSourceConfigHead.tpl",[],'<div class="dataSourceConfig">\n	<div class="line">\n		<div class="content">\n			<label>组数据源名称</label>\n		</div>\n		<div class="value">\n			<select id="groupDataSourceName" name="groupDataSourceName" class="length" autocomplete="off">\n				<option></option>\n				<%for (var i = 0; i < dataSourceNameList.length; i++){%>\n					<option><%=dataSourceNameList[i].dataSourceName%></option>\n				<%}%> \n			</select>\n		</div>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/model/dataSource/group_dataSource_config_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=b.Model.extend({urlRoot:"/"+jcfManager.appName+"/dataSource/groupDataSourceConfig.action",defaults:{serverName:"",dataSourceName:"",URL:"",userName:"",password:"",driverClassName:"",maxActive:0,maxWait:0,maxIdle:0,minIdle:0,initialSize:0,passwordChanged:!1},parse:function(a){return this.flag=a.flag,this.configData=a.configData,c.extend(a.configData)}});return d}),define("travsky/jcf/1.0.0/view/dataSource/serverDataSourceList_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/collection/dataSource/server_dataSource_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/dataSource/server_dataSource_model","travsky/jcf/1.0.0/view/dataSource/serverDataSourceItem_view","travsky/jcf/1.0.0/util/DataSourceAuthCheckUtil","travsky/jcf/1.0.0/model/dataSource/server_dataSource_config_model","travsky/jcf/1.0.0/view/dataSource/serverDataSourceConfig_view","travsky/jcf/1.0.0/util/DataSourceUtil","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil","travsky/jcf/1.0.0/view/dataSource/global_view","travsky/jcf/1.0.0/model/dataSource/server_dataSource_monitor_model","travsky/jcf/1.0.0/view/dataSource/serverDataSourceMonitor_view","travsky/jcf/1.0.0/view/dataSource/tip_view"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("querystring"),f=a("travsky/jcf/1.0.0/collection/dataSource/server_dataSource_collection"),g=a("travsky/jcf/1.0.0/template/dataSource/serverDataSourceList.tpl"),h=a("travsky/jcf/1.0.0/view/dataSource/serverDataSourceItem_view"),i=c.View.extend({el:"#content-body",template:d.template(g),events:{},initialize:function(a){this.options=a||{},this.serverId=a.queryString.serverId,this.dataSourceList=this.getDataSources(),this.dataSourceList.bind("change:restart",this.restartDataSource,this),this.dataSourceList.bind("change:uninstall",this.uninstallDataSource,this),this.dataSourceList.bind("reset",this.addAllServerDataSources,this),this.dataSourceList.bind("remove",this.addAllServerDataSources,this),this.views=[]},render:function(){return b(this.el).html(this.template()),this},addServerDataSource:function(a){var b=new h({model:a,serverId:this.serverId});this.$el.find("#dataSourceListBody").append(b.render()),this.views.push(b)},addAllServerDataSources:function(){if("1"==this.dataSourceList.flag)if(this.dataSourceList.length>0){var a=this;d.each(this.views,function(a){a.remove().off()}),this.views=[],this.dataSourceList.each(function(b){a.addServerDataSource(b)})}else alert("当前服务器没有部署数据源");else"0"==this.dataSourceList.flag?alert("数据库查询异常"):"2"==this.dataSourceList.flag&&alert("连接异常，请查看服务器状态")},getDataSources:function(){var a=new f;return a.fetch({data:e.stringify(this.options.queryString),reset:!0}),a},uninstallDataSource:function(a){this.render(),this.dataSourceList.remove(a)},restartDataSource:function(){this.render(),this.dataSourceList.fetch({data:e.stringify(this.options.queryString),reset:!0})}});return i}),define("travsky/jcf/1.0.0/collection/dataSource/server_dataSource_collection",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/dataSource/server_dataSource_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/CommonUtil"),e=d.getAppName(),f=a("travsky/jcf/1.0.0/model/dataSource/server_dataSource_model"),g=b.Collection.extend({model:f,url:"/"+e+"/dataSource/serverDataSourceList.action",parse:function(a){return this.flag=a.flag,this.dataSourceList=a.dataSourceList,c.extend(a.dataSourceList)}});return g}),define("travsky/jcf/1.0.0/model/dataSource/server_dataSource_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({urlRoot:"",defaults:function(){return{showDataSourceConfig:!1,showDataSourceMonitor:!1,restart:!1,connected:!1,confirmRestart:!1,confirmUndeploy:!1}},isShowConfig:function(){return 1==this.get("showDataSourceConfig")},isShowMonitor:function(){return 1==this.get("showDataSourceMonitor")},isConnected:function(){return 1==this.get("connected")}});return c}),define("travsky/jcf/1.0.0/template/dataSource/serverDataSourceList.tpl",[],'<div id="dataSourceListHead" class="dsList">\n	<div class="dsName">数据源名称</div>\n	<div class="dsURL">URL</div>\n    <div class="dsUserName">用户名</div>\n    <div class="dsInitialSize">初始连接数</div>\n    <div class="dsmaxWait">最大等待时间</div>\n    <div class="dsmaxIdle">最大空闲数</div>\n    <div class="dsminIdle">最小空闲数</div>\n    <div class="dsconfig">配置</div>\n    <div class="dsundeploy">卸载</div>\n    <div class="dsrestart">重启</div>\n    <div class="dsdetail">查看</div>\n</div>\n<div id="dataSourceListBody" class="dsList">\n	\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/serverDataSourceItem_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/DataSourceAuthCheckUtil","travsky/jcf/1.0.0/model/dataSource/server_dataSource_config_model","travsky/jcf/1.0.0/view/dataSource/serverDataSourceConfig_view","travsky/jcf/1.0.0/util/DataSourceUtil","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil","travsky/jcf/1.0.0/view/dataSource/global_view","travsky/jcf/1.0.0/model/dataSource/server_dataSource_monitor_model","travsky/jcf/1.0.0/view/dataSource/serverDataSourceMonitor_view","travsky/jcf/1.0.0/view/dataSource/tip_view"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("travsky/jcf/1.0.0/util/CommonUtil"),f=a("travsky/jcf/1.0.0/util/DataSourceAuthCheckUtil"),g=a("travsky/jcf/1.0.0/model/dataSource/server_dataSource_config_model"),h=a("travsky/jcf/1.0.0/view/dataSource/serverDataSourceConfig_view"),i=a("travsky/jcf/1.0.0/model/dataSource/server_dataSource_monitor_model"),j=a("travsky/jcf/1.0.0/view/dataSource/serverDataSourceMonitor_view"),k=a("travsky/jcf/1.0.0/template/dataSource/serverDataSourceItem.tpl"),l=a("travsky/jcf/1.0.0/view/dataSource/tip_view"),m=a("travsky/jcf/1.0.0/view/dataSource/global_view"),n=c.View.extend({template:d.template(k),tagName:"div",className:"dsList",events:{"click .dsconfig a":"serverDataSourceConfig","click .dsundeploy a":"showServerDataSourceUndeployView","click .dsrestart a":"showServerDataSourceRestartView","click .dsdetail a":"serverDataSourceDetail","click #cancel":"closeConfig","click .modal-footer .ok":"confirm","click .modal-footer .cancel":"cancel"},initialize:function(a){this.model=a.model,this.serverId=a.serverId,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"change:confirmRestart",this.serverDataSourceRestart),this.listenTo(this.model,"change:confirmUndeploy",this.serverDataSourceUndeploy),this.dataSourceConfigAuth=f.getServerDataSourceConfigAuth(),this.dataSourceUndeployAuth=f.getServerDataSourceUninstallAuth(),this.dataSourceRestartAuth=f.getServerDataSourceRestartAuth(),this.dataSourceDetailViewAuth=f.getServerDataSourceDetailViewAuth()},render:function(){return this.$el.html(this.template({model:this.model.toJSON(),dataSourceConfigAuth:this.dataSourceConfigAuth,dataSourceUndeployAuth:this.dataSourceUndeployAuth,dataSourceRestartAuth:this.dataSourceRestartAuth,dataSourceDetailViewAuth:this.dataSourceDetailViewAuth}))},serverDataSourceConfig:function(a){if(a.preventDefault(),this.model.isShowConfig())this.model.set("showDataSourceConfig",!1);else{this.model.set("showDataSourceConfig",!0),this.model.set("showDataSourceMonitor",!1);var b=new g;b.parentView=this;var c=new h({model:b,serverId:this.serverId,item:this.model});b.fetch({data:{serverId:this.serverId,dsName:this.model.get("dataSourceName")}}),this.$el.append(c.render())}},showServerDataSourceUndeployView:function(){var a=new l({headerMessage:"卸载数据源",bodyMessage:"确定要卸载数据源"+this.model.get("dataSourceName")+"么？",model:this.model,type:"undeploy"});this.$el.append(a.render()),a.show()},serverDataSourceUndeploy:function(){var a=this,c={serverId:this.serverId,dsName:this.model.get("dataSourceName")},d="/"+jcfManager.appName+"/dataSource/uninstallDSByServer.action",f=e.dealAjaxRequest4SimpleParam(d,c);b.when(f).done(function(b){b.flag?(a.model.set("uninstall",!0),b.messageList=["数据源"+a.model.get("dataSourceName")+"卸载成功"]):b.messageList=["数据源"+a.model.get("dataSourceName")+"卸载失败"];var c=new m({model:b});c.render()})},showServerDataSourceRestartView:function(){var a=new l({headerMessage:"重启数据源",bodyMessage:"确定要重启数据源"+this.model.get("dataSourceName")+"么？",model:this.model,type:"restart"});this.$el.append(a.render()),a.show()},serverDataSourceRestart:function(){var a=this,c={serverId:this.serverId,dsName:this.model.get("dataSourceName")},d="/"+jcfManager.appName+"/dataSource/restartDSByServer.action",f=e.dealAjaxRequest4SimpleParam(d,c);b.when(f).done(function(b){b.flag?(a.model.set("restart",!0),b.messageList=["数据源"+a.model.get("dataSourceName")+"重启成功"]):b.messageList=["数据源"+a.model.get("dataSourceName")+"重启失败"];var c=new m({model:b});c.render()})},serverDataSourceDetail:function(){if(this.model.isShowMonitor())this.model.set("showDataSourceMonitor",!1),this.render();else{this.render(),this.model.set("showDataSourceMonitor",!0),this.model.set("showDataSourceConfig",!1);var a=new i,b=new j({model:a,serverId:this.serverId});a.fetch({data:{serverId:this.serverId,dsName:this.model.get("dataSourceName")}}),this.$el.append(b.render())}}});return n}),define("travsky/jcf/1.0.0/model/dataSource/server_dataSource_config_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=b.Model.extend({urlRoot:"/"+jcfManager.appName+"/dataSource/serverDataSourceConfig.action",defaults:{dataSourceName:"",URL:"",userName:"",password:"",driverClassName:"",maxActive:0,maxWait:0,maxIdle:0,minIdle:0,initialSize:0,passwordChanged:!1},parse:function(a){return this.flag=a.flag,this.configData=a.configData,c.extend(a.configData)}});return d}),define("travsky/jcf/1.0.0/view/dataSource/serverDataSourceConfig_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/DataSourceUtil","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil","travsky/jcf/1.0.0/view/dataSource/global_view"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/DataSourceUtil"),e=a("travsky/jcf/1.0.0/template/dataSource/serverDataSourceConfig.tpl"),f=a("travsky/jcf/1.0.0/view/dataSource/global_view"),g=b.View.extend({template:c.template(e),tagName:"div",className:"dataSourceConfig",events:{"blur #userName":"checkUserName","blur #password":"checkPassword","blur #URL":"checkURL","blur #maxActive":"checkMaxActive","blur #maxWait":"checkMaxWait","blur #maxIdle":"checkMaxIdle","blur #minIdle":"checkMinIdle","blur #initialSize":"checkInitialSize","click #save":"saveConfig","click #cancel":"cancelConfig"},initialize:function(a){this.options=a||{},this.model=a.model,this.serverId=a.serverId,this.item=a.item,this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template(this.model.toJSON()))},saveConfig:function(){if(this.checkForm()){var a=this,b=a.$el.find("#userName").val(),c=a.$el.find("#password").val(),d=a.$el.find("#URL").val(),e=a.$el.find("#driverClassName").val(),g=a.$el.find("#maxActive").val(),h=a.$el.find("#maxWait").val(),i=a.$el.find("#maxIdle").val(),j=a.$el.find("#minIdle").val(),k=a.$el.find("#initialSize").val();a.model.get("userName")!=b&&a.model.set("userName",b),""!=c&&(a.model.set("password",c),a.model.set("passwordChanged",!0)),a.model.get("URL")!=d&&a.model.set("URL",d),a.model.get("driverClassName")!=e&&a.model.set("driverClassName",e),a.model.get("maxActive")!=g&&a.model.set("maxActive",g),a.model.get("maxWait")!=h&&a.model.set("maxWait",h),a.model.get("maxIdle")!=i&&a.model.set("maxIdle",i),a.model.get("minIdle")!=j&&a.model.set("minIdle",j),a.model.get("initialSize")!=k&&a.model.set("initialSize",k),a.model.save({serverId:a.serverId},{success:function(b,c){"1"==c.flag?(a.item.set("showDataSourceConfig",!1),a.item.set("maxActive",g),a.item.set("maxWait",h),a.item.set("maxIdle",i),a.item.set("minIdle",j),a.item.set("initialSize",k),c.messageList=["数据源配置成功。***重启后生效***"]):c.messageList="2"==c.flag?["连接异常，数据源配置失败"]:["未知异常，数据源配置失败"];var d=new f({model:c});d.render()}})}else{var l={flag:"false",messageList:"页面参数验证失败"},m=new f({model:l});m.render()}},cancelConfig:function(){this.item.set("showDataSourceConfig",!1)},checkUserName:function(){var a=d.checkUserName("userName");return a},checkPassword:function(){var a=d.checkPassWord("password");return a},checkURL:function(){var a=d.checkURL("URL");return a},checkMaxActive:function(){var a=d.checkMaxActive("maxActive");return a},checkMaxWait:function(){var a=d.checkMaxWait("maxWait");return a},checkMaxIdle:function(){var a=d.checkMaxIdle("maxIdle");return a},checkMinIdle:function(){var a=d.checkMinIdle("minIdle");return a},checkInitialSize:function(){var a=d.checkInitialSize("initialSize");return a},checkForm:function(){return this.checkUserName()&&this.checkPassword()&&this.checkURL()&&this.checkMaxActive()&&this.checkMaxWait()&&this.checkMaxIdle()&&this.checkMinIdle()&&this.checkInitialSize()?!0:!1}});return g}),define("travsky/jcf/1.0.0/template/dataSource/serverDataSourceConfig.tpl",[],'<div class="line">\n	<div class="content">\n		<label>数据源名称：</label>\n	</div>\n	<div class="value">\n		<input id="dataSourceName" name="dataSourceName" class="length readonly" type="text" value="<%=dataSourceName%>" readonly="true">\n	</div>\n	<div class="warn">\n		<span id="dataSourceNameTip">&nbsp;</span>\n	</div>\n	<div class="content">\n		<label>用户名：</label>\n	</div>\n	<div class="value">\n		<input id="userName" name="userName" class="length form-control" type="text" value="<%=userName%>" placeholder="必填项">\n	</div>\n	<div class="warn">\n		<span class="text-danger">*</span>\n		<span id="userNameTip"></span>\n	</div>\n</div>\n<div class="line">\n	<div class="content">\n		<label>密码： </label>\n	</div>\n	<div class="value">\n		<input id="password" name="password" class="length form-control" type="text">\n  	</div>\n  	<div class="warn">\n  		<span class = "text-danger">*</span>\n  		<span id = "passwordTip"></span>\n  	</div>\n  	<div class="content">\n  		<label>Url：</label>\n  	</div>\n	<div class="value">\n		<input id="URL" name="URL" class="length form-control" type="text" value="<%=URL%>" placeholder="必填项">\n	</div>\n	<div class="warn">\n		<span class = "text-danger">*</span>\n		<span id = "URLTip"></span>\n	</div>\n</div>\n<div class="line">\n	<div class="content">\n		<label>驱动：</label>\n	</div>\n	<div class="value">\n		<select id="driverClassName" name="driverClassName" class="length" autocomplete="off">\n			<option value="com.ibm.db2.jcc.DB2Driver" <%if(driverClassName=="com.ibm.db2.jcc.DB2Driver"){%>selected="selected"<%}%>>com.ibm.db2.jcc.DB2Driver</option>\n			<option value="oracle.jdbc.OracleDriver" <%if(driverClassName=="oracle.jdbc.OracleDriver"){%>selected="selected"<%}%>>oracle.jdbc.OracleDriver</option>\n			<option value="org.postgresql.Driver" <%if(driverClassName=="org.postgresql.Driver"){%>selected="selected"<%}%>>org.postgresql.Driver</option>\n			<option value="com.mysql.jdbc.Driver" <%if(driverClassName=="com.mysql.jdbc.Driver"){%>selected="selected"<%}%>>com.mysql.jdbc.Driver</option>    		\n		</select>\n	</div>\n	<div class="warn">\n		<span id="driverClassNameTip">&nbsp;</span>\n	</div>\n	<div class="content">\n		<label>最大连接数：</label>\n	</div>\n	<div class="value">\n		<input id="maxActive" name="maxActive" class="length form-control" value="<%=maxActive%>" type="text" placeholder="必填项">\n	</div>\n	<div class="warn">\n		<span class="text-danger">*</span>\n		<span id="maxActiveTip"></span>\n	</div>\n</div>\n<div class="line">\n	<div class="content">\n		<label>最大等待连接时间：</label>\n	</div>\n	<div class="value">\n		<input id="maxWait" name="maxWait" class="length form-control" value="<%=maxWait%>" type="text" placeholder="必填项">\n	</div>\n	<div class="warn">\n		<span class="text-danger">*</span>\n		<span class = "text-info">(单位:毫秒)</span>\n		<span id="maxWaitTip"></span>\n	</div>\n	<div class="content">\n		<label>最大空闲数：</label>\n	</div>\n	<div class="value">\n		<input id="maxIdle" name = "maxIdle" class="length form-control" value="<%=maxIdle%>" type="text" placeholder="必填项">\n	</div>\n	<div class="warn">\n		<span class="text-danger">*</span>\n		<span id="maxIdleTip"></span>\n	</div>\n</div>\n<div class="line">\n	<div class="content">\n		<label>最小空闲数：</label>\n	</div>\n	<div class="value">\n		<input id="minIdle" name="minIdle" class="length form-control" value="<%=minIdle%>" type="text" placeholder="必填项">\n  	</div>\n	<div class="warn">\n		<span class = "text-danger">*</span>\n		<span id = "minIdleTip"></span>\n	</div>\n	<div class="content">\n		<label>初始连接数：</label>\n	</div>\n	<div class="value">\n		<input id="initialSize" name="initialSize" class="length form-control" value="<%=initialSize%>" type="text" placeholder="必填项">\n	</div>\n	<div class="warn">\n		<span class="text-danger">*</span>\n		<span id="initialSizeTip"></span>\n	</div>\n</div>\n<div>\n	<div class="col-sm-offset-4">\n		<button id="save" class="btn btn-primary" type="button">保存</button>\n		<button id="cancel" class="btn btn-primary" type="button">取消</button>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/model/dataSource/server_dataSource_monitor_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=b.Model.extend({urlRoot:"/"+jcfManager.appName+"/dataSource/detailDSByServer.action",defaults:{activeNum:0,idleNum:0},parse:function(a){return this.activeNum=a.activeNum,this.idleNum=a.idleNum,this.flag=a.flag,c.extend(a)}});return d}),define("travsky/jcf/1.0.0/view/dataSource/serverDataSourceMonitor_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/dataSource/serverDataSourceMonitor.tpl"),e=b.View.extend({template:c.template(d),tagName:"div",className:"dataSourceMonitor",events:{},initialize:function(a){this.options=a||{},this.model=a.model,this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template(this.model.toJSON()))}});return e}),define("travsky/jcf/1.0.0/template/dataSource/serverDataSourceMonitor.tpl",[],'<div class="monitorList">\n	<div class="content">当前已用连接数</div>\n	<div class="value"><%=activeNum%></div>\n</div>\n<div class="monitorList">\n	<div class="content">当前空闲连接数</div>\n	<div class="value"><%=idleNum%></div>\n</div>'),define("travsky/jcf/1.0.0/template/dataSource/serverDataSourceItem.tpl",[],'<div class="dsName"><%=model.dataSourceName%></div>\n<div class="dsURL"><%=model.URL%></div>\n<div class="dsUserName"><%=model.userName%></div>\n<div class="dsInitialSize"><%=model.initialSize%></div>\n<div class="dsmaxWait"><%=model.maxWait%></div>\n<div class="dsmaxIdle"><%=model.maxIdle%></div>\n<div class="dsminIdle"><%=model.minIdle%></div>\n<div class="dsconfig">\n	<%if (dataSourceConfigAuth == "true"){%>\n		<a href="javascript:void(0);">配置</a>\n	<%}else{%>\n		配置\n	<%}%>\n</div>\n<div class="dsundeploy">\n	<%if (dataSourceUndeployAuth == "true"){%>\n		<a href="javascript:void(0);">卸载</a>\n	<%}else{%>\n		卸载\n	<%}%>\n</div>\n<div class="dsrestart">\n	<%if (dataSourceRestartAuth == "true"){%>\n		<a href="javascript:void(0);">重启</a>\n	<%}else{%>\n		重启\n	<%}%>\n</div>\n<div class="dsdetail">\n	<%if (dataSourceDetailViewAuth == "true"){%>\n		<a href="javascript:void(0);">查看</a>\n	<%}else{%>\n		查看\n	<%}%>\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/serverDeployDataSource_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/DataSourceUtil","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil","travsky/jcf/1.0.0/view/dataSource/global_view","travsky/jcf/1.0.0/model/dataSource/server_dataSource_deploy_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/DataSourceUtil"),e=a("travsky/jcf/1.0.0/view/dataSource/global_view"),f=a("travsky/jcf/1.0.0/model/dataSource/server_dataSource_deploy_model"),g=a("travsky/jcf/1.0.0/template/dataSource/serverDeployDataSource.tpl"),h=b.View.extend({el:"#content-body",template:c.template(g),events:{"blur #dataSourceName":"checkDataSourceName","blur #userName":"checkUserName","blur #password":"checkPassWord","blur #URL":"checkURL","click #save":"deployDataSource"},initialize:function(a){this.options=a||{},this.serverId=a.queryString.serverId},render:function(){return this.$el.html(this.template()),this},deployDataSource:function(){if(this.checkForm()){var a=new f,b=this.$el.find("#dataSourceName").val().trim(),c=this.$el.find("#userName").val().trim(),d=this.$el.find("#password").val().trim(),g=this.$el.find("#URL").val().trim(),h=this.$el.find("#driverClassName").val().trim();a.set("dataSourceName",b),a.set("username",c),a.set("password",d),a.set("URL",g),a.set("driverClassName",h),a.save({serverId:this.serverId},{success:function(a,b){b.messageList=1==b.flag?["数据源部署成功，请检测连通性"]:[b.message];var c=new e({model:b});c.render()}})}else{var i={flag:"false",messageList:"页面参数验证失败"},j=new e({model:i});j.render()}},checkDataSourceName:function(){var a=d.checkDataSourceName("dataSourceName");return a},checkUserName:function(){var a=d.checkUserName("userName");return a},checkPassWord:function(){var a=d.checkPassWord("password");return a},checkURL:function(){var a=d.checkURL("URL");return a},checkForm:function(){return this.checkDataSourceName()&&this.checkUserName()&&this.checkPassWord()&&this.checkURL()?!0:!1}});return h}),define("travsky/jcf/1.0.0/model/dataSource/server_dataSource_deploy_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=b.Model.extend({urlRoot:"/"+jcfManager.appName+"/dataSource/serverDeployDataSource.action",defaults:{dataSourceName:"",URL:"",userName:"",password:"",driverClassName:""},parse:function(a){return this.flag=a.flag,this.message=a.message,c.extend(a)}});return d}),define("travsky/jcf/1.0.0/template/dataSource/serverDeployDataSource.tpl",[],'<div id="addDataSource">\n	<div class="line">\n		<div class="content">\n			<label>数据源名称：</label>\n		</div>\n		<div class="value">\n			<input id="dataSourceName" name="dataSourceName" class="length form-control" type="text" value="" placeholder="必填项：字母、数字、下划线、#">\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="dataSourceNameTip"></span>\n		</div>\n		<div class="content">\n			<label>用户名：</label>\n		</div>\n		<div class="value">\n			<input id="userName" name="userName" class="length form-control" type="text" value="" placeholder="必填项：字母、数字、下划线、#">\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="userNameTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>密码： </label>\n		</div>\n		<div class="value">\n			<input id="password" name="password" class="length form-control" type="password" placeholder="必填项">\n	  	</div>\n	  	<div class="warn">\n	  		<span class = "text-danger">*</span>\n	  		<span id = "passwordTip"></span>\n	  	</div>\n	  	<div class="content">\n	  		<label>Url：</label>\n	  	</div>\n		<div class="value">\n			<input type="text" id="URL" name="URL" class="length form-control" type="text" value="" placeholder="必填项">\n		</div>\n		<div class="warn">\n			<span class = "text-danger">*</span>\n			<span id = "URLTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>驱动：</label>\n		</div>\n		<div class="value">\n			<select id="driverClassName" name="driverClassName" class="length" autocomplete="off">\n				<option value="com.ibm.db2.jcc.DB2Driver">com.ibm.db2.jcc.DB2Driver</option>\n				<option value="oracle.jdbc.OracleDriver">oracle.jdbc.OracleDriver</option>\n				<option value="org.postgresql.Driver">org.postgresql.Driver</option>\n				<option value="com.mysql.jdbc.Driver">com.mysql.jdbc.Driver</option>    		\n			</select>\n		</div>\n		<div class="warn">\n			<span id="driverClassNameTip">&nbsp;</span>\n		</div>\n	</div>\n	<div>\n		<div class="col-sm-offset-4">\n			<button id="save" class="btn btn-primary" type="button">部署</button>\n		</div>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/serverTestDataSourceList_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/collection/dataSource/server_dataSource_collection","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/dataSource/server_dataSource_model","travsky/jcf/1.0.0/view/dataSource/serverTestDataSourceItem_view","travsky/jcf/1.0.0/view/dataSource/global_view"],function(a){jQuery=a("jquery");
var b=a("backbone"),c=a("underscore"),d=a("querystring"),e=a("travsky/jcf/1.0.0/collection/dataSource/server_dataSource_collection"),f=a("travsky/jcf/1.0.0/template/dataSource/serverTestDataSourceList.tpl"),g=a("travsky/jcf/1.0.0/view/dataSource/serverTestDataSourceItem_view"),h=b.View.extend({el:"#content-body",tagName:"div",className:"dsTestList",template:c.template(f),events:{},initialize:function(a){this.options=a||{},this.serverId=a.queryString.serverId,this.dataSourceTestList=this.getDataSources(),this.dataSourceTestList.bind("reset",this.addAllServerDataSources,this)},render:function(){return this.$el.html(this.template()),this},addServerDataSource:function(a){var b=new g({model:a,serverId:this.serverId});this.$el.find("#dataSourceTestListBody").append(b.render())},addAllServerDataSources:function(){"1"==this.dataSourceTestList.flag?this.dataSourceTestList.each(this.addServerDataSource,this):"0"==this.dataSourceTestList.flag?alert("数据库查询异常"):"2"==this.dataSourceTestList.flag&&alert("连接异常，请查看服务器状态")},getDataSources:function(){var a=new e;return a.fetch({data:d.stringify(this.options.queryString),reset:!0}),a}});return h}),define("travsky/jcf/1.0.0/template/dataSource/serverTestDataSourceList.tpl",[],'<div id="dataSourceTestListHead" class="dsTestList">\n	<div class="dsName">数据源名称</div>\n	<div class="dsStatus">数据源状态</div>\n	<div class="dsURL">URL</div>\n    <div class="dsUserName">用户名</div>\n    <div class="dsTest">数据源测试连接</div>\n</div>\n<div id="dataSourceTestListBody" class="dsTestList">\n	\n</div>'),define("travsky/jcf/1.0.0/view/dataSource/serverTestDataSourceItem_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/dataSource/global_view"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("travsky/jcf/1.0.0/util/CommonUtil"),f=a("travsky/jcf/1.0.0/template/dataSource/serverTestDataSourceItem.tpl"),g=a("travsky/jcf/1.0.0/view/dataSource/global_view"),h=c.View.extend({template:d.template(f),tagName:"div",className:"dsTestList dsItem",events:{"click .dsTest":"serverDataSourceTestConnect"},initialize:function(a){this.model=a.model,this.serverId=a.serverId,this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template(this.model.toJSON()))},serverDataSourceTestConnect:function(){var a=this,c={serverId:this.serverId,dsName:this.model.get("dataSourceName")},d="/"+jcfManager.appName+"/dataSource/testDSConnection.action",f=e.dealAjaxRequest4SimpleParam(d,c);b.when(f).done(function(b){b.dataSourceName=a.model.get("dataSourceName"),b.flag?(b.messageList=["数据源"+b.dataSourceName+"测试连接成功"],a.model.set("connected",!0)):(b.messageList=["数据源"+b.dataSourceName+"测试连接失败，原因："+b.message],a.model.set("connected",!1));var c=new g({model:b});c.render()})}});return h}),define("travsky/jcf/1.0.0/template/dataSource/serverTestDataSourceItem.tpl",[],'<div class="dsName <%if(connected==true){%>connect<%}%>"><%=dataSourceName%></div>\n<div class="dsStatus <%if(connected==true){%>connect<%}%>"><%if(connected==true){%>已连接<%}else{%>未连接<%}%></div>\n<div class="dsURL"><%=URL%></div>\n<div class="dsUserName"><%=userName%></div>\n<div class="dsTest">测试连接</div>'),define("travsky/jcf/1.0.0/view/context/highcharts",["jquery","backbone","underscore","highcharts","exporting"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore");a("highcharts"),a("exporting");var e=a("travsky/jcf/1.0.0/template/context/highchart.tpl"),f=c.View.extend({el:"#content-body",template:d.template(e),initialize:function(){this.render()},render:function(){this.$el.html(this.template());var a;return b(function(){a=new Highcharts.Chart({chart:{renderTo:"content-body",defaultSeriesType:"spline",events:{load:function(){var a=this.series[0];setInterval(function(){var b=(new Date).getTime(),c=100*Math.random();a.addPoint([b,c],!0,!0)},5e3)}}},title:{text:"CPU使用记录走势图"},xAxis:{type:"datetime",tickPixelInterval:150},yAxis:{title:"",max:100,min:0},tooltip:{formatter:function(){return"CPU使用率"+Highcharts.dateFormat("%H:%M:%S",this.x)+Highcharts.numberFormat(this.y,2)+"%"}},legend:{enabled:!1},exporting:{enabled:!1},credits:{text:"JCF Domain Info",url:"#"},series:[{data:function(){var a,b=[],c=(new Date).getTime();for(a=-19;0>=a;a++)b.push({x:c+5e3*a,y:100*Math.random()});return b}()}]})}),this}});return f}),define("travsky/jcf/1.0.0/template/context/highchart.tpl",[],'<div id="charts">\nHello highcharts\n</div>'),define("travsky/jcf/1.0.0/model/context/server_context_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=b.Model.extend({urlRoot:"/"+jcfManager.appName+"/context/serverContextConfig.action",defaults:{optime:"",exptime:"",servers:""},parse:function(a){return this.optime=a.optime,this.exptime=a.exptime,this.servers=a.servers,c.extend(a)}});return d}),define("travsky/jcf/1.0.0/view/context/serverContextInfo_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/ContextAuthCheckUtil","travsky/jcf/1.0.0/view/context/tip_view","travsky/jcf/1.0.0/view/context/global_view"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("travsky/jcf/1.0.0/util/CommonUtil"),f=a("travsky/jcf/1.0.0/util/ContextAuthCheckUtil");a("travsky/jcf/1.0.0/view/context/tip_view");var g=a("travsky/jcf/1.0.0/view/context/global_view"),h=a("travsky/jcf/1.0.0/template/context/serverContextInfo.tpl"),i=c.View.extend({el:"#content-body",template:d.template(h),events:{"click #contextRestart":"restartMemcache"},initialize:function(a){this.options=a||{},this.model=a.model,this.queryString=a.queryString,this.listenTo(this.model,"change",this.render),this.restartContextAuth=f.getServerContextRestartAuth()},render:function(){return this.$el.html(this.template({model:this.model.toJSON(),restartContextAuth:this.restartContextAuth})),this},restartMemcache:function(){var a="/"+jcfManager.appName+"/context/restartServerContext.action",c={};c.serverId=this.queryString.serverId;var d=e.dealAjaxRequest4SimpleParam(a,c);b.when(d).done(function(a){a.messageList=a.flag?["重启上下文成功"]:["重启上下文失败"];var b=new g({model:a});b.render()})}});return i}),define("travsky/jcf/1.0.0/view/context/tip_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/context/tip.tpl"),e=b.View.extend({tagName:"div",className:"tip",template:c.template(d),events:{"click .modal-footer .ok":"confirm","click .modal-footer .cancel":"cancel"},initialize:function(a){this.options=a||{},this.headerMessage=a.headerMessage,this.bodyMessage=a.bodyMessage,this.model=a.model,this.type=a.type},render:function(){return this.$el.html(this.template({headerMessage:this.headerMessage,bodyMessage:this.bodyMessage}))},show:function(){this.$el.find(".modal").fadeIn()},remove:function(){this.$el.find(".modal").fadeOut(),this.$el.find(".modal").remove(),this.$el.find(".modal-backdrop").remove()},confirm:function(){"restart"==this.type?this.model.set("confirmRestart",!0):this.model.set("confirmUndeploy",!0)},cancel:function(){"restart"==this.type?this.model.set("confirmRestart",!1):this.model.set("confirmUndeploy",!1),this.remove()}});return e}),define("travsky/jcf/1.0.0/template/context/tip.tpl",[],'<div class="modal-backdrop  in" style="z-index: 10400;"></div>\n<div class="modal" aria-hidden="true" style="z-index: 10400;">\n    <div class="modal-dialog">\n    	<div class="modal-content">          \n			<div class="modal-header">        \n				<h3><%=headerMessage%></h3>      \n			</div>        \n			<div class="modal-body">\n				<div><p><%=bodyMessage%></p></div>\n			</div>    \n			<div class="modal-footer">      \n				<a id="confirm" class="btn ok btn-primary" href="javascript:void(0);">确定</a>\n				<a id="cancle" class="btn cancel" href="javascript:void(0);">取消</a>\n			</div>\n		</div>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/view/context/global_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/context/global.tpl"),e=b.View.extend({el:"#global",template:c.template(d),events:{"click .close-btn":"close"},initialize:function(a){this.model=a.model},render:function(){return this.$el.html(this.template(this.model)),this},close:function(){this.$el.find("div").remove()}});return e}),define("travsky/jcf/1.0.0/template/context/global.tpl",[],'<div id="<%if (flag == true){%>success<%}else{%>failure<%}%>">\n	<div style="display:inline-block">\n		<%for (var i = 0; i < messageList.length; i++){%>\n			<%=messageList[i]%>\n		<%}%>\n	</div>\n	<a class="close-btn"></a>\n</div>'),define("travsky/jcf/1.0.0/template/context/serverContextInfo.tpl",[],'<div id="serverContextInfo">\n	<div class="line">\n		<div class="content">\n			<label>超时时间：</label>\n		</div>\n		<div class="value">\n			<%=model.optime%>(毫秒)\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>失效时间： </label>\n		</div>\n		<div class="value">\n			<%=model.exptime%>(秒)\n	  	</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>服务器地址：</label>\n		</div>\n		<div class="value">\n			<%=model.servers%>\n		</div>\n	</div>\n	<div>\n		<div class="col-sm-offset-0">\n			<%if (restartContextAuth == "true"){%>\n				<button id="contextRestart" class="btn btn-primary" type="button">重启</button>\n			<%}else{%>\n				<button id="contextRestartDisable" class="btn btn-primary" type="button">重启</button>\n			<%}%>\n		</div>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/view/context/serverContextConfig_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/ContextUtil","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil","travsky/jcf/1.0.0/view/context/tip_view","travsky/jcf/1.0.0/view/context/global_view"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/ContextUtil"),e=a("travsky/jcf/1.0.0/template/context/serverContextConfig.tpl");a("travsky/jcf/1.0.0/view/context/tip_view");var f=a("travsky/jcf/1.0.0/view/context/global_view"),g=b.View.extend({el:"#content-body",template:c.template(e),events:{"click #contextSave":"saveConfig","blur #optime":"checkOptime","blur #exptime":"checkExptime","blur #servers":"checkServers"},initialize:function(a){this.options=a||{},this.model=a.model,this.serverId=a.queryString.serverId,this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},saveConfig:function(){if(this.checkOptime()&&this.checkExptime()&&this.checkServers()){var a=this,b=a.$el.find("#optime").val(),c=a.$el.find("#exptime").val(),d=a.$el.find("#servers").val();a.model.get("optime")!=b&&a.model.set("optime",b),a.model.get("exptime")!=c&&a.model.set("exptime",c),a.model.get("servers")!=d&&a.model.set("servers",d),a.model.save({serverId:a.serverId},{success:function(a,b){b.messageList=b.flag?["修改上下文配置成功，请重启"]:["修改上下文配置失败"];var c=new f({model:b});c.render()}})}else{var e={flag:"false",messageList:"页面参数验证失败"},g=new f({model:e});g.render()}},checkOptime:function(){var a=d.checkOptime("optime");return a},checkExptime:function(){var a=d.checkExptime("exptime");return a},checkServers:function(){var a=d.checkServers("servers");return a}});return g}),define("travsky/jcf/1.0.0/util/ContextUtil",["jquery","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","backbone","underscore","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil"],function(a){var b=jQuery=a("jquery");a("travsky/jcf/1.0.0/util/CommonUtil");var c=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil"),d={checkOptime:function(a){var b=10,d=c.checkInputMatchPositiveIntegerAndMaxLength(a,b);return this.renderInput(a,d),d},checkExptime:function(a){var b=1e4,d=0,e=c.checkInputMatchInt_MinNum__MaxNum(a,d,b);return this.renderInput(a,e),e},checkServers:function(a){var b=c.checkServerAndPortList(a);return this.renderInput(a,b),b},renderInput:function(a,c){if(c){var d=b("#"+a);d.parent().addClass("has-success"),d.parent().hasClass("has-error")&&d.parent().removeClass("has-error")}else{var d=b("#"+a);d.parent().addClass("has-error"),d.parent().hasClass("has-success")&&d.parent().removeClass("has-success")}}};return d}),define("travsky/jcf/1.0.0/template/context/serverContextConfig.tpl",[],'<div id="serverContextConfig">\n	<div class="line">\n		<div class="content">\n			<label>超时时间：</label>\n		</div>\n		<div class="value">\n			<input id="optime" name="optime" class="length form-control" type="text" placeholder="必填项： 建议：600 单位：（毫秒）" value="<%=optime%>">\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span><span>(单位:毫秒)&nbsp;</span>\n			<span id="optimeTip" class="text-danger"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>失效时间： </label>\n		</div>\n		<div class="value">\n			<input id="exptime" name="exptime" class="length form-control" type="text" placeholder="必填项：范围：0~10000 单位：（秒）" value="<%=exptime%>">\n	  	</div>\n	  	<div class="warn">\n			<span class="text-danger">*</span><span>(单位:秒)&nbsp;</span>\n			<span id="exptimeTip" class="text-danger"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>服务器地址：</label>\n		</div>\n		<div class="value">\n			<input id="servers"  name="servers" class="length form-control" type="text" placeholder="必填项：格式IP:PORT IP:PORT" value="<%=servers%>">\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="serversTip" class="text-danger"></span>\n		</div>\n	</div>\n	<div>\n		<div class="col-sm-offset-0">\n			<button id="contextSave" class="btn btn-primary" type="button">保存</button>\n		</div>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/collection/log/log_collection",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/log/log_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/CommonUtil"),e=d.getAppName(),f=a("travsky/jcf/1.0.0/model/log/log_model"),g=b.Collection.extend({model:f,url:"/"+e+"/log/getAllAppLogFile.action",parse:function(a){return c.extend(a)},refresh:function(){this.fetch({reset:!0})}});return g}),define("travsky/jcf/1.0.0/model/log/log_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({urlRoot:"",defaults:{confirmDelete:!1}});return c}),define("travsky/jcf/1.0.0/view/log/logList_view",["jquery","backbone","underscore","querystring","travsky/jcf/1.0.0/util/LogAuthCheckUtil","travsky/jcf/1.0.0/view/log/logItem_view","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/log/global_view","travsky/jcf/1.0.0/view/log/tip_view"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore");a("querystring");var e=a("travsky/jcf/1.0.0/template/log/logList.tpl"),f=a("travsky/jcf/1.0.0/util/LogAuthCheckUtil"),g=a("travsky/jcf/1.0.0/view/log/logItem_view"),h=c.View.extend({el:"#content-body",template:d.template(e),events:{},initialize:function(a){this.options=a||{},this.logList=a.collection,this.logDeleteAuth=f.getLogDeleteAuth(),this.logList.bind("reset",this.addAllLogs,this),this.views=[],this.logList.bind("change:delete",this.deleteFile,this)},render:function(){return b(this.el).html(this.template()),this},addLog:function(a){var b=f.getLogDeleteAuth();a.set("logDeleteAuth",b);var c=new g({model:a});this.$el.find("#logListBody").append(c.render()),this.views.push(c)},addAllLogs:function(){var a=this;d.each(this.views,function(a){a.remove().off()}),this.views=[],this.logList.each(function(b){a.addLog(b)})},refresh:function(){this.logList.refresh()},deleteFile:function(){this.render(),this.refresh()}});return h}),define("travsky/jcf/1.0.0/template/log/logList.tpl",[],'<div id="logListHead" class="logList">\n	<div class="groupName">分组名称</div>\n	<div class="appName">应用名称</div>\n	<div class="fileName">文件名称</div>\n    <div class="fileDelete">删除</div>\n</div>\n<div id="logListBody" class="logList">\n	\n</div>'),define("travsky/jcf/1.0.0/util/LogAuthCheckUtil",[],function(){var a={};return a.getLogManagementAuth=function(){var a="7_1_1",b=jcfManager.authModel.get(a)||"";return b},a.getLogAppNameConfigAuth=function(){var a="7_2_1",b=jcfManager.authModel.get(a)||"";return b},a.getLogLevelConfigAuth=function(){var a="7_2_2",b=jcfManager.authModel.get(a)||"";return b},a.getLogTraceConfigAuth=function(){var a="7_2_3",b=jcfManager.authModel.get(a)||"";return b},a.getLogRunningConfigAuth=function(){var a="7_2_4",b=jcfManager.authModel.get(a)||"";return b},a.getLogSizeConfigAuth=function(){var a="7_2_6",b=jcfManager.authModel.get(a)||"";return b},a.getLogNumberConfigAuth=function(){var a="7_2_7",b=jcfManager.authModel.get(a)||"";return b},a.getLogViewAuth=function(){var a="7_2_8",b=jcfManager.authModel.get(a)||"";return b},a.getLogFileNameConfigAuth=function(){var a="7_2_9",b=jcfManager.authModel.get(a)||"";return b},a.getLogPathConfigAuth=function(){var a="7_2_10",b=jcfManager.authModel.get(a)||"";return b},a.getLogDeleteAuth=function(){var a="7_2_11",b=jcfManager.authModel.get(a)||"";return b},a.getLogUpdateAuth=function(){var a="7_2_12",b=jcfManager.authModel.get(a)||"";return b},a}),define("travsky/jcf/1.0.0/view/log/logItem_view",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/view/log/global_view","travsky/jcf/1.0.0/view/log/tip_view"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("travsky/jcf/1.0.0/util/CommonUtil"),f=a("travsky/jcf/1.0.0/template/log/logItem.tpl"),g=a("travsky/jcf/1.0.0/view/log/global_view"),h=a("travsky/jcf/1.0.0/view/log/tip_view"),i=c.View.extend({template:d.template(f),tagName:"div",className:"logList",events:{"click .fileDelete a":"showDeleteFileView"},initialize:function(a){this.model=a.model,this.listenTo(this.model,"change:confirmDelete",this.deleteFile)},render:function(){return this.$el.html(this.template(this.model.toJSON()))},showDeleteFileView:function(){var a=new h({headerMessage:"删除应用配置文件",bodyMessage:"确定要删除应用配置文件"+this.model.get("fileName")+"么？",model:this.model,type:"delete"});this.$el.append(a.render()),a.show()},deleteFile:function(){var a=this,c={groupId:this.model.get("groupId"),appName:this.model.get("appName"),filePath:this.model.get("filePath")},d="/"+jcfManager.appName+"/log/deleteAppLogConfigFile.action",f=e.dealAjaxRequest4SimpleParam(d,c);b.when(f).done(function(b){b.flag&&(a.model.set("delete",!0),b.messageList=["应用配置文件删除成功"]);var c=new g({model:b});c.render()})}});return i}),define("travsky/jcf/1.0.0/template/log/logItem.tpl",[],'<div class="groupName"><%=groupName%></div>\n<div class="appName"><%=appName%></div>\n<div class="fileName"><%=fileName%></div>\n<div class="fileDelete">\n	<%if(logDeleteAuth==\'true\'){\n	   %><a href="javascript:void(0);">删除</a><%\n	}else{\n	   %>删除<%\n	}%>\n</div>\n'),define("travsky/jcf/1.0.0/view/log/global_view",["jquery","backbone","underscore"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("travsky/jcf/1.0.0/template/log/global.tpl"),f=c.View.extend({el:"#global",template:d.template(e),events:{"click .close-btn":"close"},initialize:function(a){this.model=a.model},render:function(){return b("#groupAppName").parent().addClass("move"),this.$el.html(this.template(this.model)),this},close:function(){b("#groupAppName").parent().removeClass("move"),this.$el.find("div").remove()}});return f}),define("travsky/jcf/1.0.0/template/log/global.tpl",[],'<div id="<%if (flag){%>success<%}else{%>failure<%}%>">\n	<div style="display:inline-block">\n		<%for (var i = 0; i < messageList.length; i++){%>\n			<%=messageList[i]%>\n		<%}%>\n	</div>\n	<a class="close-btn"></a>\n</div>'),define("travsky/jcf/1.0.0/view/log/tip_view",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/template/dataSource/tip.tpl"),e=b.View.extend({tagName:"div",className:"tip",template:c.template(d),events:{"click .modal-footer .ok":"confirm","click .modal-footer .cancel":"cancel"},initialize:function(a){this.options=a||{},this.headerMessage=a.headerMessage,this.bodyMessage=a.bodyMessage,this.model=a.model,this.type=a.type},render:function(){return this.$el.html(this.template({headerMessage:this.headerMessage,bodyMessage:this.bodyMessage}))},show:function(){this.$el.find(".modal").fadeIn()},remove:function(){this.$el.find(".modal").fadeOut(),this.$el.find(".modal").remove(),this.$el.find(".modal-backdrop").remove()},confirm:function(){"delete"==this.type&&this.model.set("confirmDelete",!0)},cancel:function(){"delete"==this.type&&this.model.set("confirmDelete",!1),this.remove()}});return e}),define("travsky/jcf/1.0.0/view/log/logConfig_view",["jquery","backbone","underscore","marionette","querystring","travsky/jcf/1.0.0/util/LogUtil","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil","travsky/jcf/1.0.0/util/LogAuthCheckUtil","travsky/jcf/1.0.0/view/log/global_view"],function(a){var b=jQuery=a("jquery");a("backbone");var c=a("underscore"),d=a("marionette");a("querystring");var e=a("travsky/jcf/1.0.0/util/LogUtil"),f=a("travsky/jcf/1.0.0/util/CommonUtil"),g=a("travsky/jcf/1.0.0/util/LogAuthCheckUtil"),h=a("travsky/jcf/1.0.0/template/log/logConfig.tpl"),i=a("travsky/jcf/1.0.0/view/log/global_view"),j=d.ItemView.extend({el:"#content-body",template:c.template(h),events:{"change #appConfigFileName":"hasSameFile","blur #appConfigFileName":"checkAppConfigFileName","blur #logSavePath":"checkLogSavePath","blur #maxLogFileSize":"checkMaxLogFileSize","blur #logFileMaxBackupIndex":"checkLogFileMaxBackupIndex","blur #runningLogSavePath":"checkRunningLogSavePath","blur #maxRunningLogFileSize":"checkMaxRunningLogFileSize","blur #runningLogFileMaxBackupIndex":"checkRunningLogFileMaxBackupIndex","click #save":"saveConfig","click #isRunningSelect":"isRunningSelect"},initialize:function(a){this.options=a||{},this.model=a.model,this.collection=a.collection,this.groupId=a.queryString.groupId,this.listenTo(this.model,"change",this.render),this.logUpdateAuth=g.getLogUpdateAuth(),this.logFileNameAuth=g.getLogFileNameConfigAuth(),this.logSavePathAuth=g.getLogPathConfigAuth(),this.logSizeAuth=g.getLogSizeConfigAuth(),this.logNumberAuth=g.getLogNumberConfigAuth(),this.logLevelAuth=g.getLogLevelConfigAuth(),this.logRunningAuth=g.getLogRunningConfigAuth()},render:function(){return this.$el.html(this.template({model:this.model.toJSON(),logFileNameAuth:this.logFileNameAuth,logSavePathAuth:this.logSavePathAuth,logSizeAuth:this.logSizeAuth,logNumberAuth:this.logNumberAuth,logLevelAuth:this.logLevelAuth,logRunningAuth:this.logRunningAuth,logUpdateAuth:this.logUpdateAuth})),this},saveConfig:function(){if(this.checkForm()){var a=this,c=b("#groupAppName").val(),d=a.$el.find("#appConfigFileName").val(),e=a.$el.find("#logSavePath").val(),f=a.$el.find("#maxLogFileSize").val(),g=a.$el.find("#logFileMaxBackupIndex").val(),h=a.$el.find("#logLevel").val(),j=a.$el.find("#logAppenderType").val(),k=a.$el.find("#runningLogSavePath").val(),l=a.$el.find("#maxRunningLogFileSize").val(),m=a.$el.find("#runningLogFileMaxBackupIndex").val();a.model.get("appConfigFileName")!=d&&a.model.set("appConfigFileName",d),a.model.get("logSavePath")!=e&&a.model.set("logSavePath",e),a.model.get("maxLogFileSize")!=f&&a.model.set("maxLogFileSize",f),a.model.get("logFileMaxBackupIndex")!=g&&a.model.set("logFileMaxBackupIndex",g),a.model.get("logLevel")!=h&&a.model.set("logLevel",h),a.model.get("logAppenderType")!=j&&a.model.set("logAppenderType",j),this.model.isRunningSelected()&&(a.model.get("runningLogSavePath")!=k&&a.model.set("runningLogSavePath",k),a.model.get("maxRunningLogFileSize")!=l&&a.model.set("maxRunningLogFileSize",l),a.model.get("runningLogFileMaxBackupIndex")!=m&&a.model.set("runningLogFileMaxBackupIndex",m)),a.model.save({appName:c,groupId:a.groupId},{success:function(a,b){b.flag&&(b.messageList=["应用日志配置成功"]);var c=new i({model:b});c.render()}})}else{var n={flag:!1,messageList:"页面参数验证失败"},o=new i({model:n});o.render()}},isRunningSelect:function(){var a=this.$el.find("#appConfigFileName").val(),b=this.$el.find("#logSavePath").val(),c=this.$el.find("#maxLogFileSize").val(),d=this.$el.find("#logFileMaxBackupIndex").val(),e=this.$el.find("#logLevel").val(),f=this.$el.find("#logAppenderType").val(),g=this.$el.find("#runningLogSavePath").val(),h=this.$el.find("#maxRunningLogFileSize").val(),i=this.$el.find("#runningLogFileMaxBackupIndex").val();this.model.set("appConfigFileName",a),this.model.set("logSavePath",b),this.model.set("maxLogFileSize",c),this.model.set("logFileMaxBackupIndex",d),this.model.set("logLevel",e),this.model.set("logAppenderType",f),this.model.set("runningLogSavePath",g),this.model.set("maxRunningLogFileSize",h),this.model.set("runningLogFileMaxBackupIndex",i),this.model.isRunningSelected()?this.model.set("isRunningSelect",!1):this.model.set("isRunningSelect",!0)},hasSameFile:function(){var a=this.$el.find("#appConfigFileName").val(),c=this.groupId,d={groupId:c,appLogConfigName:a},e="/"+jcfManager.appName+"/log/hasSameFileName.action",g=f.dealAjaxRequest4SimpleParam(e,d);b.when(g).done(function(a){if(a.flag){a.flag=!1,a.messageList=["已包含同名配置文件，会导致同名文件的覆盖"];var b=new i({model:a});b.render()}})},checkAppName:function(){var a=e.checkAppConfigFileName("groupAppName");return a},checkAppConfigFileName:function(){var a=e.checkAppConfigFileName("appConfigFileName");return a},checkLogSavePath:function(){var a=e.checkLogSavePath("logSavePath");return a},checkMaxLogFileSize:function(){var a=e.checkMaxLogFileSize("maxLogFileSize");return a},checkLogFileMaxBackupIndex:function(){var a=e.checkLogFileMaxBackupIndex("logFileMaxBackupIndex");return a},checkRunningLogSavePath:function(){var a=e.checkRunningLogSavePath("runningLogSavePath");return a},checkMaxRunningLogFileSize:function(){var a=e.checkMaxRunningLogFileSize("maxRunningLogFileSize");return a},checkRunningLogFileMaxBackupIndex:function(){var a=e.checkRunningLogFileMaxBackupIndex("runningLogFileMaxBackupIndex");return a},checkForm:function(){var a=!1;return this.checkAppName()&&this.checkAppConfigFileName()&&this.checkLogSavePath()&&this.checkMaxLogFileSize()&&this.checkLogFileMaxBackupIndex()&&(a=!0),a&&this.model.isRunningSelected()&&(a=this.checkRunningLogSavePath()&&this.checkMaxRunningLogFileSize()&&this.checkRunningLogFileMaxBackupIndex()),a}});return j}),define("travsky/jcf/1.0.0/util/LogUtil",["jquery","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","backbone","underscore","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil"],function(a){var b=jQuery=a("jquery");a("travsky/jcf/1.0.0/util/CommonUtil");var c=a("travsky/jcf/1.0.0/util/SpecialPatternInputCheckUtil"),d={checkAppName:function(){var a=c.checkNotNull(id);return console.log(a),this.renderInput(id,a),a},checkAppConfigFileName:function(a){var b=c.checkNotNull(a);return this.renderInput(a,b),b},checkLogSavePath:function(a){var b=c.checkNotNull(a);if(b){var d=/^\w+(\/\w+)*$/;b=c.checkMatchRegular(a,d,"不能输入含有后缀或者以/开头或结尾")}return this.renderInput(a,b),b},checkMaxLogFileSize:function(a){var b=c.checkNotNull(a);if(b){var d=/^\d+[kKmMgG][bB]$/;b=c.checkMatchRegular(a,d,"单位只能为KB,kb,MB,mb,GB,gb")}return this.renderInput(a,b),b},checkLogFileMaxBackupIndex:function(a){var b=c.checkNotNull(a);return b&&(b=c.checkIsPositiveInteger(a)),this.renderInput(a,b),b},checkRunningLogSavePath:function(a){var b=c.checkNotNull(a);if(b){var d=/^\w+(\/\w+)*$/;b=c.checkMatchRegular(a,d,"不能输入含有后缀或者以/结尾")}return this.renderInput(a,b),b},checkMaxRunningLogFileSize:function(a){var b=c.checkNotNull(a);if(b){var d=/^\d+[kKmMgG][bB]$/;b=c.checkMatchRegular(a,d,"单位只能为KB,kb,MB,mb,GB,gb")}return this.renderInput(a,b),b},checkRunningLogFileMaxBackupIndex:function(a){var b=c.checkNotNull(a);return b&&(b=c.checkIsPositiveInteger(a)),this.renderInput(a,b),b},renderInput:function(a,c){if(c){var d=b("#"+a);d.parent().addClass("has-success"),d.parent().hasClass("has-error")&&d.parent().removeClass("has-error")}else{var d=b("#"+a);d.parent().addClass("has-error"),d.parent().hasClass("has-success")&&d.parent().removeClass("has-success")}}};return d}),define("travsky/jcf/1.0.0/template/log/logConfig.tpl",[],'<div id="appLogConfig">\n	<div class="line">\n		<div class="content">\n			<label>应用日志配置文件名称：</label>\n		</div>\n		<div class="value">\n			<input id="appConfigFileName" name="appConfigFileName" class="form-control input-sm <%if (logFileNameAuth!="true"){%>readonly<%}%>" type="text" value="<%=model.appConfigFileName%>" placeholder="必填项" <%if (logFileNameAuth!="true"){%>readonly="true"<%}%>>\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="appConfigFileNameTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>应用日志存放路径：</label>\n		</div>\n		<div class="value">\n			<input id="logSavePath" name="logSavePath" class="form-control input-sm <%if (logSavePathAuth!="true"){%>readonly<%}%>" type="text" value="<%=model.logSavePath%>" placeholder="如:app/abc 或  abc" <%if (logSavePathAuth!="true"){%>readonly="true"<%}%>>\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="logSavePathTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>应用日志文件最大大小：</label>\n		</div>\n		<div class="value">\n			<input id="maxLogFileSize" name="maxLogFileSize" class="form-control input-sm <%if (logSizeAuth!="true"){%>readonly<%}%>" type="text" value="<%=model.maxLogFileSize%>" <%if (logSizeAuth!="true"){%>readonly="true"<%}%>>\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span class ="text-info">(单位:KB,kb,MB,mb,GB,gb)</span>\n			<span id="maxLogFileSizeTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>应用日志最多存放个数：</label>\n		</div>\n		<div class="value">\n			<input id="logFileMaxBackupIndex" name="logFileMaxBackupIndex" class="form-control input-sm <%if (logNumberAuth!="true"){%>readonly<%}%>" type="text" value="<%=model.logFileMaxBackupIndex%>" <%if (logNumberAuth!="true"){%>readonly="true"<%}%>>\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="logFileMaxBackupIndexTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>应用日志级别：</label>\n		</div>\n		<div class="value">\n			<%if (logLevelAuth=="true"){%>\n				<select id="logLevel" name="logLevel" class="form-control input-sm">\n					<option value="FATAL" <%if (model.logLevel == "FATAL"){%>selected="true"<%}%>>FATAL</option>\n					<option value="ERROR" <%if (model.logLevel == "ERROR"){%>selected="true"<%}%>>ERROR</option>\n					<option value="WARN" <%if (model.logLevel == "WARN"){%>selected="true"<%}%>>WARN</option>\n					<option value="INFO" <%if (model.logLevel == "INFO"){%>selected="true"<%}%>>INFO</option>\n					<option value="DEBUG" <%if (model.logLevel == "DEBUG"){%>selected="true"<%}%>>DEBUG</option>\n			 	</select>\n			<%}else{%>\n				<input id="logLevel" name="logLevel" class="form-control input-sm readonly" type="text" value="<%=model.logLevel%>" readonly="true">\n			<%}%>\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>应用日志格式：</label>\n		</div>\n		<div class="value">\n			<%if (logLevelAuth=="true"){%>\n				<select id="logAppenderType" name="logAppenderType" class="form-control input-sm">\n					<option value="dateAndSize" <%if (model.logAppenderType == "dateAndSize"){%>selected="true"<%}%>>按日期和大小</option>\n					<option value="hourAndSize" <%if (model.logAppenderType == "hourAndSize"){%>selected="true"<%}%>>按小时和大小</option>\n		 		</select>\n			<%}else{%>\n				<input id="logAppenderType" name="logAppenderType"  type="hidden" value="<%=model.logAppenderType%>" >\n				<input id="logAppenderTypeShow" name="logAppenderTypeShow" class="form-control input-sm readonly" type="text" <%if("dateAndSize"==model.logAppenderType){%>value = "按日期和大小"<%}else if ("hourAndSize"==model.logAppenderType){%>value = "按小时和大小"<%}%> value="" readonly="true">\n			<%}%>\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n		</div>\n	</div>\n	<div class="line">\n		<label class="control-label">\n      		是否记录性能日志：\n      		<%if (logRunningAuth=="true"){%>\n      			<input id="isRunningSelect" type="checkbox" <%if (model.isRunningSelect){%>checked="checked"<%}%>>\n      		<%}else{%>\n      			<input id="isRunningSelect" type="checkbox" <%if (model.isRunningSelect){%>checked="checked"<%}%> disabled="true">\n      		<%}%>\n      	</label>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>性能日志存放路径：</label>\n		</div>\n		<div class="value">\n			<input id="runningLogSavePath" name="runningLogSavePath" class="form-control input-sm <%if (!model.isRunningSelect){%>redaonly<%}%>" type="text" placeholder="如:app/abc 或  abc" value="<%=model.runningLogSavePath%>" <%if (!model.isRunningSelect){%>readonly="true"<%}%>>\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n      		<span id="runningLogSavePathTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>性能日志文件最大大小：</label>\n		</div>\n		<div class="value">\n			<input id="maxRunningLogFileSize" name="maxRunningLogFileSize" class="form-control input-sm <%if (!model.isRunningSelect){%>redaonly<%}%>" type="text" value="<%=model.maxRunningLogFileSize%>" <%if (!model.isRunningSelect){%>readonly="true"<%}%>>\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n      		<span id="maxRunningLogFileSizeTip"></span>\n		</div>\n	</div>\n	<div class="line">\n		<div class="content">\n			<label>性能日志最多存放个数：</label>\n		</div>\n		<div class="value">\n			<input id="runningLogFileMaxBackupIndex" name="runningLogFileMaxBackupIndex" class="form-control input-sm <%if (!model.isRunningSelect){%>redaonly<%}%>" type="text" value="<%=model.runningLogFileMaxBackupIndex%>" <%if (!model.isRunningSelect){%>readonly="true"<%}%>>\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n      		<span id="runningLogFileMaxBackupIndexTip"></span>\n		</div>\n	</div>\n   	<div class="line">\n      	<div class="content">\n         	<button id="save" class="btn btn-primary <%if(logUpdateAuth!=\'true\'){%>disabled<%}%>" type="button">应用</button>\n      	</div>\n   	</div>\n</div>\n'),define("travsky/jcf/1.0.0/view/log/logConfigHead_view",["jquery","backbone","underscore"],function(a){var b=jQuery=a("jquery"),c=a("backbone"),d=a("underscore"),e=a("travsky/jcf/1.0.0/template/log/logConfigHead.tpl"),f=c.View.extend({el:"#content-header",template:d.template(e),events:{"change #appName":"getConfig"},initialize:function(a){this.current="",this.options=a||{},this.model=a.model,this.queryString=a.queryString,this.groupId=a.queryString.groupId,this.logAppNameList=this.collection,this.logAppNameList.bind("reset",this.render,this)
},render:function(){return this.$el.html(this.template({appNameList:this.logAppNameList.toJSON(),current:this.current})),this},getConfig:function(){b("#groupAppName").attr("value",b("#appName").val()),""!=b("#appName").val()?this.model.fetch({data:{groupId:this.groupId,appName:b("#appName").val()},reset:!0}):this.model.setDefault()}});return f}),define("travsky/jcf/1.0.0/template/log/logConfigHead.tpl",[],'<div id="appLogConfigHead">\n	<div class="line">\n		<div class="content">\n			<label>应用日志名称</label>\n		</div>\n		<div class="value">\n			<select id="appName" name="appName" class="length" autocomplete="off">\n				<option></option>\n				<%for (var i = 0; i < appNameList.length; i++){%>\n					<option><%=appNameList[i].appName%></option>\n				<%}%> \n			</select>\n			<span style="position:absolute;border-top:1pt solid #c1c1c1;border-left:1pt solid #c1c1c1;border-bottom:1pt solid #c1c1c1;width:230px;height:30px;left: 535px;top: 60px;">\n				<input id="groupAppName" name="groupAppName" type="text" class="control-form input-sm" value="" style="width:227px;height:28px;border:0pt;"/>\n			</span>\n		</div>\n		<div class="warn">\n			<span class="text-danger">*</span>\n			<span id="groupAppNameTip"></span>\n		</div>\n	</div>\n</div>'),define("travsky/jcf/1.0.0/collection/log/log_app_name_collection",["jquery","backbone","underscore","travsky/jcf/1.0.0/util/CommonUtil","travsky/jcf/1.0.0/view/errorPage_view","marionette","travsky/jcf/1.0.0/view/alert_view","bs-modal","travsky/jcf/1.0.0/model/alert_model","travsky/jcf/1.0.0/model/log/log_app_name_model"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=a("travsky/jcf/1.0.0/util/CommonUtil"),e=d.getAppName(),f=a("travsky/jcf/1.0.0/model/log/log_app_name_model"),g=b.Collection.extend({model:f,url:"/"+e+"/log/toAddAppLogUI.action",parse:function(a){return this.flag=a.flag,this.appNameList=a.appNameList,c.extend(a.appNameList)},refresh:function(a){this.fetch(a)}});return g}),define("travsky/jcf/1.0.0/model/log/log_app_name_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone");a("underscore");var c=b.Model.extend({urlRoot:"",defaults:function(){return{appName:""}}});return c}),define("travsky/jcf/1.0.0/model/log/log_config_model",["jquery","backbone","underscore"],function(a){jQuery=a("jquery");var b=a("backbone"),c=a("underscore"),d=b.Model.extend({urlRoot:"/"+jcfManager.appName+"/log/appLogConfig.action",defaults:{appConfigFileName:"",logSavePath:"",maxLogFileSize:"512MB",logFileMaxBackupIndex:"10",logLevel:"INFO",logAppenderType:"dateAndSize",isRunningSelect:!1,runningLogSavePath:"",maxRunningLogFileSize:"512MB",runningLogFileMaxBackupIndex:"10"},parse:function(a){return c.extend(a)},isRunningSelected:function(){return 1==this.get("isRunningSelect")},setDefault:function(){this.set("appConfigFileName",""),this.set("logSavePath",""),this.set("maxLogFileSize","512MB"),this.set("logFileMaxBackupIndex","10"),this.set("logLevel","INFO"),this.set("logAppenderType","dateAndSize"),this.set("isRunningSelect",!1),this.set("runningLogSavePath",""),this.set("maxRunningLogFileSize","512MB"),this.set("runningLogFileMaxBackupIndex","10")}});return d}),define("travsky/jcf/1.0.0/view/AuthCheck4Menu",[],function(){var a={};return a.getServerFlag=function(){var a=jcfManager.authModel,b="2_1",c=a.get(b)||"";return c},a.getDeployFlag=function(){var a=jcfManager.authModel,b="3_1",c=a.get(b)||"";return c},a.getServiceFlag=function(){var a=jcfManager.authModel,b="4_1",c=a.get(b)||"";return c},a.getDatasourceFlag=function(){var a=jcfManager.authModel,b="5_1",c=a.get(b)||"";return c},a.getMemcacheFlag=function(){var a=jcfManager.authModel,b="6_1",c=a.get(b)||"";return c},a.getLogFlag=function(){var a=jcfManager.authModel,b="7_1",c=a.get(b)||"";return c},a});
